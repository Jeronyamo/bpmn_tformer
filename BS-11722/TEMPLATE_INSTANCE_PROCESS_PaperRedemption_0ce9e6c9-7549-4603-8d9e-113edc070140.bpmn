<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_PaperRedemption_0ce9e6c9-7549-4603-8d9e-113edc070140" name="Движение ЦБ при погашении облигаций" isExecutable="true"><bpmn:documentation>-</bpmn:documentation><bpmn:startEvent id="StartEvent_02aeuam"><bpmn:outgoing>SequenceFlow_0waj7vt</bpmn:outgoing></bpmn:startEvent><bpmn:endEvent id="EndEvent_0n8ge4u"><bpmn:incoming>SequenceFlow_1aafpi7</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1ennx7b" name="Статус Подтверждено"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Подтверждено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_19nuue6</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vmn5rc</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1fevufd" name="Получить значение из объекта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "enrichment",
    "filter": {
        "_id": ObjectId("${instanceId}")
    },
    "projection": {
        "attributes.AssetFlows___lkupClient___ValueDisplayed": 1
    }
}</camunda:inputParameter><camunda:outputParameter name="clientPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___lkupClient___ValueDisplayed.primaryId</camunda:script></camunda:outputParameter><camunda:outputParameter name="clientSource"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___lkupClient___ValueDisplayed.source</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16qzctt</bpmn:incoming><bpmn:outgoing>SequenceFlow_0c6jmvm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ktlqpg" name="Сохранить значение из связанного объекта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
 "hlk_app_id": "${clientPrimaryId}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0c6jmvm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0pnfcsh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ev01ph" name="Получить номер обязательства"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/AssetFlows___txtID___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="payload" /><camunda:outputParameter name="assetflowid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0g6z3z7</bpmn:incoming><bpmn:outgoing>SequenceFlow_1s1x6c3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1xki3kr" name="Формируем отчёт"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/report-service/generate-report-save/by-name?name=CouponTicketReport</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">[
	{
		"displayName": "Номер заказа",
		"name": "FlowId",
		"value":  "${assetflowid}"
	}
]</camunda:inputParameter><camunda:outputParameter name="generated">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1s1x6c3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ezwmik</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1phxa4q" name="Привязываем отчёт к обязательству"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/file/create/ENRICHMENT/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">${generated}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ezwmik</bpmn:incoming><bpmn:outgoing>SequenceFlow_1trxyla</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ecv25y" name="Статус Новая"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Новая</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0v9fj8j</bpmn:incoming><bpmn:outgoing>SequenceFlow_16qzctt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pjj7im" name="Найти связанный объект клиент"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "${clientSource}",
    "filter": {
        "primaryId": "${clientPrimaryId}",
		"activityStatus": "ACTIVE"
    },
    "projection": {
        "attributes.hlk_app_id": 1
    }
}</camunda:inputParameter><camunda:outputParameter name="hlk_app_id"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.hlk_app_id</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_19dnrd8" name="Получение данных из объекта для счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___lkupCS___ValueDisplayed&amp;systemName=AssetFlows___dateFlowDate___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="CS"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___lkupCS___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="date"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dateFlowDate___ValueDisplayed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pnfcsh</bpmn:incoming><bpmn:outgoing>Flow_0vtnis0</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_078ijjy" name="Найти cчет, попадающий под условия"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "invoice",
    "filter": {
        "templatePrimaryId": "5d9af8b82ab79c000a9a0633",
		"attributes.hlk_account_type": "Ценнобумажный",   
       "attributes.hlk_account_owner.primaryId": "${clientPrimaryId}",
    "attributes.hlk_clearing_system.value": "${CS.replaceAll("\"", "\\\\\\\"")}",
		"activityStatus": "ACTIVE"
    },
    "projection": {
        "attributes.hlk_Account_Number": 1
"primaryId" : 1
    }
}</camunda:inputParameter><camunda:outputParameter name="hlk_Account_Number"><camunda:script scriptFormat="javascript">try{
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number;
} catch(e) {
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_Account_Number_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0vtnis0</bpmn:incoming><bpmn:outgoing>SequenceFlow_17vbg49</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0zs0stm" name="создание обязательств"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/sendInstanceTo/ENRICHMENT_OBLIGATION/${instanceId}?AssetFlows___radioFactPlan___ValueDisplayed=План</camunda:inputParameter><camunda:inputParameter name="payload">{
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1h8zwuw</bpmn:incoming><bpmn:outgoing>SequenceFlow_0196v1n</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0nrzy2r" name="Сохранить номер счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"AssetFlows___lkupBOAccountNumber___ValueDisplayed" : {
"value" : "${hlk_Account_Number}",
"primaryId" : "${hlk_Account_Number_primaryId}",
"source" : "invoice",
"_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_17vbg49</bpmn:incoming><bpmn:outgoing>SequenceFlow_1h8zwuw</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_19l34da" name="Поиск обязательства"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/obligations/one/by-attribute?name=AssetflowID&amp;value=49</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="OutputCash">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vmn5rc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0fup6ga</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1se4h3i" name="Создание фактов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/fact/${OutputCash}?AssetFlows___radioFactPlan___ValueDisplayed=Факт&amp;AssetFlows___dateFlowDate___ValueDisplayed=${Date_fact_payment}&amp;AssetFlows___txtQtyPcs___Value=${AssetFlows___txtQtyPcs___Value}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0fup6ga</bpmn:incoming><bpmn:outgoing>SequenceFlow_0g6z3z7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0y216gn" name="Статус Заполнение:Дата фактической выплаты"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Дата+фактической+выплаты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0waj7vt" sourceRef="StartEvent_02aeuam" targetRef="Activity_00yazlo" /><bpmn:sequenceFlow id="SequenceFlow_1trxyla" sourceRef="ServiceTask_1phxa4q" targetRef="ExclusiveGateway_023jozv" /><bpmn:sequenceFlow id="SequenceFlow_0vmn5rc" sourceRef="ServiceTask_1ennx7b" targetRef="ServiceTask_19l34da" /><bpmn:sequenceFlow id="SequenceFlow_16qzctt" sourceRef="ServiceTask_0ecv25y" targetRef="ServiceTask_1fevufd" /><bpmn:sequenceFlow id="SequenceFlow_0c6jmvm" sourceRef="ServiceTask_1fevufd" targetRef="ServiceTask_1ktlqpg" /><bpmn:sequenceFlow id="SequenceFlow_0pnfcsh" sourceRef="ServiceTask_1ktlqpg" targetRef="ServiceTask_19dnrd8" /><bpmn:sequenceFlow id="SequenceFlow_0g6z3z7" sourceRef="ServiceTask_1se4h3i" targetRef="ServiceTask_0ev01ph" /><bpmn:sequenceFlow id="SequenceFlow_1s1x6c3" sourceRef="ServiceTask_0ev01ph" targetRef="ServiceTask_1xki3kr" /><bpmn:sequenceFlow id="SequenceFlow_0ezwmik" sourceRef="ServiceTask_1xki3kr" targetRef="ServiceTask_1phxa4q" /><bpmn:sequenceFlow id="SequenceFlow_17vbg49" sourceRef="ServiceTask_078ijjy" targetRef="ServiceTask_0nrzy2r" /><bpmn:sequenceFlow id="SequenceFlow_1h8zwuw" sourceRef="ServiceTask_0nrzy2r" targetRef="ServiceTask_0zs0stm" /><bpmn:sequenceFlow id="SequenceFlow_0fup6ga" sourceRef="ServiceTask_19l34da" targetRef="ServiceTask_1se4h3i" /><bpmn:sequenceFlow id="Flow_0vtnis0" sourceRef="ServiceTask_19dnrd8" targetRef="ServiceTask_078ijjy" /><bpmn:subProcess id="SubProcess_0k9rdty"><bpmn:incoming>SequenceFlow_0musma2</bpmn:incoming><bpmn:outgoing>Flow_19nuue6</bpmn:outgoing><bpmn:startEvent id="StartEvent_1w741c3"><bpmn:outgoing>SequenceFlow_1mgw6nb</bpmn:outgoing></bpmn:startEvent><bpmn:exclusiveGateway id="ExclusiveGateway_071ogy9" default="SequenceFlow_0qvyjpm"><bpmn:incoming>SequenceFlow_1dbc2gp</bpmn:incoming><bpmn:outgoing>SequenceFlow_0qvyjpm</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1by72ke</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1hps5jn" name="Статус заявки &#34;Дата факта не указана&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Дата+фактической+выплаты+не+указана</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1by72ke</bpmn:incoming><bpmn:outgoing>SequenceFlow_1p2pfry</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0i0sz1h" name="Статус заявки &#34;Дата факта &#62; TODAY&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Дата+фактической+выплаты+больше+текущей+даты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1amb6kg</bpmn:incoming><bpmn:outgoing>SequenceFlow_020k2ah</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1qwarah" name="Получаем modifyDate"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"modifyDate": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="modifyDate"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].modifyDate</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0qvyjpm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0qzsiys</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0p7f2zm" default="SequenceFlow_1wsel12"><bpmn:incoming>SequenceFlow_0qzsiys</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wsel12</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1amb6kg</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0e4noi6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_02j8dji" name="Статус Подтверждение заявки" camunda:expression="${&#34;Подтверждение заявки&#34;}" camunda:resultVariable="labelStatus"><bpmn:incoming>SequenceFlow_1wsel12</bpmn:incoming><bpmn:outgoing>SequenceFlow_1syzwf8</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_0zcoean" name="Подтверждение заявки" camunda:assignee="${initiator}" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1syzwf8</bpmn:incoming><bpmn:outgoing>SequenceFlow_0w0csja</bpmn:outgoing></bpmn:userTask><bpmn:parallelGateway id="ParallelGateway_102tbm4"><bpmn:incoming>SequenceFlow_1mgw6nb</bpmn:incoming><bpmn:outgoing>SequenceFlow_0l81l3t</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1u4hunv</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_1505ifa" messageRef="Message_1c21k8p"><bpmn:incoming>SequenceFlow_05z25kr</bpmn:incoming><bpmn:outgoing>SequenceFlow_00ignme</bpmn:outgoing></bpmn:receiveTask><bpmn:endEvent id="EndEvent_0p29xo5"><bpmn:incoming>SequenceFlow_0w0csja</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1w0qnn2" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_1gy5zvy"><bpmn:incoming>SequenceFlow_1y0ehio</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1ci49vz" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1p58arn" name="Сохранение  даты факта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"Date_fact_payment": "${Date_fact_payment}"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_00ignme</bpmn:incoming><bpmn:outgoing>SequenceFlow_1c46yjk</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1c664xu" name="Статус Подтверждение заявки" camunda:expression="${&#34;Подтверждение заявки&#34;}" camunda:resultVariable="labelStatus"><bpmn:incoming>SequenceFlow_0l81l3t</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zu6654</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0zu6654" sourceRef="ServiceTask_1c664xu" targetRef="ServiceTask_0j6tt18" /><bpmn:sequenceFlow id="SequenceFlow_00ignme" sourceRef="ReceiveTask_1505ifa" targetRef="ServiceTask_1p58arn" /><bpmn:sequenceFlow id="SequenceFlow_1c46yjk" sourceRef="ServiceTask_1p58arn" targetRef="ServiceTask_02o0679" /><bpmn:sequenceFlow id="SequenceFlow_0w0csja" sourceRef="UserTask_0zcoean" targetRef="EndEvent_0p29xo5" /><bpmn:sequenceFlow id="SequenceFlow_0l81l3t" sourceRef="ParallelGateway_102tbm4" targetRef="ServiceTask_1c664xu" /><bpmn:sequenceFlow id="SequenceFlow_1u4hunv" sourceRef="ParallelGateway_102tbm4" targetRef="UserTask_1p55806" /><bpmn:sequenceFlow id="SequenceFlow_1mgw6nb" sourceRef="StartEvent_1w741c3" targetRef="ParallelGateway_102tbm4" /><bpmn:sequenceFlow id="SequenceFlow_1syzwf8" sourceRef="ServiceTask_02j8dji" targetRef="UserTask_0zcoean" /><bpmn:sequenceFlow id="SequenceFlow_1wsel12" sourceRef="ExclusiveGateway_0p7f2zm" targetRef="ServiceTask_02j8dji" /><bpmn:sequenceFlow id="SequenceFlow_0qzsiys" sourceRef="ServiceTask_1qwarah" targetRef="ExclusiveGateway_0p7f2zm" /><bpmn:sequenceFlow id="SequenceFlow_1amb6kg" sourceRef="ExclusiveGateway_0p7f2zm" targetRef="ServiceTask_0i0sz1h"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${(Date_fact_payment &gt; modifyDate)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0qvyjpm" sourceRef="ExclusiveGateway_071ogy9" targetRef="ServiceTask_1qwarah" /><bpmn:sequenceFlow id="SequenceFlow_1by72ke" sourceRef="ExclusiveGateway_071ogy9" targetRef="ServiceTask_1hps5jn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${( Date_fact_payment ==null )||( Date_fact_payment   =="")}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_020k2ah" sourceRef="ServiceTask_0i0sz1h" targetRef="UserTask_1p55806" /><bpmn:sequenceFlow id="SequenceFlow_1p2pfry" sourceRef="ServiceTask_1hps5jn" targetRef="UserTask_1p55806" /><bpmn:userTask id="UserTask_1p55806" name="Заполнение поля Дата факта и Количество актива" camunda:formKey="FILL" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="Date_fact_payment" label="Corp. Дата фактической выплаты" type="string" /><camunda:formField id="AssetFlows___txtQtyPcs___Value" label="Corp. Количество актива" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_020k2ah</bpmn:incoming><bpmn:incoming>SequenceFlow_1p2pfry</bpmn:incoming><bpmn:incoming>SequenceFlow_1u4hunv</bpmn:incoming><bpmn:incoming>SequenceFlow_0o1gezh</bpmn:incoming><bpmn:outgoing>SequenceFlow_12vjqv4</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_12vjqv4" sourceRef="UserTask_1p55806" targetRef="ServiceTask_1t4y7sk" /><bpmn:serviceTask id="ServiceTask_0e2555v" name="Статус заявки &#34;Сумма фактического исполнения не может быть больше плановой&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Сумма+фактического+исполнения+не+может+быть+больше+плановой</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0e4noi6</bpmn:incoming><bpmn:outgoing>SequenceFlow_0o1gezh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0e4noi6" sourceRef="ExclusiveGateway_0p7f2zm" targetRef="ServiceTask_0e2555v"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${(AssetFlows___txtQtyPcs___Value &gt; hlk_plan_qty)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0o1gezh" sourceRef="ServiceTask_0e2555v" targetRef="UserTask_1p55806" /><bpmn:serviceTask id="ServiceTask_1t4y7sk" name="Получение поля Дата факта и Количества"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"attributes.Date_fact_payment": 1
"attributes.AssetFlows___txtQtyPcs___Value": 1
"attributes.hlk_plan_qty": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="Date_fact_payment"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.Date_fact_payment</camunda:script></camunda:outputParameter><camunda:outputParameter name="AssetFlows___txtQtyPcs___Value"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___txtQtyPcs___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_plan_qty"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.hlk_plan_qty</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12vjqv4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dbc2gp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1dbc2gp" sourceRef="ServiceTask_1t4y7sk" targetRef="ExclusiveGateway_071ogy9" /><bpmn:serviceTask id="ServiceTask_02o0679" name="Получение поля Дата факта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"attributes.Date_fact_payment": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="Date_fact_payment"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.Date_fact_payment</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1c46yjk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y0ehio</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1y0ehio" sourceRef="ServiceTask_02o0679" targetRef="EndEvent_1gy5zvy" /><bpmn:serviceTask id="ServiceTask_0j6tt18" name="Получить данные с форма: дата плана, инструмент, тип"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___dateFlowDate___ValueDisplayed&amp;systemName=AssetFlows___lkupFlowType___ValueDisplayed&amp;systemName=AssetFlows___lkupCorpEventAsset___ValueDisplayed&amp;systemName=AssetFlows___txtQtyPcs___Value</camunda:inputParameter><camunda:outputParameter name="AssetFlows___dateFlowDate___ValueDisplayed"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dateFlowDate___ValueDisplayed.substring(0, 10)</camunda:script></camunda:outputParameter><camunda:outputParameter name="AssetFlows___lkupFlowType___ValueDisplayed">${S(response).prop('AssetFlows___lkupFlowType___ValueDisplayed').stringValue()}</camunda:outputParameter><camunda:outputParameter name="AssetFlows___lkupCorpEventAsset___ValueDisplayed">${S(response).prop('AssetFlows___lkupCorpEventAsset___ValueDisplayed').stringValue()}</camunda:outputParameter><camunda:outputParameter name="AssetFlows___txtQtyPcs___Value"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___txtQtyPcs___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zu6654</bpmn:incoming><bpmn:outgoing>SequenceFlow_05z25kr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_05z25kr" sourceRef="ServiceTask_0j6tt18" targetRef="ReceiveTask_1505ifa" /></bpmn:subProcess><bpmn:sequenceFlow id="SequenceFlow_0196v1n" sourceRef="ServiceTask_0zs0stm" targetRef="ServiceTask_1ljgejs" /><bpmn:serviceTask id="Activity_00yazlo" name="Получить инструмент"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___lkupAsset___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="AssetInstr">${S(response).prop('AssetFlows___lkupAsset___ValueDisplayed').stringValue()}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0waj7vt</bpmn:incoming><bpmn:outgoing>Flow_016w7ia</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_016w7ia" sourceRef="Activity_00yazlo" targetRef="Activity_1hj9bsm" /><bpmn:serviceTask id="Activity_1hj9bsm" name="Сохранить инструмент"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"AssetFlows___lkupCorpEventAsset___ValueDisplayed": "${AssetInstr}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_016w7ia</bpmn:incoming><bpmn:outgoing>Flow_0v9fj8j</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0v9fj8j" sourceRef="Activity_1hj9bsm" targetRef="ServiceTask_0ecv25y" /><bpmn:sequenceFlow id="Flow_19nuue6" sourceRef="SubProcess_0k9rdty" targetRef="ServiceTask_1ennx7b" /><bpmn:serviceTask id="ServiceTask_1ljgejs" name="Получение количества"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/AssetFlows___txtQtyPcs___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="qty">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0196v1n</bpmn:incoming><bpmn:outgoing>SequenceFlow_0g7kttb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0oqxyjt" name="Сохранить количество в тех параметры"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_plan_qty": "${qty}"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0g7kttb</bpmn:incoming><bpmn:outgoing>SequenceFlow_0musma2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0g7kttb" sourceRef="ServiceTask_1ljgejs" targetRef="ServiceTask_0oqxyjt" /><bpmn:sequenceFlow id="SequenceFlow_0musma2" sourceRef="ServiceTask_0oqxyjt" targetRef="SubProcess_0k9rdty" /><bpmn:exclusiveGateway id="ExclusiveGateway_023jozv" default="SequenceFlow_1gudi5y"><bpmn:incoming>SequenceFlow_1trxyla</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gudi5y</bpmn:outgoing><bpmn:outgoing>SequenceFlow_14iztxw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="ExclusiveGateway_1e33wij"><bpmn:incoming>SequenceFlow_0nfhcph</bpmn:incoming><bpmn:incoming>SequenceFlow_13iut79</bpmn:incoming><bpmn:outgoing>SequenceFlow_1at9fni</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0b3bm4n" name="ФЗ. Получаем почту клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
  "aggregate": "individualPerson",
  "pipeline": [
    {
      "$match": {
        "actual": true,
        "status": "VERIFICATED",
        "primaryId": "${clientPrimaryId}",
      }
    },
    {
      "$project": {
        "hlk_email": { "$ifNull": ["$attributes.hlk_email", null]},
        "_id": 0
      }
    }
  ],
  "cursor": {
    "batchSize": 10000
  },
  "allowDiskUse": true
}</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Email"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].hlk_email</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1gudi5y</bpmn:incoming><bpmn:outgoing>SequenceFlow_13iut79</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_17dw28x" name="ЮЛ. Получаем почту клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
  "aggregate": "legalEntity",
  "pipeline": [
    {
      "$match": {
        "actual": true,
        "status": "VERIFICATED",
        "primaryId": "${clientPrimaryId}",
      }
    },
    {
      "$project": {
        "hlk_email": { "$ifNull": ["$attributes.hlk_email", null]},
        "_id": 0
      }
    }
  ],
  "cursor": {
    "batchSize": 10000
  },
  "allowDiskUse": true
}</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Email"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].hlk_email</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14iztxw</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nfhcph</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0axrnml" name="Отправляем отчёт клиенту"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"${Email}",
"subject":"Отчёт о зачислении суммы вознаграждения/погашения по финансовым инструментам",
"text":"",
"attachments": ["${generated}"]
}</camunda:inputParameter><camunda:outputParameter name="errorMessage">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1at9fni</bpmn:incoming><bpmn:outgoing>SequenceFlow_1aafpi7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1gudi5y" sourceRef="ExclusiveGateway_023jozv" targetRef="ServiceTask_0b3bm4n" /><bpmn:sequenceFlow id="SequenceFlow_14iztxw" sourceRef="ExclusiveGateway_023jozv" targetRef="ServiceTask_17dw28x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientSource == 'legalEntity'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0nfhcph" sourceRef="ServiceTask_17dw28x" targetRef="ExclusiveGateway_1e33wij" /><bpmn:sequenceFlow id="SequenceFlow_13iut79" sourceRef="ServiceTask_0b3bm4n" targetRef="ExclusiveGateway_1e33wij" /><bpmn:sequenceFlow id="SequenceFlow_1at9fni" sourceRef="ExclusiveGateway_1e33wij" targetRef="ServiceTask_0axrnml" /><bpmn:sequenceFlow id="SequenceFlow_1aafpi7" sourceRef="ServiceTask_0axrnml" targetRef="EndEvent_0n8ge4u" /></bpmn:process><bpmn:message id="Message_1c21k8p" name="confirmPayment" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_PaperRedemption_0ce9e6c9-7549-4603-8d9e-113edc070140"><bpmndi:BPMNEdge id="SequenceFlow_1aafpi7_di" bpmnElement="SequenceFlow_1aafpi7"><di:waypoint x="5400" y="402" /><di:waypoint x="5432" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1at9fni_di" bpmnElement="SequenceFlow_1at9fni"><di:waypoint x="5275" y="402" /><di:waypoint x="5300" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13iut79_di" bpmnElement="SequenceFlow_13iut79"><di:waypoint x="5200" y="352" /><di:waypoint x="5250" y="352" /><di:waypoint x="5250" y="377" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nfhcph_di" bpmnElement="SequenceFlow_0nfhcph"><di:waypoint x="5200" y="462" /><di:waypoint x="5250" y="462" /><di:waypoint x="5250" y="427" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14iztxw_di" bpmnElement="SequenceFlow_14iztxw"><di:waypoint x="5050" y="427" /><di:waypoint x="5050" y="462" /><di:waypoint x="5100" y="462" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gudi5y_di" bpmnElement="SequenceFlow_1gudi5y"><di:waypoint x="5050" y="377" /><di:waypoint x="5050" y="352" /><di:waypoint x="5100" y="352" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0musma2_di" bpmnElement="SequenceFlow_0musma2"><di:waypoint x="1910" y="402" /><di:waypoint x="1950" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0g7kttb_di" bpmnElement="SequenceFlow_0g7kttb"><di:waypoint x="1780" y="402" /><di:waypoint x="1810" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19nuue6_di" bpmnElement="Flow_19nuue6"><di:waypoint x="3624" y="400" /><di:waypoint x="4256" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0v9fj8j_di" bpmnElement="Flow_0v9fj8j"><di:waypoint x="670" y="402" /><di:waypoint x="697" y="402" /><di:waypoint x="697" y="401" /><di:waypoint x="724" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_016w7ia_di" bpmnElement="Flow_016w7ia"><di:waypoint x="320" y="401" /><di:waypoint x="570" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0196v1n_di" bpmnElement="SequenceFlow_0196v1n"><di:waypoint x="1650" y="402" /><di:waypoint x="1680" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vtnis0_di" bpmnElement="Flow_0vtnis0"><di:waypoint x="1230" y="402" /><di:waypoint x="1279" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fup6ga_di" bpmnElement="SequenceFlow_0fup6ga"><di:waypoint x="4489" y="400" /><di:waypoint x="4534" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1h8zwuw_di" bpmnElement="SequenceFlow_1h8zwuw"><di:waypoint x="1524" y="402" /><di:waypoint x="1550" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17vbg49_di" bpmnElement="SequenceFlow_17vbg49"><di:waypoint x="1379" y="402" /><di:waypoint x="1424" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ezwmik_di" bpmnElement="SequenceFlow_0ezwmik"><di:waypoint x="4890" y="402" /><di:waypoint x="4910" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1s1x6c3_di" bpmnElement="SequenceFlow_1s1x6c3"><di:waypoint x="4770" y="402" /><di:waypoint x="4790" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0g6z3z7_di" bpmnElement="SequenceFlow_0g6z3z7"><di:waypoint x="4634" y="400" /><di:waypoint x="4652" y="400" /><di:waypoint x="4652" y="402" /><di:waypoint x="4670" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pnfcsh_di" bpmnElement="SequenceFlow_0pnfcsh"><di:waypoint x="1080" y="402" /><di:waypoint x="1130" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0c6jmvm_di" bpmnElement="SequenceFlow_0c6jmvm"><di:waypoint x="950" y="402" /><di:waypoint x="980" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16qzctt_di" bpmnElement="SequenceFlow_16qzctt"><di:waypoint x="824" y="402" /><di:waypoint x="850" y="402" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vmn5rc_di" bpmnElement="SequenceFlow_0vmn5rc"><di:waypoint x="4356" y="400" /><di:waypoint x="4389" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1trxyla_di" bpmnElement="SequenceFlow_1trxyla"><di:waypoint x="5010" y="402" /><di:waypoint x="5018" y="402" /><di:waypoint x="5018" y="404" /><di:waypoint x="5027" y="404" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0waj7vt_di" bpmnElement="SequenceFlow_0waj7vt"><di:waypoint x="188" y="401" /><di:waypoint x="220" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_02aeuam_di" bpmnElement="StartEvent_02aeuam"><dc:Bounds x="152" y="383" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0n8ge4u_di" bpmnElement="EndEvent_0n8ge4u"><dc:Bounds x="5432" y="384" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ennx7b_di" bpmnElement="ServiceTask_1ennx7b"><dc:Bounds x="4256" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fevufd_di" bpmnElement="ServiceTask_1fevufd"><dc:Bounds x="850" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ktlqpg_di" bpmnElement="ServiceTask_1ktlqpg"><dc:Bounds x="980" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ev01ph_di" bpmnElement="ServiceTask_0ev01ph"><dc:Bounds x="4670" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xki3kr_di" bpmnElement="ServiceTask_1xki3kr"><dc:Bounds x="4790" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1phxa4q_di" bpmnElement="ServiceTask_1phxa4q"><dc:Bounds x="4910" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ecv25y_di" bpmnElement="ServiceTask_0ecv25y"><dc:Bounds x="724" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pjj7im_di" bpmnElement="ServiceTask_1pjj7im"><dc:Bounds x="1056" y="242" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19dnrd8_di" bpmnElement="ServiceTask_19dnrd8"><dc:Bounds x="1130" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_078ijjy_di" bpmnElement="ServiceTask_078ijjy"><dc:Bounds x="1279" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zs0stm_di" bpmnElement="ServiceTask_0zs0stm"><dc:Bounds x="1550" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0nrzy2r_di" bpmnElement="ServiceTask_0nrzy2r"><dc:Bounds x="1424" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19l34da_di" bpmnElement="ServiceTask_19l34da"><dc:Bounds x="4389" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1se4h3i_di" bpmnElement="ServiceTask_1se4h3i"><dc:Bounds x="4534" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0y216gn_di" bpmnElement="ServiceTask_0y216gn"><dc:Bounds x="1718" y="160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_0k9rdty_di" bpmnElement="SubProcess_0k9rdty" isExpanded="true"><dc:Bounds x="1950" y="82" width="1674" height="637" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_05z25kr_di" bpmnElement="SequenceFlow_05z25kr"><di:waypoint x="2330" y="553" /><di:waypoint x="2352" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y0ehio_di" bpmnElement="SequenceFlow_1y0ehio"><di:waypoint x="2910" y="552" /><di:waypoint x="2995" y="550" /><di:waypoint x="2995" y="550" /><di:waypoint x="3398" y="552" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dbc2gp_di" bpmnElement="SequenceFlow_1dbc2gp"><di:waypoint x="2420" y="302" /><di:waypoint x="2483" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0o1gezh_di" bpmnElement="SequenceFlow_0o1gezh"><di:waypoint x="2678" y="470" /><di:waypoint x="2170" y="470" /><di:waypoint x="2170" y="342" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0e4noi6_di" bpmnElement="SequenceFlow_0e4noi6"><di:waypoint x="2728" y="327" /><di:waypoint x="2728" y="430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12vjqv4_di" bpmnElement="SequenceFlow_12vjqv4"><di:waypoint x="2250" y="302" /><di:waypoint x="2320" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1p2pfry_di" bpmnElement="SequenceFlow_1p2pfry"><di:waypoint x="2338" y="424" /><di:waypoint x="2200" y="424" /><di:waypoint x="2200" y="342" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_020k2ah_di" bpmnElement="SequenceFlow_020k2ah"><di:waypoint x="2568" y="190" /><di:waypoint x="2220" y="190" /><di:waypoint x="2220" y="262" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1by72ke_di" bpmnElement="SequenceFlow_1by72ke"><di:waypoint x="2508" y="327" /><di:waypoint x="2508" y="424" /><di:waypoint x="2438" y="424" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qvyjpm_di" bpmnElement="SequenceFlow_0qvyjpm"><di:waypoint x="2533" y="302" /><di:waypoint x="2568" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1amb6kg_di" bpmnElement="SequenceFlow_1amb6kg"><di:waypoint x="2728" y="277" /><di:waypoint x="2728" y="190" /><di:waypoint x="2668" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qzsiys_di" bpmnElement="SequenceFlow_0qzsiys"><di:waypoint x="2668" y="302" /><di:waypoint x="2703" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wsel12_di" bpmnElement="SequenceFlow_1wsel12"><di:waypoint x="2753" y="302" /><di:waypoint x="2778" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1syzwf8_di" bpmnElement="SequenceFlow_1syzwf8"><di:waypoint x="2878" y="302" /><di:waypoint x="3198" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1mgw6nb_di" bpmnElement="SequenceFlow_1mgw6nb"><di:waypoint x="2008" y="380" /><di:waypoint x="2058" y="380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u4hunv_di" bpmnElement="SequenceFlow_1u4hunv"><di:waypoint x="2083" y="355" /><di:waypoint x="2083" y="302" /><di:waypoint x="2150" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l81l3t_di" bpmnElement="SequenceFlow_0l81l3t"><di:waypoint x="2083" y="405" /><di:waypoint x="2083" y="553" /><di:waypoint x="2102" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0w0csja_di" bpmnElement="SequenceFlow_0w0csja"><di:waypoint x="3298" y="302" /><di:waypoint x="3398" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1c46yjk_di" bpmnElement="SequenceFlow_1c46yjk"><di:waypoint x="2592" y="553" /><di:waypoint x="2810" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00ignme_di" bpmnElement="SequenceFlow_00ignme"><di:waypoint x="2452" y="553" /><di:waypoint x="2492" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zu6654_di" bpmnElement="SequenceFlow_0zu6654"><di:waypoint x="2202" y="553" /><di:waypoint x="2230" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_1w741c3_di" bpmnElement="StartEvent_1w741c3"><dc:Bounds x="1972" y="362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_071ogy9_di" bpmnElement="ExclusiveGateway_071ogy9" isMarkerVisible="true"><dc:Bounds x="2483" y="277" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1hps5jn_di" bpmnElement="ServiceTask_1hps5jn"><dc:Bounds x="2338" y="384" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0i0sz1h_di" bpmnElement="ServiceTask_0i0sz1h"><dc:Bounds x="2568" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1qwarah_di" bpmnElement="ServiceTask_1qwarah"><dc:Bounds x="2568" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0p7f2zm_di" bpmnElement="ExclusiveGateway_0p7f2zm" isMarkerVisible="true"><dc:Bounds x="2703" y="277" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_02j8dji_di" bpmnElement="ServiceTask_02j8dji"><dc:Bounds x="2778" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0zcoean_di" bpmnElement="UserTask_0zcoean" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="3198" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_102tbm4_di" bpmnElement="ParallelGateway_102tbm4"><dc:Bounds x="2058" y="355" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_1505ifa_di" bpmnElement="ReceiveTask_1505ifa"><dc:Bounds x="2352" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0p29xo5_di" bpmnElement="EndEvent_0p29xo5"><dc:Bounds x="3398" y="284" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1gy5zvy_di" bpmnElement="EndEvent_1gy5zvy"><dc:Bounds x="3398" y="534" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1p58arn_di" bpmnElement="ServiceTask_1p58arn"><dc:Bounds x="2492" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1c664xu_di" bpmnElement="ServiceTask_1c664xu"><dc:Bounds x="2102" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1p55806_di" bpmnElement="UserTask_1p55806"><dc:Bounds x="2150" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0e2555v_di" bpmnElement="ServiceTask_0e2555v"><dc:Bounds x="2678" y="430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1t4y7sk_di" bpmnElement="ServiceTask_1t4y7sk"><dc:Bounds x="2320" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_02o0679_di" bpmnElement="ServiceTask_02o0679"><dc:Bounds x="2810" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0j6tt18_di" bpmnElement="ServiceTask_0j6tt18"><dc:Bounds x="2230" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00yazlo_di" bpmnElement="Activity_00yazlo"><dc:Bounds x="220" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hj9bsm_di" bpmnElement="Activity_1hj9bsm"><dc:Bounds x="570" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ljgejs_di" bpmnElement="ServiceTask_1ljgejs"><dc:Bounds x="1680" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0oqxyjt_di" bpmnElement="ServiceTask_0oqxyjt"><dc:Bounds x="1810" y="362" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_023jozv_di" bpmnElement="ExclusiveGateway_023jozv" isMarkerVisible="true"><dc:Bounds x="5025" y="377" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1e33wij_di" bpmnElement="ExclusiveGateway_1e33wij" isMarkerVisible="true"><dc:Bounds x="5225" y="377" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0b3bm4n_di" bpmnElement="ServiceTask_0b3bm4n"><dc:Bounds x="5100" y="312" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_17dw28x_di" bpmnElement="ServiceTask_17dw28x"><dc:Bounds x="5100" y="422" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0axrnml_di" bpmnElement="ServiceTask_0axrnml"><dc:Bounds x="5300" y="362" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>