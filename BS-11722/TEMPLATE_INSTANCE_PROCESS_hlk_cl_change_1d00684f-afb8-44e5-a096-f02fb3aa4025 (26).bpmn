<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_hlk_cl_change_1d00684f-afb8-44e5-a096-f02fb3aa4025" name="Заявка на изменение реквизитов партнера ФЛ" isExecutable="true"><bpmn:documentation /><bpmn:extensionElements><camunda:properties><camunda:property name="failedJobRetryTimeCycle" value="R5/PT5M" /></camunda:properties></bpmn:extensionElements><bpmn:startEvent id="start"><bpmn:outgoing>SequenceFlow_1v5g8c1</bpmn:outgoing></bpmn:startEvent><bpmn:userTask id="Task_0micukk" name="Блок заполнения, выбор клиента" camunda:formKey="FILL" camunda:assignee="${initiator}" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="hlk_client_app" label="Клиент" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zcd1lk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1pdwx9a</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1nsu2mr" name="Получаем инстанс айди выбранного клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getRefId/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="referenceId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1etdiwl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ig2vrz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1pdwx9a" sourceRef="Task_0micukk" targetRef="ServiceTask_1sjy7uk" /><bpmn:serviceTask id="ServiceTask_1xj4nui" name="Вытаскиваем поля из клиента на карточку заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${referenceId}&amp;sourceType=INDIVIDUAL</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "hlk_partner_id" : "hlk_partner_id",
    "hlk_postcode" : "hlk_postcode",
    "hlk_mobile_phone":"hlk_mobile_phone",
    "hlk_SignatureSealCard" : "hlk_SignatureSealCard",
    "hlk_BankTransferDetails" : "hlk_BankTransferDetails",
    "hlk_detailsforsecurities" : "hlk_detailsforsecurities",
    "hlk_signfatcaul" : "hlk_signfatcaul",
    "hlk_reg_tau_kato_region" : "hlk_reg_tau_kato_region",
    "hlk_OffshoreZone" : "hlk_OffshoreZone",
    "hlk_residence_address_type_settlement_fl" : "hlk_residence_address_type_settlement_fl",
    "hlk_typesdoc" : "hlk_typesdoc",
    "hlk_type_organization_fatca" : "hlk_type_organization_fatca",
    "hlk_kato_residence_area_id" : "hlk_kato_residence_area_id",
    "hlk_costtt_center" : "hlk_costtt_center",
    "hlk_address_residence_district_fl" : "hlk_address_residence_district_fl",
    "hlk_firstname" : "hlk_firstname",
    "hlk_residence_address_house" : "hlk_residence_address_house",
    "hlk_regdate" : "hlk_regdate",
    "hlk_doc_first_date" : "hlk_doc_first_date",
    "hlk_dateissue" : "hlk_dateissue",
    "hlk_Conterparty_Level" : "hlk_Conterparty_Level",
    "hlk_OrderOpeningAccount" : "hlk_OrderOpeningAccount",
    "hlk_cp_tariff_plan" : "hlk_cp_tariff_plan",
    "hlk_kato_region_id" : "hlk_kato_region_id",
    "hlk_shareholder" : "hlk_shareholder",
    "hlk_tau_kato_locality" : "hlk_tau_kato_locality",
    "hlk_region_residence_address_fl" : "hlk_region_residence_address_fl",
    "hlk_SIGN_FATCA_DATE" : "hlk_SIGN_FATCA_DATE",
    "hlk_numberdocument" : "hlk_numberdocument",
    "hlk_RiskLevelAML" : "hlk_RiskLevelAML",
    "hlk_postcode_fact" : "hlk_postcode_fact",
    "hlk_residentusaul" : "hlk_residentusaul",
    "F_BirthDay" : "F_BirthDay",
    "hlk_RegAdress_Locality" : "hlk_RegAdress_Locality",
    "hlk_account_type_holder" : "hlk_account_type_holder",
    "hlk_document_expiration_date" : "hlk_document_expiration_date",
    "hlk_street" : "hlk_street",
    "hlk_kato_residence_region_id" : "hlk_kato_residence_region_id",
    "hlk_AMLCommentRiskLevel" : "hlk_AMLCommentRiskLevel",
    "hlk_NotificationMethod" : "hlk_NotificationMethod",
    "hlk_adressmatch" : "hlk_adressmatch",
    "hlk_kato_area_idid" : "hlk_kato_area_idid",
    "hlk_residentFL" : "hlk_residentFL",
    "hlk_address_residence_settlement_fl" : "hlk_address_residence_settlement_fl",
    "hlk_reg_tau_kato_district" : "hlk_reg_tau_kato_district",
    "hlk_phone" : "hlk_phone",
    "hlk_HabAdress_Area" : "hlk_HabAdress_Area",
    "hlk_address_residence_country" : "hlk_address_residence_country",
    "hlk_country_citizenship" : "hlk_country_citizenship",
    "hlk_app_id" : "hlk_app_id",
    "hlk_HabAdress_Full" : "hlk_HabAdress_Full",
    "hlk_se_id" : "hlk_se_id",
    "hlk_AML_MatchFound" : "hlk_AML_MatchFound",
    "hlk_IdentityDocumentScan" : "hlk_IdentityDocumentScan",
    "hlk_counterparty" : "hlk_counterparty",
    "hlk_regionul" : "hlk_regionul",
    "hlk_RegAdress_Full" : "hlk_RegAdress_Full",
    "hlk_profit_id" : "hlk_profit_id",
    "hlk_RegAdress_Area" : "hlk_RegAdress_Area",
    "hlk_residence_address_flat_fl" : "hlk_residence_address_flat_fl",
    "hlk_PowerAttorney" : "hlk_PowerAttorney",
    "hlk_kato_adress_locality_id" : "hlk_kato_adress_locality_id",
    "hlk_issueddocument" : "hlk_issueddocument",
    "hlk_kato_residence_locality_id" : "hlk_kato_residence_locality_id",
    "hlk_taxprivileges" : "hlk_taxprivileges",
    "hlk_date_ipdl" : "hlk_date_ipdl",
    "hlk_email" : "hlk_email",
    "hlk_QualInvestor" : "hlk_QualInvestor",
    "hlk_comment_ipdl" : "hlk_comment_ipdl",
    "hlk_PlaceOfBirth" : "hlk_PlaceOfBirth",
    "hlk_reg_tau_kato_locality" : "hlk_reg_tau_kato_locality",
    "hlk_ApplicationAccessionAgreement" : "hlk_ApplicationAccessionAgreement",
    "hlk_related_person" : "hlk_related_person",
    "hlk_locality" : "hlk_locality",
    "hlk_areaa" : "hlk_areaa",
    "hlk_isIP" : "hlk_isIP",
    "hlk_lastname" : "hlk_lastname",
    "hlk_residence_address_street_fl" : "hlk_residence_address_street_fl",
    "hlk_RegAdress_District" : "hlk_RegAdress_District",
    "hlk_regnumber" : "hlk_regnumber",
    "hlk_tau_kato_district" : "hlk_tau_kato_district",
    "hlk_gender" : "hlk_gender",
    "hlk_Placeofissue" : "hlk_Placeofissue",
    "hlk_ipdlUL" : "hlk_ipdlUL",
    "hlk_economicsector" : "hlk_economicsector",
    "hlk_patronomic" : "hlk_patronomic",
    "hlk_house" : "hlk_house",
    "hlk_HabAdress_Locality" : "hlk_HabAdress_Locality",
    "hlk_registrcountry" : "hlk_registrcountry",
    "hlk_iin_bin" : "hlk_iin_bin",
    "hlk_AMLReviewComment" : "hlk_AMLReviewComment",
    "hlk_tau_kato_region" : "hlk_tau_kato_region",
    "hlk_FATCA_participation" : "hlk_FATCA_participation",
    "hlk_typelocality" : "hlk_typelocality",
    "hlk_other_information" : "hlk_other_information",
    "hlk_customer" : "hlk_customer",
    "hlk_gintinul" : "hlk_gintinul",
    "hlk_HabAdress_District" : "hlk_HabAdress_District",
    "hlk_serialdocument" : "hlk_serialdocument",
    "hlk_officeflat" : "hlk_officeflat",
    "hlk_confidant" : "hlk_confidant"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ig2vrz</bpmn:incoming><bpmn:outgoing>SequenceFlow_0218dxf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ig2vrz" sourceRef="ServiceTask_1nsu2mr" targetRef="ServiceTask_1xj4nui" /><bpmn:userTask id="UserTask_0jx7azk" name="Блок заполнения, изменение реквизитов" camunda:formKey="FILL" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="hlk_customer" label="Клиент?" type="string" /><camunda:formField id="hlk_counterparty" label="Контрагент?" type="string" /><camunda:formField id="hlk_shareholder" label="Пайщик?" type="string" /><camunda:formField id="hlk_related_person" label="Связанное лицо?" type="string" /><camunda:formField id="hlk_confidant" label="Доверенное лицо?" type="string" /><camunda:formField id="hlk_lastname" label="Фамилия" type="string" /><camunda:formField id="hlk_firstname" label="Имя" type="string" /><camunda:formField id="hlk_patronomic" label="Отчество" type="string" /><camunda:formField id="hlk_gender" label="Пол" type="string" /><camunda:formField id="hlk_economicsector" label="Сектор экономики" type="string" /><camunda:formField id="hlk_country_citizenship" label="Страна гражданства" type="string" /><camunda:formField id="hlk_other_information" label="Прочая информация" type="string" /><camunda:formField id="hlk_Conterparty_Level" label="Уровень учета" type="string" /><camunda:formField id="hlk_isIP" label="Индивидуальный предприниматель" type="string" /><camunda:formField id="hlk_QualInvestor" label="Квалифицированный инвестор" type="string" /><camunda:formField id="hlk_se_id" label="ID Сектора Экономики" type="string" /><camunda:formField id="F_BirthDay" label="Дата Рождения" type="string" /><camunda:formField id="hlk_app_id" label="ID заявки" type="string" /><camunda:formField id="hlk_taxprivileges" label="Налоговые льготы" type="string" /><camunda:formField id="hlk_costtt_center" label="Профит центр*" type="string" /><camunda:formField id="hlk_profit_id" label="ID Профит-центра" type="string" /><camunda:formField id="hlk_iin_bin" label="ИИН/БИН" type="string" /><camunda:formField id="hlk_account_type_holder" label="Вид держателя" type="string" /><camunda:formField id="hlk_signfatcaul" label="Признак FATCA" type="string" /><camunda:formField id="hlk_FATCA_participation" label="Участие FATCA" type="string" /><camunda:formField id="hlk_type_organization_fatca" label="Тип организации (FATCA)" type="string" /><camunda:formField id="hlk_residentusaul" label="Резидент США" type="string" /><camunda:formField id="hlk_OffshoreZone" label="Офшорная зона" type="string" /><camunda:formField id="hlk_gintinul" label="Номер участника TIN/SSI" type="string" /><camunda:formField id="hlk_postcode" label="Адрес регистрации: Почтовый индекс" type="string" /><camunda:formField id="hlk_typelocality" label="Адрес регистрации: Вид населенного пункта" type="string" /><camunda:formField id="hlk_street" label="Адрес регистрации: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_house" label="Адрес регистрации: Номер дома" type="string" /><camunda:formField id="hlk_RegAdress_Area" label="Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_RegAdress_District" label="Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_regionul" label="Адрес регистрации: Область КАТО" type="string" /><camunda:formField id="hlk_areaa" label="Адрес регистрации: Район КАТО" type="string" /><camunda:formField id="hlk_RegAdress_Locality" label="Адрес регистрации: Населенный Пункт" type="string" /><camunda:formField id="hlk_locality" label="Адрес регистрации: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_reg_tau_kato_locality" label="ID ТАУ КАТО Адрес регистрации: Населенный пункт" type="string" /><camunda:formField id="hlk_officeflat" label="Адрес регистрации: Номер квартиры/офиса" type="string" /><camunda:formField id="hlk_registrcountry" label="Страна резиденства/регистрации" type="string" /><camunda:formField id="hlk_adressmatch" label="Адрес проживания совпадает с адресом регистрации" type="string" /><camunda:formField id="hlk_postcode_fact" label="Адрес проживания: Почтовый индекс" type="string" /><camunda:formField id="hlk_residence_address_type_settlement_fl" label="Адрес проживания: Вид населенного пункта" type="string" /><camunda:formField id="hlk_residence_address_street_fl" label="Адрес проживания: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_residence_address_house" label="Адрес проживания: Номер дома" type="string" /><camunda:formField id="hlk_residence_address_flat_fl" label="Адрес проживания: Номер квартиры" type="string" /><camunda:formField id="hlk_region_residence_address_fl" label="Адрес проживания: Область КАТО" type="string" /><camunda:formField id="hlk_address_residence_district_fl" label="Адрес проживания: Район КАТО" type="string" /><camunda:formField id="hlk_address_residence_settlement_fl" label="Адрес проживания: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_HabAdress_Area" label="Адрес факт/проживания: Область" type="string" /><camunda:formField id="hlk_HabAdress_District" label="Адрес факт/проживания: Район" type="string" /><camunda:formField id="hlk_HabAdress_Locality" label="Адрес факт/проживания: Населенный пункт" type="string" /><camunda:formField id="hlk_address_residence_country" label="Адрес проживания: Страна" type="string" /><camunda:formField id="hlk_tau_kato_locality" label="ID ТАУ КАТО Адрес проживания/фактический: Населенный пункт" type="string" /><camunda:formField id="hlk_regnumber" label="Регистрационный номер" type="string" /><camunda:formField id="hlk_regdate" label="Дата регистрации*" type="string" /><camunda:formField id="hlk_serialdocument" label="Серия документа" type="string" /><camunda:formField id="hlk_dateissue" label="Дата выдачи" type="string" /><camunda:formField id="hlk_document_expiration_date" label="Дата истечения срока действия документа" type="string" /><camunda:formField id="hlk_issueddocument" label="Кем выдан документ" type="string" /><camunda:formField id="hlk_typesdoc" label="Вид документа" type="string" /><camunda:formField id="hlk_numberdocument" label="Номер документа" type="string" /><camunda:formField id="hlk_Placeofissue" label="Место выдачи документа" type="string" /><camunda:formField id="hlk_doc_first_date" label="Дата первичной регистрации документа" type="string" /><camunda:formField id="hlk_phone" label="Телефон" type="string" /><camunda:formField id="hlk_NotificationMethod" label="Способ получения уведомления" type="string" /><camunda:formField id="hlk_email" label="E-mail" type="string" /><camunda:formField id="hlk_BankTransferDetails" label="Банковские реквизиты для перевода ДС" type="string" /><camunda:formField id="hlk_detailsforsecurities" label="Реквизиты для перевода ЦБ" type="string" /><camunda:formField id="hlk_ApplicationAccessionAgreement" label="Заявление о присоединении к Договору " type="string" /><camunda:formField id="hlk_OrderOpeningAccount" label="Приказ на открытие лицевого счета для ФЛ/ИП" type="string" /><camunda:formField id="hlk_IdentityDocumentScan" label="Документ, удостоверяющий личность" type="string" /><camunda:formField id="hlk_SignatureSealCard" label="Карточка с образцом подписи/печати" type="string" /><camunda:formField id="hlk_PowerAttorney" label="Доверенность" type="string" /><camunda:formField id="hlk_AMLStatus" label="Код статуса проверки АМЛ" type="string" /><camunda:formField id="hlk_SIGN_FATCA_DATE" label="Дата определения / изменения Признак FATCA" type="string" /><camunda:formField id="hlk_mobile_phone" label="Мобильный телефон" type="string" /><camunda:formField id="hlk_PlaceOfBirth" label="Место рождения" type="string" /><camunda:formField id="hlk_swift_creation" label="Формирование приказа на изменение реквизитов" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0adwb3l</bpmn:incoming><bpmn:incoming>SequenceFlow_1i49ayq</bpmn:incoming><bpmn:incoming>SequenceFlow_0kxn5nv</bpmn:incoming><bpmn:incoming>SequenceFlow_0b8jxnd</bpmn:incoming><bpmn:incoming>SequenceFlow_0yk840q</bpmn:incoming><bpmn:incoming>SequenceFlow_00iijpw</bpmn:incoming><bpmn:incoming>SequenceFlow_0kwnahi</bpmn:incoming><bpmn:incoming>SequenceFlow_067hfqp</bpmn:incoming><bpmn:incoming>SequenceFlow_0zuxdbl</bpmn:incoming><bpmn:incoming>Flow_0z3sbly</bpmn:incoming><bpmn:incoming>SequenceFlow_1rp846h</bpmn:incoming><bpmn:incoming>Flow_0k3tppy</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nqy7np</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1w6azwq" name="Определяем есть ли у клиента активный счет в цд"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"attributes.hlk_account_owner.primaryId": "${hlk_client_app}",
"activityStatus" : "ACTIVE", 
"actual" : true,
"attributes.hlk_account_external" : false,           
"attributes.hlk_clearing_system.primaryId" : "5e46ac7457645400077899c7",
"attributes.hlk_account_type" : "Ценнобумажный"
	},
	"projection": {
		"attributes.hlk_Account_Number": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0uh1zjf</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cpdx02</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_1l9sz6w" name="Подтверждение заявки" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Cancel&#34;, &#34;label&#34;: &#34;Отклонить&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_close&#34;, &#34;label&#34;: &#34;Причина отклонения&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ekbyzi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1e0twae</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1wx9qhm</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1isxnes</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_1e0twae" sourceRef="UserTask_1l9sz6w" targetRef="ServiceTask_0dnyydf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_0dnyydf" name="Статус заявки &#34;Обработка: Заявка зарегистрирована&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+зарегистрирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1e0twae</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wrbukg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1i63v4i" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена+сотрудником+СП</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0tmisax</bpmn:incoming><bpmn:outgoing>SequenceFlow_1h7wcdm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1wx9qhm" sourceRef="UserTask_1l9sz6w" targetRef="ScriptTask_1ncx3ij"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1niobpj" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1h7wcdm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0d01uzi</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0m2b8in"><bpmn:incoming>SequenceFlow_0d01uzi</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_0d01uzi" sourceRef="ServiceTask_1niobpj" targetRef="EndEvent_0m2b8in" /><bpmn:serviceTask id="ServiceTask_1i5lfhe" name="определяем primaryId клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1olcqih</bpmn:incoming><bpmn:outgoing>Flow_1nbvqbe</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1jine9y"><bpmn:incoming>SequenceFlow_0cpdx02</bpmn:incoming><bpmn:incoming>Flow_0rccx7n</bpmn:incoming><bpmn:outgoing>SequenceFlow_05bdry7</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0pybp4t</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0womgra</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0cpdx02" sourceRef="ServiceTask_1w6azwq" targetRef="ExclusiveGateway_1jine9y" /><bpmn:serviceTask id="ServiceTask_0a3trbz" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ifgadd</bpmn:incoming><bpmn:outgoing>SequenceFlow_1h0r3eh</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1bh5tgs"><bpmn:incoming>SequenceFlow_1h0r3eh</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0w316k3" name="Статус заявки отклонена: найдено совпадение по спискам амл"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена:+Клиент+не+прошел+проверку+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1lis9eu</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ifgadd</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_02050sn" name="Отправка в AML" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отправлено+в+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_079ghu9</bpmn:incoming><bpmn:incoming>Flow_100y5f0</bpmn:incoming><bpmn:incoming>Flow_0w3ztsi</bpmn:incoming><bpmn:outgoing>SequenceFlow_0q4jwbl</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_0jq87gr" name="Ручная проверка" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;Cancel&#34;,&#34;label&#34;:&#34;Отклонить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1yj6g2a</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cmr33k</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1i6qnq0</bpmn:outgoing></bpmn:userTask><bpmn:exclusiveGateway id="ExclusiveGateway_18c03g1" default="SequenceFlow_160wph2"><bpmn:incoming>SequenceFlow_19wjip3</bpmn:incoming><bpmn:outgoing>SequenceFlow_08sf1rx</bpmn:outgoing><bpmn:outgoing>SequenceFlow_07vj80d</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1ulqenb</bpmn:outgoing><bpmn:outgoing>SequenceFlow_160wph2</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1rxkst8</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1wj8abk" name="Изменяем статус заявки: Обработка: AML.Совпадений не найдено"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+AML.Совпадений+не+найдено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cmr33k</bpmn:incoming><bpmn:incoming>SequenceFlow_16drkv0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1d1fmr4</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0av75fr"><bpmn:incoming>SequenceFlow_1o6vrcy</bpmn:incoming><bpmn:outgoing>SequenceFlow_11fx7li</bpmn:outgoing><bpmn:outgoing>SequenceFlow_103x44z</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1u9q8ga" name="Статус заявки: Обработка:Заявка исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11fx7li</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x04nwb</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_18cqsg7"><bpmn:incoming>SequenceFlow_09q1e17</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0lsw96z" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1x04nwb</bpmn:incoming><bpmn:outgoing>SequenceFlow_09q1e17</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0za4s1s" name="Изменяем статус заявки: Системная ошибка AML"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=ОБработка:+Системная+ошибка+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ecu2lj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1yj6g2a</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0x9vgdb" name="Изменяем статус заявки: Выявлено совпадение. Ожидайте решение Compliance"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Выявлено+совпадение.+Ожидайте+решение+Compliance</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ulqenb</bpmn:incoming><bpmn:outgoing>SequenceFlow_17j8bdt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pkgjn3" name="Ожидаем ответ"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_AMLStatus</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1rvmjc9</bpmn:incoming><bpmn:outgoing>SequenceFlow_19wjip3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ifgadd" sourceRef="ServiceTask_0w316k3" targetRef="ServiceTask_0a3trbz" /><bpmn:sequenceFlow id="SequenceFlow_1h0r3eh" sourceRef="ServiceTask_0a3trbz" targetRef="EndEvent_1bh5tgs" /><bpmn:sequenceFlow id="SequenceFlow_08sf1rx" sourceRef="ExclusiveGateway_18c03g1" targetRef="CallActivity_0kukcd3"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '0'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1cmr33k" sourceRef="UserTask_0jq87gr" targetRef="ServiceTask_1wj8abk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_07vj80d" sourceRef="ExclusiveGateway_18c03g1" targetRef="ServiceTask_0cefki3"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '3'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1yj6g2a" sourceRef="ServiceTask_0za4s1s" targetRef="UserTask_0jq87gr" /><bpmn:sequenceFlow id="SequenceFlow_19wjip3" sourceRef="ServiceTask_1pkgjn3" targetRef="ExclusiveGateway_18c03g1" /><bpmn:sequenceFlow id="SequenceFlow_1ulqenb" sourceRef="ExclusiveGateway_18c03g1" targetRef="ServiceTask_0x9vgdb"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_17j8bdt" sourceRef="ServiceTask_0x9vgdb" targetRef="IntermediateCatchEvent_0si0sit" /><bpmn:sequenceFlow id="SequenceFlow_11fx7li" sourceRef="ExclusiveGateway_0av75fr" targetRef="ServiceTask_1u9q8ga"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "false" || (need2Swift == "false" &amp;&amp; firstStep == "true")}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1x04nwb" sourceRef="ServiceTask_1u9q8ga" targetRef="ServiceTask_0lsw96z" /><bpmn:sequenceFlow id="SequenceFlow_09q1e17" sourceRef="ServiceTask_0lsw96z" targetRef="EndEvent_18cqsg7" /><bpmn:sequenceFlow id="SequenceFlow_1wrbukg" sourceRef="ServiceTask_0dnyydf" targetRef="ServiceTask_1t7exr7" /><bpmn:sequenceFlow id="SequenceFlow_103x44z" sourceRef="ExclusiveGateway_0av75fr" targetRef="SubProcess_0ht6sg5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${(step == "true" &amp;&amp; need2Swift == "true") || (step == "true" &amp;&amp; firstStep == "false")}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1fgizlg" name="Создаем заявку на регистрацию счета" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "account")
.prop("hlk_Account_Number" , accountNumber)
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("hlk_app_date" , regDate)
.prop("hlk_invoice_subaccount_type" , "Субсчет держателя")
.prop("hlk_account_type_holder" , "Физическое лицо")
.prop("hlk_InContract_ID_Client" , partnerId)
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0p0zifm</bpmn:incoming><bpmn:outgoing>SequenceFlow_1jjs3ml</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="ParallelGateway_0v5n1sb"><bpmn:incoming>SequenceFlow_0j6ihmm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0p0zifm</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1k6jlii</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_1v35bvh" name="Ожидаем сообщения о готовности к старту от подпроцесса" messageRef="Message_1ydqk79"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">accountCreated</camunda:outputParameter><camunda:outputParameter name="accountProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="accountId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="accountTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="accountType">${type}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1k6jlii</bpmn:incoming><bpmn:outgoing>SequenceFlow_0q2ig06</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="ParallelGateway_021zz1s"><bpmn:incoming>SequenceFlow_1jjs3ml</bpmn:incoming><bpmn:incoming>SequenceFlow_0q2ig06</bpmn:incoming><bpmn:outgoing>SequenceFlow_1o5l7ht</bpmn:outgoing></bpmn:parallelGateway><bpmn:parallelGateway id="ParallelGateway_18f7lyn"><bpmn:incoming>SequenceFlow_0d32ayv</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kv6x3n</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1jp3hxt</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_0p2bm5s" name="Ожидаем сообщения о готовности к старту от подпроцесса" messageRef="Message_1ydqk79"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">agreementCreated</camunda:outputParameter><camunda:outputParameter name="agreementProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="agreementId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="agreementTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="agreementType">${type}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kv6x3n</bpmn:incoming><bpmn:outgoing>SequenceFlow_0c8lyld</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="ParallelGateway_0hg0q3j"><bpmn:incoming>SequenceFlow_0c8lyld</bpmn:incoming><bpmn:incoming>SequenceFlow_0eplep9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xmwbax</bpmn:outgoing></bpmn:parallelGateway><bpmn:serviceTask id="ServiceTask_14j4eau" name="Создаем заявку на регистрацию договора" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_EDS_Confirmation" , false)
.prop("hlk_executor" , initiator)
.prop("hlk_contract_status" , "Открыт")
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("ObjectType" , "agreement")
.prop("hlk_app_date" , regDate)
.prop("hlk_Contract_Start_Date" , regDate)
.prop("hlk_InContract_ID_Client" , partnerId)
.prop("hlk_client_FL", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_Tariff_Plan" , "Стандартный")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1jp3hxt</bpmn:incoming><bpmn:outgoing>SequenceFlow_0eplep9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1lyw3n7" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028103861</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dhgef4</bpmn:incoming><bpmn:outgoing>SequenceFlow_11ro7gn</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="ParallelGateway_02fjxcg"><bpmn:incoming>SequenceFlow_0xc23lf</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y70jv0</bpmn:outgoing><bpmn:outgoing>SequenceFlow_10ptmlc</bpmn:outgoing></bpmn:parallelGateway><bpmn:parallelGateway id="ParallelGateway_0wnrlq5"><bpmn:incoming>SequenceFlow_1pas8sm</bpmn:incoming><bpmn:incoming>SequenceFlow_1odqf90</bpmn:incoming><bpmn:outgoing>SequenceFlow_0g5kjvh</bpmn:outgoing></bpmn:parallelGateway><bpmn:callActivity id="CallActivity_1fg4lpq" name="Запускаем процесс регистрации счета" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_securities_account_6e551763-f964-457e-89bc-9a53378b5d7c"><bpmn:extensionElements><camunda:in sourceExpression="${accountId}" target="instanceId" /><camunda:in sourceExpression="${accountTemplateId}" target="templateId" /><camunda:in sourceExpression="${accountType}" target="type" /><camunda:in sourceExpression="${accountEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${accountEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${accountType.toLowerCase()}_${accountId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1y70jv0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1pas8sm</bpmn:outgoing></bpmn:callActivity><bpmn:callActivity id="CallActivity_0bzqib1" name="Запускаем процесс регистрации договора" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_AppRegContracts_41524162-fa02-47df-9197-2338660d72f4"><bpmn:extensionElements><camunda:in sourceExpression="${agreementId}" target="instanceId" /><camunda:in sourceExpression="${agreementTemplateId}" target="templateId" /><camunda:in sourceExpression="${agreementType}" target="type" /><camunda:in sourceExpression="${agreementEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${agreementEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${agreementType.toLowerCase()}_${agreementId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_10ptmlc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1odqf90</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1o7mlrf" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1utspuo</bpmn:incoming><bpmn:outgoing>SequenceFlow_05prb86</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_05npkcj" name="Создаем договор"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("EXCEL_NAME" , "CONTRACT")
.prop("hlk_account" , accountNumber)
.prop("hlk_client_FL",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0m6u0bf</bpmn:incoming><bpmn:outgoing>SequenceFlow_04b2apa</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0gavquf" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1hplgjl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0z5nis4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1kolnm5" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0z5nis4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1u5o7a4</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_0ejsq65" name="Отправляем SWIFT" calledElement="MT501Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1uuxn01</bpmn:incoming><bpmn:outgoing>SequenceFlow_1k2uurt</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_03fbor1" name="Получаем референс"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "swiftMessageEntity",
         "filter": { 
		"instanceId": "${accountId}",
		"instanceType": "BOOK"
	},
	"projection": { 
		"refId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="SWIFT_MSG_REF"><camunda:script scriptFormat="JavaScript">try {
JSON.parse(response).cursor.firstBatch[0].refId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16ll2ec</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vcjefu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0edtk7z" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/SWIFT_MSG_REF?incrementVersion=true&amp;value=${SWIFT_MSG_REF}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vcjefu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1pi90lh</bpmn:outgoing></bpmn:serviceTask><bpmn:receiveTask id="ReceiveTask_1kqv5hw" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_09vokn8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hif1rv</bpmn:outgoing></bpmn:receiveTask><bpmn:serviceTask id="ServiceTask_03i59df" name="Сохраняем 539"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/attach/${swiftId}?type=BOOK&amp;instanceId=${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00rvcm9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1m37dmq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_07p05f6" name="Смотрим статус"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_OPERATION_STATUS</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0l5tp8d</bpmn:incoming><bpmn:incoming>SequenceFlow_1hif1rv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bcc7bs</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1s3ztd9" name="Меняем статус заявки на регистрацию счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+исполнена.+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0brhued</bpmn:incoming><bpmn:incoming>SequenceFlow_1jh03r1</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qnethi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_07kcx3u" name="Меняем статус заявки на регистрацию договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+исполнена.+Договор+зарегистрирован</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1qnethi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hplgjl</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1xmd5vu" default="SequenceFlow_15r9kvq"><bpmn:incoming>SequenceFlow_1m37dmq</bpmn:incoming><bpmn:outgoing>SequenceFlow_15r9kvq</bpmn:outgoing><bpmn:outgoing>SequenceFlow_146d45w</bpmn:outgoing><bpmn:outgoing>SequenceFlow_13t6kjy</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1ktgl8u" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_15r9kvq</bpmn:incoming><bpmn:outgoing>SequenceFlow_102wojw</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1hzsqp3"><bpmn:incoming>SequenceFlow_01h7mzo</bpmn:incoming></bpmn:endEvent><bpmn:callActivity id="CallActivity_0lq2to6" name="Генерируем печатные формы" calledElement="AccountOrderGeneration"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0a5u4lc</bpmn:incoming><bpmn:incoming>Flow_1i7nqkd</bpmn:incoming><bpmn:outgoing>SequenceFlow_09bn3d8</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1fpw11h" name="Меняем статус заявки SWIFT принят"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_146d45w</bpmn:incoming><bpmn:outgoing>SequenceFlow_07zxytc</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ls2og1" name="Меняем статус заявки SWIFT принят для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=ОБработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07zxytc</bpmn:incoming><bpmn:outgoing>SequenceFlow_09vokn8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1xxar22" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_102wojw</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vmwpah</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0j9l1mf" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Обаработка:+Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vmwpah</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kr1tx4</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0ive4l3" default="SequenceFlow_0ulr8ly"><bpmn:incoming>Flow_15ldhiq</bpmn:incoming><bpmn:outgoing>SequenceFlow_0a5u4lc</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0ulr8ly</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1mvw3x7" name="Меняем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/setAttribute/hlk_Contract_Start_Date?incrementVersion=true&amp;value=${SWIFT_DOCREG_DATE}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ulr8ly</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bip9vm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1v7yhhs" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11ro7gn</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bn1q2i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1y71prg" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bn1q2i</bpmn:incoming><bpmn:outgoing>SequenceFlow_1mk7l79</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1h3imt0" name="Достаем ссылку на клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/ShortName</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="ShortName">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04b2apa</bpmn:incoming><bpmn:outgoing>SequenceFlow_0to8j4v</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0t8glgc" name="Меняем статус заявки SWIFT исполнен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_13t6kjy</bpmn:incoming><bpmn:outgoing>Flow_1qmxbwl</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_04e4sbc" name="Меняем статус заявки SWIFT отправлен для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1k2uurt</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zd426r</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0p9639w" name="Меняем статус заявки SWIFT отправлен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zd426r</bpmn:incoming><bpmn:outgoing>SequenceFlow_16ll2ec</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0p0zifm" sourceRef="ParallelGateway_0v5n1sb" targetRef="ServiceTask_1fgizlg" /><bpmn:sequenceFlow id="SequenceFlow_1jjs3ml" sourceRef="ServiceTask_1fgizlg" targetRef="ParallelGateway_021zz1s" /><bpmn:sequenceFlow id="SequenceFlow_1mk7l79" sourceRef="ServiceTask_1y71prg" targetRef="ExclusiveGateway_0pi2cy9" /><bpmn:sequenceFlow id="SequenceFlow_1k6jlii" sourceRef="ParallelGateway_0v5n1sb" targetRef="ReceiveTask_1v35bvh" /><bpmn:sequenceFlow id="SequenceFlow_0q2ig06" sourceRef="ReceiveTask_1v35bvh" targetRef="ParallelGateway_021zz1s" /><bpmn:sequenceFlow id="SequenceFlow_1o5l7ht" sourceRef="ParallelGateway_021zz1s" targetRef="ScriptTask_1kifncn" /><bpmn:sequenceFlow id="SequenceFlow_1kv6x3n" sourceRef="ParallelGateway_18f7lyn" targetRef="ReceiveTask_0p2bm5s" /><bpmn:sequenceFlow id="SequenceFlow_1jp3hxt" sourceRef="ParallelGateway_18f7lyn" targetRef="ServiceTask_14j4eau" /><bpmn:sequenceFlow id="SequenceFlow_0c8lyld" sourceRef="ReceiveTask_0p2bm5s" targetRef="ParallelGateway_0hg0q3j" /><bpmn:sequenceFlow id="SequenceFlow_0eplep9" sourceRef="ServiceTask_14j4eau" targetRef="ParallelGateway_0hg0q3j" /><bpmn:sequenceFlow id="SequenceFlow_1xmwbax" sourceRef="ParallelGateway_0hg0q3j" targetRef="ScriptTask_1rdlh83" /><bpmn:sequenceFlow id="SequenceFlow_11ro7gn" sourceRef="ServiceTask_1lyw3n7" targetRef="ServiceTask_1v7yhhs" /><bpmn:sequenceFlow id="SequenceFlow_1y70jv0" sourceRef="ParallelGateway_02fjxcg" targetRef="CallActivity_1fg4lpq" /><bpmn:sequenceFlow id="SequenceFlow_10ptmlc" sourceRef="ParallelGateway_02fjxcg" targetRef="CallActivity_0bzqib1" /><bpmn:sequenceFlow id="SequenceFlow_1pas8sm" sourceRef="CallActivity_1fg4lpq" targetRef="ParallelGateway_0wnrlq5" /><bpmn:sequenceFlow id="SequenceFlow_1odqf90" sourceRef="CallActivity_0bzqib1" targetRef="ParallelGateway_0wnrlq5" /><bpmn:sequenceFlow id="SequenceFlow_0g5kjvh" sourceRef="ParallelGateway_0wnrlq5" targetRef="ScriptTask_0noqkoz" /><bpmn:sequenceFlow id="SequenceFlow_04b2apa" sourceRef="ServiceTask_05npkcj" targetRef="ServiceTask_1h3imt0" /><bpmn:sequenceFlow id="SequenceFlow_1hplgjl" sourceRef="ServiceTask_07kcx3u" targetRef="ServiceTask_0gavquf" /><bpmn:sequenceFlow id="SequenceFlow_0z5nis4" sourceRef="ServiceTask_0gavquf" targetRef="ServiceTask_1kolnm5" /><bpmn:sequenceFlow id="SequenceFlow_1k2uurt" sourceRef="CallActivity_0ejsq65" targetRef="ServiceTask_04e4sbc" /><bpmn:sequenceFlow id="SequenceFlow_16ll2ec" sourceRef="ServiceTask_0p9639w" targetRef="ServiceTask_03fbor1" /><bpmn:sequenceFlow id="SequenceFlow_1vcjefu" sourceRef="ServiceTask_03fbor1" targetRef="ServiceTask_0edtk7z" /><bpmn:sequenceFlow id="SequenceFlow_09vokn8" sourceRef="ServiceTask_1ls2og1" targetRef="ReceiveTask_1kqv5hw" /><bpmn:sequenceFlow id="SequenceFlow_0bcc7bs" sourceRef="ServiceTask_07p05f6" targetRef="Activity_01mqzzs" /><bpmn:sequenceFlow id="SequenceFlow_1m37dmq" sourceRef="ServiceTask_03i59df" targetRef="ExclusiveGateway_1xmd5vu" /><bpmn:sequenceFlow id="SequenceFlow_1qnethi" sourceRef="ServiceTask_1s3ztd9" targetRef="ServiceTask_07kcx3u" /><bpmn:sequenceFlow id="SequenceFlow_15r9kvq" sourceRef="ExclusiveGateway_1xmd5vu" targetRef="ServiceTask_1ktgl8u" /><bpmn:sequenceFlow id="SequenceFlow_146d45w" sourceRef="ExclusiveGateway_1xmd5vu" targetRef="ServiceTask_1fpw11h"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "30"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_13t6kjy" sourceRef="ExclusiveGateway_1xmd5vu" targetRef="ServiceTask_0t8glgc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "00"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_102wojw" sourceRef="ServiceTask_1ktgl8u" targetRef="ServiceTask_1xxar22" /><bpmn:sequenceFlow id="SequenceFlow_0a5u4lc" sourceRef="ExclusiveGateway_0ive4l3" targetRef="CallActivity_0lq2to6"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${difference &lt;= 3  &amp;&amp; isHoliday != 1}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1bip9vm" sourceRef="ServiceTask_1mvw3x7" targetRef="Activity_1kzrng5" /><bpmn:sequenceFlow id="SequenceFlow_07zxytc" sourceRef="ServiceTask_1fpw11h" targetRef="ServiceTask_1ls2og1" /><bpmn:sequenceFlow id="SequenceFlow_0vmwpah" sourceRef="ServiceTask_1xxar22" targetRef="ServiceTask_0j9l1mf" /><bpmn:sequenceFlow id="SequenceFlow_0ulr8ly" sourceRef="ExclusiveGateway_0ive4l3" targetRef="ServiceTask_1mvw3x7" /><bpmn:sequenceFlow id="SequenceFlow_1bn1q2i" sourceRef="ServiceTask_1v7yhhs" targetRef="ServiceTask_1y71prg" /><bpmn:sequenceFlow id="SequenceFlow_0to8j4v" sourceRef="ServiceTask_1h3imt0" targetRef="ServiceTask_1gg7xlu" /><bpmn:sequenceFlow id="SequenceFlow_0zd426r" sourceRef="ServiceTask_04e4sbc" targetRef="ServiceTask_0p9639w" /><bpmn:sequenceFlow id="SequenceFlow_05bdry7" sourceRef="ExclusiveGateway_1jine9y" targetRef="ExclusiveGateway_0xzreng"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == "false" &amp;&amp; firstStep == "false"&amp;&amp; contractFound == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1yfanir" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pybp4t</bpmn:incoming><bpmn:outgoing>SequenceFlow_0c19gx4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0pybp4t" sourceRef="ExclusiveGateway_1jine9y" targetRef="ServiceTask_1yfanir"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1jiya69" name="Создаем заявку на изменение реквизитов счета" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "accountChng")
.prop("hlk_Account_Number" , accountNumber)
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("hlk_app_date" , regDate)
.prop("hlk_invoice_subaccount_type" , "Субсчет держателя")
.prop("hlk_account_type_holder" , "Физическое лицо")
.prop("hlk_InContract_ID_Client" , partnerId)
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1w3e54h</bpmn:incoming><bpmn:outgoing>SequenceFlow_02k4fkx</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="ParallelGateway_04zfs58"><bpmn:incoming>SequenceFlow_0c19gx4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1w3e54h</bpmn:outgoing><bpmn:outgoing>SequenceFlow_13mr6jl</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_0fktugq" name="Ожидаем сообщения о готовности к старту от подпроцесса" messageRef="Message_1ydqk79"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">accountCreated</camunda:outputParameter><camunda:outputParameter name="accountProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="accountId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="accountTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="accountType">${type}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>SequenceFlow_13mr6jl</bpmn:incoming><bpmn:outgoing>SequenceFlow_17rz1ns</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="ParallelGateway_0d1ymo1"><bpmn:incoming>SequenceFlow_02k4fkx</bpmn:incoming><bpmn:incoming>SequenceFlow_17rz1ns</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bglgip</bpmn:outgoing></bpmn:parallelGateway><bpmn:sequenceFlow id="SequenceFlow_1w3e54h" sourceRef="ParallelGateway_04zfs58" targetRef="ServiceTask_1jiya69" /><bpmn:sequenceFlow id="SequenceFlow_02k4fkx" sourceRef="ServiceTask_1jiya69" targetRef="ParallelGateway_0d1ymo1" /><bpmn:sequenceFlow id="SequenceFlow_13mr6jl" sourceRef="ParallelGateway_04zfs58" targetRef="ReceiveTask_0fktugq" /><bpmn:sequenceFlow id="SequenceFlow_17rz1ns" sourceRef="ReceiveTask_0fktugq" targetRef="ParallelGateway_0d1ymo1" /><bpmn:sequenceFlow id="SequenceFlow_0c19gx4" sourceRef="ServiceTask_1yfanir" targetRef="ParallelGateway_04zfs58" /><bpmn:sequenceFlow id="SequenceFlow_0bglgip" sourceRef="ParallelGateway_0d1ymo1" targetRef="ScriptTask_0fi6y6p" /><bpmn:callActivity id="CallActivity_0psfpif" name="Запускаем процесс регистрации счета" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_securities_account_6e551763-f964-457e-89bc-9a53378b5d7c"><bpmn:extensionElements><camunda:in sourceExpression="${accountId}" target="instanceId" /><camunda:in sourceExpression="${accountTemplateId}" target="templateId" /><camunda:in sourceExpression="${accountType}" target="type" /><camunda:in sourceExpression="${accountEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${accountEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${accountType.toLowerCase()}_${accountId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1yzosx9</bpmn:incoming><bpmn:outgoing>SequenceFlow_0k1xi9d</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="SequenceFlow_0k1xi9d" sourceRef="CallActivity_0psfpif" targetRef="ScriptTask_0k2g0xn" /><bpmn:serviceTask id="ServiceTask_1goqhd6" name="Обновляем счет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/INVOICE/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_type_account_int" , "ценнобумажный")
.prop("hlk_account_owner" , S("{}")
.prop("value",ShortNameCurrentCtpt)
.prop("primaryId",hlk_client_app)
.prop("source" , "individualPerson")
.prop("_class" , "egar.ezdoc.model.entity.attribute.DictionaryValue"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_00srm5g</bpmn:incoming><bpmn:outgoing>SequenceFlow_1msrl9w</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0a5regl" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0xe5g55</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cfog8f</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0b3xg6y" name="Достаем ссылку на клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="iin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1epm7m1</bpmn:incoming><bpmn:outgoing>SequenceFlow_00srm5g</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_1gowapv" name="Отправляем SWIFT" camunda:asyncAfter="true" calledElement="MT501Generation"><bpmn:extensionElements><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /><camunda:in variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1uhzx09</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zzegv6</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0txnha6" name="Получаем референс"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "swiftMessageEntity",
         "filter": { 
		"instanceId": "${accountId}",
		"instanceType": "BOOK"
	},
	"projection": { 
		"refId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="SWIFT_MSG_REF"><camunda:script scriptFormat="JavaScript">try {
JSON.parse(response).cursor.firstBatch[0].refId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1t8nz5o</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x3cbwy</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1di59v0" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/SWIFT_MSG_REF?incrementVersion=true&amp;value=${SWIFT_MSG_REF}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1x3cbwy</bpmn:incoming><bpmn:outgoing>SequenceFlow_10smz0u</bpmn:outgoing></bpmn:serviceTask><bpmn:receiveTask id="ReceiveTask_0fmr6lg" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_0mdztr7</bpmn:incoming><bpmn:outgoing>SequenceFlow_199ntdu</bpmn:outgoing></bpmn:receiveTask><bpmn:serviceTask id="ServiceTask_1mltjur" name="Сохраняем 539"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/attach/${swiftId}?type=BOOK&amp;instanceId=${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1wh3nec</bpmn:incoming><bpmn:outgoing>SequenceFlow_0t56ov3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1oa977j" name="Смотрим статус"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_OPERATION_STATUS</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_199ntdu</bpmn:incoming><bpmn:incoming>SequenceFlow_0h8o4e7</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wh3nec</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_14wo9pm" default="SequenceFlow_0p32r8k"><bpmn:incoming>SequenceFlow_0t56ov3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0p32r8k</bpmn:outgoing><bpmn:outgoing>SequenceFlow_068ir89</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0iagg0b</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_05q8pmm" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0p32r8k</bpmn:incoming><bpmn:outgoing>SequenceFlow_0uf42gn</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0f8d1rd"><bpmn:incoming>SequenceFlow_11821sm</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1a6uusa" name="Меняем статус заявки SWIFT принят"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=ОБработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_068ir89</bpmn:incoming><bpmn:outgoing>SequenceFlow_17cp93y</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0d15c6w" name="Меняем статус заявки SWIFT принят для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_17cp93y</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mdztr7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0es1wmo" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0uf42gn</bpmn:incoming><bpmn:outgoing>SequenceFlow_0w73z0c</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_02j2nmc" name="Меняем статус заявки SWIFT исполнен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0iagg0b</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rhva3z</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ry249t" name="Меняем статус заявки SWIFT отправлен для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zzegv6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ezuhwq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1fgomn1" name="Меняем статус заявки SWIFT отправлен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ezuhwq</bpmn:incoming><bpmn:outgoing>SequenceFlow_1t8nz5o</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_00srm5g" sourceRef="ServiceTask_0b3xg6y" targetRef="ServiceTask_1goqhd6" /><bpmn:sequenceFlow id="SequenceFlow_1t8nz5o" sourceRef="ServiceTask_1fgomn1" targetRef="ServiceTask_0txnha6" /><bpmn:sequenceFlow id="SequenceFlow_1x3cbwy" sourceRef="ServiceTask_0txnha6" targetRef="ServiceTask_1di59v0" /><bpmn:sequenceFlow id="SequenceFlow_0mdztr7" sourceRef="ServiceTask_0d15c6w" targetRef="ReceiveTask_0fmr6lg" /><bpmn:sequenceFlow id="SequenceFlow_199ntdu" sourceRef="ReceiveTask_0fmr6lg" targetRef="ServiceTask_1oa977j" /><bpmn:sequenceFlow id="SequenceFlow_1wh3nec" sourceRef="ServiceTask_1oa977j" targetRef="ServiceTask_1mltjur" /><bpmn:sequenceFlow id="SequenceFlow_0t56ov3" sourceRef="ServiceTask_1mltjur" targetRef="ExclusiveGateway_14wo9pm" /><bpmn:sequenceFlow id="SequenceFlow_0p32r8k" sourceRef="ExclusiveGateway_14wo9pm" targetRef="ServiceTask_05q8pmm" /><bpmn:sequenceFlow id="SequenceFlow_068ir89" sourceRef="ExclusiveGateway_14wo9pm" targetRef="ServiceTask_1a6uusa"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "30"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0iagg0b" sourceRef="ExclusiveGateway_14wo9pm" targetRef="ServiceTask_02j2nmc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "00"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0uf42gn" sourceRef="ServiceTask_05q8pmm" targetRef="ServiceTask_0es1wmo" /><bpmn:sequenceFlow id="SequenceFlow_17cp93y" sourceRef="ServiceTask_1a6uusa" targetRef="ServiceTask_0d15c6w" /><bpmn:sequenceFlow id="SequenceFlow_0rhva3z" sourceRef="ServiceTask_02j2nmc" targetRef="ServiceTask_0815ozt" /><bpmn:sequenceFlow id="SequenceFlow_1ezuhwq" sourceRef="ServiceTask_0ry249t" targetRef="ServiceTask_1fgomn1" /><bpmn:serviceTask id="ServiceTask_077p363" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pjibu8</bpmn:incoming><bpmn:outgoing>SequenceFlow_00n55sy</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0ka4j7h"><bpmn:incoming>SequenceFlow_00n55sy</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0kqlp5a" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0qkl7k2</bpmn:incoming><bpmn:outgoing>SequenceFlow_0pjibu8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0pjibu8" sourceRef="ServiceTask_0kqlp5a" targetRef="ServiceTask_077p363" /><bpmn:sequenceFlow id="SequenceFlow_00n55sy" sourceRef="ServiceTask_077p363" targetRef="EndEvent_0ka4j7h" /><bpmn:sequenceFlow id="SequenceFlow_1msrl9w" sourceRef="ServiceTask_1goqhd6" targetRef="Activity_19dq5c8" /><bpmn:serviceTask id="ServiceTask_0rvkrdr" name="Изменяем клиента?"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="firstStep">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_10so09e</bpmn:incoming><bpmn:outgoing>Flow_1u6i8kp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_16au14g" name="Создаем заявку на регистрацию счета" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "account")
.prop("hlk_Account_Number" , accountNumber)
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("hlk_app_date" , regDate)
.prop("hlk_invoice_subaccount_type" , "Субсчет держателя")
.prop("hlk_account_type_holder" , "Физическое лицо")
.prop("hlk_InContract_ID_Client" , partnerId)
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_09p5ifx</bpmn:incoming><bpmn:outgoing>SequenceFlow_08zl2rg</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="ParallelGateway_0ztbd54"><bpmn:incoming>SequenceFlow_0rs381p</bpmn:incoming><bpmn:outgoing>SequenceFlow_09p5ifx</bpmn:outgoing><bpmn:outgoing>SequenceFlow_07m27fc</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_10loqqo" name="Ожидаем сообщения о готовности к старту от подпроцесса" messageRef="Message_1ydqk79"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">accountCreated</camunda:outputParameter><camunda:outputParameter name="accountProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="accountId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="accountTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="accountType">${type}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07m27fc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rn8sti</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="ParallelGateway_0pcb9rb"><bpmn:incoming>SequenceFlow_08zl2rg</bpmn:incoming><bpmn:incoming>SequenceFlow_0rn8sti</bpmn:incoming><bpmn:outgoing>SequenceFlow_00ojiwx</bpmn:outgoing></bpmn:parallelGateway><bpmn:callActivity id="CallActivity_1ic3vs4" name="Запускаем процесс регистрации счета" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_securities_account_6e551763-f964-457e-89bc-9a53378b5d7c"><bpmn:extensionElements><camunda:in sourceExpression="${accountId}" target="instanceId" /><camunda:in sourceExpression="${accountTemplateId}" target="templateId" /><camunda:in sourceExpression="${accountType}" target="type" /><camunda:in sourceExpression="${accountEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${accountEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${accountType.toLowerCase()}_${accountId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kzrpct</bpmn:incoming><bpmn:outgoing>SequenceFlow_15pv35f</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0sax282" name="Создаем счет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/INVOICE/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_type_account_int" , "ценнобумажный")
.prop("hlk_account_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.prop("AccountNumber" , accountNumber)
.prop("AccountNumber" , accountNumber)
.prop("hlk_personal_account" , true)
.prop("hlk_DefaultAccount" , true)
.prop("hlk_account_external" , false)
.prop("hlk_blocked_account" , false)
.prop("hlk_account_type" , "Ценнобумажный")
.prop("hlk_account_status" , "Открыт")
.prop("hlk_clearing_system" , "АО ЦЕНТРАЛЬНЫЙ ДЕПОЗИТАРИЙ ЦЕННЫХ БУМАГ")
.prop("hlk_account_bin" , "970740000154")
.prop("hlk_accont_name_registrar_holder" ,"Halyk Finance")
.prop("hlk_account_opening_date" , acceptDate)
.prop("hlk_autostart" , true)
.prop("hlk_acc_client_id" , clientPrimaryId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0l7dlad</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f2fyea</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1l3fd12" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wfi80b</bpmn:incoming><bpmn:outgoing>SequenceFlow_05jub3p</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0vxvica" name="Достаем ссылку на клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="iin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0qabu7s</bpmn:incoming><bpmn:outgoing>SequenceFlow_0l7dlad</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_0sbgmwc" name="Отправляем SWIFT" calledElement="MT501Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0fib83c</bpmn:incoming><bpmn:outgoing>SequenceFlow_13yv42u</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1el9hq0" name="Получаем референс"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "swiftMessageEntity",
         "filter": { 
		"instanceId": "${accountId}",
		"instanceType": "BOOK"
	},
	"projection": { 
		"refId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="SWIFT_MSG_REF"><camunda:script scriptFormat="JavaScript">try {
JSON.parse(response).cursor.firstBatch[0].refId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04lahvw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1aknx8q</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_08402px" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/SWIFT_MSG_REF?incrementVersion=true&amp;value=${SWIFT_MSG_REF}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1aknx8q</bpmn:incoming><bpmn:outgoing>SequenceFlow_1irn900</bpmn:outgoing></bpmn:serviceTask><bpmn:receiveTask id="ReceiveTask_1y0rmc3" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_0bi8qt5</bpmn:incoming><bpmn:outgoing>SequenceFlow_0tbvemy</bpmn:outgoing></bpmn:receiveTask><bpmn:serviceTask id="ServiceTask_082ihp5" name="Сохраняем 539"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/attach/${swiftId}?type=BOOK&amp;instanceId=${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_05t7xqj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1apvqid</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1bt4cie" name="Смотрим статус"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_OPERATION_STATUS</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0tbvemy</bpmn:incoming><bpmn:incoming>SequenceFlow_1xbnksi</bpmn:incoming><bpmn:outgoing>SequenceFlow_05t7xqj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0auk29s" name="Меняем статус заявки на изменение счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+Заявка+исполнена.+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ctqhgb</bpmn:incoming><bpmn:incoming>SequenceFlow_1uezw0i</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wfi80b</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0q5y88q" default="SequenceFlow_095qx43"><bpmn:incoming>SequenceFlow_1apvqid</bpmn:incoming><bpmn:outgoing>SequenceFlow_095qx43</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0auz3fu</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1g5wp0p</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:callActivity id="CallActivity_1tujwnn" name="Генерируем печатные формы" calledElement="AccountOrderGeneration"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1krq3jg</bpmn:incoming><bpmn:outgoing>SequenceFlow_1codrnh</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0rrhi7p" name="Меняем статус заявки SWIFT принят"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0auz3fu</bpmn:incoming><bpmn:outgoing>SequenceFlow_0hxarv3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0lrj66x" name="Меняем статус заявки SWIFT принят для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0hxarv3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bi8qt5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1n4fpi8" name="Меняем статус заявки SWIFT исполнен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обраотка:+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1g5wp0p</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x3q1yu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_052vhtl" name="Меняем статус заявки SWIFT отправлен для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_13yv42u</bpmn:incoming><bpmn:outgoing>SequenceFlow_07p6mo4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0u5rhd9" name="Меняем статус заявки SWIFT отправлен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07p6mo4</bpmn:incoming><bpmn:outgoing>SequenceFlow_04lahvw</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1jalob6" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_19cu4ez</bpmn:incoming><bpmn:outgoing>SequenceFlow_11oqcns</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_065bz53"><bpmn:incoming>SequenceFlow_11oqcns</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_089vzfq" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07uc6x2</bpmn:incoming><bpmn:outgoing>SequenceFlow_19cu4ez</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_09p5ifx" sourceRef="ParallelGateway_0ztbd54" targetRef="ServiceTask_16au14g" /><bpmn:sequenceFlow id="SequenceFlow_08zl2rg" sourceRef="ServiceTask_16au14g" targetRef="ParallelGateway_0pcb9rb" /><bpmn:sequenceFlow id="SequenceFlow_07m27fc" sourceRef="ParallelGateway_0ztbd54" targetRef="ReceiveTask_10loqqo" /><bpmn:sequenceFlow id="SequenceFlow_0rn8sti" sourceRef="ReceiveTask_10loqqo" targetRef="ParallelGateway_0pcb9rb" /><bpmn:sequenceFlow id="SequenceFlow_00ojiwx" sourceRef="ParallelGateway_0pcb9rb" targetRef="ScriptTask_1yu80fj" /><bpmn:sequenceFlow id="SequenceFlow_15pv35f" sourceRef="CallActivity_1ic3vs4" targetRef="ScriptTask_0nogqlg" /><bpmn:sequenceFlow id="SequenceFlow_0l7dlad" sourceRef="ServiceTask_0vxvica" targetRef="ServiceTask_0sax282" /><bpmn:sequenceFlow id="SequenceFlow_1f2fyea" sourceRef="ServiceTask_0sax282" targetRef="Activity_115tvwu" /><bpmn:sequenceFlow id="SequenceFlow_0wfi80b" sourceRef="ServiceTask_0auk29s" targetRef="ServiceTask_1l3fd12" /><bpmn:sequenceFlow id="SequenceFlow_13yv42u" sourceRef="CallActivity_0sbgmwc" targetRef="ServiceTask_052vhtl" /><bpmn:sequenceFlow id="SequenceFlow_04lahvw" sourceRef="ServiceTask_0u5rhd9" targetRef="ServiceTask_1el9hq0" /><bpmn:sequenceFlow id="SequenceFlow_1aknx8q" sourceRef="ServiceTask_1el9hq0" targetRef="ServiceTask_08402px" /><bpmn:sequenceFlow id="SequenceFlow_0bi8qt5" sourceRef="ServiceTask_0lrj66x" targetRef="ReceiveTask_1y0rmc3" /><bpmn:sequenceFlow id="SequenceFlow_0tbvemy" sourceRef="ReceiveTask_1y0rmc3" targetRef="ServiceTask_1bt4cie" /><bpmn:sequenceFlow id="SequenceFlow_05t7xqj" sourceRef="ServiceTask_1bt4cie" targetRef="ServiceTask_082ihp5" /><bpmn:sequenceFlow id="SequenceFlow_1apvqid" sourceRef="ServiceTask_082ihp5" targetRef="ExclusiveGateway_0q5y88q" /><bpmn:sequenceFlow id="SequenceFlow_095qx43" sourceRef="ExclusiveGateway_0q5y88q" targetRef="ServiceTask_092z4or" /><bpmn:sequenceFlow id="SequenceFlow_0auz3fu" sourceRef="ExclusiveGateway_0q5y88q" targetRef="ServiceTask_0rrhi7p"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "30"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1g5wp0p" sourceRef="ExclusiveGateway_0q5y88q" targetRef="ServiceTask_1n4fpi8"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "00"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0hxarv3" sourceRef="ServiceTask_0rrhi7p" targetRef="ServiceTask_0lrj66x" /><bpmn:sequenceFlow id="SequenceFlow_07p6mo4" sourceRef="ServiceTask_052vhtl" targetRef="ServiceTask_0u5rhd9" /><bpmn:sequenceFlow id="SequenceFlow_19cu4ez" sourceRef="ServiceTask_089vzfq" targetRef="ServiceTask_1jalob6" /><bpmn:sequenceFlow id="SequenceFlow_11oqcns" sourceRef="ServiceTask_1jalob6" targetRef="EndEvent_065bz53" /><bpmn:sequenceFlow id="SequenceFlow_0womgra" sourceRef="ExclusiveGateway_1jine9y" targetRef="ExclusiveGateway_0wss08e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == "false" &amp;&amp; firstStep == "true" &amp;&amp; contractFound == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_11hhbwl" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0u2vk5z</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jkuekp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0jkuekp" sourceRef="ServiceTask_11hhbwl" targetRef="ExclusiveGateway_1bog2vq" /><bpmn:serviceTask id="ServiceTask_11xp1hm" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028103861</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0netshf</bpmn:incoming><bpmn:outgoing>SequenceFlow_0u2vk5z</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0u2vk5z" sourceRef="ServiceTask_11xp1hm" targetRef="ServiceTask_11hhbwl" /><bpmn:serviceTask id="ServiceTask_19e5i3t" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=100</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zo8nxp</bpmn:incoming><bpmn:outgoing>SequenceFlow_1uuxn01</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1uuxn01" sourceRef="ServiceTask_19e5i3t" targetRef="CallActivity_0ejsq65" /><bpmn:serviceTask id="ServiceTask_0fbdx9d" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=100</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1evc1eo</bpmn:incoming><bpmn:outgoing>SequenceFlow_0fib83c</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0fib83c" sourceRef="ServiceTask_0fbdx9d" targetRef="CallActivity_0sbgmwc" /><bpmn:serviceTask id="ServiceTask_045y1hy" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=400</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ecpar4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1uhzx09</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0zzegv6" sourceRef="CallActivity_1gowapv" targetRef="ServiceTask_0ry249t" /><bpmn:sequenceFlow id="SequenceFlow_1uhzx09" sourceRef="ServiceTask_045y1hy" targetRef="CallActivity_1gowapv" /><bpmn:serviceTask id="ServiceTask_0tms8y1" name="Достаем айди заявки на регистрацию"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_app_id</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="primaryId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1qxvwbg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cixofs</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_0q6b023" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="regDate"><bpmn:incoming>Flow_1yk3qri</bpmn:incoming><bpmn:incoming>Flow_10wdejs</bpmn:incoming><bpmn:outgoing>SequenceFlow_16da73b</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_1t7exr7" name="Полуаем email клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_email</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="mail">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1wrbukg</bpmn:incoming><bpmn:incoming>SequenceFlow_0ao9be0</bpmn:incoming><bpmn:outgoing>SequenceFlow_0gjti5u</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0gjti5u" sourceRef="ServiceTask_1t7exr7" targetRef="ServiceTask_10cfhl6" /><bpmn:serviceTask id="ServiceTask_0815ozt" name="Меняем статус заявки на изменение счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+исполнена.+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0rhva3z</bpmn:incoming><bpmn:outgoing>SequenceFlow_0xe5g55</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0xe5g55" sourceRef="ServiceTask_0815ozt" targetRef="ServiceTask_0a5regl" /><bpmn:sequenceFlow id="SequenceFlow_160wph2" sourceRef="ExclusiveGateway_18c03g1" targetRef="IntermediateCatchEvent_0si0sit" /><bpmn:serviceTask id="ServiceTask_1akonqf" name="Отправка в AML" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидает+ответа+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0q4jwbl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ftcx0k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0q4jwbl" sourceRef="ServiceTask_02050sn" targetRef="ServiceTask_1akonqf" /><bpmn:sequenceFlow id="SequenceFlow_0ftcx0k" sourceRef="ServiceTask_1akonqf" targetRef="IntermediateCatchEvent_0si0sit" /><bpmn:serviceTask id="ServiceTask_0ekzbla" name="Определяем есть ли у клиента активный счет в цд"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"attributes.hlk_account_owner.primaryId": "${hlk_client_app}",
"activityStatus" : "ACTIVE", 
"actual" : true,            "attributes.hlk_clearing_system.primaryId" : "5e46ac7457645400077899c7",
                "attributes.hlk_account_type" : "Ценнобумажный"
	},
	"projection": {
		"attributes.hlk_Account_Number": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12k44q8</bpmn:incoming><bpmn:outgoing>SequenceFlow_0v7ng1e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1gyqbyo" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0s91tf4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1r6eygt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1r6eygt" sourceRef="ServiceTask_1gyqbyo" targetRef="ServiceTask_1xcdx30" /><bpmn:serviceTask id="ServiceTask_0cdarrt" name="определяем primaryId клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16da73b</bpmn:incoming><bpmn:outgoing>SequenceFlow_12k44q8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_16da73b" sourceRef="ScriptTask_0q6b023" targetRef="ServiceTask_0cdarrt" /><bpmn:sequenceFlow id="SequenceFlow_12k44q8" sourceRef="ServiceTask_0cdarrt" targetRef="ServiceTask_0ekzbla" /><bpmn:serviceTask id="ServiceTask_0cefki3" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Проверка клиента" + " " + ShortName + " " + "в AML")
.prop("text","Внимание! Ошибка при проверке клиента" + " " + ShortName + " " + "по спискам AML. Проверка клиента в АМL не доступна")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07vj80d</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ecu2lj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ecu2lj" sourceRef="ServiceTask_0cefki3" targetRef="ServiceTask_0za4s1s" /><bpmn:serviceTask id="ServiceTask_1a1lg31" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Проверка клиента" + " " + ShortName + " " + "в AML")
.prop("text","Клиент" + " " + ShortName + " " + "не прошел проверку по спискам AML. Все заявки на имя клиента и операции будут заблокированы.")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1rxkst8</bpmn:incoming><bpmn:incoming>SequenceFlow_1i6qnq0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1lis9eu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1lis9eu" sourceRef="ServiceTask_1a1lg31" targetRef="ServiceTask_0w316k3" /><bpmn:serviceTask id="ServiceTask_16fw3u8" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${agreementNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0kngpwk</bpmn:incoming><bpmn:outgoing>SequenceFlow_0s91tf4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0s91tf4" sourceRef="ServiceTask_16fw3u8" targetRef="ServiceTask_1gyqbyo" /><bpmn:serviceTask id="ServiceTask_0mnjl04" name="Определяем тип договора клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"attributes.hlk_client_FL.primaryId": "${hlk_client_app}"
	},
	"projection": {
		"attributes.hlk_account_type_contract": 1,
                "attributes.hlk_account_number_contract": 1,
                "hlk_Contract_Start_Date":1
	}
}</camunda:inputParameter><camunda:outputParameter name="contractFound"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="contractType"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_account_type_contract
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="agreementNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_account_number_contract
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="registrationDate"><camunda:script scriptFormat="JavaScript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Contract_Start_Date
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0v7ng1e</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kngpwk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0v7ng1e" sourceRef="ServiceTask_0ekzbla" targetRef="ServiceTask_0mnjl04" /><bpmn:sequenceFlow id="SequenceFlow_0kngpwk" sourceRef="ServiceTask_0mnjl04" targetRef="ServiceTask_16fw3u8" /><bpmn:serviceTask id="ServiceTask_188k01z" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Открытие БС " + ShortName)
.prop("text","Внимание! БС № " + accountNumber + " на имя " + ShortName + "успешно открыт в ЦД, Договор № " + agreementNumber + " от " + regDate + "успешно зарегистрирован")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11vxblv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0uxhw34</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1u9snva" name="Отправляем уведомление клиенту"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email",mail)
.prop("subject","Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("text","Уважаемый клиент, настоящим АО «Halyk Finance» информирует об открытии на Ваше имя брокерского счета №" + " " + accountNumber + " " + "в рамках Договора брокерского обслуживания №" + " " + agreementNumber + " " + "от" + " " + regDate + ". Условия Договора и контактные данные доступны на сайте AO «Halyk Finance» https://halykfinance.kz/brokerskoe-obsluzhivanie/?lang=ru")
.prop("attachments", [generated])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0uxhw34</bpmn:incoming><bpmn:outgoing>SequenceFlow_1pswh0g</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0twem98" name="Достаем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/getAttribute/hlk_Contract_Start_Date</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="registrationDate">${response.replace("\"", "").substring(1, 11)}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_09bn3d8</bpmn:incoming><bpmn:outgoing>SequenceFlow_11vxblv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_175pd56" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Отправка уведомления об открытии БС" + accountNumber + " " + "на имя" + " " + ShortName)
.prop("text","Внимание! Уведомление об открытии БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + " " + "на e-mail:" + mail + " " + "успешно отправлено.")
.prop("attachments", [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0o4ys6q</bpmn:incoming><bpmn:outgoing>SequenceFlow_0895t1p</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0nol180" default="SequenceFlow_0or8fw7"><bpmn:incoming>SequenceFlow_1pswh0g</bpmn:incoming><bpmn:outgoing>SequenceFlow_0o4ys6q</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0or8fw7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1p58b4k" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Отправка уведомления об открытии БС № " + accountNumber + " " + "на имя ShortName")
.prop("text","Внимание! Ошибка при отправке уведомления об открытии № " + accountNumber + " на имя ShortName на e-mail:mail. Уведомление не отправлено по причине errorCode")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0or8fw7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ocs4qj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ql7bg5" name="Создаем запись в журнале почтовых уведомлений"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType", "Notification")
.prop("hlk_email", mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Успешно отправлено")
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0895t1p</bpmn:incoming><bpmn:outgoing>SequenceFlow_0brhued</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1phelq3" name="Создаем запись в журнале почтовых уведомлений"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Notification")
.prop("hlk_email" , mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Ошибка отправки." + " " + errorCode)
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ocs4qj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1jh03r1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_11vxblv" sourceRef="ServiceTask_0twem98" targetRef="ServiceTask_188k01z" /><bpmn:sequenceFlow id="SequenceFlow_0uxhw34" sourceRef="ServiceTask_188k01z" targetRef="ServiceTask_1u9snva" /><bpmn:sequenceFlow id="SequenceFlow_1pswh0g" sourceRef="ServiceTask_1u9snva" targetRef="ExclusiveGateway_0nol180" /><bpmn:sequenceFlow id="SequenceFlow_0o4ys6q" sourceRef="ExclusiveGateway_0nol180" targetRef="ServiceTask_175pd56"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${errorCode == ""}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0895t1p" sourceRef="ServiceTask_175pd56" targetRef="ServiceTask_1ql7bg5" /><bpmn:sequenceFlow id="SequenceFlow_0or8fw7" sourceRef="ExclusiveGateway_0nol180" targetRef="ServiceTask_1p58b4k" /><bpmn:sequenceFlow id="SequenceFlow_0ocs4qj" sourceRef="ServiceTask_1p58b4k" targetRef="ServiceTask_1phelq3" /><bpmn:sequenceFlow id="SequenceFlow_0brhued" sourceRef="ServiceTask_1ql7bg5" targetRef="ServiceTask_1s3ztd9" /><bpmn:sequenceFlow id="SequenceFlow_1jh03r1" sourceRef="ServiceTask_1phelq3" targetRef="ServiceTask_1s3ztd9" /><bpmn:sequenceFlow id="SequenceFlow_09bn3d8" sourceRef="CallActivity_0lq2to6" targetRef="ServiceTask_0twem98" /><bpmn:serviceTask id="ServiceTask_1lvgcch" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Открытие БС " + ShortName)
.prop("text","Внимание! БС № " + accountNumber + " на имя " + ShortName + "успешно открыт в ЦД, Договор № " + agreementNumber + " от " + regDate + "успешно зарегистрирован")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1codrnh</bpmn:incoming><bpmn:outgoing>SequenceFlow_18i6fh3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ko38y8" name="Отправляем уведомление клиенту"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email",mail)
.prop("subject","Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("text","Уважаемый клиент, настоящим АО «Halyk Finance» информирует об открытии на Ваше имя брокерского счета №" + " " + accountNumber + " " + "в рамках Договора брокерского обслуживания №" + " " + agreementNumber + " " + "от" + " " + regDate + ". Условия Договора и контактные данные доступны на сайте AO «Halyk Finance» https://halykfinance.kz/brokerskoe-obsluzhivanie/?lang=ru")
.prop("attachments", [generated])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_18i6fh3</bpmn:incoming><bpmn:outgoing>SequenceFlow_10h25v4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0yid1kk" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Отправка уведомления об открытии БС" + accountNumber + " " + "на имя" + " " + ShortName)
.prop("text","Внимание! Уведомление об открытии БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + " " + "на e-mail:" + mail + " " + "успешно отправлено.")
.prop("attachments", [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_05drymz</bpmn:incoming><bpmn:outgoing>SequenceFlow_0xftdew</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_02bzkyv" default="SequenceFlow_1mpcwhh"><bpmn:incoming>SequenceFlow_10h25v4</bpmn:incoming><bpmn:outgoing>SequenceFlow_05drymz</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1mpcwhh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0rlj89d" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Отправка уведомления об открытии БС № " + accountNumber + " " + "на имя ShortName")
.prop("text","Внимание! Ошибка при отправке уведомления об открытии № " + accountNumber + " на имя ShortName на e-mail:" + mail +". Уведомление не отправлено по причине errorCode")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1mpcwhh</bpmn:incoming><bpmn:outgoing>SequenceFlow_1j3v0r6</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0x4hk6u" name="Создаем запись в журнале почтовых уведомлений"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType", "Notification")
.prop("hlk_email", mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Успешно отправлено")
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0xftdew</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ctqhgb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1p7vjau" name="Создаем запись в журнале почтовых уведомлений"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Notification")
.prop("hlk_email" , mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Ошибка отправки." + " " + errorCode)
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1j3v0r6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1uezw0i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_18i6fh3" sourceRef="ServiceTask_1lvgcch" targetRef="ServiceTask_0ko38y8" /><bpmn:sequenceFlow id="SequenceFlow_10h25v4" sourceRef="ServiceTask_0ko38y8" targetRef="ExclusiveGateway_02bzkyv" /><bpmn:sequenceFlow id="SequenceFlow_05drymz" sourceRef="ExclusiveGateway_02bzkyv" targetRef="ServiceTask_0yid1kk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${errorCode == ""}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0xftdew" sourceRef="ServiceTask_0yid1kk" targetRef="ServiceTask_0x4hk6u" /><bpmn:sequenceFlow id="SequenceFlow_1mpcwhh" sourceRef="ExclusiveGateway_02bzkyv" targetRef="ServiceTask_0rlj89d" /><bpmn:sequenceFlow id="SequenceFlow_1j3v0r6" sourceRef="ServiceTask_0rlj89d" targetRef="ServiceTask_1p7vjau" /><bpmn:sequenceFlow id="SequenceFlow_1codrnh" sourceRef="CallActivity_1tujwnn" targetRef="ServiceTask_1lvgcch" /><bpmn:sequenceFlow id="SequenceFlow_0ctqhgb" sourceRef="ServiceTask_0x4hk6u" targetRef="ServiceTask_0auk29s" /><bpmn:sequenceFlow id="SequenceFlow_1uezw0i" sourceRef="ServiceTask_1p7vjau" targetRef="ServiceTask_0auk29s" /><bpmn:scriptTask id="ScriptTask_0nni9yl" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="acceptDate"><bpmn:incoming>SequenceFlow_05jub3p</bpmn:incoming><bpmn:outgoing>SequenceFlow_0qabu7s</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_05jub3p" sourceRef="ServiceTask_1l3fd12" targetRef="ScriptTask_0nni9yl" /><bpmn:sequenceFlow id="SequenceFlow_0qabu7s" sourceRef="ScriptTask_0nni9yl" targetRef="ServiceTask_0vxvica" /><bpmn:scriptTask id="ScriptTask_164cmj9" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="acceptDate"><bpmn:incoming>SequenceFlow_1x3q1yu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1krq3jg</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_1krq3jg" sourceRef="ScriptTask_164cmj9" targetRef="CallActivity_1tujwnn" /><bpmn:serviceTask id="ServiceTask_037ly5v" name="Создаем клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/INDIVIDUAL/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type", "1")
.prop("client_type", "ФЛ")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1d1fmr4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1o6vrcy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1d1fmr4" sourceRef="ServiceTask_1wj8abk" targetRef="ServiceTask_037ly5v" /><bpmn:sequenceFlow id="SequenceFlow_1o6vrcy" sourceRef="ServiceTask_037ly5v" targetRef="ExclusiveGateway_0av75fr" /><bpmn:serviceTask id="ServiceTask_10cfhl6" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId1"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0gjti5u</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vw78n3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0vw78n3" sourceRef="ServiceTask_10cfhl6" targetRef="ScriptTask_1f46z2l" /><bpmn:callActivity id="CallActivity_09wf7tg" name="Генерируем форму 15" camunda:asyncBefore="true" calledElement="Form15Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${instanceId}" target="instanceId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vm25t2</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kde92o</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0veat64" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Изменение реквизитов БС" + " " + ShortName)
.prop("text","Внимание! Ошибка при изменении реквизитов БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + ".  Изменение реквизитов не исполнено в ЦД по причине, ошибка SWIFT.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0kr1tx4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1csmdrw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0kr1tx4" sourceRef="ServiceTask_0j9l1mf" targetRef="ServiceTask_0veat64" /><bpmn:serviceTask id="ServiceTask_052bogv" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Изменение реквизитов БС" + " " + ShortName)
.prop("text","Внимание! Ошибка при изменении реквизитов БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + ".  Изменение реквизитов не исполнено в ЦД по причине, ошибка SWIFT.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0w73z0c</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ykw8vw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0w73z0c" sourceRef="ServiceTask_0es1wmo" targetRef="ServiceTask_052bogv" /><bpmn:serviceTask id="ServiceTask_0bp7ky9" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Изменение реквизитов БС ShortName")
.prop("text","Внимание! Изменение реквизитов БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + " " + "успешно исполнено ЦД.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cfog8f</bpmn:incoming><bpmn:outgoing>SequenceFlow_1epm7m1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1cfog8f" sourceRef="ServiceTask_0a5regl" targetRef="ServiceTask_0bp7ky9" /><bpmn:sequenceFlow id="SequenceFlow_1epm7m1" sourceRef="ServiceTask_0bp7ky9" targetRef="ServiceTask_0b3xg6y" /><bpmn:serviceTask id="ServiceTask_1ph69qx" name="определяем ФИО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_firstname&amp;systemName=hlk_lastname&amp;systemName=hlk_patronomic</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="name"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_firstname</camunda:script></camunda:outputParameter><camunda:outputParameter name="lastName"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_lastname</camunda:script></camunda:outputParameter><camunda:outputParameter name="patronomic"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_patronomic</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0cixofs</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kufeb5</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_0g4dudp" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_05wv0gm</bpmn:incoming><bpmn:outgoing>SequenceFlow_12zfduq</bpmn:outgoing><bpmn:script>lastName + " " + name + " " + patronomic</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_0pqqxqu" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortName)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12zfduq</bpmn:incoming><bpmn:incoming>SequenceFlow_0s8rib8</bpmn:incoming><bpmn:outgoing>SequenceFlow_0adwb3l</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0a5win6" default="SequenceFlow_0ez9jpo"><bpmn:incoming>SequenceFlow_0kufeb5</bpmn:incoming><bpmn:outgoing>SequenceFlow_05wv0gm</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0ez9jpo</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="ScriptTask_0479m5y" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_0ez9jpo</bpmn:incoming><bpmn:outgoing>SequenceFlow_0s8rib8</bpmn:outgoing><bpmn:script>lastName + " " + name</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0kufeb5" sourceRef="ServiceTask_1ph69qx" targetRef="ExclusiveGateway_0a5win6" /><bpmn:sequenceFlow id="SequenceFlow_05wv0gm" sourceRef="ExclusiveGateway_0a5win6" targetRef="ScriptTask_0g4dudp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${patronomic != null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_12zfduq" sourceRef="ScriptTask_0g4dudp" targetRef="ServiceTask_0pqqxqu" /><bpmn:sequenceFlow id="SequenceFlow_0s8rib8" sourceRef="ScriptTask_0479m5y" targetRef="ServiceTask_0pqqxqu" /><bpmn:sequenceFlow id="SequenceFlow_0ez9jpo" sourceRef="ExclusiveGateway_0a5win6" targetRef="ScriptTask_0479m5y" /><bpmn:sequenceFlow id="SequenceFlow_0cixofs" sourceRef="ServiceTask_0tms8y1" targetRef="ServiceTask_1ph69qx" /><bpmn:sequenceFlow id="SequenceFlow_0adwb3l" sourceRef="ServiceTask_0pqqxqu" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="ServiceTask_0100cbb" name="определяем ФИО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_firstname&amp;systemName=hlk_lastname&amp;systemName=hlk_patronomic</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="name"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_firstname</camunda:script></camunda:outputParameter><camunda:outputParameter name="lastName"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_lastname</camunda:script></camunda:outputParameter><camunda:outputParameter name="patronomic"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_patronomic</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1agu96f</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ybaaom</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_1erl10x" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_0vczluc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1m25zv7</bpmn:outgoing><bpmn:script>lastName + " " + name + " " + patronomic</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_0186p6m" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortName)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1m25zv7</bpmn:incoming><bpmn:incoming>SequenceFlow_17l7usv</bpmn:incoming><bpmn:outgoing>SequenceFlow_1u1e8r9</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_09eshn9" default="SequenceFlow_1fyjb6z"><bpmn:incoming>SequenceFlow_0ybaaom</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vczluc</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1fyjb6z</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="ScriptTask_1yxaw1p" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_1fyjb6z</bpmn:incoming><bpmn:outgoing>SequenceFlow_17l7usv</bpmn:outgoing><bpmn:script>lastName + " " + name</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0ybaaom" sourceRef="ServiceTask_0100cbb" targetRef="ExclusiveGateway_09eshn9" /><bpmn:sequenceFlow id="SequenceFlow_0vczluc" sourceRef="ExclusiveGateway_09eshn9" targetRef="ScriptTask_1erl10x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${patronomic != null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1m25zv7" sourceRef="ScriptTask_1erl10x" targetRef="ServiceTask_0186p6m" /><bpmn:sequenceFlow id="SequenceFlow_17l7usv" sourceRef="ScriptTask_1yxaw1p" targetRef="ServiceTask_0186p6m" /><bpmn:sequenceFlow id="SequenceFlow_1fyjb6z" sourceRef="ExclusiveGateway_09eshn9" targetRef="ScriptTask_1yxaw1p" /><bpmn:callActivity id="CallActivity_1sdmmyw" name="Открываем пакет счетов" calledElement="AccountPoolCreate"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1u5o7a4</bpmn:incoming><bpmn:outgoing>SequenceFlow_06d8llp</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="SequenceFlow_1u5o7a4" sourceRef="ServiceTask_1kolnm5" targetRef="CallActivity_1sdmmyw" /><bpmn:serviceTask id="ServiceTask_0of9vqe" name="Записываем результат валидации"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/verification/${instanceId}</camunda:inputParameter><camunda:inputParameter name="payload">${validationErrors}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0l8oll8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1a81nq6</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1ewuxq5" default="SequenceFlow_1i49ayq"><bpmn:incoming>SequenceFlow_1a81nq6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1i49ayq</bpmn:outgoing><bpmn:outgoing>SequenceFlow_08lhaqq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1i49ayq" sourceRef="ExclusiveGateway_1ewuxq5" targetRef="UserTask_0jx7azk" /><bpmn:sequenceFlow id="SequenceFlow_08lhaqq" sourceRef="ExclusiveGateway_1ewuxq5" targetRef="CallActivity_1r21zub"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="javascript">var verified =true;
var v = JSON.parse(validationErrors);
for (key in v) {
    verified = verified &amp;&amp; v[key].verified; 
}
verified;</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1a81nq6" sourceRef="ServiceTask_0of9vqe" targetRef="ExclusiveGateway_1ewuxq5" /><bpmn:callActivity id="CallActivity_159m7pi" name="Подпроцесс проверки" calledElement="ControlSaveIndividual"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0nqy7np</bpmn:incoming><bpmn:outgoing>SequenceFlow_11gqydc</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_1rz92au" default="SequenceFlow_1hjkxcs"><bpmn:incoming>SequenceFlow_11gqydc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hjkxcs</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0kxn5nv</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_11gqydc" sourceRef="CallActivity_159m7pi" targetRef="ExclusiveGateway_1rz92au" /><bpmn:sequenceFlow id="SequenceFlow_1hjkxcs" sourceRef="ExclusiveGateway_1rz92au" targetRef="Activity_1nwm0c2" /><bpmn:sequenceFlow id="SequenceFlow_0kxn5nv" sourceRef="ExclusiveGateway_1rz92au" targetRef="UserTask_0jx7azk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0nqy7np" sourceRef="UserTask_0jx7azk" targetRef="CallActivity_159m7pi" /><bpmn:sequenceFlow id="SequenceFlow_1i6qnq0" sourceRef="UserTask_0jq87gr" targetRef="ServiceTask_1a1lg31"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1rxkst8" sourceRef="ExclusiveGateway_18c03g1" targetRef="ServiceTask_1a1lg31"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '2'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:callActivity id="CallActivity_0kukcd3" name="Проверка ИПДЛ" calledElement="IPDLCheck"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08sf1rx</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cnmdmj</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_1bqc30f"><bpmn:incoming>SequenceFlow_1cnmdmj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1uc64nl</bpmn:outgoing><bpmn:outgoing>SequenceFlow_16drkv0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_188keyt" name="Статус заявки отклонена, Договорные отношения с ИПДЛ запрещены"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Договорные+отношения+с+клиентом+запрещены</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1uc64nl</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hxryiy</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_04foilk" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1hxryiy</bpmn:incoming><bpmn:outgoing>SequenceFlow_0xkd3ns</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0wl4skr"><bpmn:incoming>SequenceFlow_0xkd3ns</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_1cnmdmj" sourceRef="CallActivity_0kukcd3" targetRef="ExclusiveGateway_1bqc30f" /><bpmn:sequenceFlow id="SequenceFlow_1uc64nl" sourceRef="ExclusiveGateway_1bqc30f" targetRef="ServiceTask_188keyt"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${condition == "Declined"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1hxryiy" sourceRef="ServiceTask_188keyt" targetRef="ServiceTask_04foilk" /><bpmn:sequenceFlow id="SequenceFlow_0xkd3ns" sourceRef="ServiceTask_04foilk" targetRef="EndEvent_0wl4skr" /><bpmn:sequenceFlow id="SequenceFlow_16drkv0" sourceRef="ExclusiveGateway_1bqc30f" targetRef="ServiceTask_1wj8abk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${condition == "Ok" || condition == "Skip"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1xxuq56" name="Получаем аттрибуты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_gintinul&amp;systemName=hlk_signfatcaul&amp;systemName=hlk_residentusaul&amp;systemName=hlk_iin_bin&amp;systemName=hlk_residentFL&amp;systemName=hlk_typesdoc&amp;systemName=hlk_mobile_phone&amp;systemName=hlk_numberdocument</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="attributes">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0z8au25</bpmn:incoming><bpmn:outgoing>SequenceFlow_053gl1p</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_1xoo5xw" name="Проверяем правильность заполнения" scriptFormat="javascript" camunda:resultVariable="validationErrors"><bpmn:incoming>SequenceFlow_053gl1p</bpmn:incoming><bpmn:outgoing>SequenceFlow_0l8oll8</bpmn:outgoing><bpmn:script>// первые проверки
var attrs = JSON.parse(attributes);
var errors = {};


// проверки 1
if (!attrs.hlk_gintinul &amp;&amp; attrs.hlk_signfatcaul === 'FATCA' &amp;&amp; attrs.hlk_residentusaul) {
    errors.hlk_gintinul = {
        verified: false,
        decision: 'Параметр является обязательным, если выставлены Признак FATCA и Резидент США'
    };
} else {
    errors.hlk_gintinul = {
        verified: true
    }
}

if (!attrs.hlk_iin_bin &amp;&amp; (attrs.hlk_residentFL || attrs.hlk_typesdoc === 'Вид на жительство иностранца в Республике Казахстан')) {
    errors.hlk_iin_bin = {
        verified: false,
        decision: 'Обязательно к заполнению'
    };
} else {
    errors.hlk_iin_bin = {
        verified: true
    }
}

if (!attrs.hlk_numberdocument &amp;&amp; !(attrs.hlk_residentFL || attrs.hlk_typesdoc === 'Вид на жительство иностранца в Республике Казахстан')) {
    errors.hlk_numberdocument = {
        verified: false,
        decision: 'Обязательно к заполнению'
    };
} else {
    errors.hlk_numberdocument = {
        verified: true
    }
}																																														

var mobile_phone_prefix = [700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 747, 750, 751, 760, 761, 762, 763, 764, 771, 775, 776, 777, 778];

//проверки маски телефона

var flag = 0; 
for (var i = 0; i &lt; mobile_phone_prefix.length; i++) {
  if ( mobile_phone_prefix[i] == attrs.hlk_mobile_phone.substring(1,4)) {
	flag=1;
	continue;
  }
} 

if (attrs.hlk_mobile_phone &amp;&amp; attrs.hlk_mobile_phone.length &gt; 1 &amp;&amp; !flag) {
    errors.hlk_mobile_phone = {
        verified: false,
        decision: 'Код мобильного телефона не соответствует справочнику допустимых кодов'
    };
} else {
    errors.hlk_mobile_phone = {
        verified: true
    }
}

JSON.stringify(errors);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0l8oll8" sourceRef="ScriptTask_1xoo5xw" targetRef="ServiceTask_0of9vqe" /><bpmn:sequenceFlow id="SequenceFlow_053gl1p" sourceRef="ServiceTask_1xxuq56" targetRef="ScriptTask_1xoo5xw" /><bpmn:serviceTask id="ServiceTask_1soezsr" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Возврат заявки на регистрацию клиента на доработку исполнителю")
.prop("text","Заявка" + " " + ezdocObjectUrl + " " +  "возвращена исполнителю на доработку")
.prop("attachments" , [])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1isxnes</bpmn:incoming><bpmn:outgoing>SequenceFlow_1adssiv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1isxnes" sourceRef="UserTask_1l9sz6w" targetRef="ServiceTask_1soezsr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Reject'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1adssiv" sourceRef="ServiceTask_1soezsr" targetRef="ScriptTask_0m5bq8f" /><bpmn:serviceTask id="ServiceTask_00wngw9" name="определяем источник"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_source_doc</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="source">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1i9c4wm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0dq0lv3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0vh2w6m" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ykw8vw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1r7dcgf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ykw8vw" sourceRef="ServiceTask_052bogv" targetRef="ServiceTask_0vh2w6m" /><bpmn:exclusiveGateway id="ExclusiveGateway_0pb2df4" default="SequenceFlow_0rmcohn"><bpmn:incoming>SequenceFlow_1r7dcgf</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rmcohn</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1e4vdsj</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1r7dcgf" sourceRef="ServiceTask_0vh2w6m" targetRef="ExclusiveGateway_0pb2df4" /><bpmn:serviceTask id="ServiceTask_0yo7zt4" name="Устанавливаем признак вернувшейся заявки" camunda:expression="true" camunda:resultVariable="cdRejected"><bpmn:incoming>SequenceFlow_0rmcohn</bpmn:incoming><bpmn:incoming>SequenceFlow_0ff0rtk</bpmn:incoming><bpmn:outgoing>SequenceFlow_0b8jxnd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0rmcohn" sourceRef="ExclusiveGateway_0pb2df4" targetRef="ServiceTask_0yo7zt4" /><bpmn:serviceTask id="ServiceTask_1c5qb7h" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1e4vdsj</bpmn:incoming><bpmn:outgoing>SequenceFlow_11821sm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1e4vdsj" sourceRef="ExclusiveGateway_0pb2df4" targetRef="ServiceTask_1c5qb7h"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source  == "ТАУ модуль"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_11821sm" sourceRef="ServiceTask_1c5qb7h" targetRef="EndEvent_0f8d1rd" /><bpmn:sequenceFlow id="SequenceFlow_0b8jxnd" sourceRef="ServiceTask_0yo7zt4" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="ServiceTask_092z4or" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_095qx43</bpmn:incoming><bpmn:outgoing>SequenceFlow_0sz9qt5</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0vy736x"><bpmn:incoming>SequenceFlow_194ovj7</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1rcr7d1" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Обработка:+Заявка+отклонена:+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0sz9qt5</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rhzzps</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0sdkq9m" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Изменение реквизитов БС" + " " + ShortName)
.prop("text","Внимание! Ошибка при изменении реквизитов БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + ".  Изменение реквизитов не исполнено в ЦД по причине, ошибка SWIFT.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0rhzzps</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kr4xx4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ynl3uo" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kr4xx4</bpmn:incoming><bpmn:outgoing>SequenceFlow_0fjn2un</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1ljbu1w" default="SequenceFlow_1vy6jse"><bpmn:incoming>SequenceFlow_0fjn2un</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vy6jse</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0wz1gio</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1uk8evt" name="Устанавливаем признак вернувшейся заявки" camunda:expression="true" camunda:resultVariable="cdRejected"><bpmn:incoming>SequenceFlow_1vy6jse</bpmn:incoming><bpmn:incoming>SequenceFlow_1620ymh</bpmn:incoming><bpmn:outgoing>SequenceFlow_0yk840q</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1vy2hj7" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wz1gio</bpmn:incoming><bpmn:outgoing>SequenceFlow_194ovj7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0sz9qt5" sourceRef="ServiceTask_092z4or" targetRef="ServiceTask_1rcr7d1" /><bpmn:sequenceFlow id="SequenceFlow_194ovj7" sourceRef="ServiceTask_1vy2hj7" targetRef="EndEvent_0vy736x" /><bpmn:sequenceFlow id="SequenceFlow_0rhzzps" sourceRef="ServiceTask_1rcr7d1" targetRef="ServiceTask_0sdkq9m" /><bpmn:sequenceFlow id="SequenceFlow_1kr4xx4" sourceRef="ServiceTask_0sdkq9m" targetRef="ServiceTask_1ynl3uo" /><bpmn:sequenceFlow id="SequenceFlow_0fjn2un" sourceRef="ServiceTask_1ynl3uo" targetRef="ExclusiveGateway_1ljbu1w" /><bpmn:sequenceFlow id="SequenceFlow_1vy6jse" sourceRef="ExclusiveGateway_1ljbu1w" targetRef="ServiceTask_1uk8evt" /><bpmn:sequenceFlow id="SequenceFlow_0wz1gio" sourceRef="ExclusiveGateway_1ljbu1w" targetRef="ServiceTask_1vy2hj7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source  == "ТАУ модуль"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0yk840q" sourceRef="ServiceTask_1uk8evt" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="ServiceTask_046po86" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1csmdrw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dimwpl</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0a8bi0w" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dimwpl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cex2cd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1csmdrw" sourceRef="ServiceTask_0veat64" targetRef="ServiceTask_046po86" /><bpmn:sequenceFlow id="SequenceFlow_1dimwpl" sourceRef="ServiceTask_046po86" targetRef="ServiceTask_0a8bi0w" /><bpmn:exclusiveGateway id="ExclusiveGateway_0ctl8qe" default="SequenceFlow_1wqee9f"><bpmn:incoming>SequenceFlow_0cex2cd</bpmn:incoming><bpmn:outgoing>SequenceFlow_0apccsr</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1wqee9f</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0cex2cd" sourceRef="ServiceTask_0a8bi0w" targetRef="ExclusiveGateway_0ctl8qe" /><bpmn:serviceTask id="ServiceTask_0dfm2bt" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0apccsr</bpmn:incoming><bpmn:outgoing>SequenceFlow_01h7mzo</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_01h7mzo" sourceRef="ServiceTask_0dfm2bt" targetRef="EndEvent_1hzsqp3" /><bpmn:sequenceFlow id="SequenceFlow_0apccsr" sourceRef="ExclusiveGateway_0ctl8qe" targetRef="ServiceTask_0dfm2bt"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source  == "ТАУ модуль"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1sfapzb" name="Устанавливаем признак вернувшейся заявки" camunda:expression="true" camunda:resultVariable="cdRejected"><bpmn:incoming>SequenceFlow_1wqee9f</bpmn:incoming><bpmn:incoming>SequenceFlow_0jlc3ki</bpmn:incoming><bpmn:outgoing>SequenceFlow_00iijpw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1wqee9f" sourceRef="ExclusiveGateway_0ctl8qe" targetRef="ServiceTask_1sfapzb" /><bpmn:sequenceFlow id="SequenceFlow_00iijpw" sourceRef="ServiceTask_1sfapzb" targetRef="UserTask_0jx7azk" /><bpmn:exclusiveGateway id="ExclusiveGateway_0xzreng" default="SequenceFlow_1f5aynh"><bpmn:incoming>SequenceFlow_05bdry7</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f5aynh</bpmn:outgoing><bpmn:outgoing>SequenceFlow_08karps</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1f5aynh" sourceRef="ExclusiveGateway_0xzreng" targetRef="Gateway_03eysht" /><bpmn:sequenceFlow id="SequenceFlow_08karps" sourceRef="ExclusiveGateway_0xzreng" targetRef="ExclusiveGateway_0pi2cy9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="ExclusiveGateway_0wss08e" default="SequenceFlow_0kcthwt"><bpmn:incoming>SequenceFlow_0womgra</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kcthwt</bpmn:outgoing><bpmn:outgoing>SequenceFlow_04cxw1g</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0kcthwt" sourceRef="ExclusiveGateway_0wss08e" targetRef="Gateway_1bzvmag" /><bpmn:sequenceFlow id="SequenceFlow_04cxw1g" sourceRef="ExclusiveGateway_0wss08e" targetRef="ExclusiveGateway_1bog2vq"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_08f6oa9" name="Устанавливаем признак вернувшейся заявки" camunda:expression="false" camunda:resultVariable="cdRejected"><bpmn:incoming>Flow_094t39k</bpmn:incoming><bpmn:outgoing>SequenceFlow_1i9c4wm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1i9c4wm" sourceRef="ServiceTask_08f6oa9" targetRef="ServiceTask_00wngw9" /><bpmn:exclusiveGateway id="ExclusiveGateway_0pi2cy9" default="SequenceFlow_0j6ihmm"><bpmn:incoming>SequenceFlow_08karps</bpmn:incoming><bpmn:incoming>SequenceFlow_1mk7l79</bpmn:incoming><bpmn:incoming>Flow_01vrthw</bpmn:incoming><bpmn:outgoing>SequenceFlow_0j6ihmm</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0j6ihmm" sourceRef="ExclusiveGateway_0pi2cy9" targetRef="ParallelGateway_0v5n1sb" /><bpmn:exclusiveGateway id="ExclusiveGateway_1bog2vq" default="SequenceFlow_0rs381p"><bpmn:incoming>SequenceFlow_04cxw1g</bpmn:incoming><bpmn:incoming>SequenceFlow_0jkuekp</bpmn:incoming><bpmn:incoming>Flow_02xm2o0</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rs381p</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0rs381p" sourceRef="ExclusiveGateway_1bog2vq" targetRef="ParallelGateway_0ztbd54" /><bpmn:scriptTask id="ScriptTask_1kifncn" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_1o5l7ht</bpmn:incoming><bpmn:outgoing>SequenceFlow_0d32ayv</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0d32ayv" sourceRef="ScriptTask_1kifncn" targetRef="ParallelGateway_18f7lyn" /><bpmn:scriptTask id="ScriptTask_1rdlh83" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_1xmwbax</bpmn:incoming><bpmn:outgoing>SequenceFlow_0xc23lf</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0xc23lf" sourceRef="ScriptTask_1rdlh83" targetRef="ParallelGateway_02fjxcg" /><bpmn:scriptTask id="ScriptTask_0noqkoz" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0g5kjvh</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zo8nxp</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0zo8nxp" sourceRef="ScriptTask_0noqkoz" targetRef="ServiceTask_19e5i3t" /><bpmn:scriptTask id="ScriptTask_1yu80fj" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_00ojiwx</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kzrpct</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_1kzrpct" sourceRef="ScriptTask_1yu80fj" targetRef="CallActivity_1ic3vs4" /><bpmn:scriptTask id="ScriptTask_0nogqlg" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_15pv35f</bpmn:incoming><bpmn:outgoing>SequenceFlow_1evc1eo</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_1evc1eo" sourceRef="ScriptTask_0nogqlg" targetRef="ServiceTask_0fbdx9d" /><bpmn:scriptTask id="ScriptTask_0fi6y6p" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0bglgip</bpmn:incoming><bpmn:outgoing>SequenceFlow_1yzosx9</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_1yzosx9" sourceRef="ScriptTask_0fi6y6p" targetRef="CallActivity_0psfpif" /><bpmn:scriptTask id="ScriptTask_0k2g0xn" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0k1xi9d</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ecpar4</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0ecpar4" sourceRef="ScriptTask_0k2g0xn" targetRef="ServiceTask_045y1hy" /><bpmn:scriptTask id="ScriptTask_1f46z2l" name="Технический блок: Создаем буфер" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0vw78n3</bpmn:incoming><bpmn:outgoing>SequenceFlow_08kwynh</bpmn:outgoing><bpmn:script>execution.setVariable('instanceIdCopy', instanceId);
execution.setVariable('templateIdCopy', templateId)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_08kwynh" sourceRef="ScriptTask_1f46z2l" targetRef="Activity_05j45eu" /><bpmn:sequenceFlow id="SequenceFlow_1h7wcdm" sourceRef="ServiceTask_1i63v4i" targetRef="ServiceTask_1niobpj" /><bpmn:serviceTask id="ServiceTask_0li6d24" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена+сотрудником+СП</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kucjqa</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kwnahi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0kwnahi" sourceRef="ServiceTask_0li6d24" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="ServiceTask_19jbs48" name="Полуаем мобильный клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_mobile_phone</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="phone">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ll8um5</bpmn:incoming><bpmn:outgoing>SequenceFlow_0x1vfvu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0x1vfvu" sourceRef="ServiceTask_19jbs48" targetRef="ServiceTask_1rb23fy" /><bpmn:serviceTask id="ServiceTask_12m20qg" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0o8wm4n</bpmn:incoming><bpmn:outgoing>SequenceFlow_1j7jarn</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1e4iqng"><bpmn:incoming>SequenceFlow_1j7jarn</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1a4u7co" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/individual/${referenceId}/setAttribute/hlk_asset_account_open?incrementVersion=false&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_05prb86</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vq70gl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1j7jarn" sourceRef="ServiceTask_12m20qg" targetRef="EndEvent_1e4iqng" /><bpmn:sequenceFlow id="SequenceFlow_0vq70gl" sourceRef="ServiceTask_1a4u7co" targetRef="ServiceTask_18d8eps" /><bpmn:sequenceFlow id="SequenceFlow_05prb86" sourceRef="ServiceTask_1o7mlrf" targetRef="ServiceTask_1a4u7co" /><bpmn:serviceTask id="ServiceTask_0a1uhk4" name="Полуаем email клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_email</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="mail">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1v9j4g6</bpmn:incoming><bpmn:incoming>SequenceFlow_0kde92o</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ll8um5</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ll8um5" sourceRef="ServiceTask_0a1uhk4" targetRef="ServiceTask_19jbs48" /><bpmn:exclusiveGateway id="ExclusiveGateway_1sar19p" default="SequenceFlow_1v9j4g6"><bpmn:incoming>SequenceFlow_1u0ek7e</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vm25t2</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1v9j4g6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1u1e8r9" sourceRef="ServiceTask_0186p6m" targetRef="ServiceTask_0be62a4" /><bpmn:sequenceFlow id="SequenceFlow_0vm25t2" sourceRef="ExclusiveGateway_1sar19p" targetRef="CallActivity_09wf7tg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true" &amp;&amp; need2Swift == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1v9j4g6" sourceRef="ExclusiveGateway_1sar19p" targetRef="ServiceTask_0a1uhk4" /><bpmn:sequenceFlow id="SequenceFlow_0kde92o" sourceRef="CallActivity_09wf7tg" targetRef="ServiceTask_0a1uhk4" /><bpmn:serviceTask id="ServiceTask_0be62a4" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1u1e8r9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tw5tx1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_09v7zs5" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_cancelation_reason?incrementVersion=true&amp;value=${hlk_reason_close.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0tzrsap</bpmn:incoming><bpmn:outgoing>SequenceFlow_0tmisax</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0tmisax" sourceRef="ServiceTask_09v7zs5" targetRef="ServiceTask_1i63v4i" /><bpmn:serviceTask id="ServiceTask_0gha1qu" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_remake_reason?incrementVersion=true&amp;value=${hlk_reason_return.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ex0at8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kucjqa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1kucjqa" sourceRef="ServiceTask_0gha1qu" targetRef="ServiceTask_0li6d24" /><bpmn:serviceTask id="ServiceTask_16x0zvt" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0bc8kcv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jpfc1x</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0raj07w" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0jpfc1x</bpmn:incoming><bpmn:outgoing>SequenceFlow_10so09e</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0jpfc1x" sourceRef="ServiceTask_16x0zvt" targetRef="ServiceTask_0raj07w" /><bpmn:sequenceFlow id="SequenceFlow_0218dxf" sourceRef="ServiceTask_1xj4nui" targetRef="ServiceTask_1qh7olf" /><bpmn:sequenceFlow id="SequenceFlow_10so09e" sourceRef="ServiceTask_0raj07w" targetRef="ServiceTask_0rvkrdr" /><bpmn:serviceTask id="ServiceTask_1qh7olf" name="Достаем ид клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_partner_id</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="partnerId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0218dxf</bpmn:incoming><bpmn:incoming>Flow_0gr3bcp</bpmn:incoming><bpmn:outgoing>SequenceFlow_0sl60wg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0sl60wg" sourceRef="ServiceTask_1qh7olf" targetRef="ServiceTask_0d8jmme" /><bpmn:serviceTask id="ServiceTask_0d8jmme" name="Достаем ид заявки на регистрацию"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_app_id</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="appId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0sl60wg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bc8kcv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0bc8kcv" sourceRef="ServiceTask_0d8jmme" targetRef="ServiceTask_16x0zvt" /><bpmn:exclusiveGateway id="ExclusiveGateway_0446v5i" default="SequenceFlow_15hbr5a"><bpmn:incoming>SequenceFlow_0dq0lv3</bpmn:incoming><bpmn:outgoing>SequenceFlow_15hbr5a</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1dvu149</bpmn:outgoing><bpmn:outgoing>Flow_0mxo7d0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0dq0lv3" sourceRef="ServiceTask_00wngw9" targetRef="ExclusiveGateway_0446v5i" /><bpmn:sequenceFlow id="SequenceFlow_15hbr5a" sourceRef="ExclusiveGateway_0446v5i" targetRef="ServiceTask_140j9dg" /><bpmn:serviceTask id="ServiceTask_18uimad" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0uqwpc2</bpmn:incoming><bpmn:outgoing>SequenceFlow_04nynnb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1dvu149" name="ТАУ" sourceRef="ExclusiveGateway_0446v5i" targetRef="ServiceTask_1lcsx3b"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source == 'ТАУ модуль'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1x7xrmd" name="Изменяем клиента?"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="firstStep">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xet12q</bpmn:incoming><bpmn:outgoing>SequenceFlow_1mtsqvq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1hkypv3" name="Достаем айди заявки на регистрацию"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_app_id</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="primaryId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dd9f8m</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bk81ji</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_07jtxwf" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="regDate"><bpmn:incoming>SequenceFlow_1mtsqvq</bpmn:incoming><bpmn:outgoing>SequenceFlow_067fn9l</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_0bl5ovp" name="Определяем есть ли у клиента активный счет в цд"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"attributes.hlk_account_owner.primaryId": "${hlk_client_app}",
"activityStatus" : "ACTIVE", 
"actual" : true,            "attributes.hlk_clearing_system.primaryId" : "5e46ac7457645400077899c7",
                "attributes.hlk_account_type" : "Ценнобумажный"
	},
	"projection": {
		"attributes.hlk_Account_Number": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ay2krd</bpmn:incoming><bpmn:outgoing>SequenceFlow_09igvj0</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1huvnlk" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0mvo9ul</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dd9f8m</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1quc66o" name="определяем primaryId клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_067fn9l</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ay2krd</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_12c8xbb" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${agreementNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1f0p33c</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mvo9ul</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1l1qeuy" name="Определяем тип договора клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"attributes.hlk_client_FL.primaryId": "${hlk_client_app}"
	},
	"projection": {
		"attributes.hlk_account_type_contract": 1,
                "attributes.hlk_account_number_contract": 1,
                "hlk_Contract_Start_Date":1
	}
}</camunda:inputParameter><camunda:outputParameter name="contractType"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_account_type_contract
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="agreementNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_account_number_contract
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="registrationDate"><camunda:script scriptFormat="JavaScript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Contract_Start_Date
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_09igvj0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f0p33c</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1mwq52o" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1p6sz9i</bpmn:incoming><bpmn:outgoing>SequenceFlow_0smq2vk</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0dvqd4x" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0smq2vk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xet12q</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1qf7x5r" name="Достаем ид клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_partner_id</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="partnerId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1todbqc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1057kak</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_027mg5a" name="Достаем ид заявки на регистрацию"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_app_id</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="appId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1057kak</bpmn:incoming><bpmn:outgoing>SequenceFlow_1p6sz9i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1xet12q" sourceRef="ServiceTask_0dvqd4x" targetRef="ServiceTask_1x7xrmd" /><bpmn:sequenceFlow id="SequenceFlow_1mtsqvq" sourceRef="ServiceTask_1x7xrmd" targetRef="ScriptTask_07jtxwf" /><bpmn:sequenceFlow id="SequenceFlow_1dd9f8m" sourceRef="ServiceTask_1huvnlk" targetRef="ServiceTask_1hkypv3" /><bpmn:sequenceFlow id="SequenceFlow_067fn9l" sourceRef="ScriptTask_07jtxwf" targetRef="ServiceTask_1quc66o" /><bpmn:sequenceFlow id="SequenceFlow_0ay2krd" sourceRef="ServiceTask_1quc66o" targetRef="ServiceTask_0bl5ovp" /><bpmn:sequenceFlow id="SequenceFlow_09igvj0" sourceRef="ServiceTask_0bl5ovp" targetRef="ServiceTask_1l1qeuy" /><bpmn:sequenceFlow id="SequenceFlow_0mvo9ul" sourceRef="ServiceTask_12c8xbb" targetRef="ServiceTask_1huvnlk" /><bpmn:sequenceFlow id="SequenceFlow_1f0p33c" sourceRef="ServiceTask_1l1qeuy" targetRef="ServiceTask_12c8xbb" /><bpmn:sequenceFlow id="SequenceFlow_1p6sz9i" sourceRef="ServiceTask_027mg5a" targetRef="ServiceTask_1mwq52o" /><bpmn:sequenceFlow id="SequenceFlow_0smq2vk" sourceRef="ServiceTask_1mwq52o" targetRef="ServiceTask_0dvqd4x" /><bpmn:callActivity id="CallActivity_1vdaksc" name="Генерируем форму 15" camunda:asyncBefore="true" calledElement="Form15Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${instanceId}" target="instanceId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11xy1ys</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jov1e4</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_15jpy7y" name="определяем ФИО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_firstname&amp;systemName=hlk_lastname&amp;systemName=hlk_patronomic</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="name"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_firstname</camunda:script></camunda:outputParameter><camunda:outputParameter name="lastName"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_lastname</camunda:script></camunda:outputParameter><camunda:outputParameter name="patronomic"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_patronomic</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11q5m68</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jpahhj</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_124togd" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_14mv6n7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wmpg9v</bpmn:outgoing><bpmn:script>lastName + " " + name + " " + patronomic</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_1wx5e6e" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortName)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wmpg9v</bpmn:incoming><bpmn:incoming>SequenceFlow_0ia8wst</bpmn:incoming><bpmn:outgoing>SequenceFlow_14dydp4</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1a4xr5d" default="SequenceFlow_020b7zz"><bpmn:incoming>SequenceFlow_0jpahhj</bpmn:incoming><bpmn:outgoing>SequenceFlow_14mv6n7</bpmn:outgoing><bpmn:outgoing>SequenceFlow_020b7zz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="ScriptTask_1qfepgj" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>SequenceFlow_020b7zz</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ia8wst</bpmn:outgoing><bpmn:script>lastName + " " + name</bpmn:script></bpmn:scriptTask><bpmn:callActivity id="CallActivity_1513np4" name="Подпроцесс проверки" calledElement="ControlSaveIndividualTAU"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_074qbu4</bpmn:incoming><bpmn:outgoing>SequenceFlow_11q5m68</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1jwu1l9" name="Полуаем мобильный клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_mobile_phone</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="phone">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1x004xx</bpmn:incoming><bpmn:outgoing>SequenceFlow_16p9m19</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0l4ahew" name="Полуаем email клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_email</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="mail">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0jov1e4</bpmn:incoming><bpmn:incoming>SequenceFlow_0jrml78</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x004xx</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0p4a9si" default="SequenceFlow_0jrml78"><bpmn:incoming>SequenceFlow_0t7byyn</bpmn:incoming><bpmn:outgoing>SequenceFlow_11xy1ys</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0jrml78</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0nf3rp9" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14dydp4</bpmn:incoming><bpmn:outgoing>SequenceFlow_0t7byyn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_11xy1ys" sourceRef="ExclusiveGateway_0p4a9si" targetRef="CallActivity_1vdaksc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0jov1e4" sourceRef="CallActivity_1vdaksc" targetRef="ServiceTask_0l4ahew" /><bpmn:sequenceFlow id="SequenceFlow_0jpahhj" sourceRef="ServiceTask_15jpy7y" targetRef="ExclusiveGateway_1a4xr5d" /><bpmn:sequenceFlow id="SequenceFlow_14mv6n7" sourceRef="ExclusiveGateway_1a4xr5d" targetRef="ScriptTask_124togd"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${patronomic != null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0wmpg9v" sourceRef="ScriptTask_124togd" targetRef="ServiceTask_1wx5e6e" /><bpmn:sequenceFlow id="SequenceFlow_0ia8wst" sourceRef="ScriptTask_1qfepgj" targetRef="ServiceTask_1wx5e6e" /><bpmn:sequenceFlow id="SequenceFlow_14dydp4" sourceRef="ServiceTask_1wx5e6e" targetRef="ServiceTask_0nf3rp9" /><bpmn:sequenceFlow id="SequenceFlow_020b7zz" sourceRef="ExclusiveGateway_1a4xr5d" targetRef="ScriptTask_1qfepgj" /><bpmn:sequenceFlow id="SequenceFlow_11q5m68" sourceRef="CallActivity_1513np4" targetRef="ServiceTask_15jpy7y" /><bpmn:sequenceFlow id="SequenceFlow_1x004xx" sourceRef="ServiceTask_0l4ahew" targetRef="ServiceTask_1jwu1l9" /><bpmn:sequenceFlow id="SequenceFlow_0jrml78" sourceRef="ExclusiveGateway_0p4a9si" targetRef="ServiceTask_0l4ahew" /><bpmn:sequenceFlow id="SequenceFlow_0t7byyn" sourceRef="ServiceTask_0nf3rp9" targetRef="ExclusiveGateway_0p4a9si" /><bpmn:serviceTask id="ServiceTask_0tdlwtb" name="Устанавливаем признак клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_customer?incrementVersion=true&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0bk81ji</bpmn:incoming><bpmn:outgoing>SequenceFlow_0gb5cio</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_13wc4i0" name="Устанавливаем уровень учета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_Conterparty_Level?incrementVersion=true&amp;value=Полный</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0gb5cio</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tfc0l3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0emzods" name="Устанавливаем признак: &#34;Адрес проживания совпадает с адресом регистрации&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_adressmatch?incrementVersion=true&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1tfc0l3</bpmn:incoming><bpmn:outgoing>SequenceFlow_074qbu4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0gb5cio" sourceRef="ServiceTask_0tdlwtb" targetRef="ServiceTask_13wc4i0" /><bpmn:sequenceFlow id="SequenceFlow_1tfc0l3" sourceRef="ServiceTask_13wc4i0" targetRef="ServiceTask_0emzods" /><bpmn:sequenceFlow id="SequenceFlow_0bk81ji" sourceRef="ServiceTask_1hkypv3" targetRef="ServiceTask_0tdlwtb" /><bpmn:sequenceFlow id="SequenceFlow_074qbu4" sourceRef="ServiceTask_0emzods" targetRef="CallActivity_1513np4" /><bpmn:userTask id="UserTask_0lnop7f" name="Подтверждение заявки" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Cancel&#34;, &#34;label&#34;: &#34;Отклонить&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_close&#34;, &#34;label&#34;: &#34;Причина отклонения&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16p9m19</bpmn:incoming><bpmn:outgoing>SequenceFlow_03qto3o</bpmn:outgoing><bpmn:outgoing>SequenceFlow_061dwkp</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1gq9x9l" name="Статус заявки &#34;Заявка зарегистрирована&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+зарегистрирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03qto3o</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ao9be0</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1shmpv4" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена+сотрудником+СП</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0yb5qoi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1grbgcc</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_03mse90" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1grbgcc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0lq5do1</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1tsewb8"><bpmn:incoming>SequenceFlow_0lq5do1</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0als207" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_cancelation_reason?incrementVersion=true&amp;value=${hlk_reason_close}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_061dwkp</bpmn:incoming><bpmn:outgoing>SequenceFlow_0yb5qoi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_03qto3o" sourceRef="UserTask_0lnop7f" targetRef="ServiceTask_1gq9x9l"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_061dwkp" sourceRef="UserTask_0lnop7f" targetRef="ServiceTask_0als207"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0yb5qoi" sourceRef="ServiceTask_0als207" targetRef="ServiceTask_1shmpv4" /><bpmn:sequenceFlow id="SequenceFlow_1grbgcc" sourceRef="ServiceTask_1shmpv4" targetRef="ServiceTask_03mse90" /><bpmn:sequenceFlow id="SequenceFlow_0lq5do1" sourceRef="ServiceTask_03mse90" targetRef="EndEvent_1tsewb8" /><bpmn:sequenceFlow id="SequenceFlow_16p9m19" sourceRef="ServiceTask_1jwu1l9" targetRef="UserTask_0lnop7f" /><bpmn:sequenceFlow id="SequenceFlow_0ao9be0" sourceRef="ServiceTask_1gq9x9l" targetRef="ServiceTask_1t7exr7" /><bpmn:serviceTask id="ServiceTask_0jti9cn" name="Вытаскиваем поля из клиента на карточку заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${referenceId}&amp;sourceType=INDIVIDUAL&amp;override=false</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "hlk_partner_id" : "hlk_partner_id",
    "hlk_postcode" : "hlk_postcode",
    "hlk_mobile_phone":"hlk_mobile_phone",
    "hlk_SignatureSealCard" : "hlk_SignatureSealCard",
    "hlk_BankTransferDetails" : "hlk_BankTransferDetails",
    "hlk_detailsforsecurities" : "hlk_detailsforsecurities",
    "hlk_signfatcaul" : "hlk_signfatcaul",
    "hlk_reg_tau_kato_region" : "hlk_reg_tau_kato_region",
    "hlk_OffshoreZone" : "hlk_OffshoreZone",
    "hlk_residence_address_type_settlement_fl" : "hlk_residence_address_type_settlement_fl",
    "hlk_typesdoc" : "hlk_typesdoc",
    "hlk_type_organization_fatca" : "hlk_type_organization_fatca",
    "hlk_kato_residence_area_id" : "hlk_kato_residence_area_id",
    "hlk_costtt_center" : "hlk_costtt_center",
    "hlk_address_residence_district_fl" : "hlk_address_residence_district_fl",
    "hlk_firstname" : "hlk_firstname",
    "hlk_residence_address_house" : "hlk_residence_address_house",
    "hlk_regdate" : "hlk_regdate",
    "hlk_doc_first_date" : "hlk_doc_first_date",
    "hlk_dateissue" : "hlk_dateissue",
    "hlk_Conterparty_Level" : "hlk_Conterparty_Level",
    "hlk_OrderOpeningAccount" : "hlk_OrderOpeningAccount",
    "hlk_cp_tariff_plan" : "hlk_cp_tariff_plan",
    "hlk_kato_region_id" : "hlk_kato_region_id",
    "hlk_shareholder" : "hlk_shareholder",
    "hlk_tau_kato_locality" : "hlk_tau_kato_locality",
    "hlk_region_residence_address_fl" : "hlk_region_residence_address_fl",
    "hlk_SIGN_FATCA_DATE" : "hlk_SIGN_FATCA_DATE",
"hlk_numberdocument" : "hlk_numberdocument",
    "hlk_numberdocument" : "hlk_numberdocument",
    "hlk_RiskLevelAML" : "hlk_RiskLevelAML",
    "hlk_postcode_fact" : "hlk_postcode_fact",
    "hlk_residentusaul" : "hlk_residentusaul",
    "F_BirthDay" : "F_BirthDay",
    "hlk_RegAdress_Locality" : "hlk_RegAdress_Locality",
    "hlk_account_type_holder" : "hlk_account_type_holder",
    "hlk_document_expiration_date" : "hlk_document_expiration_date",
    "hlk_street" : "hlk_street",
    "hlk_kato_residence_region_id" : "hlk_kato_residence_region_id",
    "hlk_AMLCommentRiskLevel" : "hlk_AMLCommentRiskLevel",
    "hlk_NotificationMethod" : "hlk_NotificationMethod",
    "hlk_adressmatch" : "hlk_adressmatch",
    "hlk_kato_area_idid" : "hlk_kato_area_idid",
    "hlk_residentFL" : "hlk_residentFL",
    "hlk_address_residence_settlement_fl" : "hlk_address_residence_settlement_fl",
    "hlk_reg_tau_kato_district" : "hlk_reg_tau_kato_district",
    "hlk_phone" : "hlk_phone",
    "hlk_HabAdress_Area" : "hlk_HabAdress_Area",
    "hlk_address_residence_country" : "hlk_address_residence_country",
    "hlk_country_citizenship" : "hlk_country_citizenship",
    "hlk_app_id" : "hlk_app_id",
    "hlk_HabAdress_Full" : "hlk_HabAdress_Full",
    "hlk_se_id" : "hlk_se_id",
    "hlk_AML_MatchFound" : "hlk_AML_MatchFound",
    "hlk_IdentityDocumentScan" : "hlk_IdentityDocumentScan",
    "hlk_counterparty" : "hlk_counterparty",
    "hlk_regionul" : "hlk_regionul",
    "hlk_RegAdress_Full" : "hlk_RegAdress_Full",
    "hlk_profit_id" : "hlk_profit_id",
    "hlk_RegAdress_Area" : "hlk_RegAdress_Area",
    "hlk_residence_address_flat_fl" : "hlk_residence_address_flat_fl",
    "hlk_PowerAttorney" : "hlk_PowerAttorney",
    "hlk_kato_adress_locality_id" : "hlk_kato_adress_locality_id",
    "hlk_issueddocument" : "hlk_issueddocument",
    "hlk_kato_residence_locality_id" : "hlk_kato_residence_locality_id",
    "hlk_taxprivileges" : "hlk_taxprivileges",
    "hlk_date_ipdl" : "hlk_date_ipdl",
    "hlk_email" : "hlk_email",
    "hlk_QualInvestor" : "hlk_QualInvestor",
    "hlk_comment_ipdl" : "hlk_comment_ipdl",
    "hlk_PlaceOfBirth" : "hlk_PlaceOfBirth",
    "hlk_reg_tau_kato_locality" : "hlk_reg_tau_kato_locality",
    "hlk_ApplicationAccessionAgreement" : "hlk_ApplicationAccessionAgreement",
    "hlk_related_person" : "hlk_related_person",
    "hlk_locality" : "hlk_locality",
    "hlk_areaa" : "hlk_areaa",
    "hlk_isIP" : "hlk_isIP",
    "hlk_lastname" : "hlk_lastname",
    "hlk_residence_address_street_fl" : "hlk_residence_address_street_fl",
    "hlk_RegAdress_District" : "hlk_RegAdress_District",
    "hlk_regnumber" : "hlk_regnumber",
    "hlk_tau_kato_district" : "hlk_tau_kato_district",
    "hlk_gender" : "hlk_gender",
    "hlk_Placeofissue" : "hlk_Placeofissue",
    "hlk_ipdlUL" : "hlk_ipdlUL",
    "hlk_economicsector" : "hlk_economicsector",
    "hlk_patronomic" : "hlk_patronomic",
    "hlk_house" : "hlk_house",
    "hlk_HabAdress_Locality" : "hlk_HabAdress_Locality",
    "hlk_registrcountry" : "hlk_registrcountry",
    "hlk_iin_bin" : "hlk_iin_bin",
    "hlk_AMLReviewComment" : "hlk_AMLReviewComment",
    "hlk_tau_kato_region" : "hlk_tau_kato_region",
    "hlk_FATCA_participation" : "hlk_FATCA_participation",
    "hlk_typelocality" : "hlk_typelocality",
    "hlk_other_information" : "hlk_other_information",
    "hlk_customer" : "hlk_customer",
    "hlk_gintinul" : "hlk_gintinul",
    "hlk_HabAdress_District" : "hlk_HabAdress_District",
    "hlk_serialdocument" : "hlk_serialdocument",
    "hlk_officeflat" : "hlk_officeflat",
    "hlk_confidant" : "hlk_confidant"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0y8ahr9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1todbqc</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1todbqc" sourceRef="ServiceTask_0jti9cn" targetRef="ServiceTask_1qf7x5r" /><bpmn:sequenceFlow id="SequenceFlow_1057kak" sourceRef="ServiceTask_1qf7x5r" targetRef="ServiceTask_027mg5a" /><bpmn:serviceTask id="ServiceTask_0wgex8v" name="Определяем_id клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "individualPerson",
	"filter": {
		"attributes.hlk_iin_bin": "${hlk_iin_bin}",
                "activityStatus": "ACTIVE",
	},
	"projection": {
		"attributes.ShortName": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="referenceId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0]._id</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1f6q7ou</bpmn:incoming><bpmn:outgoing>SequenceFlow_0y8ahr9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pzxaqy" name="определяем hlk_iin_bin"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_iin_bin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04nynnb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f6q7ou</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_04nynnb" sourceRef="ServiceTask_18uimad" targetRef="ServiceTask_1pzxaqy" /><bpmn:sequenceFlow id="SequenceFlow_1f6q7ou" sourceRef="ServiceTask_1pzxaqy" targetRef="ServiceTask_0wgex8v" /><bpmn:sequenceFlow id="SequenceFlow_0y8ahr9" sourceRef="ServiceTask_0wgex8v" targetRef="ServiceTask_0jti9cn" /><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_0si0sit" camunda:asyncAfter="true"><bpmn:incoming>SequenceFlow_0ftcx0k</bpmn:incoming><bpmn:incoming>SequenceFlow_17j8bdt</bpmn:incoming><bpmn:incoming>SequenceFlow_160wph2</bpmn:incoming><bpmn:outgoing>SequenceFlow_1rvmjc9</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1rzkzft" signalRef="Signal_1oiy3by" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="SequenceFlow_1rvmjc9" sourceRef="IntermediateCatchEvent_0si0sit" targetRef="ServiceTask_1pkgjn3" /><bpmn:serviceTask id="ServiceTask_140j9dg" name="Статус заявки: Заполнение: Выбор клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Выбор+клиента</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_15hbr5a</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zcd1lk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0zcd1lk" sourceRef="ServiceTask_140j9dg" targetRef="Task_0micukk" /><bpmn:serviceTask id="ServiceTask_1sjy7uk" name="Статус заявки: Обработка: Клиент выбран"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Клиент+выбран</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1pdwx9a</bpmn:incoming><bpmn:outgoing>SequenceFlow_1etdiwl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1etdiwl" sourceRef="ServiceTask_1sjy7uk" targetRef="ServiceTask_1nsu2mr" /><bpmn:serviceTask id="ServiceTask_1xcdx30" name="clientPrimaryId =hlk_client_app" camunda:expression="${hlk_client_app}" camunda:resultVariable="clientPrimaryId"><bpmn:incoming>SequenceFlow_1r6eygt</bpmn:incoming><bpmn:outgoing>Flow_0hoapcf</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0x7p2qj" name="clientType=ЮЛ" camunda:expression="ФЛ" camunda:resultVariable="clientType"><bpmn:incoming>Flow_0hoapcf</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qxvwbg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1qxvwbg" sourceRef="ServiceTask_0x7p2qj" targetRef="ServiceTask_0tms8y1" /><bpmn:serviceTask id="ServiceTask_1rb23fy" name="Статус заявки: Заполнение: Подтверждение заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Подтверждение+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0x1vfvu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ekbyzi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ekbyzi" sourceRef="ServiceTask_1rb23fy" targetRef="UserTask_1l9sz6w" /><bpmn:callActivity id="CallActivity_1r21zub" name="Подпроцесс проверки ИИН" calledElement="IIN_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08lhaqq</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ybf420</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_1g3jmq5" default="SequenceFlow_1k3b41s"><bpmn:incoming>SequenceFlow_0ybf420</bpmn:incoming><bpmn:outgoing>SequenceFlow_1k3b41s</bpmn:outgoing><bpmn:outgoing>SequenceFlow_067hfqp</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:callActivity id="CallActivity_0kxj6or" name="Подпроцесс проверки Номер документа" calledElement="NumberDocument_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1k3b41s</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qdp8fh</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_091u417" default="SequenceFlow_1agu96f"><bpmn:incoming>SequenceFlow_1qdp8fh</bpmn:incoming><bpmn:outgoing>SequenceFlow_1agu96f</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0zuxdbl</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0ybf420" sourceRef="CallActivity_1r21zub" targetRef="ExclusiveGateway_1g3jmq5" /><bpmn:sequenceFlow id="SequenceFlow_1k3b41s" sourceRef="ExclusiveGateway_1g3jmq5" targetRef="CallActivity_0kxj6or" /><bpmn:sequenceFlow id="SequenceFlow_1qdp8fh" sourceRef="CallActivity_0kxj6or" targetRef="ExclusiveGateway_091u417" /><bpmn:sequenceFlow id="SequenceFlow_1agu96f" sourceRef="ExclusiveGateway_091u417" targetRef="ServiceTask_0100cbb" /><bpmn:sequenceFlow id="SequenceFlow_067hfqp" sourceRef="ExclusiveGateway_1g3jmq5" targetRef="UserTask_0jx7azk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0zuxdbl" sourceRef="ExclusiveGateway_091u417" targetRef="UserTask_0jx7azk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="TaskStatus_Creation" name="Статус заявки: Обработка: Создание"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Создание</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0f38po7</bpmn:incoming><bpmn:outgoing>Flow_094t39k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_094t39k" sourceRef="TaskStatus_Creation" targetRef="ServiceTask_08f6oa9" /><bpmn:sequenceFlow id="SequenceFlow_1x3q1yu" sourceRef="ServiceTask_1n4fpi8" targetRef="ScriptTask_164cmj9" /><bpmn:scriptTask id="ScriptTask_1ncx3ij" name="Декодируем url для отправки причины отклонения" scriptFormat="groovy" camunda:resultVariable="hlk_reason_close"><bpmn:incoming>SequenceFlow_1wx9qhm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0tzrsap</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_close = execution.getVariable("hlk_reason_close")

hlk_reason_close = java.net.URLEncoder.encode(hlk_reason_close, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0tzrsap" sourceRef="ScriptTask_1ncx3ij" targetRef="ServiceTask_09v7zs5" /><bpmn:scriptTask id="ScriptTask_0m5bq8f" name="Декодируем url для отправки причины отмены" scriptFormat="groovy" camunda:resultVariable="hlk_reason_return"><bpmn:incoming>SequenceFlow_1adssiv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ex0at8</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_return = execution.getVariable("hlk_reason_return")

hlk_reason_return = java.net.URLEncoder.encode(hlk_reason_return, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0ex0at8" sourceRef="ScriptTask_0m5bq8f" targetRef="ServiceTask_0gha1qu" /><bpmn:subProcess id="SubProcess_1k7uips"><bpmn:incoming>SequenceFlow_1pi90lh</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x2wjzw</bpmn:outgoing><bpmn:startEvent id="StartEvent_11e4hxg"><bpmn:outgoing>SequenceFlow_0eog2t6</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="ParallelGateway_0dythwy"><bpmn:incoming>SequenceFlow_0eog2t6</bpmn:incoming><bpmn:outgoing>SequenceFlow_0hgpw0w</bpmn:outgoing><bpmn:outgoing>SequenceFlow_11s6evp</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_15f3cyk" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_11s6evp</bpmn:incoming><bpmn:outgoing>SequenceFlow_14wkh58</bpmn:outgoing></bpmn:receiveTask><bpmn:userTask id="UserTask_06osuzy" name="Возврат к заполнению" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0hgpw0w</bpmn:incoming><bpmn:outgoing>SequenceFlow_0v6zlum</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_0m7axkg" name="Устанавливаем признак" camunda:expression="true" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_0v6zlum</bpmn:incoming><bpmn:outgoing>SequenceFlow_18psvvk</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0a52d4s"><bpmn:incoming>SequenceFlow_18psvvk</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0nejjhz" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_0ra80fe"><bpmn:incoming>SequenceFlow_1lnkr8n</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1kq46vl" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_00r02jf" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_14wkh58</bpmn:incoming><bpmn:outgoing>SequenceFlow_1lnkr8n</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1lnkr8n" sourceRef="ServiceTask_00r02jf" targetRef="EndEvent_0ra80fe" /><bpmn:sequenceFlow id="SequenceFlow_14wkh58" sourceRef="ReceiveTask_15f3cyk" targetRef="ServiceTask_00r02jf" /><bpmn:sequenceFlow id="SequenceFlow_18psvvk" sourceRef="ServiceTask_0m7axkg" targetRef="EndEvent_0a52d4s" /><bpmn:sequenceFlow id="SequenceFlow_0v6zlum" sourceRef="UserTask_06osuzy" targetRef="ServiceTask_0m7axkg" /><bpmn:sequenceFlow id="SequenceFlow_0hgpw0w" sourceRef="ParallelGateway_0dythwy" targetRef="UserTask_06osuzy" /><bpmn:sequenceFlow id="SequenceFlow_11s6evp" sourceRef="ParallelGateway_0dythwy" targetRef="ReceiveTask_15f3cyk" /><bpmn:sequenceFlow id="SequenceFlow_0eog2t6" sourceRef="StartEvent_11e4hxg" targetRef="ParallelGateway_0dythwy" /></bpmn:subProcess><bpmn:exclusiveGateway id="ExclusiveGateway_02sduem" default="SequenceFlow_0l5tp8d"><bpmn:incoming>SequenceFlow_1x2wjzw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f4idmn</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0l5tp8d</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1plwno4" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+FASTI.+Требует+доработки+исполнителем</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1f4idmn</bpmn:incoming><bpmn:outgoing>SequenceFlow_1crwo57</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1jibsrq" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ff2dxg</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ip4ntg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_12zbmh7" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ip4ntg</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bzd3fk</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0f110jd" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1crwo57</bpmn:incoming><bpmn:outgoing>SequenceFlow_08aos8e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_197v1uz" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08aos8e</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ff2dxg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0z40gs0" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_1bzd3fk</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jlc3ki</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1x2wjzw" sourceRef="SubProcess_1k7uips" targetRef="ExclusiveGateway_02sduem" /><bpmn:sequenceFlow id="SequenceFlow_1f4idmn" sourceRef="ExclusiveGateway_02sduem" targetRef="ServiceTask_1plwno4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1crwo57" sourceRef="ServiceTask_1plwno4" targetRef="ServiceTask_0f110jd" /><bpmn:sequenceFlow id="SequenceFlow_0ff2dxg" sourceRef="ServiceTask_197v1uz" targetRef="ServiceTask_1jibsrq" /><bpmn:sequenceFlow id="SequenceFlow_1ip4ntg" sourceRef="ServiceTask_1jibsrq" targetRef="ServiceTask_12zbmh7" /><bpmn:sequenceFlow id="SequenceFlow_1bzd3fk" sourceRef="ServiceTask_12zbmh7" targetRef="ServiceTask_0z40gs0" /><bpmn:sequenceFlow id="SequenceFlow_08aos8e" sourceRef="ServiceTask_0f110jd" targetRef="ServiceTask_197v1uz" /><bpmn:sequenceFlow id="SequenceFlow_0jlc3ki" sourceRef="ServiceTask_0z40gs0" targetRef="ServiceTask_1sfapzb" /><bpmn:sequenceFlow id="SequenceFlow_1pi90lh" sourceRef="ServiceTask_0edtk7z" targetRef="SubProcess_1k7uips" /><bpmn:subProcess id="SubProcess_0mn3jsg"><bpmn:incoming>SequenceFlow_1irn900</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ulma9e</bpmn:outgoing><bpmn:startEvent id="StartEvent_0umirjr"><bpmn:outgoing>SequenceFlow_0s0k6nu</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="ParallelGateway_1to6hyx"><bpmn:incoming>SequenceFlow_0s0k6nu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xttdd9</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0iy8n4l</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_0p5c17d" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_0iy8n4l</bpmn:incoming><bpmn:outgoing>SequenceFlow_15gl2pd</bpmn:outgoing></bpmn:receiveTask><bpmn:userTask id="UserTask_004otqh" name="Возврат к заполнению" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xttdd9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wcm2oe</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1dm3pk0" name="Устанавливаем признак" camunda:expression="true" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_1wcm2oe</bpmn:incoming><bpmn:outgoing>SequenceFlow_1klffwt</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0vvglom"><bpmn:incoming>SequenceFlow_1klffwt</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_14fzkur" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_0ogyw42"><bpmn:incoming>SequenceFlow_1r93boc</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_06nykr6" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_03mqky2" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_15gl2pd</bpmn:incoming><bpmn:outgoing>SequenceFlow_1r93boc</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1r93boc" sourceRef="ServiceTask_03mqky2" targetRef="EndEvent_0ogyw42" /><bpmn:sequenceFlow id="SequenceFlow_15gl2pd" sourceRef="ReceiveTask_0p5c17d" targetRef="ServiceTask_03mqky2" /><bpmn:sequenceFlow id="SequenceFlow_1klffwt" sourceRef="ServiceTask_1dm3pk0" targetRef="EndEvent_0vvglom" /><bpmn:sequenceFlow id="SequenceFlow_1wcm2oe" sourceRef="UserTask_004otqh" targetRef="ServiceTask_1dm3pk0" /><bpmn:sequenceFlow id="SequenceFlow_1xttdd9" sourceRef="ParallelGateway_1to6hyx" targetRef="UserTask_004otqh" /><bpmn:sequenceFlow id="SequenceFlow_0iy8n4l" sourceRef="ParallelGateway_1to6hyx" targetRef="ReceiveTask_0p5c17d" /><bpmn:sequenceFlow id="SequenceFlow_0s0k6nu" sourceRef="StartEvent_0umirjr" targetRef="ParallelGateway_1to6hyx" /></bpmn:subProcess><bpmn:exclusiveGateway id="ExclusiveGateway_01fugrf" default="SequenceFlow_1xbnksi"><bpmn:incoming>SequenceFlow_0ulma9e</bpmn:incoming><bpmn:outgoing>SequenceFlow_143xw82</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1xbnksi</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1q35grx" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+FASTI.+Требует+доработки+исполнителем</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_143xw82</bpmn:incoming><bpmn:outgoing>SequenceFlow_14grm2g</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_17wgif0" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pebwhj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y32tf8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0otx7h5" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14grm2g</bpmn:incoming><bpmn:outgoing>SequenceFlow_0pebwhj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1la28jq" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_1y32tf8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1620ymh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ulma9e" sourceRef="SubProcess_0mn3jsg" targetRef="ExclusiveGateway_01fugrf" /><bpmn:sequenceFlow id="SequenceFlow_143xw82" sourceRef="ExclusiveGateway_01fugrf" targetRef="ServiceTask_1q35grx"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_14grm2g" sourceRef="ServiceTask_1q35grx" targetRef="ServiceTask_0otx7h5" /><bpmn:sequenceFlow id="SequenceFlow_1y32tf8" sourceRef="ServiceTask_17wgif0" targetRef="ServiceTask_1la28jq" /><bpmn:sequenceFlow id="SequenceFlow_0pebwhj" sourceRef="ServiceTask_0otx7h5" targetRef="ServiceTask_17wgif0" /><bpmn:sequenceFlow id="SequenceFlow_1irn900" sourceRef="ServiceTask_08402px" targetRef="SubProcess_0mn3jsg" /><bpmn:sequenceFlow id="SequenceFlow_1xbnksi" sourceRef="ExclusiveGateway_01fugrf" targetRef="ServiceTask_1bt4cie" /><bpmn:sequenceFlow id="SequenceFlow_1620ymh" sourceRef="ServiceTask_1la28jq" targetRef="ServiceTask_1uk8evt" /><bpmn:subProcess id="SubProcess_0tj5t8t"><bpmn:incoming>SequenceFlow_10smz0u</bpmn:incoming><bpmn:outgoing>SequenceFlow_067nljc</bpmn:outgoing><bpmn:startEvent id="StartEvent_1ger9ur"><bpmn:outgoing>SequenceFlow_0avcnr3</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="ParallelGateway_17193vz"><bpmn:incoming>SequenceFlow_0avcnr3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nyq14j</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0bvnasj</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_0xe2yi4" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_12fl35m"><bpmn:incoming>SequenceFlow_0bvnasj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1fyeq9o</bpmn:outgoing></bpmn:receiveTask><bpmn:userTask id="UserTask_13p82ih" name="Возврат к заполнению" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0nyq14j</bpmn:incoming><bpmn:outgoing>SequenceFlow_0m9x734</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1w6gaz4" name="Устанавливаем признак" camunda:expression="true" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_0m9x734</bpmn:incoming><bpmn:outgoing>SequenceFlow_0n0sax1</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1azdwan"><bpmn:incoming>SequenceFlow_0n0sax1</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1fo784q" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_1dis8ic"><bpmn:incoming>SequenceFlow_0viuyhd</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0hac7uo" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0lspdhz" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_1fyeq9o</bpmn:incoming><bpmn:outgoing>SequenceFlow_0viuyhd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0viuyhd" sourceRef="ServiceTask_0lspdhz" targetRef="EndEvent_1dis8ic" /><bpmn:sequenceFlow id="SequenceFlow_1fyeq9o" sourceRef="ReceiveTask_0xe2yi4" targetRef="ServiceTask_0lspdhz" /><bpmn:sequenceFlow id="SequenceFlow_0n0sax1" sourceRef="ServiceTask_1w6gaz4" targetRef="EndEvent_1azdwan" /><bpmn:sequenceFlow id="SequenceFlow_0m9x734" sourceRef="UserTask_13p82ih" targetRef="ServiceTask_1w6gaz4" /><bpmn:sequenceFlow id="SequenceFlow_0nyq14j" sourceRef="ParallelGateway_17193vz" targetRef="UserTask_13p82ih" /><bpmn:sequenceFlow id="SequenceFlow_0bvnasj" sourceRef="ParallelGateway_17193vz" targetRef="ReceiveTask_0xe2yi4" /><bpmn:sequenceFlow id="SequenceFlow_0avcnr3" sourceRef="StartEvent_1ger9ur" targetRef="ParallelGateway_17193vz" /></bpmn:subProcess><bpmn:exclusiveGateway id="ExclusiveGateway_116ku6u" default="SequenceFlow_0h8o4e7"><bpmn:incoming>SequenceFlow_067nljc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ujb9cu</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0h8o4e7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0kbvzjn" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+FASTI.+Требует+доработки+исполнителем</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ujb9cu</bpmn:incoming><bpmn:outgoing>SequenceFlow_15bhqj1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1eqai8v" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1mj04hv</bpmn:incoming><bpmn:outgoing>SequenceFlow_1chhpi9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1duzkfm" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_15bhqj1</bpmn:incoming><bpmn:outgoing>SequenceFlow_1mj04hv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_03fwdjj" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>SequenceFlow_1chhpi9</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ff0rtk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_067nljc" sourceRef="SubProcess_0tj5t8t" targetRef="ExclusiveGateway_116ku6u" /><bpmn:sequenceFlow id="SequenceFlow_1ujb9cu" sourceRef="ExclusiveGateway_116ku6u" targetRef="ServiceTask_0kbvzjn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_15bhqj1" sourceRef="ServiceTask_0kbvzjn" targetRef="ServiceTask_1duzkfm" /><bpmn:sequenceFlow id="SequenceFlow_1chhpi9" sourceRef="ServiceTask_1eqai8v" targetRef="ServiceTask_03fwdjj" /><bpmn:sequenceFlow id="SequenceFlow_1mj04hv" sourceRef="ServiceTask_1duzkfm" targetRef="ServiceTask_1eqai8v" /><bpmn:sequenceFlow id="SequenceFlow_10smz0u" sourceRef="ServiceTask_1di59v0" targetRef="SubProcess_0tj5t8t" /><bpmn:sequenceFlow id="SequenceFlow_0h8o4e7" sourceRef="ExclusiveGateway_116ku6u" targetRef="ServiceTask_1oa977j" /><bpmn:sequenceFlow id="SequenceFlow_0ff0rtk" sourceRef="ServiceTask_03fwdjj" targetRef="ServiceTask_0yo7zt4" /><bpmn:serviceTask id="ServiceTask_0swkxlz" name="Полуаем признак необходимости генерации приказа"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_swift_creation</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="need2Swift">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0f6420s</bpmn:incoming><bpmn:outgoing>SequenceFlow_1u0ek7e</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1tw5tx1" sourceRef="ServiceTask_0be62a4" targetRef="Activity_0jo2ar8" /><bpmn:serviceTask id="Activity_1qekj2m" name="определяем ФИО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_firstname&amp;systemName=hlk_lastname&amp;systemName=hlk_patronomic</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="name"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_firstname</camunda:script></camunda:outputParameter><camunda:outputParameter name="lastName"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_lastname</camunda:script></camunda:outputParameter><camunda:outputParameter name="patronomic"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_patronomic</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_038ynge</bpmn:incoming><bpmn:outgoing>Flow_1ht7b88</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0sdidz2" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>Flow_0fnud03</bpmn:incoming><bpmn:outgoing>Flow_046su8l</bpmn:outgoing><bpmn:script>lastName + " " + name + " " + patronomic</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_003bsq0" default="Flow_0fwbsel"><bpmn:incoming>Flow_1ht7b88</bpmn:incoming><bpmn:outgoing>Flow_0fnud03</bpmn:outgoing><bpmn:outgoing>Flow_0fwbsel</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_11c53sd" name="Склеиваем ФИО" scriptFormat="javascript" camunda:resultVariable="ShortName"><bpmn:incoming>Flow_0fwbsel</bpmn:incoming><bpmn:outgoing>Flow_02uo6v3</bpmn:outgoing><bpmn:script>lastName + " " + name</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1hlrxe2" name="Получаем данные о клиенте из заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_source_doc&amp;systemName=hlk_iin_bin&amp;systemName=F_BirthDay&amp;systemName=hlk_PlaceOfBirth&amp;systemName=hlk_gender&amp;systemName=hlk_mobile_phone&amp;systemName=hlk_email&amp;systemName=hlk_typesdoc&amp;systemName=hlk_numberdocument&amp;systemName=hlk_dateissue&amp;systemName=hlk_document_expiration_date&amp;systemName=hlk_issueddocument&amp;systemName=hlk_reg_mp_kato_region&amp;getValue=hlk_reg_mp_kato_region&amp;systemName=hlk_reg_mp_kato_district&amp;getValue=hlk_reg_mp_kato_district&amp;systemName=hlk_street&amp;systemName=hlk_house&amp;systemName=hlk_officeflat&amp;systemName=hlk_registrcountry_digitcode&amp;getValue=hlk_registrcountry_digitcode&amp;systemName=hlk_country_citizenship_digitcode&amp;getValue=hlk_country_citizenship_digitcode</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="hlk_iin_bin">${S(response).prop('hlk_iin_bin').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_mobile_phone">${S(response).prop('hlk_mobile_phone').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_typesdoc">${S(response).prop('hlk_typesdoc').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_numberdocument">${S(response).prop('hlk_numberdocument').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_issueddocument">${S(response).prop('hlk_issueddocument').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_source_doc">${S(response).prop('hlk_source_doc').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_street"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).hlk_street;
}
catch(e)
{
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_house"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).hlk_house;
}
catch(e)
{
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_officeflat"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).hlk_officeflat;
}
catch(e)
{
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_PlaceOfBirth"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).hlk_PlaceOfBirth;
}
catch(e)
{
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="F_BirthDay">${S(response).prop('F_BirthDay').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_dateissue">${S(response).prop('hlk_dateissue').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_document_expiration_date">${S(response).prop('hlk_document_expiration_date').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_reg_mp_kato_region">${S(response).prop('hlk_reg_mp_kato_region').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_registrcountry_digitcode">${S(response).prop('hlk_registrcountry_digitcode').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_country_citizenship_digitcode">${S(response).prop('hlk_country_citizenship_digitcode').stringValue()}</camunda:outputParameter><camunda:outputParameter name="hlk_reg_mp_kato_district">${S(response).prop('hlk_reg_mp_kato_district').stringValue()}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_180m30c</bpmn:incoming><bpmn:outgoing>Flow_0fpp62w</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_05hyoii"><bpmn:incoming>Flow_046su8l</bpmn:incoming><bpmn:incoming>Flow_02uo6v3</bpmn:incoming><bpmn:outgoing>Flow_180m30c</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0m06sbg" name="Отправляем уведомление на uao@halykfinance.kz"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{"email":"sales@halykfinance.kz,"subject":"Заявка на регистрацию ФЛ через МП отклонена в связи с дублированием ИНН клиента", "text":"Заявка на регистрацию ФЛ через МП отклонена автоматически в связи с тем, что клиент с таким ИИН уже есть в системе.\n Данные о клиенте ФЛ, поступившие для регистрации через МП:\n Источник заявки: ${hlk_source_doc},\n ФИО: ${ShortName},\n ИИН: ${hlk_iin_bin},\n Дата рождения: ${F_BirthDay},\n Место рождения: ${hlk_PlaceOfBirth},\n Номер моб.тел: ${hlk_mobile_phone},\n Тип документа: ${hlk_typesdoc},\n Номер документа: ${hlk_numberdocument},\n Дата выдачи документа: ${hlk_dateissue}, \n Дата истечения срока действия документа: ${hlk_document_expiration_date}, \n Орган, выдавший документ: ${hlk_issueddocument}, \n Код КАТО области регистрации: ${hlk_reg_mp_kato_region}, \n Код КАТО района регистрации: ${hlk_reg_mp_kato_district}, \n Улица: ${hlk_street},\n Дом: ${hlk_house},\n Квартира: ${hlk_officeflat},\n Код страны регистрации: ${hlk_registrcountry_digitcode},\n Код страны гражданства: ${hlk_country_citizenship_digitcode}"}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0fpp62w</bpmn:incoming><bpmn:outgoing>Flow_0ysxihe</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ht7b88" sourceRef="Activity_1qekj2m" targetRef="Gateway_003bsq0" /><bpmn:sequenceFlow id="Flow_0fnud03" sourceRef="Gateway_003bsq0" targetRef="Activity_0sdidz2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${patronomic != null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0fwbsel" sourceRef="Gateway_003bsq0" targetRef="Activity_11c53sd" /><bpmn:sequenceFlow id="Flow_02uo6v3" sourceRef="Activity_11c53sd" targetRef="Gateway_05hyoii" /><bpmn:sequenceFlow id="Flow_180m30c" sourceRef="Gateway_05hyoii" targetRef="Activity_1hlrxe2" /><bpmn:sequenceFlow id="Flow_0ysxihe" sourceRef="Activity_0m06sbg" targetRef="Activity_0knaynm" /><bpmn:sequenceFlow id="Flow_0mxo7d0" name="МП + anonymousUser" sourceRef="ExclusiveGateway_0446v5i" targetRef="Activity_1f46lsg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source == 'Мобильное приложение' &amp;&amp; initiator == 'anonymousUser'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1qqonj9" name="Статус заявки: Дублирование ИИН при регистрации через МП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Дублирование+ИИН+при+регистрации+через+МП.</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vuz33m</bpmn:incoming><bpmn:outgoing>Flow_1nbr39z</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1nbr39z" sourceRef="Activity_1qqonj9" targetRef="Activity_0vp7pl1" /><bpmn:sequenceFlow id="Flow_0fpp62w" sourceRef="Activity_1hlrxe2" targetRef="Activity_0m06sbg" /><bpmn:serviceTask id="ServiceTask_1lcsx3b" name="Полуаем признак необходимости генерации приказа"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_swift_creation</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="need2Swift">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dvu149</bpmn:incoming><bpmn:outgoing>SequenceFlow_0uqwpc2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0uqwpc2" sourceRef="ServiceTask_1lcsx3b" targetRef="ServiceTask_18uimad" /><bpmn:serviceTask id="Activity_0knaynm" name="Отправляем уведомление на dris@halykfinance.kz"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{"email":"dris@halykfinance.kz","subject":"Заявка на регистрацию ФЛ через МП отклонена в связи с дублированием ИНН клиента", "text":"Заявка на регистрацию ФЛ через МП отклонена автоматически в связи с тем, что клиент с таким ИИН уже есть в системе.\n Данные о клиенте ФЛ, поступившие для регистрации через МП:\n Источник заявки: ${hlk_source_doc},\n ФИО: ${ShortName},\n ИИН: ${hlk_iin_bin},\n Дата рождения: ${F_BirthDay},\n Место рождения: ${hlk_PlaceOfBirth},\n Номер моб.тел: ${hlk_mobile_phone},\n Тип документа: ${hlk_typesdoc},\n Номер документа: ${hlk_numberdocument},\n Дата выдачи документа: ${hlk_dateissue}, \n Дата истечения срока действия документа: ${hlk_document_expiration_date}, \n Орган, выдавший документ: ${hlk_issueddocument}, \n Код КАТО области регистрации: ${hlk_reg_mp_kato_region}, \n Код КАТО района регистрации: ${hlk_reg_mp_kato_district}, \n Улица: ${hlk_street},\n Дом: ${hlk_house},\n Квартира: ${hlk_officeflat},\n Код страны регистрации: ${hlk_registrcountry_digitcode},\n Код страны гражданства: ${hlk_country_citizenship_digitcode}"}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ysxihe</bpmn:incoming><bpmn:outgoing>Flow_1cmkaag</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1cmkaag" sourceRef="Activity_0knaynm" targetRef="ServiceTask_13wg68l" /><bpmn:serviceTask id="ServiceTask_04flx4m" name="definition of &#34;key&#34;" camunda:expression="individual" camunda:resultVariable="key"><bpmn:incoming>SequenceFlow_1wwfrdc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0f38po7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0f38po7" sourceRef="ServiceTask_04flx4m" targetRef="TaskStatus_Creation" /><bpmn:sequenceFlow id="Flow_046su8l" sourceRef="Activity_0sdidz2" targetRef="Gateway_05hyoii" /><bpmn:serviceTask id="Activity_0da96vf" name="Устанавливаем уровень учета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_Conterparty_Level?incrementVersion=true&amp;value=Полный</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0u53psh</bpmn:incoming><bpmn:outgoing>Flow_0m6agqj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0jayo81" name="Устанавливаем признак: &#34;Адрес проживания совпадает с адресом регистрации&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_adressmatch?incrementVersion=true&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0m6agqj</bpmn:incoming><bpmn:outgoing>Flow_1insx2i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1mh1lp4" name="Способ получения уведомления = Торговая платформа"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_NotificationMethod?incrementVersion=true&amp;value=Торговая+платформа</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1insx2i</bpmn:incoming><bpmn:outgoing>Flow_138htgp</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="Activity_0z5w5uz" name="Подпроцесс проверки МП" calledElement="ControlSaveIndividualMP"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>Flow_0wxgg3v</bpmn:incoming><bpmn:incoming>Flow_0sdvoh8</bpmn:incoming><bpmn:outgoing>Flow_038ynge</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="Flow_0m6agqj" sourceRef="Activity_0da96vf" targetRef="Activity_0jayo81" /><bpmn:sequenceFlow id="Flow_1insx2i" sourceRef="Activity_0jayo81" targetRef="Activity_1mh1lp4" /><bpmn:sequenceFlow id="Flow_038ynge" sourceRef="Activity_0z5w5uz" targetRef="Activity_1qekj2m" /><bpmn:scriptTask id="Activity_1q67u83" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="regDate"><bpmn:incoming>Flow_0t60ctu</bpmn:incoming><bpmn:outgoing>Flow_0u53psh</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1f46lsg" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=100</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0mxo7d0</bpmn:incoming><bpmn:outgoing>Flow_1ylw3yq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0j0oqqk" name="clientPrimaryId =0" camunda:expression="0" camunda:resultVariable="clientPrimaryId"><bpmn:incoming>Flow_1ylw3yq</bpmn:incoming><bpmn:outgoing>Flow_1l2g8qn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1gvcega" name="clientPrimaryId =0" camunda:expression="ФЛ" camunda:resultVariable="clientType"><bpmn:incoming>Flow_1l2g8qn</bpmn:incoming><bpmn:outgoing>Flow_0t60ctu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0t60ctu" sourceRef="Activity_1gvcega" targetRef="Activity_1q67u83" /><bpmn:sequenceFlow id="Flow_1ylw3yq" sourceRef="Activity_1f46lsg" targetRef="Activity_0j0oqqk" /><bpmn:sequenceFlow id="Flow_1l2g8qn" sourceRef="Activity_0j0oqqk" targetRef="Activity_1gvcega" /><bpmn:sequenceFlow id="Flow_0u53psh" sourceRef="Activity_1q67u83" targetRef="Activity_0da96vf" /><bpmn:serviceTask id="Activity_1rmq14d" name="Получаем инстанс айди существующего клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getRefId/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="referenceId">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18pqbx9</bpmn:incoming><bpmn:outgoing>Flow_1imp0dm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1imp0dm" sourceRef="Activity_1rmq14d" targetRef="Activity_0no6cx7" /><bpmn:serviceTask id="Activity_0vp7pl1" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nbr39z</bpmn:incoming><bpmn:outgoing>Flow_18pqbx9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_18pqbx9" sourceRef="Activity_0vp7pl1" targetRef="Activity_1rmq14d" /><bpmn:serviceTask id="Activity_1irdey4" name="Вытаскиваем поля из клиента на  незаполненные поля заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${referenceId}&amp;sourceType=INDIVIDUAL&amp;override=false</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_customer" : "hlk_customer",
"hlk_partner_id" : "hlk_partner_id",
"hlk_postcode" : "hlk_postcode",
"hlk_mobile_phone":"hlk_mobile_phone",
"hlk_SignatureSealCard" : "hlk_SignatureSealCard",
"hlk_BankTransferDetails" : "hlk_BankTransferDetails",
"hlk_detailsforsecurities" : "hlk_detailsforsecurities",
"hlk_signfatcaul" : "hlk_signfatcaul",
"hlk_reg_tau_kato_region" : "hlk_reg_tau_kato_region",
"hlk_OffshoreZone" : "hlk_OffshoreZone",
"hlk_residence_address_type_settlement_fl" : "hlk_residence_address_type_settlement_fl",
"hlk_typesdoc" : "hlk_typesdoc",
"hlk_type_organization_fatca" : "hlk_type_organization_fatca",
"hlk_costtt_center" : "hlk_costtt_center",
"hlk_firstname" : "hlk_firstname",
"hlk_residence_address_house" : "hlk_residence_address_house",
"hlk_regdate" : "hlk_regdate",
"hlk_doc_first_date" : "hlk_doc_first_date",
"hlk_dateissue" : "hlk_dateissue",
"hlk_Conterparty_Level" : "hlk_Conterparty_Level",
"hlk_OrderOpeningAccount" : "hlk_OrderOpeningAccount",
"hlk_cp_tariff_plan" : "hlk_cp_tariff_plan",
"hlk_kato_region_id" : "hlk_kato_region_id",
"hlk_shareholder" : "hlk_shareholder",
"hlk_tau_kato_locality" : "hlk_tau_kato_locality",
"hlk_region_residence_address_fl" : "hlk_region_residence_address_fl",
"hlk_SIGN_FATCA_DATE" : "hlk_SIGN_FATCA_DATE",
"hlk_numberdocument" : "hlk_numberdocument",
"hlk_numberdocument" : "hlk_numberdocument",
"hlk_RiskLevelAML" : "hlk_RiskLevelAML",
"hlk_postcode_fact" : "hlk_postcode_fact",
"hlk_residentusaul" : "hlk_residentusaul",
"F_BirthDay" : "F_BirthDay",
"hlk_RegAdress_Locality" : "hlk_RegAdress_Locality",
"hlk_account_type_holder" : "hlk_account_type_holder",
"hlk_document_expiration_date" : "hlk_document_expiration_date",
"hlk_street" : "hlk_street",
"hlk_kato_residence_region_id" : "hlk_kato_residence_region_id",
"hlk_AMLCommentRiskLevel" : "hlk_AMLCommentRiskLevel",
"hlk_NotificationMethod" : "hlk_NotificationMethod",
"hlk_adressmatch" : "hlk_adressmatch",
"hlk_residentFL" : "hlk_residentFL",
"hlk_reg_tau_kato_district" : "hlk_reg_tau_kato_district",
"hlk_phone" : "hlk_phone",
"hlk_HabAdress_Area" : "hlk_HabAdress_Area",
"hlk_address_residence_country" : "hlk_address_residence_country",
"hlk_country_citizenship" : "hlk_country_citizenship",
"hlk_app_id" : "hlk_app_id",
"hlk_HabAdress_Full" : "hlk_HabAdress_Full",
"hlk_se_id" : "hlk_se_id",
"hlk_AML_MatchFound" : "hlk_AML_MatchFound",
"hlk_IdentityDocumentScan" : "hlk_IdentityDocumentScan",
"hlk_counterparty" : "hlk_counterparty",
"hlk_regionul" : "hlk_regionul",
"hlk_RegAdress_Full" : "hlk_RegAdress_Full",
"hlk_profit_id" : "hlk_profit_id",
"hlk_RegAdress_Area" : "hlk_RegAdress_Area",
"hlk_residence_address_flat_fl" : "hlk_residence_address_flat_fl",
"hlk_PowerAttorney" : "hlk_PowerAttorney",
"hlk_issueddocument" : "hlk_issueddocument",
"hlk_taxprivileges" : "hlk_taxprivileges",
"hlk_date_ipdl" : "hlk_date_ipdl",
"hlk_email" : "hlk_email",
"hlk_QualInvestor" : "hlk_QualInvestor",
"hlk_comment_ipdl" : "hlk_comment_ipdl",
"hlk_PlaceOfBirth" : "hlk_PlaceOfBirth",
"hlk_reg_tau_kato_locality" : "hlk_reg_tau_kato_locality",
"hlk_ApplicationAccessionAgreement" : "hlk_ApplicationAccessionAgreement",
"hlk_related_person" : "hlk_related_person",
"hlk_isIP" : "hlk_isIP",
"hlk_lastname" : "hlk_lastname",
"hlk_residence_address_street_fl" : "hlk_residence_address_street_fl",
"hlk_RegAdress_District" : "hlk_RegAdress_District",
"hlk_regnumber" : "hlk_regnumber",
"hlk_tau_kato_district" : "hlk_tau_kato_district",
"hlk_gender" : "hlk_gender",
"hlk_Placeofissue" : "hlk_Placeofissue",
"hlk_ipdlUL" : "hlk_ipdlUL",
"hlk_economicsector" : "hlk_economicsector",
"hlk_patronomic" : "hlk_patronomic",
"hlk_house" : "hlk_house",
"hlk_HabAdress_Locality" : "hlk_HabAdress_Locality",
"hlk_registrcountry" : "hlk_registrcountry",
"hlk_iin_bin" : "hlk_iin_bin",
"hlk_AMLReviewComment" : "hlk_AMLReviewComment",
"hlk_tau_kato_region" : "hlk_tau_kato_region",
"hlk_FATCA_participation" : "hlk_FATCA_participation",
"hlk_typelocality" : "hlk_typelocality",
"hlk_other_information" : "hlk_other_information",
"hlk_customer" : "hlk_customer",
"hlk_gintinul" : "hlk_gintinul",
"hlk_HabAdress_District" : "hlk_HabAdress_District",
"hlk_serialdocument" : "hlk_serialdocument",
"hlk_officeflat" : "hlk_officeflat",
"hlk_confidant" : "hlk_confidant"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1gpm9or</bpmn:incoming><bpmn:outgoing>Flow_0gr3bcp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0gr3bcp" sourceRef="Activity_1irdey4" targetRef="ServiceTask_1qh7olf" /><bpmn:serviceTask id="Activity_0no6cx7" name="Переносим поле hlk_partner_id из клиента на заявку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${referenceId}&amp;sourceType=INDIVIDUAL&amp;override=true</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "hlk_partner_id" : "hlk_partner_id"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1imp0dm</bpmn:incoming><bpmn:outgoing>Flow_1gpm9or</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1gpm9or" sourceRef="Activity_0no6cx7" targetRef="Activity_1irdey4" /><bpmn:sequenceFlow id="Flow_138htgp" sourceRef="Activity_1mh1lp4" targetRef="Activity_13zyjqj" /><bpmn:callActivity id="Activity_1nwm0c2" name="Подпроцесс проверки кодов KATO" calledElement="ControlKATO"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1hjkxcs</bpmn:incoming><bpmn:outgoing>Flow_1kpdunk</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="Flow_1kpdunk" sourceRef="Activity_1nwm0c2" targetRef="Gateway_0uslca1" /><bpmn:exclusiveGateway id="Gateway_0uslca1" default="Flow_0z8au25"><bpmn:incoming>Flow_1kpdunk</bpmn:incoming><bpmn:outgoing>Flow_0z8au25</bpmn:outgoing><bpmn:outgoing>Flow_0h3ls6n</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0z8au25" sourceRef="Gateway_0uslca1" targetRef="ServiceTask_1xxuq56" /><bpmn:sequenceFlow id="Flow_0h3ls6n" sourceRef="Gateway_0uslca1" targetRef="Activity_1gxoy9s"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${KATO_Error == '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1gxoy9s" name="Статус заявки: Ошибка подчиненности кодов КАТО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+подчиненности+кодов+КАТО</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0h3ls6n</bpmn:incoming><bpmn:outgoing>Flow_0z3sbly</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0z3sbly" sourceRef="Activity_1gxoy9s" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="Activity_13zyjqj" name="определяем hlk_kato_adress_locality_m"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_kato_adress_locality_m</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_kato_adress_locality_m"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_kato_adress_locality_m</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_138htgp</bpmn:incoming><bpmn:outgoing>Flow_1mus3pe</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1mus3pe" sourceRef="Activity_13zyjqj" targetRef="Gateway_13o08l5" /><bpmn:serviceTask id="Activity_1ga6bkj" name="hlk_kato_adress_locality_m=0"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_kato_adress_locality_m?incrementVersion=false&amp;value=0</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1k8ssg1</bpmn:incoming><bpmn:outgoing>Flow_0sdvoh8</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_13o08l5" default="Flow_1k8ssg1"><bpmn:incoming>Flow_1mus3pe</bpmn:incoming><bpmn:outgoing>Flow_0wxgg3v</bpmn:outgoing><bpmn:outgoing>Flow_1k8ssg1</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0wxgg3v" sourceRef="Gateway_13o08l5" targetRef="Activity_0z5w5uz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_kato_adress_locality_m != null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1k8ssg1" sourceRef="Gateway_13o08l5" targetRef="Activity_1ga6bkj" /><bpmn:sequenceFlow id="Flow_0sdvoh8" sourceRef="Activity_1ga6bkj" targetRef="Activity_0z5w5uz" /><bpmn:sequenceFlow id="SequenceFlow_1wwfrdc" sourceRef="Task_19guune" targetRef="ServiceTask_04flx4m" /><bpmn:serviceTask id="Task_19guune" name="устанавливаем признак обновления клиента" camunda:expression="${execution.setVariable(&#39;clientUpdated&#39;, false)}"><bpmn:incoming>Flow_1qc6zvx</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wwfrdc</bpmn:outgoing></bpmn:serviceTask><bpmn:subProcess id="SubProcess_0ht6sg5"><bpmn:incoming>SequenceFlow_103x44z</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zyqfn4</bpmn:outgoing><bpmn:startEvent id="StartEvent_0aay0di"><bpmn:outgoing>SequenceFlow_1e2z9u8</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="ParallelGateway_07p55eb"><bpmn:incoming>SequenceFlow_1e2z9u8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ltrom5</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0o57cco</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_1kxivxq"><bpmn:incoming>SequenceFlow_1ltrom5</bpmn:incoming><bpmn:outgoing>SequenceFlow_0qrxyib</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0s6qg7g"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT360S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="EndEvent_1nsygy4"><bpmn:incoming>SequenceFlow_09m8k46</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0m75dth" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_13kr4h7"><bpmn:incoming>SequenceFlow_1qhe48x</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0lkasgy" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_10oun60" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>SequenceFlow_0qrxyib</bpmn:incoming><bpmn:outgoing>SequenceFlow_09m8k46</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0j7bwlw" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0c8tzok</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qhe48x</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1qhe48x" sourceRef="ServiceTask_0j7bwlw" targetRef="EndEvent_13kr4h7" /><bpmn:sequenceFlow id="SequenceFlow_09m8k46" sourceRef="ServiceTask_10oun60" targetRef="EndEvent_1nsygy4" /><bpmn:sequenceFlow id="SequenceFlow_0qrxyib" sourceRef="IntermediateCatchEvent_1kxivxq" targetRef="ServiceTask_10oun60" /><bpmn:sequenceFlow id="SequenceFlow_1ltrom5" sourceRef="ParallelGateway_07p55eb" targetRef="IntermediateCatchEvent_1kxivxq" /><bpmn:sequenceFlow id="SequenceFlow_0o57cco" sourceRef="ParallelGateway_07p55eb" targetRef="Event_0msnnl6" /><bpmn:sequenceFlow id="SequenceFlow_1e2z9u8" sourceRef="StartEvent_0aay0di" targetRef="ParallelGateway_07p55eb" /><bpmn:sequenceFlow id="Flow_0c8tzok" sourceRef="Event_0msnnl6" targetRef="ServiceTask_0j7bwlw" /><bpmn:intermediateCatchEvent id="Event_0msnnl6" camunda:asyncAfter="true"><bpmn:incoming>SequenceFlow_0o57cco</bpmn:incoming><bpmn:outgoing>Flow_0c8tzok</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_1o5b8my" messageRef="Message_02np943" /></bpmn:intermediateCatchEvent></bpmn:subProcess><bpmn:exclusiveGateway id="ExclusiveGateway_0qjfgko" default="SequenceFlow_0oz8wxv"><bpmn:incoming>SequenceFlow_0zyqfn4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1m4jjuf</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0oz8wxv</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0bwoukl" name="Изменяем статус заявки: Ошибка при создании клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+при+создании+клиента+в+базе+данных</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1m4jjuf</bpmn:incoming><bpmn:outgoing>SequenceFlow_1rp846h</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1h4u0g3" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=AML.Совпадений+не+найдено.+Клиент+создан</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0oz8wxv</bpmn:incoming><bpmn:outgoing>SequenceFlow_1olcqih</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1m4jjuf" sourceRef="ExclusiveGateway_0qjfgko" targetRef="ServiceTask_0bwoukl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0zyqfn4" sourceRef="SubProcess_0ht6sg5" targetRef="ExclusiveGateway_0qjfgko" /><bpmn:sequenceFlow id="SequenceFlow_0oz8wxv" sourceRef="ExclusiveGateway_0qjfgko" targetRef="ServiceTask_1h4u0g3" /><bpmn:sequenceFlow id="SequenceFlow_1olcqih" sourceRef="ServiceTask_1h4u0g3" targetRef="ServiceTask_1i5lfhe" /><bpmn:sequenceFlow id="SequenceFlow_1rp846h" sourceRef="ServiceTask_0bwoukl" targetRef="UserTask_0jx7azk" /><bpmn:serviceTask id="ServiceTask_09l24l3" name="Создаем счет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${instanceId}/to/INVOICE</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_type_account_int" , "ценнобумажный")
.prop("hlk_account_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.prop("hlk_Account_Number" , accountNumber)
.prop("AccountNumber" , accountNumber)
.prop("hlk_personal_account" , true)
.prop("hlk_DefaultAccount" , true)
.prop("hlk_account_external" , false)
.prop("hlk_blocked_account" , false)
.prop("hlk_account_type","Ценнобумажный")
.prop("hlk_account_status" , "Открыт")
.prop("hlk_clearing_system" , "АО ЦЕНТРАЛЬНЫЙ ДЕПОЗИТАРИЙ ЦЕННЫХ БУМАГ")
.prop("hlk_account_bin" , "970740000154")
.prop("hlk_accont_name_registrar_holder" ,"Halyk Finance")
.prop("hlk_account_opening_date" , SWIFT_DOCREG_DATE)
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06d8llp</bpmn:incoming><bpmn:outgoing>SequenceFlow_0m6u0bf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_06d8llp" sourceRef="CallActivity_1sdmmyw" targetRef="ServiceTask_09l24l3" /><bpmn:sequenceFlow id="SequenceFlow_0m6u0bf" sourceRef="ServiceTask_09l24l3" targetRef="ServiceTask_05npkcj" /><bpmn:serviceTask id="ServiceTask_1gg7xlu" name="Создаем запись о ранжировании"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Range")
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_range_AssignedRiskGroup1" , "Сбалансированная")
.prop("hlk_range_date" , acceptDate)
.prop("hlk_range_InvoiceNumber" , accountNumber)
.prop("hlk_range_IDAssignedRiskGroup1" , "1")
.prop("hlk_range_BasisAssignment1" , "По результатам анкетирования")
.prop("hlk_counterparty_type","0") 
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0to8j4v</bpmn:incoming><bpmn:outgoing>SequenceFlow_1utspuo</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1utspuo" sourceRef="ServiceTask_1gg7xlu" targetRef="ServiceTask_1o7mlrf" /><bpmn:serviceTask id="ServiceTask_18d8eps" name="Создаем книгу"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "book")
.prop("hlk_full_name" , ShortNameCurrentCtpt)
.prop("ShortName" , ShortNameCurrentCtpt)
.prop("hlk_book_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vq70gl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0o8wm4n</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0o8wm4n" sourceRef="ServiceTask_18d8eps" targetRef="ServiceTask_12m20qg" /><bpmn:serviceTask id="ServiceTask_1cbsysm" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0f7zuta</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ir3oiz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ir3oiz" sourceRef="ServiceTask_1cbsysm" targetRef="ServiceTask_0orzlnw" /><bpmn:serviceTask id="ServiceTask_0orzlnw" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ir3oiz</bpmn:incoming><bpmn:outgoing>SequenceFlow_1738rv6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1738rv6" sourceRef="ServiceTask_0orzlnw" targetRef="Activity_177ke75" /><bpmn:serviceTask id="ServiceTask_13wg68l" name="Отправляем уведомление на dris@halykfinance.kz"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{"email":"uao@halykfinance.kz","subject":"Заявка на регистрацию ФЛ через МП отклонена в связи с дублированием ИНН клиента", "text":"Заявка на регистрацию ФЛ через МП отклонена автоматически в связи с тем, что клиент с таким ИИН уже есть в системе.\n Данные о клиенте ФЛ, поступившие для регистрации через МП:\n Источник заявки: ${hlk_source_doc},\n ФИО: ${ShortName},\n ИИН: ${hlk_iin_bin},\n Дата рождения: ${F_BirthDay},\n Место рождения: ${hlk_PlaceOfBirth},\n Номер моб.тел: ${hlk_mobile_phone},\n Тип документа: ${hlk_typesdoc},\n Номер документа: ${hlk_numberdocument},\n Дата выдачи документа: ${hlk_dateissue}, \n Дата истечения срока действия документа: ${hlk_document_expiration_date}, \n Орган, выдавший документ: ${hlk_issueddocument}, \n Код КАТО области регистрации: ${hlk_reg_mp_kato_region}, \n Код КАТО района регистрации: ${hlk_reg_mp_kato_district}, \n Улица: ${hlk_street},\n Дом: ${hlk_house},\n Квартира: ${hlk_officeflat},\n Код страны регистрации: ${hlk_registrcountry_digitcode},\n Код страны гражданства: ${hlk_country_citizenship_digitcode}"}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1cmkaag</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vuz33m</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1vuz33m" sourceRef="ServiceTask_13wg68l" targetRef="Activity_1qqonj9" /><bpmn:exclusiveGateway id="Gateway_16n3a8a" default="Flow_10wdejs"><bpmn:incoming>SequenceFlow_1ypvijq</bpmn:incoming><bpmn:outgoing>Flow_0nz9r0f</bpmn:outgoing><bpmn:outgoing>Flow_10wdejs</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1u6i8kp" sourceRef="ServiceTask_0rvkrdr" targetRef="ServiceTask_1fyn5qz" /><bpmn:serviceTask id="Activity_0tlwiwk" name="Устанавливаем признак клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_customer?incrementVersion=true&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0nz9r0f</bpmn:incoming><bpmn:outgoing>Flow_1c4ikxj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0nz9r0f" sourceRef="Gateway_16n3a8a" targetRef="Activity_0tlwiwk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${source == 'Мобильное приложение'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0zlmeoe" name="Устанавливаем признак необходимости генерировать приказ на изменение реквизитов"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_creation?incrementVersion=true&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1c4ikxj</bpmn:incoming><bpmn:outgoing>Flow_1yk3qri</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1c4ikxj" sourceRef="Activity_0tlwiwk" targetRef="Activity_0zlmeoe" /><bpmn:sequenceFlow id="Flow_1yk3qri" sourceRef="Activity_0zlmeoe" targetRef="ScriptTask_0q6b023" /><bpmn:sequenceFlow id="Flow_10wdejs" sourceRef="Gateway_16n3a8a" targetRef="ScriptTask_0q6b023" /><bpmn:sequenceFlow id="SequenceFlow_1u0ek7e" sourceRef="ServiceTask_0swkxlz" targetRef="ExclusiveGateway_1sar19p" /><bpmn:callActivity id="Activity_0jo2ar8" name="Подпроцесс проверки обязательных полей" calledElement="requirementCheck"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1tw5tx1</bpmn:incoming><bpmn:outgoing>Flow_1y8o73f</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="Gateway_073de86" default="Flow_0f6420s"><bpmn:incoming>Flow_1y8o73f</bpmn:incoming><bpmn:outgoing>Flow_0f6420s</bpmn:outgoing><bpmn:outgoing>Flow_0k3tppy</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1y8o73f" sourceRef="Activity_0jo2ar8" targetRef="Gateway_073de86" /><bpmn:sequenceFlow id="Flow_0f6420s" sourceRef="Gateway_073de86" targetRef="ServiceTask_0swkxlz" /><bpmn:sequenceFlow id="Flow_0k3tppy" sourceRef="Gateway_073de86" targetRef="UserTask_0jx7azk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Errors == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0l5tp8d" sourceRef="ExclusiveGateway_02sduem" targetRef="ServiceTask_07p05f6" /><bpmn:sequenceFlow id="SequenceFlow_1hif1rv" sourceRef="ReceiveTask_1kqv5hw" targetRef="ServiceTask_07p05f6" /><bpmn:serviceTask id="Activity_01mqzzs" name="Смотрим Дату"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_DOCREG_DATE</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="SWIFT_DOCREG_DATE"><camunda:script scriptFormat="javascript">response.replace(/"/g, '').substring(0, 10)</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0bcc7bs</bpmn:incoming><bpmn:outgoing>Flow_00rvcm9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_00rvcm9" sourceRef="Activity_01mqzzs" targetRef="ServiceTask_03i59df" /><bpmn:scriptTask id="Activity_1w2nddb" name="Считаем разницу между датами" scriptFormat="javascript" camunda:resultVariable="difference"><bpmn:incoming>SequenceFlow_08zqb6w</bpmn:incoming><bpmn:outgoing>Flow_1fmpr0s</bpmn:outgoing><bpmn:script>Math.abs(Math.floor(Math.abs(new Date(SWIFT_DOCREG_DATE) - new Date(regDate))/(1000 * 60 * 60 * 24)) - Number(holidays));</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0zc97lt" name="Получаем календарь" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
"dataSource" : "focusDataSource",
"sql" : "select count(*) as count from Holidays where Curr_ID = 29 and (Date between  '${regDate}'  and '${SWIFT_DOCREG_DATE}') and NonWork = 1",
"showPretty": false
}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/sql/execute</camunda:inputParameter><camunda:outputParameter name="holidays"><camunda:script scriptFormat="javascript">JSON.parse(response).resultList[0][0]</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qmxbwl</bpmn:incoming><bpmn:outgoing>Flow_055ttrl</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0q1w079" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="acceptDate"><bpmn:incoming>Flow_1fmpr0s</bpmn:incoming><bpmn:outgoing>Flow_15ldhiq</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_055ttrl" sourceRef="Activity_0zc97lt" targetRef="ServiceTask_0g6lolh" /><bpmn:sequenceFlow id="Flow_1fmpr0s" sourceRef="Activity_1w2nddb" targetRef="Activity_0q1w079" /><bpmn:sequenceFlow id="Flow_1qmxbwl" sourceRef="ServiceTask_0t8glgc" targetRef="Activity_0zc97lt" /><bpmn:sequenceFlow id="Flow_15ldhiq" sourceRef="Activity_0q1w079" targetRef="ExclusiveGateway_0ive4l3" /><bpmn:serviceTask id="Activity_1kzrng5" name="Меняем дату приказа"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_order_date?incrementVersion=true&amp;value=${SWIFT_DOCREG_DATE}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">**</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bip9vm</bpmn:incoming><bpmn:outgoing>Flow_1i7nqkd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1i7nqkd" sourceRef="Activity_1kzrng5" targetRef="CallActivity_0lq2to6" /><bpmn:serviceTask id="ServiceTask_0owbu8k" name="Определяем есть ли незакрытая заявка на регистрацию"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"find": "book",
"filter":
{
 "$and": 
[
 {
"attributes.hlk_iin_bin" : "${iinbin}" ,
"templatePrimaryId" : "5e030b189bd116000862b155",
"labelStatus": { "$ne": "Заявка исполнена" }
},
 {
"attributes.hlk_iin_bin" : "${iinbin}" ,
"templatePrimaryId" : "5e030b189bd116000862b155",
"labelStatus": { "$ne": "Клиент не прошел проверку AML" }
},
 {
"attributes.hlk_iin_bin" : "${iinbin}" ,
"templatePrimaryId" : "5e030b189bd116000862b155",
"labelStatus": { "$ne": "Заявка отклонена сотрудником СП" }
}
]
},
"projection": {
"_id": 1
}
}</camunda:inputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="idZayavki"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0daba2k</bpmn:incoming><bpmn:outgoing>SequenceFlow_130p9im</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1fyn5qz" name="Получаем ИИН"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="iinbin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1u6i8kp</bpmn:incoming><bpmn:outgoing>SequenceFlow_1txz4nt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1txz4nt" sourceRef="ServiceTask_1fyn5qz" targetRef="Activity_1ldf9v0" /><bpmn:exclusiveGateway id="ExclusiveGateway_09m6452" default="SequenceFlow_1ypvijq"><bpmn:incoming>SequenceFlow_130p9im</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ypvijq</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0otj46h</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_130p9im" sourceRef="ServiceTask_0owbu8k" targetRef="ExclusiveGateway_09m6452" /><bpmn:sequenceFlow id="SequenceFlow_1ypvijq" sourceRef="ExclusiveGateway_09m6452" targetRef="Gateway_16n3a8a" /><bpmn:serviceTask id="ServiceTask_09psdrj" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0a9nzie</bpmn:incoming><bpmn:outgoing>SequenceFlow_01zcovx</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_13bh6xa"><bpmn:incoming>SequenceFlow_01zcovx</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0lakkse" name="Статус заявки отклонена: найдена незавершенная заявка на регистрацию клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+отклонена:+найдена+незавершенная+заявка+на+регистрацию+клиента+с+id+${idZayavki}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0otj46h</bpmn:incoming><bpmn:outgoing>SequenceFlow_0a9nzie</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0a9nzie" sourceRef="ServiceTask_0lakkse" targetRef="ServiceTask_09psdrj" /><bpmn:sequenceFlow id="SequenceFlow_01zcovx" sourceRef="ServiceTask_09psdrj" targetRef="EndEvent_13bh6xa" /><bpmn:sequenceFlow id="SequenceFlow_0otj46h" sourceRef="ExclusiveGateway_09m6452" targetRef="ServiceTask_0lakkse"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:userTask id="Activity_0n8zrqs" camunda:formKey="FILL"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements></bpmn:userTask><bpmn:serviceTask id="Activity_1ldf9v0" name="Устанавливаем признак поиска заявки" camunda:expression="false" camunda:resultVariable="found"><bpmn:incoming>SequenceFlow_1txz4nt</bpmn:incoming><bpmn:outgoing>Flow_0daba2k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0daba2k" sourceRef="Activity_1ldf9v0" targetRef="ServiceTask_0owbu8k" /><bpmn:serviceTask id="ServiceTask_0g6lolh" name="Смотрим является ли дата открытия выходным" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
"dataSource" : "focusDataSource",
"sql" : "select count(*) as count from Holidays where Curr_ID = 29 and Date =  '${regDate}'  and NonWork = 1",
"showPretty": false
}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/sql/execute</camunda:inputParameter><camunda:outputParameter name="isHoliday"><camunda:script scriptFormat="javascript">JSON.parse(response).resultList[0][0]</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_055ttrl</bpmn:incoming><bpmn:outgoing>SequenceFlow_08zqb6w</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_08zqb6w" sourceRef="ServiceTask_0g6lolh" targetRef="Activity_1w2nddb" /><bpmn:serviceTask id="ServiceTask_1et2rh2" name="Получаем версию объекта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"majorVersion": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="version"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].majorVersion
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1amof11</bpmn:incoming><bpmn:outgoing>SequenceFlow_02d6zof</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_19doqh5"><bpmn:incoming>SequenceFlow_02d6zof</bpmn:incoming><bpmn:outgoing>SequenceFlow_0e58u0d</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0f7zuta</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_02d6zof" sourceRef="ServiceTask_1et2rh2" targetRef="ExclusiveGateway_19doqh5" /><bpmn:sequenceFlow id="SequenceFlow_0e58u0d" sourceRef="ExclusiveGateway_19doqh5" targetRef="ServiceTask_0ip5c7o"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${version &gt;= 1}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1v5g8c1" sourceRef="start" targetRef="Activity_1efsmzi" /><bpmn:sequenceFlow id="SequenceFlow_0f7zuta" sourceRef="ExclusiveGateway_19doqh5" targetRef="ServiceTask_1cbsysm" /><bpmn:serviceTask id="ServiceTask_0ip5c7o" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0e58u0d</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vacm6k</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_09lij1b"><bpmn:incoming>SequenceFlow_0vacm6k</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_0vacm6k" sourceRef="ServiceTask_0ip5c7o" targetRef="EndEvent_09lij1b" /><bpmn:serviceTask id="Activity_177ke75" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_updatedId?incrementVersion=true&amp;value=${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1738rv6</bpmn:incoming><bpmn:outgoing>Flow_0evykuz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0evykuz" sourceRef="Activity_177ke75" targetRef="Activity_0w7lld3" /><bpmn:serviceTask id="Activity_0w7lld3" name="Устанавливаем признак isEmptyTeska = false" camunda:asyncAfter="true" camunda:expression="false" camunda:resultVariable="isEmptyTeska"><bpmn:incoming>Flow_0evykuz</bpmn:incoming><bpmn:outgoing>Flow_1qc6zvx</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qc6zvx" sourceRef="Activity_0w7lld3" targetRef="Task_19guune" /><bpmn:serviceTask id="Activity_0zn4aib" name="Определяем, есть ли клиент с тем же именем"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	"filter": 
{
 "$or": 
[		
{
"templatePrimaryId": "5d7a7f9d24aa9a00085186bf",
"attributes.ShortName": "${ShortName}", 
"primaryId": {$ne: "${clientPrimaryId}" },
"activityStatus" : "ACTIVE"
}, 	
{
"templatePrimaryId": "5e9d80918a09a911b7f273f9",
"attributes.ShortName": "${ShortName}", 
"primaryId": {$ne: "${clientPrimaryId}" },
"activityStatus" : "ACTIVE"
}
]
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundTeska"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="TeskaId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyTeska"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01ir6k2</bpmn:incoming><bpmn:outgoing>Flow_0ls2jbb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_05j45eu" name="Устанавливаем признак foundTeska = false" camunda:asyncAfter="true" camunda:expression="false" camunda:resultVariable="foundTeska"><bpmn:incoming>SequenceFlow_08kwynh</bpmn:incoming><bpmn:outgoing>Flow_01ir6k2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01ir6k2" sourceRef="Activity_05j45eu" targetRef="Activity_0zn4aib" /><bpmn:exclusiveGateway id="Gateway_0sqfjwp" default="Flow_0a30toy"><bpmn:incoming>Flow_1gg5cpa</bpmn:incoming><bpmn:outgoing>Flow_0ekoen0</bpmn:outgoing><bpmn:outgoing>Flow_0a30toy</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_001z2c0" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_0xsbukl</bpmn:incoming><bpmn:outgoing>Flow_1qiybfu</bpmn:outgoing><bpmn:script>ShortName + " " + accountNumber.substring(accountNumber.length()-6)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0acgb9q" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17ctqqz</bpmn:incoming><bpmn:outgoing>Flow_1nml7d6</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0dvfr9e" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nml7d6</bpmn:incoming><bpmn:outgoing>Flow_0xsbukl</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1btyun4" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028111137</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ekoen0</bpmn:incoming><bpmn:outgoing>Flow_146vyhp</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_18bthqx" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_0a30toy</bpmn:incoming><bpmn:outgoing>Flow_0tkcgtg</bpmn:outgoing><bpmn:script>ShortName + " 00"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0ekoen0" sourceRef="Gateway_0sqfjwp" targetRef="Activity_1btyun4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true" &amp;&amp; cdRejected == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0a30toy" sourceRef="Gateway_0sqfjwp" targetRef="Activity_18bthqx" /><bpmn:sequenceFlow id="Flow_0xsbukl" sourceRef="Activity_0dvfr9e" targetRef="Activity_001z2c0" /><bpmn:sequenceFlow id="Flow_1nml7d6" sourceRef="Activity_0acgb9q" targetRef="Activity_0dvfr9e" /><bpmn:sequenceFlow id="Flow_0ls2jbb" sourceRef="Activity_0zn4aib" targetRef="Gateway_0cksgwi" /><bpmn:exclusiveGateway id="Gateway_0cksgwi" default="Flow_0ryeqj0"><bpmn:incoming>Flow_0ls2jbb</bpmn:incoming><bpmn:outgoing>Flow_0kzudnq</bpmn:outgoing><bpmn:outgoing>Flow_0ryeqj0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0kzudnq" sourceRef="Gateway_0cksgwi" targetRef="Activity_0ro7pza"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyTeska == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ryeqj0" sourceRef="Gateway_0cksgwi" targetRef="Activity_1wraknq" /><bpmn:scriptTask id="Activity_1wraknq" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_0ryeqj0</bpmn:incoming><bpmn:outgoing>Flow_079ghu9</bpmn:outgoing><bpmn:script>ShortName</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_079ghu9" sourceRef="Activity_1wraknq" targetRef="ServiceTask_02050sn" /><bpmn:sequenceFlow id="Flow_100y5f0" sourceRef="Gateway_0m8m2v3" targetRef="ServiceTask_02050sn" /><bpmn:exclusiveGateway id="Gateway_1bzvmag" default="Flow_02xm2o0"><bpmn:incoming>SequenceFlow_0kcthwt</bpmn:incoming><bpmn:outgoing>Flow_0netshf</bpmn:outgoing><bpmn:outgoing>Flow_02xm2o0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0netshf" sourceRef="Gateway_1bzvmag" targetRef="ServiceTask_11xp1hm"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isTeska == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_02xm2o0" sourceRef="Gateway_1bzvmag" targetRef="ExclusiveGateway_1bog2vq" /><bpmn:serviceTask id="Activity_0ro7pza" name="определяем primaryId клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kzudnq</bpmn:incoming><bpmn:outgoing>Flow_1tv1wb7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1tv1wb7" sourceRef="Activity_0ro7pza" targetRef="Activity_0jsa5kz" /><bpmn:exclusiveGateway id="Gateway_0ylcdsu" default="Flow_1gg5cpa"><bpmn:incoming>Flow_1bajbke</bpmn:incoming><bpmn:outgoing>Flow_1gg5cpa</bpmn:outgoing><bpmn:outgoing>Flow_14xuohs</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1gg5cpa" sourceRef="Gateway_0ylcdsu" targetRef="Gateway_0sqfjwp" /><bpmn:sequenceFlow id="Flow_14xuohs" sourceRef="Gateway_0ylcdsu" targetRef="Activity_1eaz9lz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${foundAgr == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1eaz9lz" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_14xuohs</bpmn:incoming><bpmn:outgoing>Flow_02hoh9y</bpmn:outgoing><bpmn:script>ShortName + " " + agreementNumber</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_16asd36" name="Ищем книгу текущего клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	
"find": "book", 	
"filter": {
"templatePrimaryId": "5da5be402ab79c00084ee4c5",
"attributes.hlk_book_owner.primaryId": "${hlk_client_app}", 
"activityStatus" : "ACTIVE"},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundBook"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="BookId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qiybfu</bpmn:incoming><bpmn:incoming>Flow_02hoh9y</bpmn:incoming><bpmn:incoming>Flow_0tkcgtg</bpmn:incoming><bpmn:outgoing>Flow_0shhafa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qiybfu" sourceRef="Activity_001z2c0" targetRef="Activity_16asd36" /><bpmn:sequenceFlow id="Flow_02hoh9y" sourceRef="Activity_1eaz9lz" targetRef="Activity_16asd36" /><bpmn:sequenceFlow id="Flow_0tkcgtg" sourceRef="Activity_18bthqx" targetRef="Activity_16asd36" /><bpmn:exclusiveGateway id="Gateway_0m8m2v3" default="Flow_100y5f0"><bpmn:incoming>Flow_0shhafa</bpmn:incoming><bpmn:outgoing>Flow_0kne8px</bpmn:outgoing><bpmn:outgoing>Flow_100y5f0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0o2svln" name="Добавляем номер счета в название книги клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${BookId}/setAttributes?incrementVersion=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortNameCurrentCtpt)
.prop("hlk_full_name", ShortNameCurrentCtpt)
.prop("hlk_book_owner",S("{}")
.prop("value" , ShortName)
.prop("primaryId" , hlk_client_app)
.prop("source" , "individualPerson"))
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="rrr">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kne8px</bpmn:incoming><bpmn:outgoing>Flow_1899jha</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1vtn37b" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${BookId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1899jha</bpmn:incoming><bpmn:outgoing>Flow_0w3ztsi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0kne8px" sourceRef="Gateway_0m8m2v3" targetRef="Activity_0o2svln"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${foundBook == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1899jha" sourceRef="Activity_0o2svln" targetRef="Activity_1vtn37b" /><bpmn:sequenceFlow id="Flow_0shhafa" sourceRef="Activity_16asd36" targetRef="Gateway_0m8m2v3" /><bpmn:sequenceFlow id="Flow_0w3ztsi" sourceRef="Activity_1vtn37b" targetRef="ServiceTask_02050sn" /><bpmn:serviceTask id="Activity_115tvwu" name="Ищем книгу "><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	
"find": "book", 	
"filter": {
"templatePrimaryId": "5da5be402ab79c00084ee4c5",
"attributes.hlk_book_owner.primaryId": "${hlk_client_app}", 
"activityStatus" : "ACTIVE"},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundBook"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="BookId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1f2fyea</bpmn:incoming><bpmn:outgoing>Flow_0jup60h</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0jup60h" sourceRef="Activity_115tvwu" targetRef="Activity_0m4j90g" /><bpmn:serviceTask id="Activity_0m4j90g" name="Меняем название книги"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${BookId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName",ShortNameCurrentCtpt)
.prop("hlk_full_name",ShortNameCurrentCtpt)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="rrr">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jup60h</bpmn:incoming><bpmn:outgoing>Flow_1rrtkxt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1rrtkxt" sourceRef="Activity_0m4j90g" targetRef="Activity_033w3y8" /><bpmn:serviceTask id="Activity_033w3y8" name="Сообщаем об окончании процесса книги"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${BookId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rrtkxt</bpmn:incoming><bpmn:outgoing>Flow_07uc6x2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_07uc6x2" sourceRef="Activity_033w3y8" targetRef="ServiceTask_089vzfq" /><bpmn:serviceTask id="Activity_19dq5c8" name="Ищем книгу "><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	
"find": "book", 	
"filter": {
"templatePrimaryId": "5da5be402ab79c00084ee4c5",
"attributes.hlk_book_owner.primaryId": "${hlk_client_app}", 
"activityStatus" : "ACTIVE"},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundBook"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="BookId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1msrl9w</bpmn:incoming><bpmn:outgoing>Flow_0f09t5p</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1mjokqr" name="Меняем название книги"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${BookId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName",ShortNameCurrentCtpt)
.prop("hlk_full_name",ShortNameCurrentCtpt)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="rrr">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0f09t5p</bpmn:incoming><bpmn:outgoing>Flow_08tudyo</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0vdrh7u" name="Сообщаем об окончании процесса книги"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${BookId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_08tudyo</bpmn:incoming><bpmn:outgoing>Flow_0qkl7k2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0f09t5p" sourceRef="Activity_19dq5c8" targetRef="Activity_1mjokqr" /><bpmn:sequenceFlow id="Flow_08tudyo" sourceRef="Activity_1mjokqr" targetRef="Activity_0vdrh7u" /><bpmn:sequenceFlow id="Flow_0qkl7k2" sourceRef="Activity_0vdrh7u" targetRef="ServiceTask_0kqlp5a" /><bpmn:serviceTask id="Activity_0jsa5kz" name="Определяем номер договора у тезки" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"find": "book",
"filter": {
"activityStatus" : "ACTIVE", 
"templatePrimaryId": "5e2ea8e551915100088d013a",
"attributes.hlk_InContract_ID_Client.primaryId": "${hlk_client_app}"
},
"projection": {
"attributes.hlk_account_number_contract": 1
}
}</camunda:inputParameter><camunda:outputParameter name="agreementNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_account_number_contract
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="foundAgr"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tv1wb7</bpmn:incoming><bpmn:outgoing>Flow_1bajbke</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1bajbke" sourceRef="Activity_0jsa5kz" targetRef="Gateway_0ylcdsu" /><bpmn:sequenceFlow id="Flow_0dhgef4" sourceRef="Gateway_03eysht" targetRef="ServiceTask_1lyw3n7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isTeska == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_03eysht" default="Flow_01vrthw"><bpmn:incoming>SequenceFlow_1f5aynh</bpmn:incoming><bpmn:outgoing>Flow_0dhgef4</bpmn:outgoing><bpmn:outgoing>Flow_01vrthw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_01vrthw" sourceRef="Gateway_03eysht" targetRef="ExclusiveGateway_0pi2cy9" /><bpmn:serviceTask id="Activity_07ligip" name="Устанавливаем признак isTeska = false" camunda:expression="false" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_0r2t27c</bpmn:incoming><bpmn:outgoing>Flow_1amof11</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0hoapcf" sourceRef="ServiceTask_1xcdx30" targetRef="ServiceTask_0x7p2qj" /><bpmn:sequenceFlow id="Flow_1amof11" sourceRef="Activity_07ligip" targetRef="ServiceTask_1et2rh2" /><bpmn:serviceTask id="Activity_15dgj8v" name="Устанавливаем признак isTeska = true" camunda:expression="true" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_146vyhp</bpmn:incoming><bpmn:outgoing>Flow_17ctqqz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_146vyhp" sourceRef="Activity_1btyun4" targetRef="Activity_15dgj8v" /><bpmn:sequenceFlow id="Flow_17ctqqz" sourceRef="Activity_15dgj8v" targetRef="Activity_0acgb9q" /><bpmn:serviceTask id="Activity_1efsmzi" name="Устанавливаем признак found = false" camunda:expression="false" camunda:resultVariable="found"><bpmn:incoming>SequenceFlow_1v5g8c1</bpmn:incoming><bpmn:outgoing>Flow_0r2t27c</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0r2t27c" sourceRef="Activity_1efsmzi" targetRef="Activity_07ligip" /><bpmn:exclusiveGateway id="Gateway_0uswje6" default="Flow_0rccx7n"><bpmn:incoming>Flow_1nbvqbe</bpmn:incoming><bpmn:outgoing>Flow_0uh1zjf</bpmn:outgoing><bpmn:outgoing>Flow_0rccx7n</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1nbvqbe" sourceRef="ServiceTask_1i5lfhe" targetRef="Gateway_0uswje6" /><bpmn:sequenceFlow id="Flow_0uh1zjf" sourceRef="Gateway_0uswje6" targetRef="ServiceTask_1w6azwq"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isTeska == false &amp;&amp; found == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0rccx7n" sourceRef="Gateway_0uswje6" targetRef="ExclusiveGateway_1jine9y" /><bpmn:textAnnotation id="TextAnnotation_0knv6qs"><bpmn:text>достали из hlk_app_id положили в appId</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1y1bkmi" sourceRef="ServiceTask_0d8jmme" targetRef="TextAnnotation_0knv6qs" /></bpmn:process><bpmn:message id="Message_1ydqk79" name="bookReady" /><bpmn:message id="Message_12fl35m" name="539Receive" /><bpmn:signal id="Signal_1oiy3by" name="bookUpdateReceive${instanceId}" /><bpmn:message id="Message_0va6my0" name="clientUpdated" /><bpmn:message id="Message_02np943" name="clientUpdated" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_hlk_cl_change_1d00684f-afb8-44e5-a096-f02fb3aa4025"><bpmndi:BPMNEdge id="Flow_0rccx7n_di" bpmnElement="Flow_0rccx7n"><di:waypoint x="7490" y="1985" /><di:waypoint x="7490" y="2200" /><di:waypoint x="7649" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uh1zjf_di" bpmnElement="Flow_0uh1zjf"><di:waypoint x="7515" y="1960" /><di:waypoint x="7570" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nbvqbe_di" bpmnElement="Flow_1nbvqbe"><di:waypoint x="7490" y="1910" /><di:waypoint x="7490" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0r2t27c_di" bpmnElement="Flow_0r2t27c"><di:waypoint x="40" y="2256" /><di:waypoint x="60" y="2256" /><di:waypoint x="60" y="2249" /><di:waypoint x="84" y="2249" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17ctqqz_di" bpmnElement="Flow_17ctqqz"><di:waypoint x="6450" y="1250" /><di:waypoint x="6536" y="1250" /><di:waypoint x="6536" y="1180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_146vyhp_di" bpmnElement="Flow_146vyhp"><di:waypoint x="6400" y="1180" /><di:waypoint x="6400" y="1210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1amof11_di" bpmnElement="Flow_1amof11"><di:waypoint x="184" y="2256" /><di:waypoint x="230" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hoapcf_di" bpmnElement="Flow_0hoapcf"><di:waypoint x="4846" y="2250" /><di:waypoint x="4869" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01vrthw_di" bpmnElement="Flow_01vrthw"><di:waypoint x="7849" y="1634" /><di:waypoint x="8115" y="1546" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dhgef4_di" bpmnElement="Flow_0dhgef4"><di:waypoint x="7830" y="1665" /><di:waypoint x="7830" y="1698" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bajbke_di" bpmnElement="Flow_1bajbke"><di:waypoint x="6090" y="1140" /><di:waypoint x="6125" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qkl7k2_di" bpmnElement="Flow_0qkl7k2"><di:waypoint x="12234" y="2775" /><di:waypoint x="12260" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08tudyo_di" bpmnElement="Flow_08tudyo"><di:waypoint x="12060" y="2735" /><di:waypoint x="12060" y="2715" /><di:waypoint x="12184" y="2715" /><di:waypoint x="12184" y="2735" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f09t5p_di" bpmnElement="Flow_0f09t5p"><di:waypoint x="11990" y="2775" /><di:waypoint x="12010" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07uc6x2_di" bpmnElement="Flow_07uc6x2"><di:waypoint x="13240" y="2200" /><di:waypoint x="13280" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rrtkxt_di" bpmnElement="Flow_1rrtkxt"><di:waypoint x="13110" y="2200" /><di:waypoint x="13140" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jup60h_di" bpmnElement="Flow_0jup60h"><di:waypoint x="12990" y="2200" /><di:waypoint x="13010" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w3ztsi_di" bpmnElement="Flow_0w3ztsi"><di:waypoint x="7304" y="1180" /><di:waypoint x="7304" y="1360" /><di:waypoint x="6070" y="1360" /><di:waypoint x="6070" y="2220" /><di:waypoint x="6045" y="2220" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0shhafa_di" bpmnElement="Flow_0shhafa"><di:waypoint x="6994" y="1140" /><di:waypoint x="7039" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1899jha_di" bpmnElement="Flow_1899jha"><di:waypoint x="7220" y="1140" /><di:waypoint x="7254" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kne8px_di" bpmnElement="Flow_0kne8px"><di:waypoint x="7089" y="1140" /><di:waypoint x="7120" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tkcgtg_di" bpmnElement="Flow_0tkcgtg"><di:waypoint x="6320" y="1013" /><di:waypoint x="6930" y="1013" /><di:waypoint x="6930" y="1100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02hoh9y_di" bpmnElement="Flow_02hoh9y"><di:waypoint x="6150" y="973" /><di:waypoint x="6150" y="893" /><di:waypoint x="6960" y="893" /><di:waypoint x="6960" y="1100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qiybfu_di" bpmnElement="Flow_1qiybfu"><di:waypoint x="6856" y="1140" /><di:waypoint x="6894" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14xuohs_di" bpmnElement="Flow_14xuohs"><di:waypoint x="6150" y="1115" /><di:waypoint x="6150" y="1053" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gg5cpa_di" bpmnElement="Flow_1gg5cpa"><di:waypoint x="6175" y="1140" /><di:waypoint x="6245" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tv1wb7_di" bpmnElement="Flow_1tv1wb7"><di:waypoint x="5950" y="1140" /><di:waypoint x="5990" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02xm2o0_di" bpmnElement="Flow_02xm2o0"><di:waypoint x="7791" y="2200" /><di:waypoint x="7870" y="2200" /><di:waypoint x="7943" y="2124" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0netshf_di" bpmnElement="Flow_0netshf"><di:waypoint x="7766" y="2225" /><di:waypoint x="7766" y="2268" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_100y5f0_di" bpmnElement="Flow_100y5f0"><di:waypoint x="7064" y="1165" /><di:waypoint x="7064" y="1330" /><di:waypoint x="6030" y="1330" /><di:waypoint x="6030" y="2210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_079ghu9_di" bpmnElement="Flow_079ghu9"><di:waypoint x="5970" y="1935" /><di:waypoint x="5970" y="2210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ryeqj0_di" bpmnElement="Flow_0ryeqj0"><di:waypoint x="5925" y="1820" /><di:waypoint x="5970" y="1820" /><di:waypoint x="5970" y="1855" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kzudnq_di" bpmnElement="Flow_0kzudnq"><di:waypoint x="5900" y="1795" /><di:waypoint x="5900" y="1180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ls2jbb_di" bpmnElement="Flow_0ls2jbb"><di:waypoint x="5900" y="1960" /><di:waypoint x="5900" y="1845" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nml7d6_di" bpmnElement="Flow_1nml7d6"><di:waypoint x="6586" y="1140" /><di:waypoint x="6620" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xsbukl_di" bpmnElement="Flow_0xsbukl"><di:waypoint x="6720" y="1140" /><di:waypoint x="6756" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a30toy_di" bpmnElement="Flow_0a30toy"><di:waypoint x="6270" y="1115" /><di:waypoint x="6270" y="1053" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ekoen0_di" bpmnElement="Flow_0ekoen0"><di:waypoint x="6295" y="1140" /><di:waypoint x="6350" y="1140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01ir6k2_di" bpmnElement="Flow_01ir6k2"><di:waypoint x="5900" y="2070" /><di:waypoint x="5900" y="2040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qc6zvx_di" bpmnElement="Flow_1qc6zvx"><di:waypoint x="1000" y="2256" /><di:waypoint x="1030" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0evykuz_di" bpmnElement="Flow_0evykuz"><di:waypoint x="870" y="2256" /><di:waypoint x="900" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vacm6k_di" bpmnElement="SequenceFlow_0vacm6k"><di:waypoint x="450" y="2360" /><di:waypoint x="522" y="2360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0f7zuta_di" bpmnElement="SequenceFlow_0f7zuta"><di:waypoint x="425" y="2256" /><di:waypoint x="480" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1v5g8c1_di" bpmnElement="SequenceFlow_1v5g8c1"><di:waypoint x="-102" y="2256" /><di:waypoint x="-60" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0e58u0d_di" bpmnElement="SequenceFlow_0e58u0d"><di:waypoint x="400" y="2281" /><di:waypoint x="400" y="2320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02d6zof_di" bpmnElement="SequenceFlow_02d6zof"><di:waypoint x="330" y="2256" /><di:waypoint x="375" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08zqb6w_di" bpmnElement="SequenceFlow_08zqb6w"><di:waypoint x="12540" y="1650" /><di:waypoint x="12570" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0daba2k_di" bpmnElement="Flow_0daba2k"><di:waypoint x="3386" y="2140" /><di:waypoint x="3398" y="2140" /><di:waypoint x="3398" y="2219" /><di:waypoint x="3410" y="2219" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0otj46h_di" bpmnElement="SequenceFlow_0otj46h"><di:waypoint x="3560" y="2224" /><di:waypoint x="3560" y="2083" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_01zcovx_di" bpmnElement="SequenceFlow_01zcovx"><di:waypoint x="3940" y="2043" /><di:waypoint x="3992" y="2043" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0a9nzie_di" bpmnElement="SequenceFlow_0a9nzie"><di:waypoint x="3610" y="2043" /><di:waypoint x="3840" y="2043" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ypvijq_di" bpmnElement="SequenceFlow_1ypvijq"><di:waypoint x="3585" y="2249" /><di:waypoint x="3600" y="2249" /><di:waypoint x="3600" y="2250" /><di:waypoint x="3615" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_130p9im_di" bpmnElement="SequenceFlow_130p9im"><di:waypoint x="3510" y="2249" /><di:waypoint x="3535" y="2249" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1txz4nt_di" bpmnElement="SequenceFlow_1txz4nt"><di:waypoint x="3336" y="2210" /><di:waypoint x="3336" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1i7nqkd_di" bpmnElement="Flow_1i7nqkd"><di:waypoint x="13004" y="1510" /><di:waypoint x="13004" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15ldhiq_di" bpmnElement="Flow_15ldhiq"><di:waypoint x="12810" y="1650" /><di:waypoint x="12849" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qmxbwl_di" bpmnElement="Flow_1qmxbwl"><di:waypoint x="12234" y="1650" /><di:waypoint x="12320" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fmpr0s_di" bpmnElement="Flow_1fmpr0s"><di:waypoint x="12670" y="1650" /><di:waypoint x="12710" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_055ttrl_di" bpmnElement="Flow_055ttrl"><di:waypoint x="12420" y="1650" /><di:waypoint x="12440" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00rvcm9_di" bpmnElement="Flow_00rvcm9"><di:waypoint x="11825" y="1650" /><di:waypoint x="11874" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hif1rv_di" bpmnElement="SequenceFlow_1hif1rv"><di:waypoint x="11610" y="1550" /><di:waypoint x="11610" y="1580" /><di:waypoint x="11629" y="1580" /><di:waypoint x="11629" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l5tp8d_di" bpmnElement="SequenceFlow_0l5tp8d"><di:waypoint x="11285" y="1640" /><di:waypoint x="11505" y="1640" /><di:waypoint x="11505" y="1650" /><di:waypoint x="11579" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0k3tppy_di" bpmnElement="Flow_0k3tppy"><di:waypoint x="5594" y="1460" /><di:waypoint x="5440" y="1460" /><di:waypoint x="5440" y="2170" /><di:waypoint x="5378" y="2170" /><di:waypoint x="5378" y="2210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f6420s_di" bpmnElement="Flow_0f6420s"><di:waypoint x="5619" y="1485" /><di:waypoint x="5619" y="1528" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1y8o73f_di" bpmnElement="Flow_1y8o73f"><di:waypoint x="5619" y="1410" /><di:waypoint x="5619" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u0ek7e_di" bpmnElement="SequenceFlow_1u0ek7e"><di:waypoint x="5619" y="1608" /><di:waypoint x="5619" y="1655" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10wdejs_di" bpmnElement="Flow_10wdejs"><di:waypoint x="3640" y="2225" /><di:waypoint x="3640" y="2160" /><di:waypoint x="3940" y="2160" /><di:waypoint x="4010" y="2209" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yk3qri_di" bpmnElement="Flow_1yk3qri"><di:waypoint x="3930" y="2250" /><di:waypoint x="3953" y="2250" /><di:waypoint x="3953" y="2249" /><di:waypoint x="3976" y="2249" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1c4ikxj_di" bpmnElement="Flow_1c4ikxj"><di:waypoint x="3790" y="2249" /><di:waypoint x="3810" y="2249" /><di:waypoint x="3810" y="2250" /><di:waypoint x="3830" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nz9r0f_di" bpmnElement="Flow_0nz9r0f"><di:waypoint x="3665" y="2250" /><di:waypoint x="3678" y="2250" /><di:waypoint x="3678" y="2249" /><di:waypoint x="3690" y="2249" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u6i8kp_di" bpmnElement="Flow_1u6i8kp"><di:waypoint x="3261" y="2250" /><di:waypoint x="3286" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vuz33m_di" bpmnElement="SequenceFlow_1vuz33m"><di:waypoint x="2380" y="2760" /><di:waypoint x="2440" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1738rv6_di" bpmnElement="SequenceFlow_1738rv6"><di:waypoint x="730" y="2256" /><di:waypoint x="770" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ir3oiz_di" bpmnElement="SequenceFlow_1ir3oiz"><di:waypoint x="580" y="2256" /><di:waypoint x="630" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0o8wm4n_di" bpmnElement="SequenceFlow_0o8wm4n"><di:waypoint x="15858" y="1649" /><di:waypoint x="15906" y="1649" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1utspuo_di" bpmnElement="SequenceFlow_1utspuo"><di:waypoint x="15280" y="1650" /><di:waypoint x="15340" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0m6u0bf_di" bpmnElement="SequenceFlow_0m6u0bf"><di:waypoint x="14710" y="1650" /><di:waypoint x="14880" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06d8llp_di" bpmnElement="SequenceFlow_06d8llp"><di:waypoint x="14540" y="1650" /><di:waypoint x="14610" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rp846h_di" bpmnElement="SequenceFlow_1rp846h"><di:waypoint x="7320" y="1440" /><di:waypoint x="7320" y="1430" /><di:waypoint x="6120" y="1430" /><di:waypoint x="6120" y="2180" /><di:waypoint x="5370" y="2180" /><di:waypoint x="5370" y="2210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1olcqih_di" bpmnElement="SequenceFlow_1olcqih"><di:waypoint x="7490" y="1800" /><di:waypoint x="7490" y="1830" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0oz8wxv_di" bpmnElement="SequenceFlow_0oz8wxv"><di:waypoint x="7320" y="1845" /><di:waypoint x="7320" y="1760" /><di:waypoint x="7440" y="1760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zyqfn4_di" bpmnElement="SequenceFlow_0zyqfn4"><di:waypoint x="7278" y="1870" /><di:waypoint x="7295" y="1870" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1m4jjuf_di" bpmnElement="SequenceFlow_1m4jjuf"><di:waypoint x="7320" y="1845" /><di:waypoint x="7320" y="1520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wwfrdc_di" bpmnElement="SequenceFlow_1wwfrdc"><di:waypoint x="1130" y="2256" /><di:waypoint x="1170" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0sdvoh8_di" bpmnElement="Flow_0sdvoh8"><di:waypoint x="1180" y="2880" /><di:waypoint x="1240" y="2880" /><di:waypoint x="1240" y="2795" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k8ssg1_di" bpmnElement="Flow_1k8ssg1"><di:waypoint x="1020" y="2780" /><di:waypoint x="1020" y="2880" /><di:waypoint x="1080" y="2880" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wxgg3v_di" bpmnElement="Flow_0wxgg3v"><di:waypoint x="1045" y="2755" /><di:waypoint x="1190" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mus3pe_di" bpmnElement="Flow_1mus3pe"><di:waypoint x="960" y="2755" /><di:waypoint x="995" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z3sbly_di" bpmnElement="Flow_0z3sbly"><di:waypoint x="5230" y="2040" /><di:waypoint x="5230" y="2160" /><di:waypoint x="5292" y="2212" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h3ls6n_di" bpmnElement="Flow_0h3ls6n"><di:waypoint x="5313" y="1814" /><di:waypoint x="5230" y="1814" /><di:waypoint x="5230" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z8au25_di" bpmnElement="Flow_0z8au25"><di:waypoint x="5363" y="1814" /><di:waypoint x="5450" y="1814" /><di:waypoint x="5450" y="1720" /><di:waypoint x="5410" y="1720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kpdunk_di" bpmnElement="Flow_1kpdunk"><di:waypoint x="5338" y="1870" /><di:waypoint x="5338" y="1839" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_138htgp_di" bpmnElement="Flow_138htgp"><di:waypoint x="830" y="2755" /><di:waypoint x="860" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gpm9or_di" bpmnElement="Flow_1gpm9or"><di:waypoint x="2960" y="2590" /><di:waypoint x="2920" y="2590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gr3bcp_di" bpmnElement="Flow_0gr3bcp"><di:waypoint x="2820" y="2590" /><di:waypoint x="2693" y="2590" /><di:waypoint x="2693" y="2290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18pqbx9_di" bpmnElement="Flow_18pqbx9"><di:waypoint x="2670" y="2760" /><di:waypoint x="2700" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1imp0dm_di" bpmnElement="Flow_1imp0dm"><di:waypoint x="2800" y="2760" /><di:waypoint x="3010" y="2760" /><di:waypoint x="3010" y="2630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u53psh_di" bpmnElement="Flow_0u53psh"><di:waypoint x="880" y="2520" /><di:waypoint x="690" y="2520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1l2g8qn_di" bpmnElement="Flow_1l2g8qn"><di:waypoint x="1137" y="2520" /><di:waypoint x="1110" y="2520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ylw3yq_di" bpmnElement="Flow_1ylw3yq"><di:waypoint x="1270" y="2520" /><di:waypoint x="1237" y="2520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t60ctu_di" bpmnElement="Flow_0t60ctu"><di:waypoint x="1010" y="2520" /><di:waypoint x="980" y="2520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_038ynge_di" bpmnElement="Flow_038ynge"><di:waypoint x="1290" y="2755" /><di:waypoint x="1350" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1insx2i_di" bpmnElement="Flow_1insx2i"><di:waypoint x="690" y="2755" /><di:waypoint x="730" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0m6agqj_di" bpmnElement="Flow_0m6agqj"><di:waypoint x="640" y="2560" /><di:waypoint x="640" y="2715" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_046su8l_di" bpmnElement="Flow_046su8l"><di:waypoint x="1690" y="2700" /><di:waypoint x="1760" y="2700" /><di:waypoint x="1760" y="2735" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0f38po7_di" bpmnElement="SequenceFlow_0f38po7"><di:waypoint x="1270" y="2256" /><di:waypoint x="1312" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cmkaag_di" bpmnElement="Flow_1cmkaag"><di:waypoint x="2230" y="2760" /><di:waypoint x="2280" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0uqwpc2_di" bpmnElement="SequenceFlow_0uqwpc2"><di:waypoint x="1800" y="1100" /><di:waypoint x="1800" y="950" /><di:waypoint x="1517" y="950" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fpp62w_di" bpmnElement="Flow_0fpp62w"><di:waypoint x="1955" y="2760" /><di:waypoint x="1990" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nbr39z_di" bpmnElement="Flow_1nbr39z"><di:waypoint x="2540" y="2760" /><di:waypoint x="2570" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mxo7d0_di" bpmnElement="Flow_0mxo7d0"><di:waypoint x="1800" y="2281" /><di:waypoint x="1800" y="2520" /><di:waypoint x="1370" y="2520" /><bpmndi:BPMNLabel><dc:Bounds x="1679" y="2376" width="82" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ysxihe_di" bpmnElement="Flow_0ysxihe"><di:waypoint x="2090" y="2760" /><di:waypoint x="2130" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_180m30c_di" bpmnElement="Flow_180m30c"><di:waypoint x="1785" y="2760" /><di:waypoint x="1855" y="2760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02uo6v3_di" bpmnElement="Flow_02uo6v3"><di:waypoint x="1690" y="2820" /><di:waypoint x="1760" y="2820" /><di:waypoint x="1760" y="2785" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fwbsel_di" bpmnElement="Flow_0fwbsel"><di:waypoint x="1510" y="2780" /><di:waypoint x="1510" y="2820" /><di:waypoint x="1590" y="2820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fnud03_di" bpmnElement="Flow_0fnud03"><di:waypoint x="1510" y="2730" /><di:waypoint x="1510" y="2700" /><di:waypoint x="1590" y="2700" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ht7b88_di" bpmnElement="Flow_1ht7b88"><di:waypoint x="1450" y="2755" /><di:waypoint x="1485" y="2755" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tw5tx1_di" bpmnElement="SequenceFlow_1tw5tx1"><di:waypoint x="5619" y="1303" /><di:waypoint x="5619" y="1330" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ff0rtk_di" bpmnElement="SequenceFlow_0ff0rtk"><di:waypoint x="9570" y="2949" /><di:waypoint x="9410" y="2949" /><di:waypoint x="9410" y="3110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0h8o4e7_di" bpmnElement="SequenceFlow_0h8o4e7"><di:waypoint x="10375" y="2775" /><di:waypoint x="10711" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10smz0u_di" bpmnElement="SequenceFlow_10smz0u"><di:waypoint x="9399" y="2775" /><di:waypoint x="9560" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1mj04hv_di" bpmnElement="SequenceFlow_1mj04hv"><di:waypoint x="10180" y="2949" /><di:waypoint x="10010" y="2949" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1chhpi9_di" bpmnElement="SequenceFlow_1chhpi9"><di:waypoint x="9910" y="2949" /><di:waypoint x="9670" y="2949" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15bhqj1_di" bpmnElement="SequenceFlow_15bhqj1"><di:waypoint x="10300" y="2949" /><di:waypoint x="10280" y="2949" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ujb9cu_di" bpmnElement="SequenceFlow_1ujb9cu"><di:waypoint x="10350" y="2800" /><di:waypoint x="10350" y="2909" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_067nljc_di" bpmnElement="SequenceFlow_067nljc"><di:waypoint x="10210" y="2775" /><di:waypoint x="10325" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1620ymh_di" bpmnElement="SequenceFlow_1620ymh"><di:waypoint x="9585" y="2374" /><di:waypoint x="9374" y="2374" /><di:waypoint x="9374" y="2520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xbnksi_di" bpmnElement="SequenceFlow_1xbnksi"><di:waypoint x="10390" y="2200" /><di:waypoint x="10700" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1irn900_di" bpmnElement="SequenceFlow_1irn900"><di:waypoint x="9477" y="2200" /><di:waypoint x="9575" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pebwhj_di" bpmnElement="SequenceFlow_0pebwhj"><di:waypoint x="10195" y="2374" /><di:waypoint x="10025" y="2374" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y32tf8_di" bpmnElement="SequenceFlow_1y32tf8"><di:waypoint x="9925" y="2374" /><di:waypoint x="9685" y="2374" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14grm2g_di" bpmnElement="SequenceFlow_14grm2g"><di:waypoint x="10315" y="2374" /><di:waypoint x="10295" y="2374" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_143xw82_di" bpmnElement="SequenceFlow_143xw82"><di:waypoint x="10365" y="2225" /><di:waypoint x="10365" y="2334" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ulma9e_di" bpmnElement="SequenceFlow_0ulma9e"><di:waypoint x="10225" y="2200" /><di:waypoint x="10340" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pi90lh_di" bpmnElement="SequenceFlow_1pi90lh"><di:waypoint x="10224" y="1600" /><di:waypoint x="10224" y="1510" /><di:waypoint x="10615" y="1510" /><di:waypoint x="10615" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jlc3ki_di" bpmnElement="SequenceFlow_0jlc3ki"><di:waypoint x="10300" y="1814" /><di:waypoint x="10043" y="1814" /><di:waypoint x="10043" y="1881" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08aos8e_di" bpmnElement="SequenceFlow_08aos8e"><di:waypoint x="10910" y="1814" /><di:waypoint x="10880" y="1814" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bzd3fk_di" bpmnElement="SequenceFlow_1bzd3fk"><di:waypoint x="10480" y="1814" /><di:waypoint x="10400" y="1814" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ip4ntg_di" bpmnElement="SequenceFlow_1ip4ntg"><di:waypoint x="10640" y="1814" /><di:waypoint x="10580" y="1814" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ff2dxg_di" bpmnElement="SequenceFlow_0ff2dxg"><di:waypoint x="10780" y="1814" /><di:waypoint x="10740" y="1814" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1crwo57_di" bpmnElement="SequenceFlow_1crwo57"><di:waypoint x="11210" y="1814" /><di:waypoint x="11010" y="1814" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f4idmn_di" bpmnElement="SequenceFlow_1f4idmn"><di:waypoint x="11260" y="1665" /><di:waypoint x="11260" y="1774" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x2wjzw_di" bpmnElement="SequenceFlow_1x2wjzw"><di:waypoint x="10940" y="1640" /><di:waypoint x="11235" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ex0at8_di" bpmnElement="SequenceFlow_0ex0at8"><di:waypoint x="5189" y="2560" /><di:waypoint x="5189" y="2510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0tzrsap_di" bpmnElement="SequenceFlow_0tzrsap"><di:waypoint x="5550" y="2400" /><di:waypoint x="5575" y="2400" /><di:waypoint x="5575" y="2390" /><di:waypoint x="5600" y="2390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x3q1yu_di" bpmnElement="SequenceFlow_1x3q1yu"><di:waypoint x="11209" y="2200" /><di:waypoint x="11248" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="8165.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_094t39k_di" bpmnElement="Flow_094t39k"><di:waypoint x="1412" y="2256" /><di:waypoint x="1460" y="2256" /><bpmndi:BPMNLabel><dc:Bounds x="124.5" y="1951" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zuxdbl_di" bpmnElement="SequenceFlow_0zuxdbl"><di:waypoint x="5313" y="1207" /><di:waypoint x="5150" y="1207" /><di:waypoint x="5150" y="2173" /><di:waypoint x="5288" y="2230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_067hfqp_di" bpmnElement="SequenceFlow_067hfqp"><di:waypoint x="5313" y="1416" /><di:waypoint x="5170" y="1416" /><di:waypoint x="5170" y="2172" /><di:waypoint x="5288" y="2226" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1agu96f_di" bpmnElement="SequenceFlow_1agu96f"><di:waypoint x="5338" y="1182" /><di:waypoint x="5338" y="980" /><di:waypoint x="5408" y="980" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qdp8fh_di" bpmnElement="SequenceFlow_1qdp8fh"><di:waypoint x="5338" y="1274" /><di:waypoint x="5338" y="1232" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1k3b41s_di" bpmnElement="SequenceFlow_1k3b41s"><di:waypoint x="5338" y="1391" /><di:waypoint x="5338" y="1354" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ybf420_di" bpmnElement="SequenceFlow_0ybf420"><di:waypoint x="5338" y="1474" /><di:waypoint x="5338" y="1441" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ekbyzi_di" bpmnElement="SequenceFlow_1ekbyzi"><di:waypoint x="5509" y="2150" /><di:waypoint x="5509" y="2210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qxvwbg_di" bpmnElement="SequenceFlow_1qxvwbg"><di:waypoint x="4969" y="2250" /><di:waypoint x="4998" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1etdiwl_di" bpmnElement="SequenceFlow_1etdiwl"><di:waypoint x="2362" y="2250" /><di:waypoint x="2390" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zcd1lk_di" bpmnElement="SequenceFlow_0zcd1lk"><di:waypoint x="2092" y="2250" /><di:waypoint x="2129" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rvmjc9_di" bpmnElement="SequenceFlow_1rvmjc9"><di:waypoint x="6221" y="2250" /><di:waypoint x="6262" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0y8ahr9_di" bpmnElement="SequenceFlow_0y8ahr9"><di:waypoint x="1650" y="820" /><di:waypoint x="1690" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f6q7ou_di" bpmnElement="SequenceFlow_1f6q7ou"><di:waypoint x="1517" y="820" /><di:waypoint x="1550" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04nynnb_di" bpmnElement="SequenceFlow_04nynnb"><di:waypoint x="1467" y="910" /><di:waypoint x="1467" y="860" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1057kak_di" bpmnElement="SequenceFlow_1057kak"><di:waypoint x="1950" y="820" /><di:waypoint x="2059" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1todbqc_di" bpmnElement="SequenceFlow_1todbqc"><di:waypoint x="1790" y="820" /><di:waypoint x="1850" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ao9be0_di" bpmnElement="SequenceFlow_0ao9be0"><di:waypoint x="5480" y="620" /><di:waypoint x="5755" y="620" /><di:waypoint x="5755" y="2060" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16p9m19_di" bpmnElement="SequenceFlow_16p9m19"><di:waypoint x="5180" y="620" /><di:waypoint x="5230" y="620" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0lq5do1_di" bpmnElement="SequenceFlow_0lq5do1"><di:waypoint x="5591" y="760" /><di:waypoint x="5620" y="760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1grbgcc_di" bpmnElement="SequenceFlow_1grbgcc"><di:waypoint x="5471" y="760" /><di:waypoint x="5491" y="760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0yb5qoi_di" bpmnElement="SequenceFlow_0yb5qoi"><di:waypoint x="5331" y="760" /><di:waypoint x="5371" y="760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_061dwkp_di" bpmnElement="SequenceFlow_061dwkp"><di:waypoint x="5280" y="660" /><di:waypoint x="5280" y="720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03qto3o_di" bpmnElement="SequenceFlow_03qto3o"><di:waypoint x="5330" y="620" /><di:waypoint x="5380" y="620" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_074qbu4_di" bpmnElement="SequenceFlow_074qbu4"><di:waypoint x="4473" y="1042" /><di:waypoint x="4603" y="1042" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bk81ji_di" bpmnElement="SequenceFlow_0bk81ji"><di:waypoint x="4337" y="820" /><di:waypoint x="4373" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tfc0l3_di" bpmnElement="SequenceFlow_1tfc0l3"><di:waypoint x="4423" y="970" /><di:waypoint x="4423" y="1002" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0gb5cio_di" bpmnElement="SequenceFlow_0gb5cio"><di:waypoint x="4423" y="860" /><di:waypoint x="4423" y="890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0t7byyn_di" bpmnElement="SequenceFlow_0t7byyn"><di:waypoint x="4854" y="400" /><di:waypoint x="5130" y="400" /><di:waypoint x="5130" y="135" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jrml78_di" bpmnElement="SequenceFlow_0jrml78"><di:waypoint x="5155" y="110" /><di:waypoint x="5240" y="110" /><di:waypoint x="5240" y="498" /><di:waypoint x="5180" y="498" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x004xx_di" bpmnElement="SequenceFlow_1x004xx"><di:waypoint x="5130" y="538" /><di:waypoint x="5130" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11q5m68_di" bpmnElement="SequenceFlow_11q5m68"><di:waypoint x="4653" y="1002" /><di:waypoint x="4653" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_020b7zz_di" bpmnElement="SequenceFlow_020b7zz"><di:waypoint x="4678" y="640" /><di:waypoint x="4794" y="640" /><di:waypoint x="4794" y="560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14dydp4_di" bpmnElement="SequenceFlow_14dydp4"><di:waypoint x="4703" y="400" /><di:waypoint x="4754" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ia8wst_di" bpmnElement="SequenceFlow_0ia8wst"><di:waypoint x="4744" y="520" /><di:waypoint x="4723" y="520" /><di:waypoint x="4723" y="430" /><di:waypoint x="4703" y="430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wmpg9v_di" bpmnElement="SequenceFlow_0wmpg9v"><di:waypoint x="4653" y="480" /><di:waypoint x="4653" y="440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14mv6n7_di" bpmnElement="SequenceFlow_14mv6n7"><di:waypoint x="4653" y="615" /><di:waypoint x="4653" y="560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jpahhj_di" bpmnElement="SequenceFlow_0jpahhj"><di:waypoint x="4653" y="690" /><di:waypoint x="4653" y="665" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jov1e4_di" bpmnElement="SequenceFlow_0jov1e4"><di:waypoint x="5130" y="400" /><di:waypoint x="5130" y="458" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11xy1ys_di" bpmnElement="SequenceFlow_11xy1ys"><di:waypoint x="5130" y="135" /><di:waypoint x="5130" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0smq2vk_di" bpmnElement="SequenceFlow_0smq2vk"><di:waypoint x="2289" y="820" /><di:waypoint x="2458" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1p6sz9i_di" bpmnElement="SequenceFlow_1p6sz9i"><di:waypoint x="2159" y="820" /><di:waypoint x="2189" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f0p33c_di" bpmnElement="SequenceFlow_1f0p33c"><di:waypoint x="3208" y="820" /><di:waypoint x="3268" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mvo9ul_di" bpmnElement="SequenceFlow_0mvo9ul"><di:waypoint x="3368" y="820" /><di:waypoint x="4098" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09igvj0_di" bpmnElement="SequenceFlow_09igvj0"><di:waypoint x="3088" y="820" /><di:waypoint x="3108" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ay2krd_di" bpmnElement="SequenceFlow_0ay2krd"><di:waypoint x="2968" y="820" /><di:waypoint x="2988" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_067fn9l_di" bpmnElement="SequenceFlow_067fn9l"><di:waypoint x="2811" y="819" /><di:waypoint x="2840" y="820" /><di:waypoint x="2840" y="820" /><di:waypoint x="2868" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dd9f8m_di" bpmnElement="SequenceFlow_1dd9f8m"><di:waypoint x="4198" y="820" /><di:waypoint x="4237" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1mtsqvq_di" bpmnElement="SequenceFlow_1mtsqvq"><di:waypoint x="2686" y="820" /><di:waypoint x="2699" y="820" /><di:waypoint x="2699" y="820" /><di:waypoint x="2711" y="819" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xet12q_di" bpmnElement="SequenceFlow_1xet12q"><di:waypoint x="2558" y="820" /><di:waypoint x="2586" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dvu149_di" bpmnElement="SequenceFlow_1dvu149"><di:waypoint x="1800" y="2231" /><di:waypoint x="1800" y="1180" /><bpmndi:BPMNLabel><dc:Bounds x="1808" y="2144" width="21" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15hbr5a_di" bpmnElement="SequenceFlow_15hbr5a"><di:waypoint x="1825" y="2256" /><di:waypoint x="1992" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0dq0lv3_di" bpmnElement="SequenceFlow_0dq0lv3"><di:waypoint x="1737" y="2256" /><di:waypoint x="1775" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bc8kcv_di" bpmnElement="SequenceFlow_0bc8kcv"><di:waypoint x="2873" y="2250" /><di:waypoint x="2903" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sl60wg_di" bpmnElement="SequenceFlow_0sl60wg"><di:waypoint x="2743" y="2250" /><di:waypoint x="2773" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10so09e_di" bpmnElement="SequenceFlow_10so09e"><di:waypoint x="3133" y="2250" /><di:waypoint x="3161" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0218dxf_di" bpmnElement="SequenceFlow_0218dxf"><di:waypoint x="2613" y="2250" /><di:waypoint x="2643" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jpfc1x_di" bpmnElement="SequenceFlow_0jpfc1x"><di:waypoint x="3003" y="2250" /><di:waypoint x="3033" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kucjqa_di" bpmnElement="SequenceFlow_1kucjqa"><di:waypoint x="5189" y="2430" /><di:waypoint x="5189" y="2400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0tmisax_di" bpmnElement="SequenceFlow_0tmisax"><di:waypoint x="5700" y="2390" /><di:waypoint x="5740" y="2390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kde92o_di" bpmnElement="SequenceFlow_0kde92o"><di:waypoint x="5619" y="1825" /><di:waypoint x="5619" y="1855" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1v9j4g6_di" bpmnElement="SequenceFlow_1v9j4g6"><di:waypoint x="5644" y="1680" /><di:waypoint x="5711" y="1680" /><di:waypoint x="5711" y="1895" /><di:waypoint x="5669" y="1895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vm25t2_di" bpmnElement="SequenceFlow_0vm25t2"><di:waypoint x="5619" y="1705" /><di:waypoint x="5619" y="1745" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u1e8r9_di" bpmnElement="SequenceFlow_1u1e8r9"><di:waypoint x="5619" y="1203" /><di:waypoint x="5619" y="1223" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ll8um5_di" bpmnElement="SequenceFlow_0ll8um5"><di:waypoint x="5619" y="1935" /><di:waypoint x="5619" y="1970" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05prb86_di" bpmnElement="SequenceFlow_05prb86"><di:waypoint x="15440" y="1650" /><di:waypoint x="15500" y="1650" /><bpmndi:BPMNLabel><dc:Bounds x="11938.5" y="1335" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vq70gl_di" bpmnElement="SequenceFlow_0vq70gl"><di:waypoint x="15600" y="1650" /><di:waypoint x="15758" y="1650" /><bpmndi:BPMNLabel><dc:Bounds x="12107" y="1349" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1j7jarn_di" bpmnElement="SequenceFlow_1j7jarn"><di:waypoint x="16006" y="1650" /><di:waypoint x="16061" y="1650" /><bpmndi:BPMNLabel><dc:Bounds x="12392.5" y="1335" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0x1vfvu_di" bpmnElement="SequenceFlow_0x1vfvu"><di:waypoint x="5569" y="2010" /><di:waypoint x="5509" y="2010" /><di:waypoint x="5509" y="2070" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kwnahi_di" bpmnElement="SequenceFlow_0kwnahi"><di:waypoint x="5239" y="2360" /><di:waypoint x="5338" y="2360" /><di:waypoint x="5338" y="2290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1h7wcdm_di" bpmnElement="SequenceFlow_1h7wcdm"><di:waypoint x="5840" y="2390" /><di:waypoint x="5860" y="2390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08kwynh_di" bpmnElement="SequenceFlow_08kwynh"><di:waypoint x="5873" y="2210" /><di:waypoint x="5873" y="2200" /><di:waypoint x="5900" y="2200" /><di:waypoint x="5900" y="2150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ecpar4_di" bpmnElement="SequenceFlow_0ecpar4"><di:waypoint x="8584" y="2775" /><di:waypoint x="8617" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1yzosx9_di" bpmnElement="SequenceFlow_1yzosx9"><di:waypoint x="8324" y="2775" /><di:waypoint x="8364" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1evc1eo_di" bpmnElement="SequenceFlow_1evc1eo"><di:waypoint x="8644" y="2200" /><di:waypoint x="8674" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kzrpct_di" bpmnElement="SequenceFlow_1kzrpct"><di:waypoint x="8414" y="2200" /><di:waypoint x="8434" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zo8nxp_di" bpmnElement="SequenceFlow_0zo8nxp"><di:waypoint x="9424" y="1640" /><di:waypoint x="9454" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0xc23lf_di" bpmnElement="SequenceFlow_0xc23lf"><di:waypoint x="9024" y="1640" /><di:waypoint x="9049" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0d32ayv_di" bpmnElement="SequenceFlow_0d32ayv"><di:waypoint x="8584" y="1640" /><di:waypoint x="8629" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rs381p_di" bpmnElement="SequenceFlow_0rs381p"><di:waypoint x="7979" y="2110" /><di:waypoint x="7994" y="2110" /><di:waypoint x="7994" y="2175" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0j6ihmm_di" bpmnElement="SequenceFlow_0j6ihmm"><di:waypoint x="8159" y="1540" /><di:waypoint x="8174" y="1540" /><di:waypoint x="8174" y="1615" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1i9c4wm_di" bpmnElement="SequenceFlow_1i9c4wm"><di:waypoint x="1560" y="2256" /><di:waypoint x="1637" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04cxw1g_di" bpmnElement="SequenceFlow_04cxw1g"><di:waypoint x="7791" y="2110" /><di:waypoint x="7929" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kcthwt_di" bpmnElement="SequenceFlow_0kcthwt"><di:waypoint x="7766" y="2135" /><di:waypoint x="7766" y="2175" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08karps_di" bpmnElement="SequenceFlow_08karps"><di:waypoint x="7674" y="1615" /><di:waypoint x="7674" y="1540" /><di:waypoint x="8109" y="1540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f5aynh_di" bpmnElement="SequenceFlow_1f5aynh"><di:waypoint x="7699" y="1640" /><di:waypoint x="7805" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00iijpw_di" bpmnElement="SequenceFlow_00iijpw"><di:waypoint x="9993" y="1921" /><di:waypoint x="8369" y="1921" /><di:waypoint x="8369" y="2620" /><di:waypoint x="5338" y="2620" /><di:waypoint x="5338" y="2290" /><bpmndi:BPMNLabel><dc:Bounds x="6359" y="1975.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wqee9f_di" bpmnElement="SequenceFlow_1wqee9f"><di:waypoint x="12930" y="1845" /><di:waypoint x="12930" y="1921" /><di:waypoint x="10093" y="1921" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0apccsr_di" bpmnElement="SequenceFlow_0apccsr"><di:waypoint x="12955" y="1820" /><di:waypoint x="13010" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_01h7mzo_di" bpmnElement="SequenceFlow_01h7mzo"><di:waypoint x="13110" y="1820" /><di:waypoint x="13146" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cex2cd_di" bpmnElement="SequenceFlow_0cex2cd"><di:waypoint x="12870" y="1820" /><di:waypoint x="12905" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dimwpl_di" bpmnElement="SequenceFlow_1dimwpl"><di:waypoint x="12740" y="1820" /><di:waypoint x="12770" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1csmdrw_di" bpmnElement="SequenceFlow_1csmdrw"><di:waypoint x="12602" y="1820" /><di:waypoint x="12640" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0yk840q_di" bpmnElement="SequenceFlow_0yk840q"><di:waypoint x="9324" y="2560" /><di:waypoint x="8009" y="2560" /><di:waypoint x="8009" y="2670" /><di:waypoint x="5338" y="2670" /><di:waypoint x="5338" y="2290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wz1gio_di" bpmnElement="SequenceFlow_0wz1gio"><di:waypoint x="11667" y="2430" /><di:waypoint x="11722" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vy6jse_di" bpmnElement="SequenceFlow_1vy6jse"><di:waypoint x="11642" y="2455" /><di:waypoint x="11642" y="2560" /><di:waypoint x="9424" y="2560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fjn2un_di" bpmnElement="SequenceFlow_0fjn2un"><di:waypoint x="11572" y="2430" /><di:waypoint x="11617" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kr4xx4_di" bpmnElement="SequenceFlow_1kr4xx4"><di:waypoint x="11432" y="2430" /><di:waypoint x="11472" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rhzzps_di" bpmnElement="SequenceFlow_0rhzzps"><di:waypoint x="11291" y="2430" /><di:waypoint x="11332" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_194ovj7_di" bpmnElement="SequenceFlow_194ovj7"><di:waypoint x="11822" y="2430" /><di:waypoint x="11874" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sz9qt5_di" bpmnElement="SequenceFlow_0sz9qt5"><di:waypoint x="11131" y="2430" /><di:waypoint x="11191" y="2430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0b8jxnd_di" bpmnElement="SequenceFlow_0b8jxnd"><di:waypoint x="9360" y="3156" /><di:waypoint x="9340" y="3150" /><di:waypoint x="5338" y="3170" /><di:waypoint x="5338" y="2290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11821sm_di" bpmnElement="SequenceFlow_11821sm"><di:waypoint x="11811" y="2945" /><di:waypoint x="11863" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e4vdsj_di" bpmnElement="SequenceFlow_1e4vdsj"><di:waypoint x="11656" y="2945" /><di:waypoint x="11711" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rmcohn_di" bpmnElement="SequenceFlow_0rmcohn"><di:waypoint x="11631" y="2970" /><di:waypoint x="11631" y="3150" /><di:waypoint x="9460" y="3150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1r7dcgf_di" bpmnElement="SequenceFlow_1r7dcgf"><di:waypoint x="11561" y="2945" /><di:waypoint x="11606" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ykw8vw_di" bpmnElement="SequenceFlow_1ykw8vw"><di:waypoint x="11421" y="2945" /><di:waypoint x="11461" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1adssiv_di" bpmnElement="SequenceFlow_1adssiv"><di:waypoint x="5189" y="2690" /><di:waypoint x="5189" y="2640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1isxnes_di" bpmnElement="SequenceFlow_1isxnes"><di:waypoint x="5428" y="2250" /><di:waypoint x="5408" y="2250" /><di:waypoint x="5408" y="2730" /><di:waypoint x="5239" y="2730" /><bpmndi:BPMNLabel><dc:Bounds x="3398" y="2120" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_053gl1p_di" bpmnElement="SequenceFlow_053gl1p"><di:waypoint x="5310" y="1720" /><di:waypoint x="5289" y="1720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l8oll8_di" bpmnElement="SequenceFlow_0l8oll8"><di:waypoint x="5239" y="1680" /><di:waypoint x="5239" y="1647" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16drkv0_di" bpmnElement="SequenceFlow_16drkv0"><di:waypoint x="6552" y="1885" /><di:waypoint x="6552" y="2075" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0xkd3ns_di" bpmnElement="SequenceFlow_0xkd3ns"><di:waypoint x="6742" y="1730" /><di:waypoint x="6784" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hxryiy_di" bpmnElement="SequenceFlow_1hxryiy"><di:waypoint x="6602" y="1730" /><di:waypoint x="6642" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uc64nl_di" bpmnElement="SequenceFlow_1uc64nl"><di:waypoint x="6552" y="1835" /><di:waypoint x="6552" y="1770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cnmdmj_di" bpmnElement="SequenceFlow_1cnmdmj"><di:waypoint x="6492" y="1860" /><di:waypoint x="6527" y="1860" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rxkst8_di" bpmnElement="SequenceFlow_1rxkst8"><di:waypoint x="6442" y="2275" /><di:waypoint x="6442" y="2550" /><di:waypoint x="6512" y="2550" /><bpmndi:BPMNLabel><dc:Bounds x="4432" y="2123" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1i6qnq0_di" bpmnElement="SequenceFlow_1i6qnq0"><di:waypoint x="6912" y="2290" /><di:waypoint x="6912" y="2360" /><di:waypoint x="6562" y="2360" /><di:waypoint x="6562" y="2505" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nqy7np_di" bpmnElement="SequenceFlow_0nqy7np"><di:waypoint x="5338" y="2210" /><di:waypoint x="5338" y="2183" /><di:waypoint x="5339" y="2183" /><di:waypoint x="5339" y="2155" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kxn5nv_di" bpmnElement="SequenceFlow_0kxn5nv"><di:waypoint x="5363" y="2020" /><di:waypoint x="5399" y="2020" /><di:waypoint x="5399" y="2250" /><di:waypoint x="5388" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hjkxcs_di" bpmnElement="SequenceFlow_1hjkxcs"><di:waypoint x="5338" y="1995" /><di:waypoint x="5338" y="1950" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11gqydc_di" bpmnElement="SequenceFlow_11gqydc"><di:waypoint x="5338" y="2075" /><di:waypoint x="5338" y="2045" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1a81nq6_di" bpmnElement="SequenceFlow_1a81nq6"><di:waypoint x="5289" y="1607" /><di:waypoint x="5313" y="1607" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08lhaqq_di" bpmnElement="SequenceFlow_08lhaqq"><di:waypoint x="5338" y="1582" /><di:waypoint x="5338" y="1554" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1i49ayq_di" bpmnElement="SequenceFlow_1i49ayq"><di:waypoint x="5363" y="1607" /><di:waypoint x="5489" y="1607" /><di:waypoint x="5489" y="1940" /><di:waypoint x="5382" y="2211" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u5o7a4_di" bpmnElement="SequenceFlow_1u5o7a4"><di:waypoint x="14400" y="1650" /><di:waypoint x="14440" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fyjb6z_di" bpmnElement="SequenceFlow_1fyjb6z"><di:waypoint x="5594" y="980" /><di:waypoint x="5540" y="980" /><di:waypoint x="5540" y="1033" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17l7usv_di" bpmnElement="SequenceFlow_17l7usv"><di:waypoint x="5590" y="1073" /><di:waypoint x="5619" y="1073" /><di:waypoint x="5619" y="1123" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1m25zv7_di" bpmnElement="SequenceFlow_1m25zv7"><di:waypoint x="5642" y="1073" /><di:waypoint x="5619" y="1073" /><di:waypoint x="5619" y="1123" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vczluc_di" bpmnElement="SequenceFlow_0vczluc"><di:waypoint x="5619" y="980" /><di:waypoint x="5692" y="980" /><di:waypoint x="5692" y="1033" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ybaaom_di" bpmnElement="SequenceFlow_0ybaaom"><di:waypoint x="5508" y="980" /><di:waypoint x="5594" y="980" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0adwb3l_di" bpmnElement="SequenceFlow_0adwb3l"><di:waypoint x="4980" y="1850" /><di:waypoint x="5130" y="1850" /><di:waypoint x="5130" y="2250" /><di:waypoint x="5288" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cixofs_di" bpmnElement="SequenceFlow_0cixofs"><di:waypoint x="5048" y="2210" /><di:waypoint x="5048" y="2130" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ez9jpo_di" bpmnElement="SequenceFlow_0ez9jpo"><di:waypoint x="4905" y="2090" /><di:waypoint x="4790" y="2090" /><di:waypoint x="4790" y="2010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0s8rib8_di" bpmnElement="SequenceFlow_0s8rib8"><di:waypoint x="4790" y="1930" /><di:waypoint x="4790" y="1850" /><di:waypoint x="4880" y="1850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12zfduq_di" bpmnElement="SequenceFlow_12zfduq"><di:waypoint x="4930" y="1930" /><di:waypoint x="4930" y="1890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05wv0gm_di" bpmnElement="SequenceFlow_05wv0gm"><di:waypoint x="4930" y="2065" /><di:waypoint x="4930" y="2010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kufeb5_di" bpmnElement="SequenceFlow_0kufeb5"><di:waypoint x="4998" y="2090" /><di:waypoint x="4955" y="2090" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1epm7m1_di" bpmnElement="SequenceFlow_1epm7m1"><di:waypoint x="11590" y="2775" /><di:waypoint x="11622" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8454" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cfog8f_di" bpmnElement="SequenceFlow_1cfog8f"><di:waypoint x="11471" y="2775" /><di:waypoint x="11490" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8328.5" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0w73z0c_di" bpmnElement="SequenceFlow_0w73z0c"><di:waypoint x="11280" y="2945" /><di:waypoint x="11321" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kr1tx4_di" bpmnElement="SequenceFlow_0kr1tx4"><di:waypoint x="12464" y="1820" /><di:waypoint x="12502" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vw78n3_di" bpmnElement="SequenceFlow_0vw78n3"><di:waypoint x="5805" y="2250" /><di:waypoint x="5823" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1o6vrcy_di" bpmnElement="SequenceFlow_1o6vrcy"><di:waypoint x="6864" y="2115" /><di:waypoint x="6907" y="2115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1d1fmr4_di" bpmnElement="SequenceFlow_1d1fmr4"><di:waypoint x="6602" y="2115" /><di:waypoint x="6764" y="2115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1krq3jg_di" bpmnElement="SequenceFlow_1krq3jg"><di:waypoint x="11348" y="2200" /><di:waypoint x="11394" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="8308" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qabu7s_di" bpmnElement="SequenceFlow_0qabu7s"><di:waypoint x="12578" y="2200" /><di:waypoint x="12622" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9537" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05jub3p_di" bpmnElement="SequenceFlow_05jub3p"><di:waypoint x="12437" y="2200" /><di:waypoint x="12478" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9394.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uezw0i_di" bpmnElement="SequenceFlow_1uezw0i"><di:waypoint x="12094" y="2290" /><di:waypoint x="12139" y="2290" /><di:waypoint x="12139" y="2200" /><di:waypoint x="12206" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9091" y="1955" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ctqhgb_di" bpmnElement="SequenceFlow_0ctqhgb"><di:waypoint x="12094" y="2115" /><di:waypoint x="12136" y="2115" /><di:waypoint x="12136" y="2200" /><di:waypoint x="12206" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9088" y="1867.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1codrnh_di" bpmnElement="SequenceFlow_1codrnh"><di:waypoint x="11494" y="2200" /><di:waypoint x="11517" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="8442.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1j3v0r6_di" bpmnElement="SequenceFlow_1j3v0r6"><di:waypoint x="11942" y="2290" /><di:waypoint x="11994" y="2290" /><bpmndi:BPMNLabel><dc:Bounds x="8905" y="1985" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1mpcwhh_di" bpmnElement="SequenceFlow_1mpcwhh"><di:waypoint x="11804" y="2225" /><di:waypoint x="11804" y="2290" /><di:waypoint x="11842" y="2290" /><bpmndi:BPMNLabel><dc:Bounds x="8756" y="1967.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0xftdew_di" bpmnElement="SequenceFlow_0xftdew"><di:waypoint x="11942" y="2115" /><di:waypoint x="11994" y="2115" /><bpmndi:BPMNLabel><dc:Bounds x="8905" y="1810" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05drymz_di" bpmnElement="SequenceFlow_05drymz"><di:waypoint x="11804" y="2175" /><di:waypoint x="11804" y="2115" /><di:waypoint x="11842" y="2115" /><bpmndi:BPMNLabel><dc:Bounds x="8756" y="1855" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10h25v4_di" bpmnElement="SequenceFlow_10h25v4"><di:waypoint x="11746" y="2200" /><di:waypoint x="11779" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="8699.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18i6fh3_di" bpmnElement="SequenceFlow_18i6fh3"><di:waypoint x="11617" y="2200" /><di:waypoint x="11646" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="8568.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09bn3d8_di" bpmnElement="SequenceFlow_09bn3d8"><di:waypoint x="13004" y="1610" /><di:waypoint x="13004" y="1590" /><di:waypoint x="13120" y="1590" /><di:waypoint x="13120" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jh03r1_di" bpmnElement="SequenceFlow_1jh03r1"><di:waypoint x="13810" y="1738" /><di:waypoint x="13855" y="1738" /><di:waypoint x="13855" y="1650" /><di:waypoint x="13900" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0brhued_di" bpmnElement="SequenceFlow_0brhued"><di:waypoint x="13810" y="1568" /><di:waypoint x="13855" y="1568" /><di:waypoint x="13855" y="1650" /><di:waypoint x="13900" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ocs4qj_di" bpmnElement="SequenceFlow_0ocs4qj"><di:waypoint x="13660" y="1738" /><di:waypoint x="13710" y="1738" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or8fw7_di" bpmnElement="SequenceFlow_0or8fw7"><di:waypoint x="13503" y="1675" /><di:waypoint x="13503" y="1738" /><di:waypoint x="13560" y="1738" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0895t1p_di" bpmnElement="SequenceFlow_0895t1p"><di:waypoint x="13660" y="1568" /><di:waypoint x="13710" y="1568" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0o4ys6q_di" bpmnElement="SequenceFlow_0o4ys6q"><di:waypoint x="13503" y="1625" /><di:waypoint x="13503" y="1568" /><di:waypoint x="13560" y="1568" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pswh0g_di" bpmnElement="SequenceFlow_1pswh0g"><di:waypoint x="13450" y="1650" /><di:waypoint x="13478" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0uxhw34_di" bpmnElement="SequenceFlow_0uxhw34"><di:waypoint x="13300" y="1650" /><di:waypoint x="13350" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11vxblv_di" bpmnElement="SequenceFlow_11vxblv"><di:waypoint x="13170" y="1650" /><di:waypoint x="13200" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kngpwk_di" bpmnElement="SequenceFlow_0kngpwk"><di:waypoint x="4457" y="2250" /><di:waypoint x="4489" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0v7ng1e_di" bpmnElement="SequenceFlow_0v7ng1e"><di:waypoint x="4323" y="2250" /><di:waypoint x="4357" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0s91tf4_di" bpmnElement="SequenceFlow_0s91tf4"><di:waypoint x="4589" y="2250" /><di:waypoint x="4622" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lis9eu_di" bpmnElement="SequenceFlow_1lis9eu"><di:waypoint x="6612" y="2545" /><di:waypoint x="6652" y="2545" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ecu2lj_di" bpmnElement="SequenceFlow_1ecu2lj"><di:waypoint x="6640" y="2249" /><di:waypoint x="6689" y="2249" /><di:waypoint x="6689" y="2256" /><di:waypoint x="6738" y="2256" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12k44q8_di" bpmnElement="SequenceFlow_12k44q8"><di:waypoint x="4198" y="2250" /><di:waypoint x="4223" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16da73b_di" bpmnElement="SequenceFlow_16da73b"><di:waypoint x="4076" y="2249" /><di:waypoint x="4087" y="2249" /><di:waypoint x="4087" y="2250" /><di:waypoint x="4098" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1r6eygt_di" bpmnElement="SequenceFlow_1r6eygt"><di:waypoint x="4722" y="2250" /><di:waypoint x="4746" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ftcx0k_di" bpmnElement="SequenceFlow_0ftcx0k"><di:waypoint x="6167" y="2250" /><di:waypoint x="6185" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0q4jwbl_di" bpmnElement="SequenceFlow_0q4jwbl"><di:waypoint x="6045" y="2250" /><di:waypoint x="6067" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_160wph2_di" bpmnElement="SequenceFlow_160wph2"><di:waypoint x="6434" y="2267" /><di:waypoint x="6372" y="2390" /><di:waypoint x="6203" y="2390" /><di:waypoint x="6203" y="2268" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0xe5g55_di" bpmnElement="SequenceFlow_0xe5g55"><di:waypoint x="11348" y="2775" /><di:waypoint x="11371" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8207.5" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0gjti5u_di" bpmnElement="SequenceFlow_0gjti5u"><di:waypoint x="5755" y="2140" /><di:waypoint x="5755" y="2209" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uhzx09_di" bpmnElement="SequenceFlow_1uhzx09"><di:waypoint x="8667" y="2735" /><di:waypoint x="8667" y="2715" /><di:waypoint x="8779" y="2715" /><di:waypoint x="8779" y="2740" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zzegv6_di" bpmnElement="SequenceFlow_0zzegv6"><di:waypoint x="8829" y="2780" /><di:waypoint x="8849" y="2780" /><di:waypoint x="8849" y="2775" /><di:waypoint x="8869" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fib83c_di" bpmnElement="SequenceFlow_0fib83c"><di:waypoint x="8774" y="2200" /><di:waypoint x="8807" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uuxn01_di" bpmnElement="SequenceFlow_1uuxn01"><di:waypoint x="9554" y="1640" /><di:waypoint x="9604" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0u2vk5z_di" bpmnElement="SequenceFlow_0u2vk5z"><di:waypoint x="7816" y="2308" /><di:waypoint x="7850" y="2308" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jkuekp_di" bpmnElement="SequenceFlow_0jkuekp"><di:waypoint x="7900" y="2268" /><di:waypoint x="7900" y="2198" /><di:waypoint x="7954" y="2198" /><di:waypoint x="7954" y="2135" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0womgra_di" bpmnElement="SequenceFlow_0womgra"><di:waypoint x="7674" y="2175" /><di:waypoint x="7674" y="2110" /><di:waypoint x="7741" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11oqcns_di" bpmnElement="SequenceFlow_11oqcns"><di:waypoint x="13520" y="2200" /><di:waypoint x="13562" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="10076.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19cu4ez_di" bpmnElement="SequenceFlow_19cu4ez"><di:waypoint x="13380" y="2200" /><di:waypoint x="13420" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9945" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07p6mo4_di" bpmnElement="SequenceFlow_07p6mo4"><di:waypoint x="9047" y="2200" /><di:waypoint x="9087" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hxarv3_di" bpmnElement="SequenceFlow_0hxarv3"><di:waypoint x="10849" y="2060" /><di:waypoint x="10800" y="2060" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1g5wp0p_di" bpmnElement="SequenceFlow_1g5wp0p"><di:waypoint x="11084" y="2200" /><di:waypoint x="11109" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0auz3fu_di" bpmnElement="SequenceFlow_0auz3fu"><di:waypoint x="11059" y="2175" /><di:waypoint x="11059" y="2060" /><di:waypoint x="10949" y="2060" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_095qx43_di" bpmnElement="SequenceFlow_095qx43"><di:waypoint x="11059" y="2225" /><di:waypoint x="11059" y="2308" /><di:waypoint x="11081" y="2308" /><di:waypoint x="11081" y="2390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1apvqid_di" bpmnElement="SequenceFlow_1apvqid"><di:waypoint x="10949" y="2200" /><di:waypoint x="11034" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05t7xqj_di" bpmnElement="SequenceFlow_05t7xqj"><di:waypoint x="10800" y="2200" /><di:waypoint x="10849" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0tbvemy_di" bpmnElement="SequenceFlow_0tbvemy"><di:waypoint x="10654" y="2060" /><di:waypoint x="10677" y="2060" /><di:waypoint x="10677" y="2200" /><di:waypoint x="10700" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bi8qt5_di" bpmnElement="SequenceFlow_0bi8qt5"><di:waypoint x="10700" y="2060" /><di:waypoint x="10654" y="2060" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1aknx8q_di" bpmnElement="SequenceFlow_1aknx8q"><di:waypoint x="9334" y="2200" /><di:waypoint x="9377" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04lahvw_di" bpmnElement="SequenceFlow_04lahvw"><di:waypoint x="9187" y="2200" /><di:waypoint x="9234" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13yv42u_di" bpmnElement="SequenceFlow_13yv42u"><di:waypoint x="8907" y="2200" /><di:waypoint x="8947" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wfi80b_di" bpmnElement="SequenceFlow_0wfi80b"><di:waypoint x="12306" y="2200" /><di:waypoint x="12337" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9258.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f2fyea_di" bpmnElement="SequenceFlow_1f2fyea"><di:waypoint x="12863" y="2200" /><di:waypoint x="12890" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9815" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l7dlad_di" bpmnElement="SequenceFlow_0l7dlad"><di:waypoint x="12722" y="2200" /><di:waypoint x="12763" y="2200" /><bpmndi:BPMNLabel><dc:Bounds x="9679.5" y="1895" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15pv35f_di" bpmnElement="SequenceFlow_15pv35f"><di:waypoint x="8484" y="2160" /><di:waypoint x="8484" y="2140" /><di:waypoint x="8594" y="2140" /><di:waypoint x="8594" y="2160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00ojiwx_di" bpmnElement="SequenceFlow_00ojiwx"><di:waypoint x="8269" y="2200" /><di:waypoint x="8314" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rn8sti_di" bpmnElement="SequenceFlow_0rn8sti"><di:waypoint x="8164" y="2140" /><di:waypoint x="8244" y="2140" /><di:waypoint x="8244" y="2175" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07m27fc_di" bpmnElement="SequenceFlow_07m27fc"><di:waypoint x="7994" y="2175" /><di:waypoint x="7994" y="2140" /><di:waypoint x="8064" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08zl2rg_di" bpmnElement="SequenceFlow_08zl2rg"><di:waypoint x="8164" y="2290" /><di:waypoint x="8244" y="2290" /><di:waypoint x="8244" y="2225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09p5ifx_di" bpmnElement="SequenceFlow_09p5ifx"><di:waypoint x="7994" y="2225" /><di:waypoint x="7994" y="2290" /><di:waypoint x="8064" y="2290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1msrl9w_di" bpmnElement="SequenceFlow_1msrl9w"><di:waypoint x="11861" y="2775" /><di:waypoint x="11890" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8730" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00n55sy_di" bpmnElement="SequenceFlow_00n55sy"><di:waypoint x="12480" y="2775" /><di:waypoint x="12522" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="9002" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pjibu8_di" bpmnElement="SequenceFlow_0pjibu8"><di:waypoint x="12360" y="2775" /><di:waypoint x="12380" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8865.5" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ezuhwq_di" bpmnElement="SequenceFlow_1ezuhwq"><di:waypoint x="8969" y="2775" /><di:waypoint x="9009" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rhva3z_di" bpmnElement="SequenceFlow_0rhva3z"><di:waypoint x="11220" y="2775" /><di:waypoint x="11248" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8082" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17cp93y_di" bpmnElement="SequenceFlow_17cp93y"><di:waypoint x="10860" y="2635" /><di:waypoint x="10811" y="2635" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0uf42gn_di" bpmnElement="SequenceFlow_0uf42gn"><di:waypoint x="11120" y="2945" /><di:waypoint x="11180" y="2945" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0iagg0b_di" bpmnElement="SequenceFlow_0iagg0b"><di:waypoint x="11095" y="2775" /><di:waypoint x="11120" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_068ir89_di" bpmnElement="SequenceFlow_068ir89"><di:waypoint x="11070" y="2750" /><di:waypoint x="11070" y="2635" /><di:waypoint x="10960" y="2635" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0p32r8k_di" bpmnElement="SequenceFlow_0p32r8k"><di:waypoint x="11070" y="2800" /><di:waypoint x="11070" y="2905" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0t56ov3_di" bpmnElement="SequenceFlow_0t56ov3"><di:waypoint x="10960" y="2775" /><di:waypoint x="11045" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wh3nec_di" bpmnElement="SequenceFlow_1wh3nec"><di:waypoint x="10811" y="2775" /><di:waypoint x="10860" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_199ntdu_di" bpmnElement="SequenceFlow_199ntdu"><di:waypoint x="10665" y="2635" /><di:waypoint x="10688" y="2635" /><di:waypoint x="10688" y="2775" /><di:waypoint x="10711" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mdztr7_di" bpmnElement="SequenceFlow_0mdztr7"><di:waypoint x="10711" y="2635" /><di:waypoint x="10665" y="2635" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x3cbwy_di" bpmnElement="SequenceFlow_1x3cbwy"><di:waypoint x="9251" y="2775" /><di:waypoint x="9299" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1t8nz5o_di" bpmnElement="SequenceFlow_1t8nz5o"><di:waypoint x="9109" y="2775" /><di:waypoint x="9151" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00srm5g_di" bpmnElement="SequenceFlow_00srm5g"><di:waypoint x="11722" y="2775" /><di:waypoint x="11761" y="2775" /><bpmndi:BPMNLabel><dc:Bounds x="8589.5" y="2470" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0k1xi9d_di" bpmnElement="SequenceFlow_0k1xi9d"><di:waypoint x="8464" y="2775" /><di:waypoint x="8484" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bglgip_di" bpmnElement="SequenceFlow_0bglgip"><di:waypoint x="8191" y="2775" /><di:waypoint x="8224" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0c19gx4_di" bpmnElement="SequenceFlow_0c19gx4"><di:waypoint x="7816" y="2775" /><di:waypoint x="7891" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17rz1ns_di" bpmnElement="SequenceFlow_17rz1ns"><di:waypoint x="8086" y="2715" /><di:waypoint x="8166" y="2715" /><di:waypoint x="8166" y="2750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13mr6jl_di" bpmnElement="SequenceFlow_13mr6jl"><di:waypoint x="7916" y="2750" /><di:waypoint x="7916" y="2715" /><di:waypoint x="7986" y="2715" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02k4fkx_di" bpmnElement="SequenceFlow_02k4fkx"><di:waypoint x="8086" y="2865" /><di:waypoint x="8166" y="2865" /><di:waypoint x="8166" y="2800" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1w3e54h_di" bpmnElement="SequenceFlow_1w3e54h"><di:waypoint x="7916" y="2800" /><di:waypoint x="7916" y="2865" /><di:waypoint x="7986" y="2865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pybp4t_di" bpmnElement="SequenceFlow_0pybp4t"><di:waypoint x="7674" y="2225" /><di:waypoint x="7674" y="2775" /><di:waypoint x="7716" y="2775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05bdry7_di" bpmnElement="SequenceFlow_05bdry7"><di:waypoint x="7674" y="2175" /><di:waypoint x="7674" y="1665" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zd426r_di" bpmnElement="SequenceFlow_0zd426r"><di:waypoint x="9844" y="1640" /><di:waypoint x="9884" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0to8j4v_di" bpmnElement="SequenceFlow_0to8j4v"><di:waypoint x="15130" y="1650" /><di:waypoint x="15180" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bn1q2i_di" bpmnElement="SequenceFlow_1bn1q2i"><di:waypoint x="8020" y="1738" /><di:waypoint x="8054" y="1738" /><di:waypoint x="8054" y="1680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ulr8ly_di" bpmnElement="SequenceFlow_0ulr8ly"><di:waypoint x="12874" y="1625" /><di:waypoint x="12874" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vmwpah_di" bpmnElement="SequenceFlow_0vmwpah"><di:waypoint x="12294" y="1820" /><di:waypoint x="12364" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07zxytc_di" bpmnElement="SequenceFlow_07zxytc"><di:waypoint x="11874" y="1510" /><di:waypoint x="11825" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bip9vm_di" bpmnElement="SequenceFlow_1bip9vm"><di:waypoint x="12924" y="1470" /><di:waypoint x="12954" y="1470" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0a5u4lc_di" bpmnElement="SequenceFlow_0a5u4lc"><di:waypoint x="12899" y="1650" /><di:waypoint x="12954" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_102wojw_di" bpmnElement="SequenceFlow_102wojw"><di:waypoint x="12134" y="1820" /><di:waypoint x="12194" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13t6kjy_di" bpmnElement="SequenceFlow_13t6kjy"><di:waypoint x="12109" y="1650" /><di:waypoint x="12134" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_146d45w_di" bpmnElement="SequenceFlow_146d45w"><di:waypoint x="12084" y="1625" /><di:waypoint x="12084" y="1510" /><di:waypoint x="11974" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15r9kvq_di" bpmnElement="SequenceFlow_15r9kvq"><di:waypoint x="12084" y="1675" /><di:waypoint x="12084" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qnethi_di" bpmnElement="SequenceFlow_1qnethi"><di:waypoint x="14000" y="1650" /><di:waypoint x="14030" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1m37dmq_di" bpmnElement="SequenceFlow_1m37dmq"><di:waypoint x="11974" y="1650" /><di:waypoint x="12059" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bcc7bs_di" bpmnElement="SequenceFlow_0bcc7bs"><di:waypoint x="11679" y="1650" /><di:waypoint x="11725" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09vokn8_di" bpmnElement="SequenceFlow_09vokn8"><di:waypoint x="11725" y="1510" /><di:waypoint x="11679" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vcjefu_di" bpmnElement="SequenceFlow_1vcjefu"><di:waypoint x="10126" y="1640" /><di:waypoint x="10174" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16ll2ec_di" bpmnElement="SequenceFlow_16ll2ec"><di:waypoint x="9984" y="1640" /><di:waypoint x="10026" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1k2uurt_di" bpmnElement="SequenceFlow_1k2uurt"><di:waypoint x="9704" y="1640" /><di:waypoint x="9744" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0z5nis4_di" bpmnElement="SequenceFlow_0z5nis4"><di:waypoint x="14270" y="1650" /><di:waypoint x="14300" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hplgjl_di" bpmnElement="SequenceFlow_1hplgjl"><di:waypoint x="14130" y="1650" /><di:waypoint x="14170" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04b2apa_di" bpmnElement="SequenceFlow_04b2apa"><di:waypoint x="14980" y="1650" /><di:waypoint x="15030" y="1650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0g5kjvh_di" bpmnElement="SequenceFlow_0g5kjvh"><di:waypoint x="9308" y="1640" /><di:waypoint x="9324" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1odqf90_di" bpmnElement="SequenceFlow_1odqf90"><di:waypoint x="9224" y="1720" /><di:waypoint x="9283" y="1720" /><di:waypoint x="9283" y="1665" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pas8sm_di" bpmnElement="SequenceFlow_1pas8sm"><di:waypoint x="9224" y="1560" /><di:waypoint x="9283" y="1560" /><di:waypoint x="9283" y="1615" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10ptmlc_di" bpmnElement="SequenceFlow_10ptmlc"><di:waypoint x="9074" y="1665" /><di:waypoint x="9074" y="1720" /><di:waypoint x="9124" y="1720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y70jv0_di" bpmnElement="SequenceFlow_1y70jv0"><di:waypoint x="9074" y="1615" /><di:waypoint x="9074" y="1560" /><di:waypoint x="9124" y="1560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11ro7gn_di" bpmnElement="SequenceFlow_11ro7gn"><di:waypoint x="7880" y="1738" /><di:waypoint x="7920" y="1738" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xmwbax_di" bpmnElement="SequenceFlow_1xmwbax"><di:waypoint x="8909" y="1640" /><di:waypoint x="8924" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0eplep9_di" bpmnElement="SequenceFlow_0eplep9"><di:waypoint x="8814" y="1730" /><di:waypoint x="8884" y="1730" /><di:waypoint x="8884" y="1665" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0c8lyld_di" bpmnElement="SequenceFlow_0c8lyld"><di:waypoint x="8814" y="1580" /><di:waypoint x="8884" y="1580" /><di:waypoint x="8884" y="1615" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jp3hxt_di" bpmnElement="SequenceFlow_1jp3hxt"><di:waypoint x="8654" y="1665" /><di:waypoint x="8654" y="1730" /><di:waypoint x="8714" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kv6x3n_di" bpmnElement="SequenceFlow_1kv6x3n"><di:waypoint x="8654" y="1615" /><di:waypoint x="8654" y="1580" /><di:waypoint x="8714" y="1580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1o5l7ht_di" bpmnElement="SequenceFlow_1o5l7ht"><di:waypoint x="8449" y="1640" /><di:waypoint x="8484" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0q2ig06_di" bpmnElement="SequenceFlow_0q2ig06"><di:waypoint x="8344" y="1580" /><di:waypoint x="8424" y="1580" /><di:waypoint x="8424" y="1615" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1k6jlii_di" bpmnElement="SequenceFlow_1k6jlii"><di:waypoint x="8174" y="1615" /><di:waypoint x="8174" y="1580" /><di:waypoint x="8244" y="1580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1mk7l79_di" bpmnElement="SequenceFlow_1mk7l79"><di:waypoint x="8104" y="1640" /><di:waypoint x="8134" y="1640" /><di:waypoint x="8134" y="1565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jjs3ml_di" bpmnElement="SequenceFlow_1jjs3ml"><di:waypoint x="8344" y="1730" /><di:waypoint x="8424" y="1730" /><di:waypoint x="8424" y="1665" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0p0zifm_di" bpmnElement="SequenceFlow_0p0zifm"><di:waypoint x="8174" y="1665" /><di:waypoint x="8174" y="1730" /><di:waypoint x="8244" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_103x44z_di" bpmnElement="SequenceFlow_103x44z"><di:waypoint x="6932" y="2090" /><di:waypoint x="6932" y="1852" /><di:waypoint x="6940" y="1852" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wrbukg_di" bpmnElement="SequenceFlow_1wrbukg"><di:waypoint x="5678" y="2250" /><di:waypoint x="5692" y="2250" /><di:waypoint x="5692" y="2100" /><di:waypoint x="5705" y="2100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09q1e17_di" bpmnElement="SequenceFlow_09q1e17"><di:waypoint x="7394" y="2115" /><di:waypoint x="7436" y="2115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x04nwb_di" bpmnElement="SequenceFlow_1x04nwb"><di:waypoint x="7254" y="2115" /><di:waypoint x="7294" y="2115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11fx7li_di" bpmnElement="SequenceFlow_11fx7li"><di:waypoint x="6957" y="2115" /><di:waypoint x="7154" y="2115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17j8bdt_di" bpmnElement="SequenceFlow_17j8bdt"><di:waypoint x="6262" y="2115" /><di:waypoint x="6203" y="2115" /><di:waypoint x="6203" y="2232" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ulqenb_di" bpmnElement="SequenceFlow_1ulqenb"><di:waypoint x="6430" y="2237" /><di:waypoint x="6350" y="2155" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19wjip3_di" bpmnElement="SequenceFlow_19wjip3"><di:waypoint x="6362" y="2250" /><di:waypoint x="6417" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1yj6g2a_di" bpmnElement="SequenceFlow_1yj6g2a"><di:waypoint x="6838" y="2256" /><di:waypoint x="6850" y="2256" /><di:waypoint x="6850" y="2250" /><di:waypoint x="6862" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07vj80d_di" bpmnElement="SequenceFlow_07vj80d"><di:waypoint x="6467" y="2250" /><di:waypoint x="6504" y="2250" /><di:waypoint x="6504" y="2248" /><di:waypoint x="6540" y="2248" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cmr33k_di" bpmnElement="SequenceFlow_1cmr33k"><di:waypoint x="6912" y="2210" /><di:waypoint x="6912" y="2175" /><di:waypoint x="6552" y="2175" /><di:waypoint x="6552" y="2155" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08sf1rx_di" bpmnElement="SequenceFlow_08sf1rx"><di:waypoint x="6442" y="2225" /><di:waypoint x="6442" y="1900" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1h0r3eh_di" bpmnElement="SequenceFlow_1h0r3eh"><di:waypoint x="6962" y="2545" /><di:waypoint x="7044" y="2545" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ifgadd_di" bpmnElement="SequenceFlow_0ifgadd"><di:waypoint x="6752" y="2545" /><di:waypoint x="6862" y="2545" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cpdx02_di" bpmnElement="SequenceFlow_0cpdx02"><di:waypoint x="7620" y="2000" /><di:waypoint x="7620" y="2200" /><di:waypoint x="7649" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0d01uzi_di" bpmnElement="SequenceFlow_0d01uzi"><di:waypoint x="5960" y="2390" /><di:waypoint x="5989" y="2390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wx9qhm_di" bpmnElement="SequenceFlow_1wx9qhm"><di:waypoint x="5478" y="2290" /><di:waypoint x="5478" y="2360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e0twae_di" bpmnElement="SequenceFlow_1e0twae"><di:waypoint x="5528" y="2250" /><di:waypoint x="5578" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ig2vrz_di" bpmnElement="SequenceFlow_0ig2vrz"><di:waypoint x="2490" y="2250" /><di:waypoint x="2513" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pdwx9a_di" bpmnElement="SequenceFlow_1pdwx9a"><di:waypoint x="2229" y="2251" /><di:waypoint x="2262" y="2251" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="start"><dc:Bounds x="-138" y="2238" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="-105" y="1994" width="76" height="36" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1quc7do_di" bpmnElement="Task_0micukk" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="2129" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1nsu2mr_di" bpmnElement="ServiceTask_1nsu2mr"><dc:Bounds x="2390" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xj4nui_di" bpmnElement="ServiceTask_1xj4nui"><dc:Bounds x="2513" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0jx7azk_di" bpmnElement="UserTask_0jx7azk" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="5288" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1w6azwq_di" bpmnElement="ServiceTask_1w6azwq"><dc:Bounds x="7570" y="1920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1l9sz6w_di" bpmnElement="UserTask_1l9sz6w" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="5428" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0dnyydf_di" bpmnElement="ServiceTask_0dnyydf"><dc:Bounds x="5578" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1i63v4i_di" bpmnElement="ServiceTask_1i63v4i"><dc:Bounds x="5740" y="2350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1niobpj_di" bpmnElement="ServiceTask_1niobpj"><dc:Bounds x="5860" y="2350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0m2b8in_di" bpmnElement="EndEvent_0m2b8in"><dc:Bounds x="5989" y="2372" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1i5lfhe_di" bpmnElement="ServiceTask_1i5lfhe"><dc:Bounds x="7440" y="1830" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1jine9y_di" bpmnElement="ExclusiveGateway_1jine9y" isMarkerVisible="true"><dc:Bounds x="7649" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a3trbz_di" bpmnElement="ServiceTask_0a3trbz"><dc:Bounds x="6862" y="2505" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1bh5tgs_di" bpmnElement="EndEvent_1bh5tgs"><dc:Bounds x="7044" y="2527" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0w316k3_di" bpmnElement="ServiceTask_0w316k3"><dc:Bounds x="6652" y="2505" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_02050sn_di" bpmnElement="ServiceTask_02050sn"><dc:Bounds x="5945" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0jq87gr_di" bpmnElement="UserTask_0jq87gr" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="6862" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_18c03g1_di" bpmnElement="ExclusiveGateway_18c03g1" isMarkerVisible="true"><dc:Bounds x="6417" y="2225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1wj8abk_di" bpmnElement="ServiceTask_1wj8abk"><dc:Bounds x="6502" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0av75fr_di" bpmnElement="ExclusiveGateway_0av75fr" isMarkerVisible="true"><dc:Bounds x="6907" y="2090" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1u9q8ga_di" bpmnElement="ServiceTask_1u9q8ga"><dc:Bounds x="7154" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_18cqsg7_di" bpmnElement="EndEvent_18cqsg7"><dc:Bounds x="7436" y="2097" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lsw96z_di" bpmnElement="ServiceTask_0lsw96z"><dc:Bounds x="7294" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0za4s1s_di" bpmnElement="ServiceTask_0za4s1s"><dc:Bounds x="6738" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0x9vgdb_di" bpmnElement="ServiceTask_0x9vgdb"><dc:Bounds x="6262" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pkgjn3_di" bpmnElement="ServiceTask_1pkgjn3"><dc:Bounds x="6262" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fgizlg_di" bpmnElement="ServiceTask_1fgizlg"><dc:Bounds x="8244" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0v5n1sb_di" bpmnElement="ParallelGateway_0v5n1sb"><dc:Bounds x="8149" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_1v35bvh_di" bpmnElement="ReceiveTask_1v35bvh"><dc:Bounds x="8244" y="1540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_021zz1s_di" bpmnElement="ParallelGateway_021zz1s"><dc:Bounds x="8399" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_18f7lyn_di" bpmnElement="ParallelGateway_18f7lyn"><dc:Bounds x="8629" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_0p2bm5s_di" bpmnElement="ReceiveTask_0p2bm5s"><dc:Bounds x="8714" y="1540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0hg0q3j_di" bpmnElement="ParallelGateway_0hg0q3j"><dc:Bounds x="8859" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_14j4eau_di" bpmnElement="ServiceTask_14j4eau"><dc:Bounds x="8714" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1lyw3n7_di" bpmnElement="ServiceTask_1lyw3n7"><dc:Bounds x="7780" y="1698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_02fjxcg_di" bpmnElement="ParallelGateway_02fjxcg"><dc:Bounds x="9049" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0wnrlq5_di" bpmnElement="ParallelGateway_0wnrlq5"><dc:Bounds x="9258" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1fg4lpq_di" bpmnElement="CallActivity_1fg4lpq"><dc:Bounds x="9124" y="1520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0bzqib1_di" bpmnElement="CallActivity_0bzqib1"><dc:Bounds x="9124" y="1680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1o7mlrf_di" bpmnElement="ServiceTask_1o7mlrf"><dc:Bounds x="15340" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_05npkcj_di" bpmnElement="ServiceTask_05npkcj"><dc:Bounds x="14880" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0gavquf_di" bpmnElement="ServiceTask_0gavquf"><dc:Bounds x="14170" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1kolnm5_di" bpmnElement="ServiceTask_1kolnm5"><dc:Bounds x="14300" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0ejsq65_di" bpmnElement="CallActivity_0ejsq65"><dc:Bounds x="9604" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03fbor1_di" bpmnElement="ServiceTask_03fbor1"><dc:Bounds x="10026" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0edtk7z_di" bpmnElement="ServiceTask_0edtk7z"><dc:Bounds x="10174" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_1kqv5hw_di" bpmnElement="ReceiveTask_1kqv5hw"><dc:Bounds x="11579" y="1470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03i59df_di" bpmnElement="ServiceTask_03i59df"><dc:Bounds x="11874" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_07p05f6_di" bpmnElement="ServiceTask_07p05f6"><dc:Bounds x="11579" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1s3ztd9_di" bpmnElement="ServiceTask_1s3ztd9"><dc:Bounds x="13900" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_07kcx3u_di" bpmnElement="ServiceTask_07kcx3u"><dc:Bounds x="14030" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1xmd5vu_di" bpmnElement="ExclusiveGateway_1xmd5vu" isMarkerVisible="true"><dc:Bounds x="12059" y="1625" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ktgl8u_di" bpmnElement="ServiceTask_1ktgl8u"><dc:Bounds x="12034" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1hzsqp3_di" bpmnElement="EndEvent_1hzsqp3"><dc:Bounds x="13146" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0lq2to6_di" bpmnElement="CallActivity_0lq2to6"><dc:Bounds x="12954" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fpw11h_di" bpmnElement="ServiceTask_1fpw11h"><dc:Bounds x="11874" y="1470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ls2og1_di" bpmnElement="ServiceTask_1ls2og1"><dc:Bounds x="11725" y="1470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xxar22_di" bpmnElement="ServiceTask_1xxar22"><dc:Bounds x="12194" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0j9l1mf_di" bpmnElement="ServiceTask_0j9l1mf"><dc:Bounds x="12364" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0ive4l3_di" bpmnElement="ExclusiveGateway_0ive4l3" isMarkerVisible="true"><dc:Bounds x="12849" y="1625" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1mvw3x7_di" bpmnElement="ServiceTask_1mvw3x7"><dc:Bounds x="12824" y="1430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1v7yhhs_di" bpmnElement="ServiceTask_1v7yhhs"><dc:Bounds x="7920" y="1698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1y71prg_di" bpmnElement="ServiceTask_1y71prg"><dc:Bounds x="8004" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1h3imt0_di" bpmnElement="ServiceTask_1h3imt0"><dc:Bounds x="15030" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0t8glgc_di" bpmnElement="ServiceTask_0t8glgc"><dc:Bounds x="12134" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04e4sbc_di" bpmnElement="ServiceTask_04e4sbc"><dc:Bounds x="9744" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0p9639w_di" bpmnElement="ServiceTask_0p9639w"><dc:Bounds x="9884" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1yfanir_di" bpmnElement="ServiceTask_1yfanir"><dc:Bounds x="7716" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jiya69_di" bpmnElement="ServiceTask_1jiya69"><dc:Bounds x="7986" y="2825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_04zfs58_di" bpmnElement="ParallelGateway_04zfs58"><dc:Bounds x="7891" y="2750" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_0fktugq_di" bpmnElement="ReceiveTask_0fktugq"><dc:Bounds x="7986" y="2675" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0d1ymo1_di" bpmnElement="ParallelGateway_0d1ymo1"><dc:Bounds x="8141" y="2750" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0psfpif_di" bpmnElement="CallActivity_0psfpif"><dc:Bounds x="8364" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1goqhd6_di" bpmnElement="ServiceTask_1goqhd6"><dc:Bounds x="11761" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a5regl_di" bpmnElement="ServiceTask_0a5regl"><dc:Bounds x="11371" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0b3xg6y_di" bpmnElement="ServiceTask_0b3xg6y"><dc:Bounds x="11622" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1gowapv_di" bpmnElement="CallActivity_1gowapv"><dc:Bounds x="8729" y="2740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0txnha6_di" bpmnElement="ServiceTask_0txnha6"><dc:Bounds x="9151" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1di59v0_di" bpmnElement="ServiceTask_1di59v0"><dc:Bounds x="9299" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_0fmr6lg_di" bpmnElement="ReceiveTask_0fmr6lg"><dc:Bounds x="10565" y="2595" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1mltjur_di" bpmnElement="ServiceTask_1mltjur"><dc:Bounds x="10860" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1oa977j_di" bpmnElement="ServiceTask_1oa977j"><dc:Bounds x="10711" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_14wo9pm_di" bpmnElement="ExclusiveGateway_14wo9pm" isMarkerVisible="true"><dc:Bounds x="11045" y="2750" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_05q8pmm_di" bpmnElement="ServiceTask_05q8pmm"><dc:Bounds x="11020" y="2905" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0f8d1rd_di" bpmnElement="EndEvent_0f8d1rd"><dc:Bounds x="11863" y="2927" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1a6uusa_di" bpmnElement="ServiceTask_1a6uusa"><dc:Bounds x="10860" y="2595" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d15c6w_di" bpmnElement="ServiceTask_0d15c6w"><dc:Bounds x="10711" y="2595" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0es1wmo_di" bpmnElement="ServiceTask_0es1wmo"><dc:Bounds x="11180" y="2905" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_02j2nmc_di" bpmnElement="ServiceTask_02j2nmc"><dc:Bounds x="11120" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ry249t_di" bpmnElement="ServiceTask_0ry249t"><dc:Bounds x="8869" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fgomn1_di" bpmnElement="ServiceTask_1fgomn1"><dc:Bounds x="9009" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_077p363_di" bpmnElement="ServiceTask_077p363"><dc:Bounds x="12380" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0ka4j7h_di" bpmnElement="EndEvent_0ka4j7h"><dc:Bounds x="12522" y="2757" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="9042" y="2513" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kqlp5a_di" bpmnElement="ServiceTask_0kqlp5a"><dc:Bounds x="12260" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rvkrdr_di" bpmnElement="ServiceTask_0rvkrdr"><dc:Bounds x="3161" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_16au14g_di" bpmnElement="ServiceTask_16au14g"><dc:Bounds x="8064" y="2250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0ztbd54_di" bpmnElement="ParallelGateway_0ztbd54"><dc:Bounds x="7969" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_10loqqo_di" bpmnElement="ReceiveTask_10loqqo"><dc:Bounds x="8064" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0pcb9rb_di" bpmnElement="ParallelGateway_0pcb9rb"><dc:Bounds x="8219" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1ic3vs4_di" bpmnElement="CallActivity_1ic3vs4"><dc:Bounds x="8434" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0sax282_di" bpmnElement="ServiceTask_0sax282"><dc:Bounds x="12763" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1l3fd12_di" bpmnElement="ServiceTask_1l3fd12"><dc:Bounds x="12337" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0vxvica_di" bpmnElement="ServiceTask_0vxvica"><dc:Bounds x="12622" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0sbgmwc_di" bpmnElement="CallActivity_0sbgmwc"><dc:Bounds x="8807" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1el9hq0_di" bpmnElement="ServiceTask_1el9hq0"><dc:Bounds x="9234" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08402px_di" bpmnElement="ServiceTask_08402px"><dc:Bounds x="9377" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_1y0rmc3_di" bpmnElement="ReceiveTask_1y0rmc3"><dc:Bounds x="10554" y="2020" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_082ihp5_di" bpmnElement="ServiceTask_082ihp5"><dc:Bounds x="10849" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1bt4cie_di" bpmnElement="ServiceTask_1bt4cie"><dc:Bounds x="10700" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0auk29s_di" bpmnElement="ServiceTask_0auk29s"><dc:Bounds x="12206" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0q5y88q_di" bpmnElement="ExclusiveGateway_0q5y88q" isMarkerVisible="true"><dc:Bounds x="11034" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1tujwnn_di" bpmnElement="CallActivity_1tujwnn"><dc:Bounds x="11394" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rrhi7p_di" bpmnElement="ServiceTask_0rrhi7p"><dc:Bounds x="10849" y="2020" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lrj66x_di" bpmnElement="ServiceTask_0lrj66x"><dc:Bounds x="10700" y="2020" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1n4fpi8_di" bpmnElement="ServiceTask_1n4fpi8"><dc:Bounds x="11109" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_052vhtl_di" bpmnElement="ServiceTask_052vhtl"><dc:Bounds x="8947" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0u5rhd9_di" bpmnElement="ServiceTask_0u5rhd9"><dc:Bounds x="9087" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jalob6_di" bpmnElement="ServiceTask_1jalob6"><dc:Bounds x="13420" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_065bz53_di" bpmnElement="EndEvent_065bz53"><dc:Bounds x="13562" y="2182" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="10111" y="1938" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_089vzfq_di" bpmnElement="ServiceTask_089vzfq"><dc:Bounds x="13280" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11hhbwl_di" bpmnElement="ServiceTask_11hhbwl"><dc:Bounds x="7850" y="2268" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11xp1hm_di" bpmnElement="ServiceTask_11xp1hm"><dc:Bounds x="7716" y="2268" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19e5i3t_di" bpmnElement="ServiceTask_19e5i3t"><dc:Bounds x="9454" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0fbdx9d_di" bpmnElement="ServiceTask_0fbdx9d"><dc:Bounds x="8674" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_045y1hy_di" bpmnElement="ServiceTask_045y1hy"><dc:Bounds x="8617" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0tms8y1_di" bpmnElement="ServiceTask_0tms8y1"><dc:Bounds x="4998" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0q6b023_di" bpmnElement="ScriptTask_0q6b023"><dc:Bounds x="3976" y="2209" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1t7exr7_di" bpmnElement="ServiceTask_1t7exr7"><dc:Bounds x="5705" y="2060" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0815ozt_di" bpmnElement="ServiceTask_0815ozt"><dc:Bounds x="11248" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1akonqf_di" bpmnElement="ServiceTask_1akonqf"><dc:Bounds x="6067" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ekzbla_di" bpmnElement="ServiceTask_0ekzbla"><dc:Bounds x="4223" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1gyqbyo_di" bpmnElement="ServiceTask_1gyqbyo"><dc:Bounds x="4622" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0cdarrt_di" bpmnElement="ServiceTask_0cdarrt"><dc:Bounds x="4098" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0cefki3_di" bpmnElement="ServiceTask_0cefki3"><dc:Bounds x="6540" y="2209" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1a1lg31_di" bpmnElement="ServiceTask_1a1lg31"><dc:Bounds x="6512" y="2505" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_16fw3u8_di" bpmnElement="ServiceTask_16fw3u8"><dc:Bounds x="4489" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0mnjl04_di" bpmnElement="ServiceTask_0mnjl04"><dc:Bounds x="4357" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_188k01z_di" bpmnElement="ServiceTask_188k01z"><dc:Bounds x="13200" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1u9snva_di" bpmnElement="ServiceTask_1u9snva"><dc:Bounds x="13350" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0twem98_di" bpmnElement="ServiceTask_0twem98"><dc:Bounds x="13070" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_175pd56_di" bpmnElement="ServiceTask_175pd56"><dc:Bounds x="13560" y="1528" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0nol180_di" bpmnElement="ExclusiveGateway_0nol180" isMarkerVisible="true"><dc:Bounds x="13478" y="1625" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1p58b4k_di" bpmnElement="ServiceTask_1p58b4k"><dc:Bounds x="13560" y="1698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ql7bg5_di" bpmnElement="ServiceTask_1ql7bg5"><dc:Bounds x="13710" y="1528" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1phelq3_di" bpmnElement="ServiceTask_1phelq3"><dc:Bounds x="13710" y="1698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1lvgcch_di" bpmnElement="ServiceTask_1lvgcch"><dc:Bounds x="11517" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ko38y8_di" bpmnElement="ServiceTask_0ko38y8"><dc:Bounds x="11646" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0yid1kk_di" bpmnElement="ServiceTask_0yid1kk"><dc:Bounds x="11842" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_02bzkyv_di" bpmnElement="ExclusiveGateway_02bzkyv" isMarkerVisible="true"><dc:Bounds x="11779" y="2175" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="8741" y="1945" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rlj89d_di" bpmnElement="ServiceTask_0rlj89d"><dc:Bounds x="11842" y="2250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0x4hk6u_di" bpmnElement="ServiceTask_0x4hk6u"><dc:Bounds x="11994" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1p7vjau_di" bpmnElement="ServiceTask_1p7vjau"><dc:Bounds x="11994" y="2250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0nni9yl_di" bpmnElement="ScriptTask_0nni9yl"><dc:Bounds x="12478" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_164cmj9_di" bpmnElement="ScriptTask_164cmj9"><dc:Bounds x="11248" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_037ly5v_di" bpmnElement="ServiceTask_037ly5v"><dc:Bounds x="6764" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_10cfhl6_di" bpmnElement="ServiceTask_10cfhl6"><dc:Bounds x="5705" y="2209" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_09wf7tg_di" bpmnElement="CallActivity_09wf7tg" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5569" y="1745" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0veat64_di" bpmnElement="ServiceTask_0veat64"><dc:Bounds x="12502" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_052bogv_di" bpmnElement="ServiceTask_052bogv"><dc:Bounds x="11321" y="2905" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bp7ky9_di" bpmnElement="ServiceTask_0bp7ky9"><dc:Bounds x="11490" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ph69qx_di" bpmnElement="ServiceTask_1ph69qx"><dc:Bounds x="4998" y="2050" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0g4dudp_di" bpmnElement="ScriptTask_0g4dudp"><dc:Bounds x="4880" y="1930" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0pqqxqu_di" bpmnElement="ServiceTask_0pqqxqu"><dc:Bounds x="4880" y="1810" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0a5win6_di" bpmnElement="ExclusiveGateway_0a5win6" isMarkerVisible="true"><dc:Bounds x="4905" y="2065" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0479m5y_di" bpmnElement="ScriptTask_0479m5y"><dc:Bounds x="4740" y="1930" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0100cbb_di" bpmnElement="ServiceTask_0100cbb"><dc:Bounds x="5408" y="940" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1erl10x_di" bpmnElement="ScriptTask_1erl10x"><dc:Bounds x="5642" y="1033" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0186p6m_di" bpmnElement="ServiceTask_0186p6m"><dc:Bounds x="5569" y="1123" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_09eshn9_di" bpmnElement="ExclusiveGateway_09eshn9" isMarkerVisible="true"><dc:Bounds x="5594" y="955" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1yxaw1p_di" bpmnElement="ScriptTask_1yxaw1p"><dc:Bounds x="5490" y="1033" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1sdmmyw_di" bpmnElement="CallActivity_1sdmmyw"><dc:Bounds x="14440" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0of9vqe_di" bpmnElement="ServiceTask_0of9vqe"><dc:Bounds x="5189" y="1567" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1ewuxq5_di" bpmnElement="ExclusiveGateway_1ewuxq5" isMarkerVisible="true"><dc:Bounds x="5313" y="1582" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_159m7pi_di" bpmnElement="CallActivity_159m7pi" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5288" y="2075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1rz92au_di" bpmnElement="ExclusiveGateway_1rz92au" isMarkerVisible="true"><dc:Bounds x="5313" y="1995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0kukcd3_di" bpmnElement="CallActivity_0kukcd3"><dc:Bounds x="6392" y="1820" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1bqc30f_di" bpmnElement="ExclusiveGateway_1bqc30f" isMarkerVisible="true"><dc:Bounds x="6527" y="1835" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_188keyt_di" bpmnElement="ServiceTask_188keyt"><dc:Bounds x="6502" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04foilk_di" bpmnElement="ServiceTask_04foilk"><dc:Bounds x="6642" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0wl4skr_di" bpmnElement="EndEvent_0wl4skr"><dc:Bounds x="6784" y="1712" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xxuq56_di" bpmnElement="ServiceTask_1xxuq56"><dc:Bounds x="5310" y="1680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1xoo5xw_di" bpmnElement="ScriptTask_1xoo5xw"><dc:Bounds x="5189" y="1680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1soezsr_di" bpmnElement="ServiceTask_1soezsr"><dc:Bounds x="5139" y="2690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00wngw9_di" bpmnElement="ServiceTask_00wngw9"><dc:Bounds x="1637" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0vh2w6m_di" bpmnElement="ServiceTask_0vh2w6m"><dc:Bounds x="11461" y="2905" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0pb2df4_di" bpmnElement="ExclusiveGateway_0pb2df4" isMarkerVisible="true"><dc:Bounds x="11606" y="2920" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0yo7zt4_di" bpmnElement="ServiceTask_0yo7zt4"><dc:Bounds x="9360" y="3110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1c5qb7h_di" bpmnElement="ServiceTask_1c5qb7h"><dc:Bounds x="11711" y="2905" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_092z4or_di" bpmnElement="ServiceTask_092z4or"><dc:Bounds x="11031" y="2390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0vy736x_di" bpmnElement="EndEvent_0vy736x"><dc:Bounds x="11874" y="2412" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1rcr7d1_di" bpmnElement="ServiceTask_1rcr7d1"><dc:Bounds x="11191" y="2390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0sdkq9m_di" bpmnElement="ServiceTask_0sdkq9m"><dc:Bounds x="11332" y="2390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ynl3uo_di" bpmnElement="ServiceTask_1ynl3uo"><dc:Bounds x="11472" y="2390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1ljbu1w_di" bpmnElement="ExclusiveGateway_1ljbu1w" isMarkerVisible="true"><dc:Bounds x="11617" y="2405" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1uk8evt_di" bpmnElement="ServiceTask_1uk8evt"><dc:Bounds x="9324" y="2520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1vy2hj7_di" bpmnElement="ServiceTask_1vy2hj7"><dc:Bounds x="11722" y="2390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_046po86_di" bpmnElement="ServiceTask_046po86"><dc:Bounds x="12640" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a8bi0w_di" bpmnElement="ServiceTask_0a8bi0w"><dc:Bounds x="12770" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0ctl8qe_di" bpmnElement="ExclusiveGateway_0ctl8qe" isMarkerVisible="true"><dc:Bounds x="12905" y="1795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0dfm2bt_di" bpmnElement="ServiceTask_0dfm2bt"><dc:Bounds x="13010" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1sfapzb_di" bpmnElement="ServiceTask_1sfapzb"><dc:Bounds x="9993" y="1881" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0xzreng_di" bpmnElement="ExclusiveGateway_0xzreng" isMarkerVisible="true"><dc:Bounds x="7649" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0wss08e_di" bpmnElement="ExclusiveGateway_0wss08e" isMarkerVisible="true"><dc:Bounds x="7741" y="2085" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08f6oa9_di" bpmnElement="ServiceTask_08f6oa9"><dc:Bounds x="1460" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0pi2cy9_di" bpmnElement="ExclusiveGateway_0pi2cy9" isMarkerVisible="true"><dc:Bounds x="8109" y="1515" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1bog2vq_di" bpmnElement="ExclusiveGateway_1bog2vq" isMarkerVisible="true"><dc:Bounds x="7929" y="2085" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1kifncn_di" bpmnElement="ScriptTask_1kifncn"><dc:Bounds x="8484" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1rdlh83_di" bpmnElement="ScriptTask_1rdlh83"><dc:Bounds x="8924" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0noqkoz_di" bpmnElement="ScriptTask_0noqkoz"><dc:Bounds x="9324" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1yu80fj_di" bpmnElement="ScriptTask_1yu80fj"><dc:Bounds x="8314" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0nogqlg_di" bpmnElement="ScriptTask_0nogqlg"><dc:Bounds x="8544" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0fi6y6p_di" bpmnElement="ScriptTask_0fi6y6p"><dc:Bounds x="8224" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0k2g0xn_di" bpmnElement="ScriptTask_0k2g0xn"><dc:Bounds x="8484" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1f46z2l_di" bpmnElement="ScriptTask_1f46z2l"><dc:Bounds x="5823" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0li6d24_di" bpmnElement="ServiceTask_0li6d24"><dc:Bounds x="5139" y="2320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19jbs48_di" bpmnElement="ServiceTask_19jbs48"><dc:Bounds x="5569" y="1970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12m20qg_di" bpmnElement="ServiceTask_12m20qg"><dc:Bounds x="15906" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1e4iqng_di" bpmnElement="EndEvent_1e4iqng"><dc:Bounds x="16061" y="1632" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="12438" y="1378" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1a4u7co_di" bpmnElement="ServiceTask_1a4u7co"><dc:Bounds x="15500" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a1uhk4_di" bpmnElement="ServiceTask_0a1uhk4"><dc:Bounds x="5569" y="1855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1sar19p_di" bpmnElement="ExclusiveGateway_1sar19p" isMarkerVisible="true"><dc:Bounds x="5594" y="1655" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0be62a4_di" bpmnElement="ServiceTask_0be62a4"><dc:Bounds x="5569" y="1223" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_09v7zs5_di" bpmnElement="ServiceTask_09v7zs5"><dc:Bounds x="5600" y="2350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0gha1qu_di" bpmnElement="ServiceTask_0gha1qu"><dc:Bounds x="5139" y="2430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_16x0zvt_di" bpmnElement="ServiceTask_16x0zvt"><dc:Bounds x="2903" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0raj07w_di" bpmnElement="ServiceTask_0raj07w"><dc:Bounds x="3033" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1qh7olf_di" bpmnElement="ServiceTask_1qh7olf"><dc:Bounds x="2643" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d8jmme_di" bpmnElement="ServiceTask_0d8jmme"><dc:Bounds x="2773" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0446v5i_di" bpmnElement="ExclusiveGateway_0446v5i" isMarkerVisible="true"><dc:Bounds x="1775" y="2231" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_18uimad_di" bpmnElement="ServiceTask_18uimad"><dc:Bounds x="1417" y="910" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1x7xrmd_di" bpmnElement="ServiceTask_1x7xrmd"><dc:Bounds x="2586" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1hkypv3_di" bpmnElement="ServiceTask_1hkypv3"><dc:Bounds x="4237" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_07jtxwf_di" bpmnElement="ScriptTask_07jtxwf"><dc:Bounds x="2711" y="779" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bl5ovp_di" bpmnElement="ServiceTask_0bl5ovp"><dc:Bounds x="2988" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1huvnlk_di" bpmnElement="ServiceTask_1huvnlk"><dc:Bounds x="4098" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1quc66o_di" bpmnElement="ServiceTask_1quc66o"><dc:Bounds x="2868" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12c8xbb_di" bpmnElement="ServiceTask_12c8xbb"><dc:Bounds x="3268" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1l1qeuy_di" bpmnElement="ServiceTask_1l1qeuy"><dc:Bounds x="3108" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1mwq52o_di" bpmnElement="ServiceTask_1mwq52o"><dc:Bounds x="2189" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0dvqd4x_di" bpmnElement="ServiceTask_0dvqd4x"><dc:Bounds x="2458" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1qf7x5r_di" bpmnElement="ServiceTask_1qf7x5r"><dc:Bounds x="1850" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_027mg5a_di" bpmnElement="ServiceTask_027mg5a"><dc:Bounds x="2059" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1vdaksc_di" bpmnElement="CallActivity_1vdaksc"><dc:Bounds x="5080" y="320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_15jpy7y_di" bpmnElement="ServiceTask_15jpy7y"><dc:Bounds x="4603" y="690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_124togd_di" bpmnElement="ScriptTask_124togd"><dc:Bounds x="4603" y="480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1wx5e6e_di" bpmnElement="ServiceTask_1wx5e6e"><dc:Bounds x="4603" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1a4xr5d_di" bpmnElement="ExclusiveGateway_1a4xr5d" isMarkerVisible="true"><dc:Bounds x="4628" y="615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1qfepgj_di" bpmnElement="ScriptTask_1qfepgj"><dc:Bounds x="4744" y="480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1513np4_di" bpmnElement="CallActivity_1513np4" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="4603" y="1002" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jwu1l9_di" bpmnElement="ServiceTask_1jwu1l9"><dc:Bounds x="5080" y="580" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0l4ahew_di" bpmnElement="ServiceTask_0l4ahew"><dc:Bounds x="5080" y="458" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0p4a9si_di" bpmnElement="ExclusiveGateway_0p4a9si" isMarkerVisible="true"><dc:Bounds x="5105" y="85" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0nf3rp9_di" bpmnElement="ServiceTask_0nf3rp9"><dc:Bounds x="4754" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0tdlwtb_di" bpmnElement="ServiceTask_0tdlwtb"><dc:Bounds x="4373" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_13wc4i0_di" bpmnElement="ServiceTask_13wc4i0"><dc:Bounds x="4373" y="890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0emzods_di" bpmnElement="ServiceTask_0emzods"><dc:Bounds x="4373" y="1002" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0lnop7f_di" bpmnElement="UserTask_0lnop7f"><dc:Bounds x="5230" y="580" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1gq9x9l_di" bpmnElement="ServiceTask_1gq9x9l"><dc:Bounds x="5380" y="580" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1shmpv4_di" bpmnElement="ServiceTask_1shmpv4"><dc:Bounds x="5371" y="720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03mse90_di" bpmnElement="ServiceTask_03mse90"><dc:Bounds x="5491" y="720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1tsewb8_di" bpmnElement="EndEvent_1tsewb8"><dc:Bounds x="5620" y="742" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0als207_di" bpmnElement="ServiceTask_0als207"><dc:Bounds x="5231" y="720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0jti9cn_di" bpmnElement="ServiceTask_0jti9cn"><dc:Bounds x="1690" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0wgex8v_di" bpmnElement="ServiceTask_0wgex8v"><dc:Bounds x="1550" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pzxaqy_di" bpmnElement="ServiceTask_1pzxaqy"><dc:Bounds x="1417" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_0si0sit_di" bpmnElement="IntermediateCatchEvent_0si0sit"><dc:Bounds x="6185" y="2232" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_140j9dg_di" bpmnElement="ServiceTask_140j9dg"><dc:Bounds x="1992" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1sjy7uk_di" bpmnElement="ServiceTask_1sjy7uk"><dc:Bounds x="2262" y="2211" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xcdx30_di" bpmnElement="ServiceTask_1xcdx30"><dc:Bounds x="4746" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0x7p2qj_di" bpmnElement="ServiceTask_0x7p2qj"><dc:Bounds x="4869" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1rb23fy_di" bpmnElement="ServiceTask_1rb23fy"><dc:Bounds x="5459" y="2070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1r21zub_di" bpmnElement="CallActivity_1r21zub" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5288" y="1474" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1g3jmq5_di" bpmnElement="ExclusiveGateway_1g3jmq5" isMarkerVisible="true"><dc:Bounds x="5313" y="1391" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0kxj6or_di" bpmnElement="CallActivity_0kxj6or" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5288" y="1274" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_091u417_di" bpmnElement="ExclusiveGateway_091u417" isMarkerVisible="true"><dc:Bounds x="5313" y="1182" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ddmav7_di" bpmnElement="TaskStatus_Creation"><dc:Bounds x="1312" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1ncx3ij_di" bpmnElement="ScriptTask_1ncx3ij"><dc:Bounds x="5450" y="2360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0m5bq8f_di" bpmnElement="ScriptTask_0m5bq8f"><dc:Bounds x="5139" y="2560" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_1k7uips_di" bpmnElement="SubProcess_1k7uips" isExpanded="true"><dc:Bounds x="10290" y="1530" width="650" height="220" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_0eog2t6_di" bpmnElement="SequenceFlow_0eog2t6"><di:waypoint x="10366" y="1641" /><di:waypoint x="10425" y="1641" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11s6evp_di" bpmnElement="SequenceFlow_11s6evp"><di:waypoint x="10450" y="1666" /><di:waypoint x="10450" y="1690" /><di:waypoint x="10570" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hgpw0w_di" bpmnElement="SequenceFlow_0hgpw0w"><di:waypoint x="10450" y="1616" /><di:waypoint x="10450" y="1590" /><di:waypoint x="10570" y="1590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0v6zlum_di" bpmnElement="SequenceFlow_0v6zlum"><di:waypoint x="10670" y="1590" /><di:waypoint x="10720" y="1590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18psvvk_di" bpmnElement="SequenceFlow_18psvvk"><di:waypoint x="10820" y="1590" /><di:waypoint x="10872" y="1590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14wkh58_di" bpmnElement="SequenceFlow_14wkh58"><di:waypoint x="10670" y="1690" /><di:waypoint x="10720" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lnkr8n_di" bpmnElement="SequenceFlow_1lnkr8n"><di:waypoint x="10820" y="1690" /><di:waypoint x="10872" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_11e4hxg_di" bpmnElement="StartEvent_11e4hxg"><dc:Bounds x="10330" y="1623" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0dythwy_di" bpmnElement="ParallelGateway_0dythwy"><dc:Bounds x="10425" y="1616" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_15f3cyk_di" bpmnElement="ReceiveTask_15f3cyk"><dc:Bounds x="10570" y="1650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_06osuzy_di" bpmnElement="UserTask_06osuzy" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="10570" y="1550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0m7axkg_di" bpmnElement="ServiceTask_0m7axkg"><dc:Bounds x="10720" y="1550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0a52d4s_di" bpmnElement="EndEvent_0a52d4s"><dc:Bounds x="10872" y="1572" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0ra80fe_di" bpmnElement="EndEvent_0ra80fe"><dc:Bounds x="10872" y="1672" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00r02jf_di" bpmnElement="ServiceTask_00r02jf"><dc:Bounds x="10720" y="1650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_02sduem_di" bpmnElement="ExclusiveGateway_02sduem" isMarkerVisible="true"><dc:Bounds x="11235" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1plwno4_di" bpmnElement="ServiceTask_1plwno4"><dc:Bounds x="11210" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jibsrq_di" bpmnElement="ServiceTask_1jibsrq"><dc:Bounds x="10640" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12zbmh7_di" bpmnElement="ServiceTask_12zbmh7"><dc:Bounds x="10480" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0f110jd_di" bpmnElement="ServiceTask_0f110jd"><dc:Bounds x="10910" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_197v1uz_di" bpmnElement="ServiceTask_197v1uz"><dc:Bounds x="10780" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0z40gs0_di" bpmnElement="ServiceTask_0z40gs0"><dc:Bounds x="10300" y="1774" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_0mn3jsg_di" bpmnElement="SubProcess_0mn3jsg" isExpanded="true"><dc:Bounds x="9575" y="2090" width="650" height="220" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_0s0k6nu_di" bpmnElement="SequenceFlow_0s0k6nu"><di:waypoint x="9651" y="2201" /><di:waypoint x="9710" y="2201" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0iy8n4l_di" bpmnElement="SequenceFlow_0iy8n4l"><di:waypoint x="9735" y="2226" /><di:waypoint x="9735" y="2250" /><di:waypoint x="9855" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xttdd9_di" bpmnElement="SequenceFlow_1xttdd9"><di:waypoint x="9735" y="2176" /><di:waypoint x="9735" y="2150" /><di:waypoint x="9855" y="2150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wcm2oe_di" bpmnElement="SequenceFlow_1wcm2oe"><di:waypoint x="9955" y="2150" /><di:waypoint x="10005" y="2150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1klffwt_di" bpmnElement="SequenceFlow_1klffwt"><di:waypoint x="10105" y="2150" /><di:waypoint x="10157" y="2150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15gl2pd_di" bpmnElement="SequenceFlow_15gl2pd"><di:waypoint x="9955" y="2250" /><di:waypoint x="10005" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1r93boc_di" bpmnElement="SequenceFlow_1r93boc"><di:waypoint x="10105" y="2250" /><di:waypoint x="10157" y="2250" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_0umirjr_di" bpmnElement="StartEvent_0umirjr"><dc:Bounds x="9615" y="2183" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_1to6hyx_di" bpmnElement="ParallelGateway_1to6hyx"><dc:Bounds x="9710" y="2176" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_0p5c17d_di" bpmnElement="ReceiveTask_0p5c17d"><dc:Bounds x="9855" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_004otqh_di" bpmnElement="UserTask_004otqh" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="9855" y="2110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1dm3pk0_di" bpmnElement="ServiceTask_1dm3pk0"><dc:Bounds x="10005" y="2110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0vvglom_di" bpmnElement="EndEvent_0vvglom"><dc:Bounds x="10157" y="2132" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0ogyw42_di" bpmnElement="EndEvent_0ogyw42"><dc:Bounds x="10157" y="2232" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03mqky2_di" bpmnElement="ServiceTask_03mqky2"><dc:Bounds x="10005" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_01fugrf_di" bpmnElement="ExclusiveGateway_01fugrf" isMarkerVisible="true"><dc:Bounds x="10340" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1q35grx_di" bpmnElement="ServiceTask_1q35grx"><dc:Bounds x="10315" y="2334" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_17wgif0_di" bpmnElement="ServiceTask_17wgif0"><dc:Bounds x="9925" y="2334" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0otx7h5_di" bpmnElement="ServiceTask_0otx7h5"><dc:Bounds x="10195" y="2334" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1la28jq_di" bpmnElement="ServiceTask_1la28jq"><dc:Bounds x="9585" y="2334" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_0tj5t8t_di" bpmnElement="SubProcess_0tj5t8t" isExpanded="true"><dc:Bounds x="9560" y="2665" width="650" height="220" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_0avcnr3_di" bpmnElement="SequenceFlow_0avcnr3"><di:waypoint x="9636" y="2776" /><di:waypoint x="9695" y="2776" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bvnasj_di" bpmnElement="SequenceFlow_0bvnasj"><di:waypoint x="9720" y="2801" /><di:waypoint x="9720" y="2825" /><di:waypoint x="9840" y="2825" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nyq14j_di" bpmnElement="SequenceFlow_0nyq14j"><di:waypoint x="9720" y="2751" /><di:waypoint x="9720" y="2725" /><di:waypoint x="9840" y="2725" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0m9x734_di" bpmnElement="SequenceFlow_0m9x734"><di:waypoint x="9940" y="2725" /><di:waypoint x="9990" y="2725" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0n0sax1_di" bpmnElement="SequenceFlow_0n0sax1"><di:waypoint x="10090" y="2725" /><di:waypoint x="10142" y="2725" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fyeq9o_di" bpmnElement="SequenceFlow_1fyeq9o"><di:waypoint x="9940" y="2825" /><di:waypoint x="9990" y="2825" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0viuyhd_di" bpmnElement="SequenceFlow_0viuyhd"><di:waypoint x="10090" y="2825" /><di:waypoint x="10142" y="2825" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_1ger9ur_di" bpmnElement="StartEvent_1ger9ur"><dc:Bounds x="9600" y="2758" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_17193vz_di" bpmnElement="ParallelGateway_17193vz"><dc:Bounds x="9695" y="2751" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_0xe2yi4_di" bpmnElement="ReceiveTask_0xe2yi4"><dc:Bounds x="9840" y="2785" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_13p82ih_di" bpmnElement="UserTask_13p82ih" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="9840" y="2685" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1w6gaz4_di" bpmnElement="ServiceTask_1w6gaz4"><dc:Bounds x="9990" y="2685" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1azdwan_di" bpmnElement="EndEvent_1azdwan"><dc:Bounds x="10142" y="2707" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1dis8ic_di" bpmnElement="EndEvent_1dis8ic"><dc:Bounds x="10142" y="2807" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lspdhz_di" bpmnElement="ServiceTask_0lspdhz"><dc:Bounds x="9990" y="2785" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_116ku6u_di" bpmnElement="ExclusiveGateway_116ku6u" isMarkerVisible="true"><dc:Bounds x="10325" y="2750" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kbvzjn_di" bpmnElement="ServiceTask_0kbvzjn"><dc:Bounds x="10300" y="2909" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1eqai8v_di" bpmnElement="ServiceTask_1eqai8v"><dc:Bounds x="9910" y="2909" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1duzkfm_di" bpmnElement="ServiceTask_1duzkfm"><dc:Bounds x="10180" y="2909" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03fwdjj_di" bpmnElement="ServiceTask_03fwdjj"><dc:Bounds x="9570" y="2909" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0swkxlz_di" bpmnElement="ServiceTask_0swkxlz"><dc:Bounds x="5569" y="1528" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qekj2m_di" bpmnElement="Activity_1qekj2m"><dc:Bounds x="1350" y="2715" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0sdidz2_di" bpmnElement="Activity_0sdidz2"><dc:Bounds x="1590" y="2660" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_003bsq0_di" bpmnElement="Gateway_003bsq0" isMarkerVisible="true"><dc:Bounds x="1485" y="2730" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11c53sd_di" bpmnElement="Activity_11c53sd"><dc:Bounds x="1590" y="2780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hlrxe2_di" bpmnElement="Activity_1hlrxe2"><dc:Bounds x="1855" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_05hyoii_di" bpmnElement="Gateway_05hyoii" isMarkerVisible="true"><dc:Bounds x="1735" y="2735" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m06sbg_di" bpmnElement="Activity_0m06sbg" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="1990" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qqonj9_di" bpmnElement="Activity_1qqonj9"><dc:Bounds x="2440" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1lcsx3b_di" bpmnElement="ServiceTask_1lcsx3b"><dc:Bounds x="1750" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0knaynm_di" bpmnElement="Activity_0knaynm" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2130" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04flx4m_di" bpmnElement="ServiceTask_04flx4m"><dc:Bounds x="1170" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0da96vf_di" bpmnElement="Activity_0da96vf"><dc:Bounds x="590" y="2480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jayo81_di" bpmnElement="Activity_0jayo81"><dc:Bounds x="590" y="2715" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mh1lp4_di" bpmnElement="Activity_1mh1lp4"><dc:Bounds x="730" y="2715" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0z5w5uz_di" bpmnElement="Activity_0z5w5uz" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1190" y="2715" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1q67u83_di" bpmnElement="Activity_1q67u83"><dc:Bounds x="880" y="2480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1f46lsg_di" bpmnElement="Activity_1f46lsg"><dc:Bounds x="1270" y="2480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j0oqqk_di" bpmnElement="Activity_0j0oqqk"><dc:Bounds x="1137" y="2480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gvcega_di" bpmnElement="Activity_1gvcega"><dc:Bounds x="1010" y="2480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rmq14d_di" bpmnElement="Activity_1rmq14d"><dc:Bounds x="2700" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vp7pl1_di" bpmnElement="Activity_0vp7pl1"><dc:Bounds x="2570" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1irdey4_di" bpmnElement="Activity_1irdey4" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2820" y="2550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0no6cx7_di" bpmnElement="Activity_0no6cx7" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="2960" y="2550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nwm0c2_di" bpmnElement="Activity_1nwm0c2" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5288" y="1870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0uslca1_di" bpmnElement="Gateway_0uslca1" isMarkerVisible="true"><dc:Bounds x="5313" y="1789" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gxoy9s_di" bpmnElement="Activity_1gxoy9s"><dc:Bounds x="5180" y="1960" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13zyjqj_di" bpmnElement="Activity_13zyjqj"><dc:Bounds x="860" y="2715" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ga6bkj_di" bpmnElement="Activity_1ga6bkj"><dc:Bounds x="1080" y="2840" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_13o08l5_di" bpmnElement="Gateway_13o08l5" isMarkerVisible="true"><dc:Bounds x="995" y="2730" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1qygzv1_di" bpmnElement="Task_19guune"><dc:Bounds x="1030" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_0ht6sg5_di" bpmnElement="SubProcess_0ht6sg5" isExpanded="true"><dc:Bounds x="6940" y="1755" width="338" height="230" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0c8tzok_di" bpmnElement="Flow_0c8tzok"><di:waypoint x="7098" y="1925" /><di:waypoint x="7110" y="1925" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e2z9u8_di" bpmnElement="SequenceFlow_1e2z9u8"><di:waypoint x="7001" y="1865" /><di:waypoint x="7055" y="1865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0o57cco_di" bpmnElement="SequenceFlow_0o57cco"><di:waypoint x="7080" y="1890" /><di:waypoint x="7080" y="1907" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ltrom5_di" bpmnElement="SequenceFlow_1ltrom5"><di:waypoint x="7080" y="1840" /><di:waypoint x="7080" y="1833" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qrxyib_di" bpmnElement="SequenceFlow_0qrxyib"><di:waypoint x="7098" y="1815" /><di:waypoint x="7110" y="1815" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09m8k46_di" bpmnElement="SequenceFlow_09m8k46"><di:waypoint x="7210" y="1815" /><di:waypoint x="7222" y="1815" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qhe48x_di" bpmnElement="SequenceFlow_1qhe48x"><di:waypoint x="7210" y="1935" /><di:waypoint x="7222" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_0aay0di_di" bpmnElement="StartEvent_0aay0di"><dc:Bounds x="6965" y="1847" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_07p55eb_di" bpmnElement="ParallelGateway_07p55eb"><dc:Bounds x="7055" y="1840" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_1kxivxq_di" bpmnElement="IntermediateCatchEvent_1kxivxq"><dc:Bounds x="7062" y="1797" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1nsygy4_di" bpmnElement="EndEvent_1nsygy4"><dc:Bounds x="7222" y="1797" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_13kr4h7_di" bpmnElement="EndEvent_13kr4h7"><dc:Bounds x="7222" y="1917" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_10oun60_di" bpmnElement="ServiceTask_10oun60"><dc:Bounds x="7110" y="1775" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0j7bwlw_di" bpmnElement="ServiceTask_0j7bwlw"><dc:Bounds x="7110" y="1885" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0hnf9o4_di" bpmnElement="Event_0msnnl6"><dc:Bounds x="7062" y="1907" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0qjfgko_di" bpmnElement="ExclusiveGateway_0qjfgko" isMarkerVisible="true"><dc:Bounds x="7295" y="1845" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bwoukl_di" bpmnElement="ServiceTask_0bwoukl"><dc:Bounds x="7270" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1h4u0g3_di" bpmnElement="ServiceTask_1h4u0g3"><dc:Bounds x="7440" y="1720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_09l24l3_di" bpmnElement="ServiceTask_09l24l3"><dc:Bounds x="14610" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1gg7xlu_di" bpmnElement="ServiceTask_1gg7xlu"><dc:Bounds x="15180" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_18d8eps_di" bpmnElement="ServiceTask_18d8eps"><dc:Bounds x="15758" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1cbsysm_di" bpmnElement="ServiceTask_1cbsysm"><dc:Bounds x="480" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0orzlnw_di" bpmnElement="ServiceTask_0orzlnw"><dc:Bounds x="630" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_13wg68l_di" bpmnElement="ServiceTask_13wg68l" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2280" y="2720" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_16n3a8a_di" bpmnElement="Gateway_16n3a8a" isMarkerVisible="true"><dc:Bounds x="3615" y="2225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tlwiwk_di" bpmnElement="Activity_0tlwiwk"><dc:Bounds x="3690" y="2209" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zlmeoe_di" bpmnElement="Activity_0zlmeoe"><dc:Bounds x="3830" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jo2ar8_di" bpmnElement="Activity_0jo2ar8" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5569" y="1330" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_073de86_di" bpmnElement="Gateway_073de86" isMarkerVisible="true"><dc:Bounds x="5594" y="1435" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01mqzzs_di" bpmnElement="Activity_01mqzzs"><dc:Bounds x="11725" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1w2nddb_di" bpmnElement="Activity_1w2nddb"><dc:Bounds x="12570" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zc97lt_di" bpmnElement="Activity_0zc97lt"><dc:Bounds x="12320" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0q1w079_di" bpmnElement="Activity_0q1w079"><dc:Bounds x="12710" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1kzrng5_di" bpmnElement="Activity_1kzrng5"><dc:Bounds x="12954" y="1430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0owbu8k_di" bpmnElement="ServiceTask_0owbu8k"><dc:Bounds x="3410" y="2209" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fyn5qz_di" bpmnElement="ServiceTask_1fyn5qz"><dc:Bounds x="3286" y="2210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_09m6452_di" bpmnElement="ExclusiveGateway_09m6452" isMarkerVisible="true"><dc:Bounds x="3535" y="2224" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_09psdrj_di" bpmnElement="ServiceTask_09psdrj"><dc:Bounds x="3840" y="2003" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_13bh6xa_di" bpmnElement="EndEvent_13bh6xa"><dc:Bounds x="3992" y="2025" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lakkse_di" bpmnElement="ServiceTask_0lakkse"><dc:Bounds x="3510" y="2003" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n8zrqs_di" bpmnElement="Activity_0n8zrqs"><dc:Bounds x="3670" y="1870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ldf9v0_di" bpmnElement="Activity_1ldf9v0"><dc:Bounds x="3286" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0g6lolh_di" bpmnElement="ServiceTask_0g6lolh"><dc:Bounds x="12440" y="1610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1et2rh2_di" bpmnElement="ServiceTask_1et2rh2"><dc:Bounds x="230" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_19doqh5_di" bpmnElement="ExclusiveGateway_19doqh5" isMarkerVisible="true"><dc:Bounds x="375" y="2231" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ip5c7o_di" bpmnElement="ServiceTask_0ip5c7o"><dc:Bounds x="350" y="2320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_09lij1b_di" bpmnElement="EndEvent_09lij1b"><dc:Bounds x="522" y="2342" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_177ke75_di" bpmnElement="Activity_177ke75"><dc:Bounds x="770" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0w7lld3_di" bpmnElement="Activity_0w7lld3"><dc:Bounds x="900" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zn4aib_di" bpmnElement="Activity_0zn4aib"><dc:Bounds x="5850" y="1960" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05j45eu_di" bpmnElement="Activity_05j45eu"><dc:Bounds x="5850" y="2070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0sqfjwp_di" bpmnElement="Gateway_0sqfjwp" isMarkerVisible="true"><dc:Bounds x="6245" y="1115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_001z2c0_di" bpmnElement="Activity_001z2c0"><dc:Bounds x="6756" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0acgb9q_di" bpmnElement="Activity_0acgb9q"><dc:Bounds x="6486" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dvfr9e_di" bpmnElement="Activity_0dvfr9e"><dc:Bounds x="6620" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1btyun4_di" bpmnElement="Activity_1btyun4"><dc:Bounds x="6350" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_18bthqx_di" bpmnElement="Activity_18bthqx"><dc:Bounds x="6220" y="973" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0cksgwi_di" bpmnElement="Gateway_0cksgwi" isMarkerVisible="true"><dc:Bounds x="5875" y="1795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wraknq_di" bpmnElement="Activity_1wraknq"><dc:Bounds x="5920" y="1855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1bzvmag_di" bpmnElement="Gateway_1bzvmag" isMarkerVisible="true"><dc:Bounds x="7741" y="2175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ro7pza_di" bpmnElement="Activity_0ro7pza"><dc:Bounds x="5850" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ylcdsu_di" bpmnElement="Gateway_0ylcdsu" isMarkerVisible="true"><dc:Bounds x="6125" y="1115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1eaz9lz_di" bpmnElement="Activity_1eaz9lz"><dc:Bounds x="6100" y="973" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16asd36_di" bpmnElement="Activity_16asd36"><dc:Bounds x="6894" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0m8m2v3_di" bpmnElement="Gateway_0m8m2v3" isMarkerVisible="true"><dc:Bounds x="7039" y="1115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0o2svln_di" bpmnElement="Activity_0o2svln"><dc:Bounds x="7120" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vtn37b_di" bpmnElement="Activity_1vtn37b"><dc:Bounds x="7254" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_115tvwu_di" bpmnElement="Activity_115tvwu" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="12890" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m4j90g_di" bpmnElement="Activity_0m4j90g"><dc:Bounds x="13010" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_033w3y8_di" bpmnElement="Activity_033w3y8"><dc:Bounds x="13140" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19dq5c8_di" bpmnElement="Activity_19dq5c8" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="11890" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mjokqr_di" bpmnElement="Activity_1mjokqr"><dc:Bounds x="12010" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vdrh7u_di" bpmnElement="Activity_0vdrh7u"><dc:Bounds x="12134" y="2735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jsa5kz_di" bpmnElement="Activity_0jsa5kz"><dc:Bounds x="5990" y="1100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_03kp90q_di" bpmnElement="Gateway_03eysht" isMarkerVisible="true"><dc:Bounds x="7805" y="1615" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lhd9no_di" bpmnElement="Activity_07ligip"><dc:Bounds x="84" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15dgj8v_di" bpmnElement="Activity_15dgj8v"><dc:Bounds x="6350" y="1210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1efsmzi_di" bpmnElement="Activity_1efsmzi"><dc:Bounds x="-60" y="2216" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1yc1tgf_di" bpmnElement="Gateway_0uswje6" isMarkerVisible="true"><dc:Bounds x="7465" y="1935" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_0knv6qs_di" bpmnElement="TextAnnotation_0knv6qs"><dc:Bounds x="2700" y="2091" width="100" height="68" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_1y1bkmi_di" bpmnElement="Association_1y1bkmi"><di:waypoint x="2803" y="2210" /><di:waypoint x="2777" y="2159" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>