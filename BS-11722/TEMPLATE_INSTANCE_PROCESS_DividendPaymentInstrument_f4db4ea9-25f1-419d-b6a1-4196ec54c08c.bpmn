<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_DividendPaymentInstrument_f4db4ea9-25f1-419d-b6a1-4196ec54c08c" name="Выплата дивиденда по инструменту" isExecutable="true"><bpmn:documentation>-</bpmn:documentation><bpmn:startEvent id="StartEvent_1fn3j0f"><bpmn:outgoing>SequenceFlow_00f4tj3</bpmn:outgoing></bpmn:startEvent><bpmn:endEvent id="EndEvent_0mutau8"><bpmn:incoming>SequenceFlow_08ikmtj</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1q7e6j9" name="Статус Подтверждено"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Подтверждено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0rh7mwj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1p1i0ob</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_03ix1hz" name="Получить значение из объекта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "enrichment",
    "filter": {
        "_id": ObjectId("${instanceId}")
    },
    "projection": {
        "attributes.AssetFlows___lkupClient___ValueDisplayed": 1
    }
}</camunda:inputParameter><camunda:outputParameter name="clientPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___lkupClient___ValueDisplayed.primaryId</camunda:script></camunda:outputParameter><camunda:outputParameter name="clientSource"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___lkupClient___ValueDisplayed.source</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1r242az</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tf93pb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1mcvj5q" name="Сохранить значение из связанного объекта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
 "hlk_app_id": "${clientPrimaryId}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1tf93pb</bpmn:incoming><bpmn:outgoing>SequenceFlow_0k9cwol</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_05k1xat" name="Получить номер обязательства"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/AssetFlows___txtID___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="payload" /><camunda:outputParameter name="assetflowid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0d4i7ji</bpmn:incoming><bpmn:outgoing>SequenceFlow_07jv781</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_063lrqe" name="Формируем отчёт"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/report-service/generate-report-save/by-name?name=CouponTicketReport</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">[
	{
		"displayName": "Номер заказа",
		"name": "FlowId",
		"value":  "${assetflowid}"
	}
]</camunda:inputParameter><camunda:outputParameter name="generated">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07jv781</bpmn:incoming><bpmn:outgoing>SequenceFlow_01y1s13</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1a01qfs" name="Привязываем отчёт к обязательству"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/file/create/ENRICHMENT/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">${generated}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_01y1s13</bpmn:incoming><bpmn:outgoing>SequenceFlow_19fhu23</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1dkkc61" default="SequenceFlow_1cz5j1p"><bpmn:incoming>SequenceFlow_16b6hzz</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ojc5h4</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1cz5j1p</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1dkk7w1" name="Получение курса валюты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${msUrl}/api/FXRates?ccyCode1=${ccy}&amp;ccyCode2=KZT&amp;rateSet=NBRK&amp;dateHist=${date.substring(0,10)}</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="rate">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cz5j1p</bpmn:incoming><bpmn:outgoing>SequenceFlow_1x5er45</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0zzao1i" name="Получение данных из объекта для расчета суммы в KZT"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___lkupAsset___ValueDisplayed&amp;systemName=AssetFlows___txtQtyPcs___Value&amp;systemName=AssetFlows___dateFlowDate___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ccy"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___lkupAsset___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="amount"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___txtQtyPcs___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="date"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dateFlowDate___ValueDisplayed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06v0oz1</bpmn:incoming><bpmn:outgoing>SequenceFlow_16b6hzz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1y89g1q" name="Расчет суммы в валюте KZT" camunda:expression="${amount * rate}" camunda:resultVariable="amount"><bpmn:incoming>SequenceFlow_1x5er45</bpmn:incoming><bpmn:outgoing>SequenceFlow_0al0v8h</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0phpi8f" name="Сохранение суммы в KZT"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"amountKZT": ${amount}}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ojc5h4</bpmn:incoming><bpmn:incoming>SequenceFlow_0al0v8h</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rh7mwj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1t211sy" name="Статус Новая"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Новая</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_00f4tj3</bpmn:incoming><bpmn:outgoing>SequenceFlow_1r242az</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0febo6d" name="Найти связанный объект клиент"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "${clientSource}",
    "filter": {
        "primaryId": "${clientPrimaryId}",
		"activityStatus": "ACTIVE"
    },
    "projection": {
        "attributes.hlk_app_id": 1
    }
}</camunda:inputParameter><camunda:outputParameter name="hlk_app_id"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.hlk_app_id</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0cmjd2z" name="Получение данных из объекта для счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___lkupAsset___ValueDisplayed&amp;systemName=AssetFlows___lkupCS___ValueDisplayed&amp;systemName=AssetFlows___dateFlowDate___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ccyCS"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___lkupAsset___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="CS"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___lkupCS___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="date"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dateFlowDate___ValueDisplayed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0k9cwol</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wu68pe</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1tbaaxv" name="Найти cчет, попадающий под условия"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "invoice",
    "filter": {
        "templatePrimaryId": "5d9af8742ab79c000a9a05c5",
		"attributes.hlk_account_type": "Денежный",   
        "attributes.hlk_account_currency": "${ccyCS}", 
   "attributes.hlk_account_owner.primaryId": "${clientPrimaryId}",
    "attributes.hlk_clearing_system.value": "${CS.replaceAll("\"", "\\\\\\\"")}",
		"activityStatus": "ACTIVE"
    },
    "projection": {
        "attributes.hlk_Account_Number": 1
"primaryId" : 1
    }
}</camunda:inputParameter><camunda:outputParameter name="hlk_Account_Number"><camunda:script scriptFormat="javascript">try{
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number;
} catch(e) {
"";
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_Account_Number_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ldbiad</bpmn:incoming><bpmn:incoming>SequenceFlow_1klet69</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ys52kq</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_11quhgo" default="SequenceFlow_0ldbiad"><bpmn:incoming>SequenceFlow_0wu68pe</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ldbiad</bpmn:outgoing><bpmn:outgoing>SequenceFlow_11ii9b6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1gdym7h" name="Изменить валюту с RUR на RUB" camunda:expression="RUB" camunda:resultVariable="ccyCS"><bpmn:incoming>SequenceFlow_11ii9b6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1klet69</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1o7x13v" name="создание обязательств"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/sendInstanceTo/ENRICHMENT_OBLIGATION/${instanceId}?AssetFlows___radioFactPlan___ValueDisplayed=План</camunda:inputParameter><camunda:inputParameter name="payload">{
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1g04bpg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0169271</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0d9r7jn" name="Сохранить номер счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"AssetFlows___lkupBOAccountNumber___ValueDisplayed" : {
"value" : "${hlk_Account_Number}",
"primaryId" : "${hlk_Account_Number_primaryId}",
"source" : "invoice",
"_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ys52kq</bpmn:incoming><bpmn:outgoing>SequenceFlow_1g04bpg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1brkw8t" name="Поиск обязательства"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/obligations/one/by-attribute?name=AssetflowID&amp;value=42</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="OutputCash">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1p1i0ob</bpmn:incoming><bpmn:outgoing>SequenceFlow_174re8s</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1n7styl" name="Создание фактов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/fact/${OutputCash}?AssetFlows___radioFactPlan___ValueDisplayed=Факт&amp;AssetFlows___dateFlowDate___ValueDisplayed=${Date_fact_payment}&amp;AssetFlows___txtQtyPcs___Value=${AssetFlows___txtQtyPcs___Value}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_174re8s</bpmn:incoming><bpmn:outgoing>SequenceFlow_0d4i7ji</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0oxyi5e" name="Статус Заполнение:Дата фактической выплаты"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Дата+фактической+выплаты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_00f4tj3" sourceRef="StartEvent_1fn3j0f" targetRef="ServiceTask_1t211sy" /><bpmn:sequenceFlow id="SequenceFlow_19fhu23" sourceRef="ServiceTask_1a01qfs" targetRef="ExclusiveGateway_07yh658" /><bpmn:sequenceFlow id="SequenceFlow_0rh7mwj" sourceRef="ServiceTask_0phpi8f" targetRef="ServiceTask_1q7e6j9" /><bpmn:sequenceFlow id="SequenceFlow_1p1i0ob" sourceRef="ServiceTask_1q7e6j9" targetRef="ServiceTask_1brkw8t" /><bpmn:sequenceFlow id="SequenceFlow_1r242az" sourceRef="ServiceTask_1t211sy" targetRef="ServiceTask_03ix1hz" /><bpmn:sequenceFlow id="SequenceFlow_1tf93pb" sourceRef="ServiceTask_03ix1hz" targetRef="ServiceTask_1mcvj5q" /><bpmn:sequenceFlow id="SequenceFlow_0k9cwol" sourceRef="ServiceTask_1mcvj5q" targetRef="ServiceTask_0cmjd2z" /><bpmn:sequenceFlow id="SequenceFlow_0d4i7ji" sourceRef="ServiceTask_1n7styl" targetRef="ServiceTask_05k1xat" /><bpmn:sequenceFlow id="SequenceFlow_07jv781" sourceRef="ServiceTask_05k1xat" targetRef="ServiceTask_063lrqe" /><bpmn:sequenceFlow id="SequenceFlow_01y1s13" sourceRef="ServiceTask_063lrqe" targetRef="ServiceTask_1a01qfs" /><bpmn:sequenceFlow id="SequenceFlow_16b6hzz" sourceRef="ServiceTask_0zzao1i" targetRef="ExclusiveGateway_1dkkc61" /><bpmn:sequenceFlow id="SequenceFlow_1ojc5h4" sourceRef="ExclusiveGateway_1dkkc61" targetRef="ServiceTask_0phpi8f"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${"KZT".equals(ccy)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1cz5j1p" sourceRef="ExclusiveGateway_1dkkc61" targetRef="ServiceTask_1dkk7w1" /><bpmn:sequenceFlow id="SequenceFlow_1x5er45" sourceRef="ServiceTask_1dkk7w1" targetRef="ServiceTask_1y89g1q" /><bpmn:sequenceFlow id="SequenceFlow_0al0v8h" sourceRef="ServiceTask_1y89g1q" targetRef="ServiceTask_0phpi8f" /><bpmn:sequenceFlow id="SequenceFlow_0wu68pe" sourceRef="ServiceTask_0cmjd2z" targetRef="ExclusiveGateway_11quhgo" /><bpmn:sequenceFlow id="SequenceFlow_0ldbiad" sourceRef="ExclusiveGateway_11quhgo" targetRef="ServiceTask_1tbaaxv" /><bpmn:sequenceFlow id="SequenceFlow_1klet69" sourceRef="ServiceTask_1gdym7h" targetRef="ServiceTask_1tbaaxv" /><bpmn:sequenceFlow id="SequenceFlow_1ys52kq" sourceRef="ServiceTask_1tbaaxv" targetRef="ServiceTask_0d9r7jn" /><bpmn:sequenceFlow id="SequenceFlow_11ii9b6" sourceRef="ExclusiveGateway_11quhgo" targetRef="ServiceTask_1gdym7h"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${"RUR".equals(ccyCS)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1g04bpg" sourceRef="ServiceTask_0d9r7jn" targetRef="ServiceTask_1o7x13v" /><bpmn:sequenceFlow id="SequenceFlow_174re8s" sourceRef="ServiceTask_1brkw8t" targetRef="ServiceTask_1n7styl" /><bpmn:subProcess id="SubProcess_1222ani"><bpmn:incoming>SequenceFlow_0r1jgr2</bpmn:incoming><bpmn:outgoing>SequenceFlow_06v0oz1</bpmn:outgoing><bpmn:startEvent id="StartEvent_0n9aybi"><bpmn:outgoing>SequenceFlow_1u5zaha</bpmn:outgoing></bpmn:startEvent><bpmn:exclusiveGateway id="ExclusiveGateway_177pmcb" default="SequenceFlow_0h82a6h"><bpmn:incoming>SequenceFlow_0r226qa</bpmn:incoming><bpmn:outgoing>SequenceFlow_0h82a6h</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1ee5mao</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1v9oo5x" name="Статус заявки &#34;Дата факта не указана&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Дата+фактической+выплаты+не+указана</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ee5mao</bpmn:incoming><bpmn:outgoing>SequenceFlow_0f06bgi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0jnqz2t" name="Статус заявки &#34;Дата факта &#62; TODAY&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Дата+фактической+выплаты+больше+текущей+даты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wgzzj0</bpmn:incoming><bpmn:outgoing>SequenceFlow_0srbsft</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0d7bqir" name="Получаем modifyDate"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"modifyDate": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="modifyDate"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].modifyDate</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0h82a6h</bpmn:incoming><bpmn:outgoing>SequenceFlow_0l6zt4w</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1qj515x" default="SequenceFlow_0quccmj"><bpmn:incoming>SequenceFlow_0l6zt4w</bpmn:incoming><bpmn:outgoing>SequenceFlow_0quccmj</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0wgzzj0</bpmn:outgoing><bpmn:outgoing>SequenceFlow_05lgbte</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0zjsg8u" name="Статус Подтверждение заявки" camunda:expression="${&#34;Подтверждение заявки&#34;}" camunda:resultVariable="labelStatus"><bpmn:incoming>SequenceFlow_0quccmj</bpmn:incoming><bpmn:outgoing>SequenceFlow_11c8oqa</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_1lgluk6" name="Подтверждение заявки" camunda:assignee="${initiator}" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11c8oqa</bpmn:incoming><bpmn:outgoing>SequenceFlow_09lqxl1</bpmn:outgoing></bpmn:userTask><bpmn:parallelGateway id="ParallelGateway_0bighqd"><bpmn:incoming>SequenceFlow_1u5zaha</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tbu3jd</bpmn:outgoing><bpmn:outgoing>SequenceFlow_16900if</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="ReceiveTask_1m51uar" camunda:asyncAfter="true" messageRef="Message_1ijugy1"><bpmn:incoming>SequenceFlow_0mxsg5i</bpmn:incoming><bpmn:outgoing>SequenceFlow_1l9qte1</bpmn:outgoing></bpmn:receiveTask><bpmn:endEvent id="EndEvent_0kr621z"><bpmn:incoming>SequenceFlow_09lqxl1</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0x1h3g9" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_0zi3ay7"><bpmn:incoming>SequenceFlow_0ldwcyg</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0e152ys" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0jk9bmt" name="Сохранение  даты факта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"Date_fact_payment": "${Date_fact_payment}"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1l9qte1</bpmn:incoming><bpmn:outgoing>SequenceFlow_0szux96</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1qyq7h1" name="Статус Подтверждение заявки" camunda:expression="${&#34;Подтверждение заявки&#34;}" camunda:resultVariable="labelStatus"><bpmn:incoming>SequenceFlow_1tbu3jd</bpmn:incoming><bpmn:outgoing>SequenceFlow_1f8pw93</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1f8pw93" sourceRef="ServiceTask_1qyq7h1" targetRef="ServiceTask_1vvn42v" /><bpmn:sequenceFlow id="SequenceFlow_1l9qte1" sourceRef="ReceiveTask_1m51uar" targetRef="ServiceTask_0jk9bmt" /><bpmn:sequenceFlow id="SequenceFlow_0szux96" sourceRef="ServiceTask_0jk9bmt" targetRef="ServiceTask_1k0hkgr" /><bpmn:sequenceFlow id="SequenceFlow_09lqxl1" sourceRef="UserTask_1lgluk6" targetRef="EndEvent_0kr621z" /><bpmn:sequenceFlow id="SequenceFlow_1tbu3jd" sourceRef="ParallelGateway_0bighqd" targetRef="ServiceTask_1qyq7h1" /><bpmn:sequenceFlow id="SequenceFlow_16900if" sourceRef="ParallelGateway_0bighqd" targetRef="UserTask_04no321" /><bpmn:sequenceFlow id="SequenceFlow_1u5zaha" sourceRef="StartEvent_0n9aybi" targetRef="ParallelGateway_0bighqd" /><bpmn:sequenceFlow id="SequenceFlow_11c8oqa" sourceRef="ServiceTask_0zjsg8u" targetRef="UserTask_1lgluk6" /><bpmn:sequenceFlow id="SequenceFlow_0quccmj" sourceRef="ExclusiveGateway_1qj515x" targetRef="ServiceTask_0zjsg8u" /><bpmn:sequenceFlow id="SequenceFlow_0l6zt4w" sourceRef="ServiceTask_0d7bqir" targetRef="ExclusiveGateway_1qj515x" /><bpmn:sequenceFlow id="SequenceFlow_0wgzzj0" sourceRef="ExclusiveGateway_1qj515x" targetRef="ServiceTask_0jnqz2t"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${(Date_fact_payment &gt; modifyDate)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0h82a6h" sourceRef="ExclusiveGateway_177pmcb" targetRef="ServiceTask_0d7bqir" /><bpmn:sequenceFlow id="SequenceFlow_1ee5mao" sourceRef="ExclusiveGateway_177pmcb" targetRef="ServiceTask_1v9oo5x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${( Date_fact_payment ==null )||( Date_fact_payment   =="")}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0srbsft" sourceRef="ServiceTask_0jnqz2t" targetRef="UserTask_04no321" /><bpmn:sequenceFlow id="SequenceFlow_0f06bgi" sourceRef="ServiceTask_1v9oo5x" targetRef="UserTask_04no321" /><bpmn:userTask id="UserTask_04no321" name="Заполнение поля Дата факта и Количество актива" camunda:formKey="FILL" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="Date_fact_payment" label="Corp. Дата фактической выплаты" type="string" /><camunda:formField id="AssetFlows___txtQtyPcs___Value" label="Corp. Количество актива" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0srbsft</bpmn:incoming><bpmn:incoming>SequenceFlow_0f06bgi</bpmn:incoming><bpmn:incoming>SequenceFlow_16900if</bpmn:incoming><bpmn:incoming>SequenceFlow_11bjibg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nl9ypv</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_0nl9ypv" sourceRef="UserTask_04no321" targetRef="ServiceTask_0n6ysh9" /><bpmn:serviceTask id="ServiceTask_0n6ysh9" name="Получение поля Дата факта и Количества"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"attributes.Date_fact_payment": 1
"attributes.AssetFlows___txtQtyPcs___Value": 1
"attributes.hlk_plan_qty": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="Date_fact_payment"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.Date_fact_payment</camunda:script></camunda:outputParameter><camunda:outputParameter name="AssetFlows___txtQtyPcs___Value"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.AssetFlows___txtQtyPcs___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_plan_qty"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.hlk_plan_qty</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0nl9ypv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0r226qa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0r226qa" sourceRef="ServiceTask_0n6ysh9" targetRef="ExclusiveGateway_177pmcb" /><bpmn:serviceTask id="ServiceTask_1bmhhwy" name="Статус заявки &#34;Сумма фактического исполнения не может быть больше плановой&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Сумма+фактического+исполнения+не+может+быть+больше+плановой</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_05lgbte</bpmn:incoming><bpmn:outgoing>SequenceFlow_11bjibg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_05lgbte" sourceRef="ExclusiveGateway_1qj515x" targetRef="ServiceTask_1bmhhwy"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${(AssetFlows___txtQtyPcs___Value &gt; hlk_plan_qty)}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_11bjibg" sourceRef="ServiceTask_1bmhhwy" targetRef="UserTask_04no321" /><bpmn:serviceTask id="ServiceTask_1k0hkgr" name="Получение поля Дата факта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
	"_id" : ObjectId("${instanceId}")
	},
	"projection": {
		"attributes.Date_fact_payment": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="Date_fact_payment"><camunda:script scriptFormat="javascript">try {JSON.parse(response).cursor.firstBatch[0].attributes.Date_fact_payment }
catch (e ) {
 response
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0szux96</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ldwcyg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ldwcyg" sourceRef="ServiceTask_1k0hkgr" targetRef="EndEvent_0zi3ay7" /><bpmn:serviceTask id="ServiceTask_1vvn42v" name="Получить данные с форма: дата плана, инструмент, тип"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=AssetFlows___dateFlowDate___ValueDisplayed&amp;systemName=AssetFlows___lkupFlowType___ValueDisplayed&amp;systemName=AssetFlows___lkupCorpEventAsset___ValueDisplayed&amp;systemName=AssetFlows___txtQtyPcs___Value</camunda:inputParameter><camunda:outputParameter name="AssetFlows___dateFlowDate___ValueDisplayed"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dateFlowDate___ValueDisplayed.substring(0, 10)</camunda:script></camunda:outputParameter><camunda:outputParameter name="AssetFlows___lkupFlowType___ValueDisplayed">${S(response).prop('AssetFlows___lkupFlowType___ValueDisplayed').stringValue()}</camunda:outputParameter><camunda:outputParameter name="AssetFlows___lkupCorpEventAsset___ValueDisplayed">${S(response).prop('AssetFlows___lkupCorpEventAsset___ValueDisplayed').stringValue()}</camunda:outputParameter><camunda:outputParameter name="AssetFlows___txtQtyPcs___Value"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___txtQtyPcs___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1f8pw93</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mxsg5i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0mxsg5i" sourceRef="ServiceTask_1vvn42v" targetRef="ReceiveTask_1m51uar" /></bpmn:subProcess><bpmn:sequenceFlow id="SequenceFlow_0169271" sourceRef="ServiceTask_1o7x13v" targetRef="ServiceTask_19cz5w9" /><bpmn:sequenceFlow id="SequenceFlow_06v0oz1" sourceRef="SubProcess_1222ani" targetRef="ServiceTask_0zzao1i" /><bpmn:serviceTask id="ServiceTask_19cz5w9" name="Получение количества"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/AssetFlows___txtQtyPcs___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="qty">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0169271</bpmn:incoming><bpmn:outgoing>SequenceFlow_0y3f1ye</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0gvje5l" name="Сохранить количество в тех параметры"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_plan_qty": "${qty}"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0y3f1ye</bpmn:incoming><bpmn:outgoing>SequenceFlow_0r1jgr2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0y3f1ye" sourceRef="ServiceTask_19cz5w9" targetRef="ServiceTask_0gvje5l" /><bpmn:sequenceFlow id="SequenceFlow_0r1jgr2" sourceRef="ServiceTask_0gvje5l" targetRef="SubProcess_1222ani" /><bpmn:exclusiveGateway id="ExclusiveGateway_07yh658" default="SequenceFlow_08cri9r"><bpmn:incoming>SequenceFlow_19fhu23</bpmn:incoming><bpmn:outgoing>SequenceFlow_08cri9r</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0621fdj</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="ExclusiveGateway_0rgmupv"><bpmn:incoming>SequenceFlow_1an9n19</bpmn:incoming><bpmn:incoming>SequenceFlow_0px9zk6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cvx60f</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1tywb4x" name="ФЗ. Получаем почту клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
  "aggregate": "individualPerson",
  "pipeline": [
    {
      "$match": {
        "actual": true,
        "status": "VERIFICATED",
        "primaryId": "${clientPrimaryId}",
      }
    },
    {
      "$project": {
        "hlk_email": { "$ifNull": ["$attributes.hlk_email", null]},
        "_id": 0
      }
    }
  ],
  "cursor": {
    "batchSize": 10000
  },
  "allowDiskUse": true
}</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Email"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].hlk_email</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08cri9r</bpmn:incoming><bpmn:outgoing>SequenceFlow_0px9zk6</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1kfdf9q" name="ЮЛ. Получаем почту клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="payload">{
  "aggregate": "legalEntity",
  "pipeline": [
    {
      "$match": {
        "actual": true,
        "status": "VERIFICATED",
        "primaryId": "${clientPrimaryId}",
      }
    },
    {
      "$project": {
        "hlk_email": { "$ifNull": ["$attributes.hlk_email", null]},
        "_id": 0
      }
    }
  ],
  "cursor": {
    "batchSize": 10000
  },
  "allowDiskUse": true
}</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Email"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].hlk_email</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0621fdj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1an9n19</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1vpwod3" name="Отправляем отчёт клиенту"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"${Email}",
"subject":"Отчёт о зачислении суммы вознаграждения/погашения по финансовым инструментам",
"text":"",
"attachments": ["${generated}"]
}</camunda:inputParameter><camunda:outputParameter name="errorMessage">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cvx60f</bpmn:incoming><bpmn:outgoing>SequenceFlow_08ikmtj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_08cri9r" sourceRef="ExclusiveGateway_07yh658" targetRef="ServiceTask_1tywb4x" /><bpmn:sequenceFlow id="SequenceFlow_0621fdj" sourceRef="ExclusiveGateway_07yh658" targetRef="ServiceTask_1kfdf9q"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientSource == 'legalEntity'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1cvx60f" sourceRef="ExclusiveGateway_0rgmupv" targetRef="ServiceTask_1vpwod3" /><bpmn:sequenceFlow id="SequenceFlow_1an9n19" sourceRef="ServiceTask_1kfdf9q" targetRef="ExclusiveGateway_0rgmupv" /><bpmn:sequenceFlow id="SequenceFlow_0px9zk6" sourceRef="ServiceTask_1tywb4x" targetRef="ExclusiveGateway_0rgmupv" /><bpmn:sequenceFlow id="SequenceFlow_08ikmtj" sourceRef="ServiceTask_1vpwod3" targetRef="EndEvent_0mutau8" /></bpmn:process><bpmn:message id="Message_10vfifx" name="Message_3q4b4ml" /><bpmn:message id="Message_1ijugy1" name="confirmPayment" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_DividendPaymentInstrument_f4db4ea9-25f1-419d-b6a1-4196ec54c08c"><bpmndi:BPMNEdge id="SequenceFlow_08ikmtj_di" bpmnElement="SequenceFlow_08ikmtj"><di:waypoint x="5190" y="390" /><di:waypoint x="5222" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0px9zk6_di" bpmnElement="SequenceFlow_0px9zk6"><di:waypoint x="4990" y="340" /><di:waypoint x="5040" y="340" /><di:waypoint x="5040" y="365" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1an9n19_di" bpmnElement="SequenceFlow_1an9n19"><di:waypoint x="4990" y="450" /><di:waypoint x="5040" y="450" /><di:waypoint x="5040" y="415" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cvx60f_di" bpmnElement="SequenceFlow_1cvx60f"><di:waypoint x="5065" y="390" /><di:waypoint x="5090" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0621fdj_di" bpmnElement="SequenceFlow_0621fdj"><di:waypoint x="4840" y="415" /><di:waypoint x="4840" y="450" /><di:waypoint x="4890" y="450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08cri9r_di" bpmnElement="SequenceFlow_08cri9r"><di:waypoint x="4840" y="365" /><di:waypoint x="4840" y="340" /><di:waypoint x="4890" y="340" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0r1jgr2_di" bpmnElement="SequenceFlow_0r1jgr2"><di:waypoint x="1590" y="361" /><di:waypoint x="1590" y="320" /><di:waypoint x="1660" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0y3f1ye_di" bpmnElement="SequenceFlow_0y3f1ye"><di:waypoint x="1500" y="400" /><di:waypoint x="1540" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06v0oz1_di" bpmnElement="SequenceFlow_06v0oz1"><di:waypoint x="3334" y="401" /><di:waypoint x="3416" y="401" /><di:waypoint x="3416" y="390" /><di:waypoint x="3488" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0169271_di" bpmnElement="SequenceFlow_0169271"><di:waypoint x="1370" y="400" /><di:waypoint x="1385" y="400" /><di:waypoint x="1385" y="401" /><di:waypoint x="1400" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_174re8s_di" bpmnElement="SequenceFlow_174re8s"><di:waypoint x="4269" y="390" /><di:waypoint x="4314" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1g04bpg_di" bpmnElement="SequenceFlow_1g04bpg"><di:waypoint x="1250" y="401" /><di:waypoint x="1260" y="401" /><di:waypoint x="1260" y="400" /><di:waypoint x="1270" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11ii9b6_di" bpmnElement="SequenceFlow_11ii9b6"><di:waypoint x="827" y="400" /><di:waypoint x="890" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ys52kq_di" bpmnElement="SequenceFlow_1ys52kq"><di:waypoint x="1120" y="401" /><di:waypoint x="1150" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1klet69_di" bpmnElement="SequenceFlow_1klet69"><di:waypoint x="990" y="400" /><di:waypoint x="1005" y="400" /><di:waypoint x="1005" y="401" /><di:waypoint x="1020" y="401" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ldbiad_di" bpmnElement="SequenceFlow_0ldbiad"><di:waypoint x="802" y="425" /><di:waypoint x="802" y="500" /><di:waypoint x="1070" y="500" /><di:waypoint x="1070" y="441" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wu68pe_di" bpmnElement="SequenceFlow_0wu68pe"><di:waypoint x="732" y="400" /><di:waypoint x="777" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0al0v8h_di" bpmnElement="SequenceFlow_0al0v8h"><di:waypoint x="3918" y="492" /><di:waypoint x="3958" y="492" /><di:waypoint x="3958" y="430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1x5er45_di" bpmnElement="SequenceFlow_1x5er45"><di:waypoint x="3778" y="492" /><di:waypoint x="3818" y="492" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cz5j1p_di" bpmnElement="SequenceFlow_1cz5j1p"><di:waypoint x="3648" y="415" /><di:waypoint x="3648" y="499" /><di:waypoint x="3678" y="499" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ojc5h4_di" bpmnElement="SequenceFlow_1ojc5h4"><di:waypoint x="3673" y="390" /><di:waypoint x="3908" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16b6hzz_di" bpmnElement="SequenceFlow_16b6hzz"><di:waypoint x="3588" y="390" /><di:waypoint x="3623" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_01y1s13_di" bpmnElement="SequenceFlow_01y1s13"><di:waypoint x="4660" y="390" /><di:waypoint x="4680" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07jv781_di" bpmnElement="SequenceFlow_07jv781"><di:waypoint x="4540" y="390" /><di:waypoint x="4560" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0d4i7ji_di" bpmnElement="SequenceFlow_0d4i7ji"><di:waypoint x="4414" y="390" /><di:waypoint x="4440" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0k9cwol_di" bpmnElement="SequenceFlow_0k9cwol"><di:waypoint x="602" y="400" /><di:waypoint x="632" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tf93pb_di" bpmnElement="SequenceFlow_1tf93pb"><di:waypoint x="472" y="400" /><di:waypoint x="502" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1r242az_di" bpmnElement="SequenceFlow_1r242az"><di:waypoint x="342" y="400" /><di:waypoint x="372" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1p1i0ob_di" bpmnElement="SequenceFlow_1p1i0ob"><di:waypoint x="4136" y="390" /><di:waypoint x="4169" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rh7mwj_di" bpmnElement="SequenceFlow_0rh7mwj"><di:waypoint x="4008" y="390" /><di:waypoint x="4036" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19fhu23_di" bpmnElement="SequenceFlow_19fhu23"><di:waypoint x="4780" y="390" /><di:waypoint x="4815" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00f4tj3_di" bpmnElement="SequenceFlow_00f4tj3"><di:waypoint x="190" y="400" /><di:waypoint x="242" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_1fn3j0f_di" bpmnElement="StartEvent_1fn3j0f"><dc:Bounds x="154" y="382" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0mutau8_di" bpmnElement="EndEvent_0mutau8"><dc:Bounds x="5222" y="372" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1q7e6j9_di" bpmnElement="ServiceTask_1q7e6j9"><dc:Bounds x="4036" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03ix1hz_di" bpmnElement="ServiceTask_03ix1hz"><dc:Bounds x="372" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1mcvj5q_di" bpmnElement="ServiceTask_1mcvj5q"><dc:Bounds x="502" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_05k1xat_di" bpmnElement="ServiceTask_05k1xat"><dc:Bounds x="4440" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_063lrqe_di" bpmnElement="ServiceTask_063lrqe"><dc:Bounds x="4560" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1a01qfs_di" bpmnElement="ServiceTask_1a01qfs"><dc:Bounds x="4680" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1dkkc61_di" bpmnElement="ExclusiveGateway_1dkkc61" isMarkerVisible="true"><dc:Bounds x="3623" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1dkk7w1_di" bpmnElement="ServiceTask_1dkk7w1"><dc:Bounds x="3678" y="459" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zzao1i_di" bpmnElement="ServiceTask_0zzao1i"><dc:Bounds x="3488" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1y89g1q_di" bpmnElement="ServiceTask_1y89g1q"><dc:Bounds x="3818" y="452" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0phpi8f_di" bpmnElement="ServiceTask_0phpi8f"><dc:Bounds x="3908" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1t211sy_di" bpmnElement="ServiceTask_1t211sy"><dc:Bounds x="242" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0febo6d_di" bpmnElement="ServiceTask_0febo6d"><dc:Bounds x="420" y="242" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0cmjd2z_di" bpmnElement="ServiceTask_0cmjd2z"><dc:Bounds x="632" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1tbaaxv_di" bpmnElement="ServiceTask_1tbaaxv"><dc:Bounds x="1020" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_11quhgo_di" bpmnElement="ExclusiveGateway_11quhgo" isMarkerVisible="true"><dc:Bounds x="777" y="375" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1gdym7h_di" bpmnElement="ServiceTask_1gdym7h"><dc:Bounds x="890" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1o7x13v_di" bpmnElement="ServiceTask_1o7x13v"><dc:Bounds x="1270" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d9r7jn_di" bpmnElement="ServiceTask_0d9r7jn"><dc:Bounds x="1150" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1brkw8t_di" bpmnElement="ServiceTask_1brkw8t"><dc:Bounds x="4169" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1n7styl_di" bpmnElement="ServiceTask_1n7styl"><dc:Bounds x="4314" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0oxyi5e_di" bpmnElement="ServiceTask_0oxyi5e"><dc:Bounds x="1222" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_1222ani_di" bpmnElement="SubProcess_1222ani" isExpanded="true"><dc:Bounds x="1660" y="82" width="1674" height="637" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_0mxsg5i_di" bpmnElement="SequenceFlow_0mxsg5i"><di:waypoint x="2050" y="553" /><di:waypoint x="2090" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ldwcyg_di" bpmnElement="SequenceFlow_0ldwcyg"><di:waypoint x="2640" y="553" /><di:waypoint x="2874" y="553" /><di:waypoint x="2874" y="552" /><di:waypoint x="3108" y="552" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11bjibg_di" bpmnElement="SequenceFlow_11bjibg"><di:waypoint x="2388" y="450" /><di:waypoint x="1910" y="450" /><di:waypoint x="1910" y="342" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05lgbte_di" bpmnElement="SequenceFlow_05lgbte"><di:waypoint x="2438" y="327" /><di:waypoint x="2438" y="410" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0r226qa_di" bpmnElement="SequenceFlow_0r226qa"><di:waypoint x="2148" y="302" /><di:waypoint x="2193" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nl9ypv_di" bpmnElement="SequenceFlow_0nl9ypv"><di:waypoint x="1980" y="302" /><di:waypoint x="2048" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0f06bgi_di" bpmnElement="SequenceFlow_0f06bgi"><di:waypoint x="2048" y="390" /><di:waypoint x="1930" y="390" /><di:waypoint x="1930" y="342" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0srbsft_di" bpmnElement="SequenceFlow_0srbsft"><di:waypoint x="2278" y="190" /><di:waypoint x="1918" y="190" /><di:waypoint x="1918" y="262" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ee5mao_di" bpmnElement="SequenceFlow_1ee5mao"><di:waypoint x="2218" y="327" /><di:waypoint x="2218" y="390" /><di:waypoint x="2148" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0h82a6h_di" bpmnElement="SequenceFlow_0h82a6h"><di:waypoint x="2243" y="302" /><di:waypoint x="2278" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wgzzj0_di" bpmnElement="SequenceFlow_0wgzzj0"><di:waypoint x="2438" y="277" /><di:waypoint x="2438" y="190" /><di:waypoint x="2378" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l6zt4w_di" bpmnElement="SequenceFlow_0l6zt4w"><di:waypoint x="2378" y="302" /><di:waypoint x="2413" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0quccmj_di" bpmnElement="SequenceFlow_0quccmj"><di:waypoint x="2463" y="302" /><di:waypoint x="2488" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11c8oqa_di" bpmnElement="SequenceFlow_11c8oqa"><di:waypoint x="2588" y="302" /><di:waypoint x="2908" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u5zaha_di" bpmnElement="SequenceFlow_1u5zaha"><di:waypoint x="1718" y="380" /><di:waypoint x="1768" y="380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16900if_di" bpmnElement="SequenceFlow_16900if"><di:waypoint x="1793" y="355" /><di:waypoint x="1793" y="302" /><di:waypoint x="1880" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tbu3jd_di" bpmnElement="SequenceFlow_1tbu3jd"><di:waypoint x="1793" y="405" /><di:waypoint x="1793" y="553" /><di:waypoint x="1812" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09lqxl1_di" bpmnElement="SequenceFlow_09lqxl1"><di:waypoint x="3008" y="302" /><di:waypoint x="3108" y="302" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0szux96_di" bpmnElement="SequenceFlow_0szux96"><di:waypoint x="2330" y="553" /><di:waypoint x="2540" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1l9qte1_di" bpmnElement="SequenceFlow_1l9qte1"><di:waypoint x="2190" y="553" /><di:waypoint x="2230" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1f8pw93_di" bpmnElement="SequenceFlow_1f8pw93"><di:waypoint x="1912" y="553" /><di:waypoint x="1950" y="553" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_0n9aybi_di" bpmnElement="StartEvent_0n9aybi"><dc:Bounds x="1682" y="362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_177pmcb_di" bpmnElement="ExclusiveGateway_177pmcb" isMarkerVisible="true"><dc:Bounds x="2193" y="277" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1v9oo5x_di" bpmnElement="ServiceTask_1v9oo5x"><dc:Bounds x="2048" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0jnqz2t_di" bpmnElement="ServiceTask_0jnqz2t"><dc:Bounds x="2278" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d7bqir_di" bpmnElement="ServiceTask_0d7bqir"><dc:Bounds x="2278" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1qj515x_di" bpmnElement="ExclusiveGateway_1qj515x" isMarkerVisible="true"><dc:Bounds x="2413" y="277" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zjsg8u_di" bpmnElement="ServiceTask_0zjsg8u"><dc:Bounds x="2488" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1lgluk6_di" bpmnElement="UserTask_1lgluk6" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="2908" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0bighqd_di" bpmnElement="ParallelGateway_0bighqd"><dc:Bounds x="1768" y="355" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ReceiveTask_1m51uar_di" bpmnElement="ReceiveTask_1m51uar"><dc:Bounds x="2090" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0kr621z_di" bpmnElement="EndEvent_0kr621z"><dc:Bounds x="3108" y="284" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0zi3ay7_di" bpmnElement="EndEvent_0zi3ay7"><dc:Bounds x="3108" y="534" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0jk9bmt_di" bpmnElement="ServiceTask_0jk9bmt"><dc:Bounds x="2230" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1qyq7h1_di" bpmnElement="ServiceTask_1qyq7h1"><dc:Bounds x="1812" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_04no321_di" bpmnElement="UserTask_04no321"><dc:Bounds x="1880" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0n6ysh9_di" bpmnElement="ServiceTask_0n6ysh9"><dc:Bounds x="2048" y="262" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1bmhhwy_di" bpmnElement="ServiceTask_1bmhhwy"><dc:Bounds x="2388" y="410" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1k0hkgr_di" bpmnElement="ServiceTask_1k0hkgr"><dc:Bounds x="2540" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1vvn42v_di" bpmnElement="ServiceTask_1vvn42v"><dc:Bounds x="1950" y="513" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19cz5w9_di" bpmnElement="ServiceTask_19cz5w9"><dc:Bounds x="1400" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0gvje5l_di" bpmnElement="ServiceTask_0gvje5l"><dc:Bounds x="1540" y="361" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_07yh658_di" bpmnElement="ExclusiveGateway_07yh658" isMarkerVisible="true"><dc:Bounds x="4815" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0rgmupv_di" bpmnElement="ExclusiveGateway_0rgmupv" isMarkerVisible="true"><dc:Bounds x="5015" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1tywb4x_di" bpmnElement="ServiceTask_1tywb4x"><dc:Bounds x="4890" y="300" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1kfdf9q_di" bpmnElement="ServiceTask_1kfdf9q"><dc:Bounds x="4890" y="410" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1vpwod3_di" bpmnElement="ServiceTask_1vpwod3"><dc:Bounds x="5090" y="350" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>