<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_Conversion_Cash_07eb2cce-4001-44a0-bb4d-a18a2a25cbd8" name="Конвертация денежных средств" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1" camunda:asyncBefore="true"><bpmn:outgoing>SequenceFlow_1o70m7e</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Task_02btl64" name="Статус В обработке: заполнение курса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=В+обработке:+Заполнение+курса&amp;isExport=false</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bp4a1l</bpmn:incoming><bpmn:outgoing>SequenceFlow_0o6n7pv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1886nk7" name="Тип операции = Конвертация ДС"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonotorDetails___DealType___ValueDisplayed?value=Конвертация+ДС</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0o6n7pv</bpmn:incoming><bpmn:outgoing>SequenceFlow_1luope9</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_0m65vby" name="Подтверждение исполнения пользователем" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;BO&#34;,&#34;label&#34;:&#34;Подтвердить исполнение&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1fj427t</bpmn:incoming><bpmn:outgoing>SequenceFlow_0umds0c</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1asr8lq" name="Статус Подтверждено"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Подтверждено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11p1ra0</bpmn:incoming><bpmn:outgoing>Flow_1s1rait</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_19o2ifn" name="Поиск об-ва 1 (зачисление)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "enrichmentObligation",
    "filter": {
         "createdId": "${instanceId}",
         "attributes.AssetFlows___cmbDirection___ValueDisplayed": "We receive"
    },
    "projection": {
          "_id": 1
     }
}</camunda:inputParameter><camunda:outputParameter name="OutputCash1"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0]._id</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0umds0c</bpmn:incoming><bpmn:outgoing>Flow_1mzaq75</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0c1c7mj" name="Создание фактов 1" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/fact/${OutputCash1}?AssetFlows___radioFactPlan___ValueDisplayed=Факт&amp;AssetFlow___Amount___Value=${Summa1}&amp;AssetFlow___Id___Value=${PrimaryId2}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_14nx79v</bpmn:incoming><bpmn:outgoing>SequenceFlow_0w5d4ys</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0w5d4ys" sourceRef="ServiceTask_0c1c7mj" targetRef="Activity_07c8ywl" /><bpmn:serviceTask id="ServiceTask_1aejeok" name="Поиск об-ва 2 (списание)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
    "find": "enrichmentObligation",
    "filter": {
         "createdId": "${instanceId}",
         "attributes.AssetFlows___cmbDirection___ValueDisplayed": "We pay"
    },
    "projection": {
          "_id": 1
     }
}</camunda:inputParameter><camunda:outputParameter name="OutputCash2"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0]._id</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0f2a5n2</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xdftum</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_07x5uiq" name="Создание фактов 2" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/fact/${OutputCash2}?AssetFlows___radioFactPlan___ValueDisplayed=Факт&amp;AssetFlow___Id___Value=${PrimaryId2}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0a7pry7</bpmn:incoming><bpmn:outgoing>SequenceFlow_1je1g49</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0zohvkd" name="Получение Суммы1"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/FactAmount1</camunda:inputParameter><camunda:outputParameter name="Summa1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1mzaq75</bpmn:incoming><bpmn:outgoing>SequenceFlow_0y0ctio</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0y0ctio" sourceRef="ServiceTask_0zohvkd" targetRef="Activity_1nvboro" /><bpmn:serviceTask id="ServiceTask_1ny9ep8" name="Получаем направление сделки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/TradeMonitorDetails___Side___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="TradeSide">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1luope9</bpmn:incoming><bpmn:outgoing>SequenceFlow_07gspcz</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_05z0ebp"><bpmn:incoming>Flow_1b9ydla</bpmn:incoming><bpmn:outgoing>SequenceFlow_1giodpb</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1la64qk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_00quaa7" name="Присвоить значение Qty"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Qty___Value?value=${Sum2}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1giodpb</bpmn:incoming><bpmn:outgoing>SequenceFlow_0hqu97c</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1o2c9b4" name="Присвоить значение  Payment"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Payment___Value?value=${Sum1}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0hqu97c</bpmn:incoming><bpmn:outgoing>SequenceFlow_10qfoig</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_16zuevg" name="Присвоить значение  Qty"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Qty___Value?value=${Sum1}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1la64qk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1sjjcja</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0uvhifv" name="Присвоить значение Payment"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Payment___Value?value=${Sum2}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1sjjcja</bpmn:incoming><bpmn:outgoing>SequenceFlow_04uhyo8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1giodpb" name="Sell" sourceRef="Gateway_05z0ebp" targetRef="ServiceTask_00quaa7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TradeSide == 'Sell'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1la64qk" name="Buy" sourceRef="Gateway_05z0ebp" targetRef="ServiceTask_16zuevg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TradeSide == 'Buy'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1sjjcja" sourceRef="ServiceTask_16zuevg" targetRef="ServiceTask_0uvhifv" /><bpmn:sequenceFlow id="SequenceFlow_04uhyo8" sourceRef="ServiceTask_0uvhifv" targetRef="ServiceTask_0d9ryje" /><bpmn:sequenceFlow id="SequenceFlow_0hqu97c" sourceRef="ServiceTask_00quaa7" targetRef="ServiceTask_1o2c9b4" /><bpmn:sequenceFlow id="SequenceFlow_10qfoig" sourceRef="ServiceTask_1o2c9b4" targetRef="ServiceTask_0d9ryje" /><bpmn:serviceTask id="ServiceTask_0zjry5k" name="Признак апдейта сделки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/IsQtyUpdate?value=1</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0dacjip</bpmn:incoming><bpmn:outgoing>Flow_0fz36g6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1o70m7e" sourceRef="StartEvent_1" targetRef="ExclusiveGateway_1bq722f" /><bpmn:sequenceFlow id="SequenceFlow_0o6n7pv" sourceRef="Task_02btl64" targetRef="ServiceTask_1886nk7" /><bpmn:serviceTask id="ServiceTask_0xxbcaj" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=DealEventDetails___BuyCurrency___ValueDisplayed&amp;systemName=DealEventDetails___SellCurrency___ValueDisplayed&amp;systemName=TradeMonitorDetails___Custodian___ValueDisplayed&amp;systemName=DealEventDetails___SellAmount___Value&amp;systemName=DealEventDetails___RegistrationDate___Value&amp;systemName=DealEventDetails___CustodianFxAccount_Editable___ValueDisplayed&amp;systemName=DealEventDetails___ClearingHouseFXAccount_Editable___ValueDisplayed&amp;systemName=hlk_direct_rate&amp;systemName=DealEventDetails___SellAmount___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="CCY_BUY"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___BuyCurrency___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="CCY_SELL"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellCurrency___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="RO"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Custodian___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="RegDate"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___RegistrationDate___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="ACC_BUY"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___CustodianFxAccount_Editable___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="ACC_SELL"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___ClearingHouseFXAccount_Editable___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="RT1"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_direct_rate</camunda:script></camunda:outputParameter><camunda:outputParameter name="SUM_SELL"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellAmount___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1evi218</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ozk3v3</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_192xen6" name="Ввод Курса, Суммы покупки или Суммы продажи пользователем" camunda:formKey="FILL" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="FactAmount1" label="Фактическое количество покупаемой валюты" type="string" /><camunda:formField id="hlk_rate" label="Курс пересчета в валюту покупки" type="string" /><camunda:formField id="hlk_direct_rate" label="Курс_прямой" type="string" /><camunda:formField id="AssetFlows___dtFlowDate___ValueDisplayed" label="Дата Обязательства" type="string" /><camunda:formField id="DealEventDetails___SellAmount___Value" label="Количество продаваемой валюты" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1t3npv2</bpmn:incoming><bpmn:incoming>Flow_1k0inmq</bpmn:incoming><bpmn:incoming>Flow_1v9lpdh</bpmn:incoming><bpmn:incoming>Flow_1jatalq</bpmn:incoming><bpmn:outgoing>SequenceFlow_15vcndx</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_11nskeu" name="Статус Заполнение: ввод курса,  суммы покупки или суммы продажи"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Ввод+курса,+суммы+покупки+или+продажи</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_13piphd</bpmn:incoming><bpmn:incoming>SequenceFlow_0mz9bn7</bpmn:incoming><bpmn:incoming>Flow_0ps9zg9</bpmn:incoming><bpmn:incoming>Flow_1ifn8wb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1t3npv2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1t3npv2" sourceRef="ServiceTask_11nskeu" targetRef="UserTask_192xen6" /><bpmn:serviceTask id="ServiceTask_1nt78y4" name="Устанавливаем значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("TradeMonitorDetails___ClearingHouse___ValueDisplayed", RO_2_NAME)
.prop("AssetFlows___dtFlowDate___ValueDisplayed", DT1)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ys0yxw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1evi218</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1evi218" sourceRef="ServiceTask_1nt78y4" targetRef="ServiceTask_0xxbcaj" /><bpmn:serviceTask id="ServiceTask_0d9ryje" name="создание обязательств покупка валюты" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/sendInstanceTo/ENRICHMENT_OBLIGATION/${instanceId}?closedSegment=false</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AssetflowData___lkupFlowType___ValueDisplayed", "4")
.prop("AssetFlows___cmbDirection___ValueDisplayed", "We receive")
.prop("AssetFlow___FlowType___ValueDisplayed", "Движение ДС")
.prop("AssetFlow___AssetflowStatus___ValueDisplayed", "Открыто")
.prop("AssetFlows___radioFactPlan___ValueDisplayed", "План")
.prop("AssetFlow___RegistrationDate___Value", RegDate)
.prop("AssetFlow___FlowDate___Value", BUYDATE)
.prop("AssetFlow___Currency___ValueDisplayed", CCY_BUY)
.prop("AssetFlow___Amount___Value", Sum1)
.prop("AssetFlows___lkupCS___ValueDisplayed", RO)
.prop("AssetFlows___lkupBOAccount___ValueDisplayed", ACC_BUY)
.prop("AssetFlow___Id___Value", primaryId + "_P1")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04uhyo8</bpmn:incoming><bpmn:incoming>SequenceFlow_10qfoig</bpmn:incoming><bpmn:outgoing>Flow_1j5lo0x</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0lzas2b" name="Статус В обработке: формирование движений"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=В+обработке:+Формирование+движений</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0k6uf23</bpmn:incoming><bpmn:outgoing>SequenceFlow_1o0lyem</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1o0lyem" sourceRef="ServiceTask_0lzas2b" targetRef="Activity_177k1xd" /><bpmn:exclusiveGateway id="ExclusiveGateway_15d2c3m" default="SequenceFlow_0af0dj8"><bpmn:incoming>SequenceFlow_0ozk3v3</bpmn:incoming><bpmn:outgoing>SequenceFlow_13piphd</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0af0dj8</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0ozk3v3" sourceRef="ServiceTask_0xxbcaj" targetRef="ExclusiveGateway_15d2c3m" /><bpmn:sequenceFlow id="SequenceFlow_13piphd" sourceRef="ExclusiveGateway_15d2c3m" targetRef="ServiceTask_11nskeu"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RT1 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0af0dj8" sourceRef="ExclusiveGateway_15d2c3m" targetRef="ServiceTask_0gpk18j" /><bpmn:serviceTask id="ServiceTask_0xmlzyz" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${RATE_refid}/getAttributes?systemName=ContractBaseCCY&amp;systemName=hlk_contrCcy&amp;systemName=hlk_rate_sell_base_ccy&amp;systemName=hlk_rate_sell_ctr_ccy</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="BASE_CCY"><camunda:script scriptFormat="javascript">JSON.parse(response).ContractBaseCCY</camunda:script></camunda:outputParameter><camunda:outputParameter name="CTR_CCY"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_contrCcy</camunda:script></camunda:outputParameter><camunda:outputParameter name="D_RATE"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_rate_sell_base_ccy</camunda:script></camunda:outputParameter><camunda:outputParameter name="R_RATE"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_rate_sell_ctr_ccy</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1j4w30g</bpmn:incoming><bpmn:outgoing>SequenceFlow_0z98o3z</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_12frtje" default="SequenceFlow_0egc8qj"><bpmn:incoming>SequenceFlow_0z98o3z</bpmn:incoming><bpmn:outgoing>SequenceFlow_050h9jf</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0egc8qj</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0z98o3z" sourceRef="ServiceTask_0xmlzyz" targetRef="ExclusiveGateway_12frtje" /><bpmn:serviceTask id="ServiceTask_1wl47xw" name="Устанавливаем значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_rate": "${R_RATE}",
"FactAmount1": "${R_RATE*SUM_SELL}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_050h9jf</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mz9bn7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_050h9jf" name="ВАЛЮТА ПОКУПКИ" sourceRef="ExclusiveGateway_12frtje" targetRef="ServiceTask_1wl47xw"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${BASE_CCY == CCY_BUY}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1jx9kk2" name="Устанавливаем значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_rate": "${D_RATE}",
"FactAmount1": "${D_RATE*SUM_SELL}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0egc8qj</bpmn:incoming><bpmn:outgoing>Flow_0ps9zg9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0egc8qj" sourceRef="ExclusiveGateway_12frtje" targetRef="ServiceTask_1jx9kk2" /><bpmn:sequenceFlow id="SequenceFlow_0mz9bn7" sourceRef="ServiceTask_1wl47xw" targetRef="ServiceTask_11nskeu" /><bpmn:serviceTask id="ServiceTask_0gpk18j" name="Получаем инстанс-ид КУРСА"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getRefId/hlk_direct_rate</camunda:inputParameter><camunda:outputParameter name="RATE_refid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0af0dj8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1j4w30g</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1j4w30g" sourceRef="ServiceTask_0gpk18j" targetRef="ServiceTask_0xmlzyz" /><bpmn:serviceTask id="ServiceTask_0inge26" name="Получаем значение параметров - счет1,2, РО, дата"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=hlk_acc_1&amp;systemName=hlk_acc_2&amp;systemName=TradeMonitorDetails___Custodian___ValueDisplayed&amp;systemName=DealEventDetails___BuyValueDate___Value&amp;systemName=TradeMonitorDetails___Reference___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Acc1"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_acc_2</camunda:script></camunda:outputParameter><camunda:outputParameter name="Acc2"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_acc_1</camunda:script></camunda:outputParameter><camunda:outputParameter name="RO_2_NAME"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Custodian___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="DT1"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___BuyValueDate___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="RefID"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Reference___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1n497ul</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wovcs6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0wovcs6" sourceRef="ServiceTask_0inge26" targetRef="ExclusiveGateway_0o6tx8a" /><bpmn:exclusiveGateway id="ExclusiveGateway_0o6tx8a" default="SequenceFlow_0ys0yxw"><bpmn:incoming>SequenceFlow_0wovcs6</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ys0yxw</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1rgi7mv</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0ys0yxw" sourceRef="ExclusiveGateway_0o6tx8a" targetRef="ServiceTask_1nt78y4" /><bpmn:sequenceFlow id="SequenceFlow_1rgi7mv" sourceRef="ExclusiveGateway_0o6tx8a" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Acc1 == null || Acc2 == null || RO_2_NAME == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_06j0ukg" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=hlk_rate&amp;systemName=FactAmount1&amp;systemName=DealEventDetails___SellAmount___Value&amp;systemName=AssetFlows___dtFlowDate___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="RATE1"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_rate</camunda:script></camunda:outputParameter><camunda:outputParameter name="FactAmount1"><camunda:script scriptFormat="javascript">JSON.parse(response).FactAmount1</camunda:script></camunda:outputParameter><camunda:outputParameter name="SUM_SELL"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellAmount___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="BUYDATE"><camunda:script scriptFormat="javascript">JSON.parse(response).AssetFlows___dtFlowDate___ValueDisplayed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_15vcndx</bpmn:incoming><bpmn:outgoing>Flow_0rs5724</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ho9pan" name="Достаем primaryId объекта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07gspcz</bpmn:incoming><bpmn:outgoing>SequenceFlow_0dn8x96</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0sgzpzx" name="Записываем внешний ID"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/hlk_EzDoc_ID?value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0dn8x96</bpmn:incoming><bpmn:outgoing>SequenceFlow_0dacjip</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1luope9" sourceRef="ServiceTask_1886nk7" targetRef="ServiceTask_1ny9ep8" /><bpmn:sequenceFlow id="SequenceFlow_0dn8x96" sourceRef="ServiceTask_0ho9pan" targetRef="ServiceTask_0sgzpzx" /><bpmn:sequenceFlow id="SequenceFlow_0dacjip" sourceRef="ServiceTask_0sgzpzx" targetRef="ServiceTask_0zjry5k" /><bpmn:sequenceFlow id="SequenceFlow_0umds0c" sourceRef="UserTask_0m65vby" targetRef="ServiceTask_19o2ifn" /><bpmn:serviceTask id="ServiceTask_0hxt3bs" name="Сообщаем об окончании процесса" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1s1rait</bpmn:incoming><bpmn:outgoing>SequenceFlow_18zjd8i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_18zjd8i" sourceRef="ServiceTask_0hxt3bs" targetRef="EndEvent_0djl7a3" /><bpmn:serviceTask id="ServiceTask_040kcvn" name="создание обязательств продажа валюты" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/sendInstanceTo/ENRICHMENT_OBLIGATION/${instanceId}?closedSegment=false</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AssetflowData___lkupFlowType___ValueDisplayed", "4")
.prop("AssetFlows___cmbDirection___ValueDisplayed", "We pay")
.prop("AssetFlow___FlowType___ValueDisplayed", "Движение ДС")
.prop("AssetFlow___AssetflowStatus___ValueDisplayed", "Открыто")
.prop("AssetFlows___radioFactPlan___ValueDisplayed", "План")
.prop("AssetFlow___RegistrationDate___Value", RegDate)
.prop("AssetFlow___FlowDate___Value", BUYDATE)
.prop("AssetFlow___Currency___ValueDisplayed", CCY_SELL)
.prop("AssetFlow___Amount___Value", Sum2)
.prop("AssetFlows___lkupCS___ValueDisplayed", RO)
.prop("AssetFlows___lkupBOAccount___ValueDisplayed", ACC_SELL)
.prop("AssetFlow___Id___Value", primaryId + "_P2")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0iowe2i</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ydm9jr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1xdftum" sourceRef="ServiceTask_1aejeok" targetRef="Activity_15md3ei" /><bpmn:sequenceFlow id="SequenceFlow_07gspcz" sourceRef="ServiceTask_1ny9ep8" targetRef="ServiceTask_0ho9pan" /><bpmn:sequenceFlow id="SequenceFlow_1je1g49" sourceRef="ServiceTask_07x5uiq" targetRef="Activity_1akkrkq" /><bpmn:sequenceFlow id="Flow_0ps9zg9" sourceRef="ServiceTask_1jx9kk2" targetRef="ServiceTask_11nskeu" /><bpmn:serviceTask id="Activity_0b5veyf" name="Статус Заполнение: подтверждение исполнения"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Подтверждение+исполнения</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02lt5xr</bpmn:incoming><bpmn:outgoing>Flow_1fj427t</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1fj427t" sourceRef="Activity_0b5veyf" targetRef="UserTask_0m65vby" /><bpmn:sequenceFlow id="SequenceFlow_15vcndx" sourceRef="UserTask_192xen6" targetRef="ServiceTask_06j0ukg" /><bpmn:serviceTask id="ServiceTask_08aaoic" name="Статус Заполнение: выбор счетов из списка"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+выбор+счетов+из+списка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1rgi7mv</bpmn:incoming><bpmn:incoming>Flow_13lw7se</bpmn:incoming><bpmn:incoming>Flow_0e1l9xl</bpmn:incoming><bpmn:incoming>Flow_13adb2k</bpmn:incoming><bpmn:incoming>Flow_1dwxuuc</bpmn:incoming><bpmn:incoming>Flow_0qrthfi</bpmn:incoming><bpmn:incoming>Flow_11ns26y</bpmn:incoming><bpmn:incoming>Flow_1eebpin</bpmn:incoming><bpmn:incoming>Flow_1534lyb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vgsdrd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1vgsdrd" sourceRef="ServiceTask_08aaoic" targetRef="UserTask_1e9vacu" /><bpmn:userTask id="UserTask_1e9vacu" name="Выбор счетов и РО Пользователем" camunda:formKey="FILL" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="hlk_acc_1" label="Счет для зачисления" type="string" /><camunda:formField id="hlk_acc_2" label="Счет для списания" type="string" /><camunda:formField id="hlk_account_2" label="Счет 2" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vgsdrd</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bri3t6</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_1bri3t6" sourceRef="UserTask_1e9vacu" targetRef="Activity_0wboa97" /><bpmn:sequenceFlow id="SequenceFlow_1bp4a1l" sourceRef="ExclusiveGateway_1bq722f" targetRef="Task_02btl64" /><bpmn:parallelGateway id="ExclusiveGateway_1bq722f"><bpmn:incoming>SequenceFlow_1o70m7e</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bp4a1l</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1fla32m</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_1kx22nr"><bpmn:incoming>SequenceFlow_1fla32m</bpmn:incoming><bpmn:outgoing>SequenceFlow_02bhzvg</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1bwzogs" signalRef="Signal_1460js0" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="ServiceTask_1y7k950" name="завершить процесс" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_14iep0o</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bvbo45</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1iktr45"><bpmn:incoming>SequenceFlow_1bvbo45</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0chm4z5" /></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_02bhzvg" sourceRef="IntermediateCatchEvent_1kx22nr" targetRef="Activity_161u4zr" /><bpmn:sequenceFlow id="SequenceFlow_1bvbo45" sourceRef="ServiceTask_1y7k950" targetRef="EndEvent_1iktr45" /><bpmn:sequenceFlow id="SequenceFlow_1fla32m" sourceRef="ExclusiveGateway_1bq722f" targetRef="IntermediateCatchEvent_1kx22nr" /><bpmn:endEvent id="EndEvent_0djl7a3"><bpmn:incoming>SequenceFlow_18zjd8i</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1h365kr" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0rs5724" sourceRef="ServiceTask_06j0ukg" targetRef="Gateway_17p7vy2" /><bpmn:serviceTask id="Activity_14zluc6" name="Статус &#34;Не заполнены обязательные параметры&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Не+заполнены+обязательные+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0rqr0ck</bpmn:incoming><bpmn:incoming>Flow_1obw9r0</bpmn:incoming><bpmn:incoming>Flow_1o6e6hm</bpmn:incoming><bpmn:incoming>Flow_0bceqnl</bpmn:incoming><bpmn:outgoing>Flow_1k0inmq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1k0inmq" sourceRef="Activity_14zluc6" targetRef="UserTask_192xen6" /><bpmn:userTask id="Activity_0qgfbel" name="Зафиксировать курс или Вернуться к редактировани ю" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;conti&#34;,&#34;label&#34;:&#34;Зафиксировать курс и сумму&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;return&#34;,&#34;label&#34;:&#34;Вернуться к редактированию&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1poybro</bpmn:incoming><bpmn:outgoing>Flow_1ifn8wb</bpmn:outgoing><bpmn:outgoing>Flow_1rm7xru</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="Flow_1ifn8wb" sourceRef="Activity_0qgfbel" targetRef="ServiceTask_11nskeu"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'return'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1rm7xru" sourceRef="Activity_0qgfbel" targetRef="Activity_0tej5yi"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'conti'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0hp7txj" name="Статус &#34;В обработке: параметры заполнены&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=В+обработке:+Параметры+заполнены</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11730lo</bpmn:incoming><bpmn:outgoing>Flow_1poybro</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1poybro" sourceRef="Activity_0hp7txj" targetRef="Activity_0qgfbel" /><bpmn:sequenceFlow id="SequenceFlow_1ydm9jr" sourceRef="ServiceTask_040kcvn" targetRef="Activity_10scmgw" /><bpmn:exclusiveGateway id="Gateway_17p7vy2" default="Flow_0rp8h5f"><bpmn:incoming>Flow_0rs5724</bpmn:incoming><bpmn:outgoing>Flow_0rqr0ck</bpmn:outgoing><bpmn:outgoing>Flow_0rp8h5f</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0rqr0ck" name="не заполнены даты" sourceRef="Gateway_17p7vy2" targetRef="Activity_14zluc6"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${BUYDATE == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_1lrjh87" default="Flow_0k4ybrb"><bpmn:incoming>Flow_0rp8h5f</bpmn:incoming><bpmn:outgoing>Flow_0rpn93o</bpmn:outgoing><bpmn:outgoing>Flow_0k4ybrb</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1bajjew" name="Статус &#34;Заполнение: Дата должна быть не меньше первоначальной&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Дата+должна+быть+не+меньше+первоначальной</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0rpn93o</bpmn:incoming><bpmn:outgoing>Flow_1v9lpdh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0rpn93o" sourceRef="Gateway_1lrjh87" targetRef="Activity_1bajjew"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${BUYDATE &lt; DT1}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1v9lpdh" sourceRef="Activity_1bajjew" targetRef="UserTask_192xen6" /><bpmn:serviceTask id="Activity_177k1xd" name="Получаем значение параметров СУММЫ1, 2"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=FactAmount1&amp;systemName=DealEventDetails___SellAmount___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Sum1"><camunda:script scriptFormat="javascript">JSON.parse(response).FactAmount1</camunda:script></camunda:outputParameter><camunda:outputParameter name="Sum2"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellAmount___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1o0lyem</bpmn:incoming><bpmn:outgoing>Flow_1b9ydla</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1b9ydla" sourceRef="Activity_177k1xd" targetRef="Gateway_05z0ebp" /><bpmn:sequenceFlow id="Flow_1s1rait" sourceRef="ServiceTask_1asr8lq" targetRef="ServiceTask_0hxt3bs" /><bpmn:exclusiveGateway id="Gateway_1tqj5dp" default="Flow_05fy85s"><bpmn:incoming>Flow_1f0mnpy</bpmn:incoming><bpmn:outgoing>Flow_13lw7se</bpmn:outgoing><bpmn:outgoing>Flow_05fy85s</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_06tdb0m" name="Получаем инстанс-ид СЧЕТА"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getRefId/hlk_acc_2</camunda:inputParameter><camunda:outputParameter name="Acc_refid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05fy85s</bpmn:incoming><bpmn:outgoing>Flow_1wpa7mn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0025zhk" name="Получаем РО счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid}/getAttributes?systemName=hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_ID"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_clearing_system</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0r4bvp1</bpmn:incoming><bpmn:outgoing>Flow_0beubdf</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0akixsr" default="Flow_0wzivvh"><bpmn:incoming>Flow_0beubdf</bpmn:incoming><bpmn:outgoing>Flow_0e1l9xl</bpmn:outgoing><bpmn:outgoing>Flow_0wzivvh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_145cxew" name="Получаем навзание РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/legalEntity/${RO_refid}/getAttributes?systemName=ShortName</camunda:inputParameter><camunda:outputParameter name="RO_NAME"><camunda:script scriptFormat="javascript">JSON.parse(response).ShortName</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0i0eqah</bpmn:incoming><bpmn:outgoing>Flow_19l929z</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_17ot1o6" name="Получаем праймари-ид РО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "legalEntity",
	"filter": {
		"_id": ObjectId("${RO_refid}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="RO_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1axydxw</bpmn:incoming><bpmn:outgoing>Flow_0i0eqah</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1npsm3t" name="Получаем инстанс-ид РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid}/getRefId/hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_refid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0wzivvh</bpmn:incoming><bpmn:outgoing>Flow_1uw3jfe</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0qj91dk" name="Установка атрибутов РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_RO_TO", S("{}")
  .prop("value", RO_NAME)
  .prop("primaryId", RO_primaryId)
  .prop("source", "legalEntity"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0p5lot3</bpmn:incoming><bpmn:outgoing>Flow_01d0q0i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0wboa97" name="Получение счетов 1 и 2, суммы продажи"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=hlk_acc_1&amp;systemName=hlk_acc_2&amp;systemName=DealEventDetails___SellAmount___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="payload" /><camunda:outputParameter name="SumSellStart"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellAmount___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="ACCOUNT2"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_acc_2</camunda:script></camunda:outputParameter><camunda:outputParameter name="ACCOUNT1"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_acc_1</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bri3t6</bpmn:incoming><bpmn:incoming>Flow_0fz36g6</bpmn:incoming><bpmn:outgoing>Flow_1f0mnpy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_13lw7se" sourceRef="Gateway_1tqj5dp" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ACCOUNT1 == null || ACCOUNT2 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0e1l9xl" sourceRef="Gateway_0akixsr" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_ID == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1f0mnpy" sourceRef="Activity_0wboa97" targetRef="Gateway_1tqj5dp" /><bpmn:sequenceFlow id="Flow_05fy85s" sourceRef="Gateway_1tqj5dp" targetRef="Activity_06tdb0m" /><bpmn:sequenceFlow id="Flow_1wpa7mn" sourceRef="Activity_06tdb0m" targetRef="Activity_135km0w" /><bpmn:sequenceFlow id="Flow_0beubdf" sourceRef="Activity_0025zhk" targetRef="Gateway_0akixsr" /><bpmn:sequenceFlow id="Flow_0wzivvh" sourceRef="Gateway_0akixsr" targetRef="Activity_1npsm3t" /><bpmn:sequenceFlow id="Flow_0i0eqah" sourceRef="Activity_17ot1o6" targetRef="Activity_145cxew" /><bpmn:sequenceFlow id="Flow_19l929z" sourceRef="Activity_145cxew" targetRef="Gateway_07zlyhr" /><bpmn:sequenceFlow id="Flow_1uw3jfe" sourceRef="Activity_1npsm3t" targetRef="Gateway_07zg12x" /><bpmn:exclusiveGateway id="Gateway_07zg12x" default="Flow_1axydxw"><bpmn:incoming>Flow_1uw3jfe</bpmn:incoming><bpmn:outgoing>Flow_1axydxw</bpmn:outgoing><bpmn:outgoing>Flow_0qrthfi</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1axydxw" sourceRef="Gateway_07zg12x" targetRef="Activity_17ot1o6" /><bpmn:sequenceFlow id="Flow_0qrthfi" sourceRef="Gateway_07zg12x" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_refid == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_07zlyhr" default="Flow_0p5lot3"><bpmn:incoming>Flow_19l929z</bpmn:incoming><bpmn:outgoing>Flow_0p5lot3</bpmn:outgoing><bpmn:outgoing>Flow_1eebpin</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0p5lot3" sourceRef="Gateway_07zlyhr" targetRef="Activity_0qj91dk" /><bpmn:sequenceFlow id="Flow_1eebpin" sourceRef="Gateway_07zlyhr" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_primaryId == null || RO_NAME == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1c9mpv1" name="Получаем инстанс-ид СЧЕТА"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getRefId/hlk_acc_1</camunda:inputParameter><camunda:outputParameter name="Acc_refid2">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01d0q0i</bpmn:incoming><bpmn:outgoing>Flow_0z7g86a</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0j6dzvg" name="Получаем РО счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid2}/getAttributes?systemName=hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_ID2"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_clearing_system</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kqzbv6</bpmn:incoming><bpmn:outgoing>Flow_0862dmq</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ky0o6d" default="Flow_111ejey"><bpmn:incoming>Flow_0862dmq</bpmn:incoming><bpmn:outgoing>Flow_111ejey</bpmn:outgoing><bpmn:outgoing>Flow_13adb2k</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0vxokx6" name="Получаем навзание РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/legalEntity/${RO_refid2}/getAttributes?systemName=ShortName</camunda:inputParameter><camunda:outputParameter name="RO_NAME2"><camunda:script scriptFormat="javascript">JSON.parse(response).ShortName</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0tklip8</bpmn:incoming><bpmn:outgoing>Flow_11d55sl</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_057ysxr" name="Получаем праймари-ид РО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "legalEntity",
	"filter": {
		"_id": ObjectId("${RO_refid2}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="RO_primaryId2"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11tf5j5</bpmn:incoming><bpmn:outgoing>Flow_0tklip8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1edwbbr" name="Получаем инстанс-ид РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid2}/getRefId/hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_refid2">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_111ejey</bpmn:incoming><bpmn:outgoing>Flow_1atedi3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0mqzsdt" name="Установка атрибутов РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_RO_FROM", S("{}")
  .prop("value", RO_NAME2)
  .prop("primaryId", RO_primaryId2)
  .prop("source", "legalEntity"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_058zj34</bpmn:incoming><bpmn:outgoing>Flow_1h83mn0</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1mez76a" default="Flow_11tf5j5"><bpmn:incoming>Flow_1atedi3</bpmn:incoming><bpmn:outgoing>Flow_11tf5j5</bpmn:outgoing><bpmn:outgoing>Flow_11ns26y</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_1urrdke" default="Flow_058zj34"><bpmn:incoming>Flow_11d55sl</bpmn:incoming><bpmn:outgoing>Flow_058zj34</bpmn:outgoing><bpmn:outgoing>Flow_1dwxuuc</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0z7g86a" sourceRef="Activity_1c9mpv1" targetRef="Activity_1c4v8tn" /><bpmn:sequenceFlow id="Flow_0862dmq" sourceRef="Activity_0j6dzvg" targetRef="Gateway_0ky0o6d" /><bpmn:sequenceFlow id="Flow_111ejey" sourceRef="Gateway_0ky0o6d" targetRef="Activity_1edwbbr" /><bpmn:sequenceFlow id="Flow_0tklip8" sourceRef="Activity_057ysxr" targetRef="Activity_0vxokx6" /><bpmn:sequenceFlow id="Flow_11d55sl" sourceRef="Activity_0vxokx6" targetRef="Gateway_1urrdke" /><bpmn:sequenceFlow id="Flow_11tf5j5" sourceRef="Gateway_1mez76a" targetRef="Activity_057ysxr" /><bpmn:sequenceFlow id="Flow_1atedi3" sourceRef="Activity_1edwbbr" targetRef="Gateway_1mez76a" /><bpmn:sequenceFlow id="Flow_058zj34" sourceRef="Gateway_1urrdke" targetRef="Activity_0mqzsdt" /><bpmn:sequenceFlow id="Flow_01d0q0i" sourceRef="Activity_0qj91dk" targetRef="Activity_1c9mpv1" /><bpmn:sequenceFlow id="Flow_13adb2k" sourceRef="Gateway_0ky0o6d" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_ID2 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_11ns26y" sourceRef="Gateway_1mez76a" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_refid2 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1dwxuuc" sourceRef="Gateway_1urrdke" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_primaryId2 == null || RO_NAME2 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1h83mn0" sourceRef="Activity_0mqzsdt" targetRef="Activity_0bhd7l8" /><bpmn:sequenceFlow id="Flow_0fz36g6" sourceRef="ServiceTask_0zjry5k" targetRef="Activity_0wboa97" /><bpmn:serviceTask id="Activity_1qep3om" name="Получаем название счета 2"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid2}/getAttribute/hlk_Account_Number</camunda:inputParameter><camunda:outputParameter name="Acc_name2">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1thuqc5</bpmn:incoming><bpmn:outgoing>Flow_1fwnbb6</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1c4v8tn" name="Получаем праймари-ид счета 2"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"_id": ObjectId("${Acc_refid2}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="ACC2_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0z7g86a</bpmn:incoming><bpmn:outgoing>Flow_1thuqc5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1dii91l" name="Установка атрибутов счета2"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_account_2", S("{}")
  .prop("value", Acc_name2)
  .prop("primaryId", ACC2_primaryId)
  .prop("source", "invoice"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0a0o38s</bpmn:incoming><bpmn:outgoing>Flow_0w66xyn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1thuqc5" sourceRef="Activity_1c4v8tn" targetRef="Activity_1qep3om" /><bpmn:sequenceFlow id="Flow_1fwnbb6" sourceRef="Activity_1qep3om" targetRef="Gateway_0c69f6q" /><bpmn:sequenceFlow id="Flow_0w66xyn" sourceRef="Activity_1dii91l" targetRef="Activity_127ewe0" /><bpmn:exclusiveGateway id="Gateway_0c69f6q" default="Flow_0a0o38s"><bpmn:incoming>Flow_1fwnbb6</bpmn:incoming><bpmn:outgoing>Flow_0a0o38s</bpmn:outgoing><bpmn:outgoing>Flow_1534lyb</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0a0o38s" sourceRef="Gateway_0c69f6q" targetRef="Activity_1dii91l" /><bpmn:sequenceFlow id="Flow_1534lyb" sourceRef="Gateway_0c69f6q" targetRef="ServiceTask_08aaoic"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ACC2_primaryId == null || Acc_name2 == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0bhd7l8" name="Установка атрибутов счета1"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_acc_1", S("{}")
  .prop("value", Acc_name1)
  .prop("primaryId", ACC1_primaryId)
  .prop("source", "invoice"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1h83mn0</bpmn:incoming><bpmn:outgoing>Flow_1n497ul</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1n497ul" sourceRef="Activity_0bhd7l8" targetRef="ServiceTask_0inge26" /><bpmn:serviceTask id="Activity_135km0w" name="Получаем праймари-ид счета 1"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"_id": ObjectId("${Acc_refid}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="ACC1_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wpa7mn</bpmn:incoming><bpmn:outgoing>Flow_1rufp1o</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1yzuwyh" name="Получаем название счета 1"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid}/getAttribute/hlk_Account_Number</camunda:inputParameter><camunda:outputParameter name="Acc_name1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rufp1o</bpmn:incoming><bpmn:outgoing>Flow_0r4bvp1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0r4bvp1" sourceRef="Activity_1yzuwyh" targetRef="Activity_0025zhk" /><bpmn:sequenceFlow id="Flow_1rufp1o" sourceRef="Activity_135km0w" targetRef="Activity_1yzuwyh" /><bpmn:serviceTask id="Activity_127ewe0" name="Установка атрибутов счета2"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_acc_2", S("{}")
  .prop("value", Acc_name2)
  .prop("primaryId", ACC2_primaryId)
  .prop("source", "invoice"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0w66xyn</bpmn:incoming><bpmn:outgoing>Flow_0kqzbv6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0kqzbv6" sourceRef="Activity_127ewe0" targetRef="Activity_0j6dzvg" /><bpmn:sequenceFlow id="Flow_1j5lo0x" sourceRef="ServiceTask_0d9ryje" targetRef="Activity_0296igi" /><bpmn:sequenceFlow id="Flow_1mzaq75" sourceRef="ServiceTask_19o2ifn" targetRef="ServiceTask_0zohvkd" /><bpmn:scriptTask id="Activity_0296igi" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>Flow_1j5lo0x</bpmn:incoming><bpmn:outgoing>Flow_1c63ky0</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for A signal")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1c63ky0" sourceRef="Activity_0296igi" targetRef="Event_08bc98i" /><bpmn:scriptTask id="Activity_10scmgw" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_1ydm9jr</bpmn:incoming><bpmn:outgoing>Flow_1njwmf9</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for B signal")</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_07c8ywl" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0w5d4ys</bpmn:incoming><bpmn:outgoing>Flow_0ulz6gz</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for C signal")</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1akkrkq" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_1je1g49</bpmn:incoming><bpmn:outgoing>Flow_188ky5w</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for D signal")</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_0q1hkeb" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>Flow_03554m1</bpmn:incoming><bpmn:outgoing>Flow_11p1ra0</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": ALL DONE!")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_11p1ra0" sourceRef="Activity_0q1hkeb" targetRef="ServiceTask_1asr8lq" /><bpmn:intermediateCatchEvent id="Event_08bc98i"><bpmn:incoming>Flow_1c63ky0</bpmn:incoming><bpmn:outgoing>Flow_0iowe2i</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0k2zbqc" messageRef="Message_0kamrhm" /></bpmn:intermediateCatchEvent><bpmn:intermediateCatchEvent id="Event_1kfi13w"><bpmn:incoming>Flow_1njwmf9</bpmn:incoming><bpmn:outgoing>Flow_02lt5xr</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0i6hr4e" messageRef="Message_0kamrhm" /></bpmn:intermediateCatchEvent><bpmn:intermediateCatchEvent id="Event_1r1szal"><bpmn:incoming>Flow_0ulz6gz</bpmn:incoming><bpmn:outgoing>Flow_0f2a5n2</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_1r4a5o9" messageRef="Message_0kamrhm" /></bpmn:intermediateCatchEvent><bpmn:intermediateCatchEvent id="Event_0mcxsru"><bpmn:incoming>Flow_188ky5w</bpmn:incoming><bpmn:outgoing>Flow_03554m1</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_1h07haj" messageRef="Message_0kamrhm" /></bpmn:intermediateCatchEvent><bpmn:userTask id="Activity_1abher1" name="Пересчитать сумму покупки, сумму продажи или курс" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;CalcSumBuy&#34;,&#34;label&#34;:&#34;Пересчитать сумму покупки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;CalcSumSell&#34;,&#34;label&#34;:&#34;Пересчитать сумму продажи&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;CalcRate&#34;,&#34;label&#34;:&#34;Пересчитать курс&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0k4ybrb</bpmn:incoming><bpmn:outgoing>Flow_0eot04v</bpmn:outgoing><bpmn:outgoing>Flow_1exdtg0</bpmn:outgoing><bpmn:outgoing>Flow_0qo9ie4</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="Flow_0rp8h5f" sourceRef="Gateway_17p7vy2" targetRef="Gateway_1lrjh87" /><bpmn:sequenceFlow id="Flow_0k4ybrb" sourceRef="Gateway_1lrjh87" targetRef="Activity_1abher1" /><bpmn:serviceTask id="Activity_041mu36" name="Устанавливаем значения параметров - считаем от курса и суммы продажи"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"FactAmount1": "${RATE1*SUM_SELL}",
"DealEventDetails___SellValueDate___Value": "${BUYDATE}",
"DealEventDetails___BuyValueDate___Value": "${BUYDATE}",
"DealEventDetails___SellAmount___Value": "${SUM_SELL}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09parhf</bpmn:incoming><bpmn:outgoing>Flow_19dfih5</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0eot04v" name="Пересчитать сумму покупки" sourceRef="Activity_1abher1" targetRef="Gateway_151z9r9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'CalcSumBuy'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1uqj166" name="Устанавливаем значения параметров - считаем от сумм"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_rate": "${FactAmount1/SUM_SELL}",
"DealEventDetails___SellValueDate___Value": "${BUYDATE}",
"DealEventDetails___BuyValueDate___Value": "${BUYDATE}",
"FactAmount1": "${FactAmount1}",
"DealEventDetails___SellAmount___Value": "${SUM_SELL}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18mvw38</bpmn:incoming><bpmn:outgoing>Flow_1ktqetd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1exdtg0" name="Пересчитать курс" sourceRef="Activity_1abher1" targetRef="Gateway_158o7an"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'CalcRate'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_00i2epz" name="Устанавливаем значения параметров - считаем от курса и суммы покупуи"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"DealEventDetails___SellValueDate___Value": "${BUYDATE}",
"DealEventDetails___BuyValueDate___Value": "${BUYDATE}",
"DealEventDetails___SellAmount___Value":
"${FactAmount1/RATE1}",
"FactAmount1": "${FactAmount1}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0z3i8mk</bpmn:incoming><bpmn:outgoing>Flow_0a6tw1m</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_151z9r9" default="Flow_0bceqnl"><bpmn:incoming>Flow_0eot04v</bpmn:incoming><bpmn:outgoing>Flow_09parhf</bpmn:outgoing><bpmn:outgoing>Flow_0bceqnl</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_09parhf" sourceRef="Gateway_151z9r9" targetRef="Activity_041mu36"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${SUM_SELL != null &amp;&amp; SUM_SELL != 0 &amp;&amp; RATE1 != null &amp;&amp; RATE1 != 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0qo9ie4" name="Пересчитать сумму продажи" sourceRef="Activity_1abher1" targetRef="Gateway_0ftt3vj"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'CalcSumSell'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0ftt3vj" default="Flow_1obw9r0"><bpmn:incoming>Flow_0qo9ie4</bpmn:incoming><bpmn:outgoing>Flow_0z3i8mk</bpmn:outgoing><bpmn:outgoing>Flow_1obw9r0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0z3i8mk" sourceRef="Gateway_0ftt3vj" targetRef="Activity_00i2epz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RATE1 != null &amp;&amp; RATE1 != 0 &amp;&amp; FactAmount1 != null &amp;&amp; FactAmount1 != 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1obw9r0" sourceRef="Gateway_0ftt3vj" targetRef="Activity_14zluc6" /><bpmn:exclusiveGateway id="Gateway_158o7an" default="Flow_1o6e6hm"><bpmn:incoming>Flow_1exdtg0</bpmn:incoming><bpmn:outgoing>Flow_18mvw38</bpmn:outgoing><bpmn:outgoing>Flow_1o6e6hm</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_18mvw38" sourceRef="Gateway_158o7an" targetRef="Activity_1uqj166"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${SUM_SELL != null &amp;&amp; SUM_SELL != 0 &amp;&amp; FactAmount1 != null &amp;&amp; FactAmount1 != 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1o6e6hm" sourceRef="Gateway_158o7an" targetRef="Activity_14zluc6" /><bpmn:sequenceFlow id="Flow_0bceqnl" sourceRef="Gateway_151z9r9" targetRef="Activity_14zluc6" /><bpmn:exclusiveGateway id="Gateway_17yu0t3" default="Flow_11730lo"><bpmn:incoming>Flow_1ktqetd</bpmn:incoming><bpmn:incoming>Flow_19dfih5</bpmn:incoming><bpmn:incoming>Flow_0134aux</bpmn:incoming><bpmn:outgoing>Flow_0wn8dw7</bpmn:outgoing><bpmn:outgoing>Flow_11730lo</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1anybj7" name="Статус Сумма продажи больше первоначальной"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Сумма+продажи+больше+первоначальной</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0wn8dw7</bpmn:incoming><bpmn:outgoing>Flow_1jatalq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0wn8dw7" sourceRef="Gateway_17yu0t3" targetRef="Activity_1anybj7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${SumSellStart &lt; SUM_SELL}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1jatalq" sourceRef="Activity_1anybj7" targetRef="UserTask_192xen6" /><bpmn:sequenceFlow id="Flow_1ktqetd" sourceRef="Activity_1uqj166" targetRef="Gateway_17yu0t3" /><bpmn:sequenceFlow id="Flow_11730lo" sourceRef="Gateway_17yu0t3" targetRef="Activity_0hp7txj" /><bpmn:sequenceFlow id="Flow_19dfih5" sourceRef="Activity_041mu36" targetRef="Gateway_17yu0t3" /><bpmn:sequenceFlow id="Flow_1njwmf9" sourceRef="Activity_10scmgw" targetRef="Event_1kfi13w" /><bpmn:sequenceFlow id="Flow_0ulz6gz" sourceRef="Activity_07c8ywl" targetRef="Event_1r1szal" /><bpmn:sequenceFlow id="Flow_188ky5w" sourceRef="Activity_1akkrkq" targetRef="Event_0mcxsru" /><bpmn:sequenceFlow id="Flow_0a6tw1m" sourceRef="Activity_00i2epz" targetRef="Activity_1qu3b64" /><bpmn:sequenceFlow id="Flow_03554m1" sourceRef="Event_0mcxsru" targetRef="Activity_0q1hkeb" /><bpmn:sequenceFlow id="Flow_0f2a5n2" sourceRef="Event_1r1szal" targetRef="ServiceTask_1aejeok" /><bpmn:sequenceFlow id="Flow_02lt5xr" sourceRef="Event_1kfi13w" targetRef="Activity_0b5veyf" /><bpmn:sequenceFlow id="Flow_0iowe2i" sourceRef="Event_08bc98i" targetRef="ServiceTask_040kcvn" /><bpmn:serviceTask id="Activity_0tej5yi" name="Достаем primaryId объекта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rm7xru</bpmn:incoming><bpmn:outgoing>Flow_0k6uf23</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0k6uf23" sourceRef="Activity_0tej5yi" targetRef="ServiceTask_0lzas2b" /><bpmn:scriptTask id="Activity_1nvboro" name="Идентификатор факта 1" scriptFormat="javascript" camunda:resultVariable="PrimaryId2"><bpmn:incoming>SequenceFlow_0y0ctio</bpmn:incoming><bpmn:outgoing>Flow_14nx79v</bpmn:outgoing><bpmn:script>primaryId + "_F1"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_14nx79v" sourceRef="Activity_1nvboro" targetRef="ServiceTask_0c1c7mj" /><bpmn:scriptTask id="Activity_15md3ei" name="Идентификатор факта 2" scriptFormat="javascript" camunda:resultVariable="PrimaryId2"><bpmn:incoming>SequenceFlow_1xdftum</bpmn:incoming><bpmn:outgoing>Flow_0a7pry7</bpmn:outgoing><bpmn:script>primaryId + "_F2"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0a7pry7" sourceRef="Activity_15md3ei" targetRef="ServiceTask_07x5uiq" /><bpmn:serviceTask id="Activity_1qu3b64" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=DealEventDetails___SellAmount___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="SUM_SELL"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___SellAmount___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0a6tw1m</bpmn:incoming><bpmn:outgoing>Flow_0134aux</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0134aux" sourceRef="Activity_1qu3b64" targetRef="Gateway_17yu0t3" /><bpmn:sequenceFlow id="Flow_14iep0o" sourceRef="Activity_161u4zr" targetRef="ServiceTask_1y7k950" /><bpmn:scriptTask id="Activity_161u4zr" name="Log" scriptFormat="Javascript"><bpmn:incoming>SequenceFlow_02bhzvg</bpmn:incoming><bpmn:outgoing>Flow_14iep0o</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": Cancel Signal Recieved ! ")</bpmn:script></bpmn:scriptTask></bpmn:process><bpmn:signal id="Signal_1termqr" name="NotifyAssetflowToEnrichmentС_${primaryId}_B" /><bpmn:signal id="Signal_0givwm6" name="NotifyAssetflowToEnrichmentС_${primaryId}_S" /><bpmn:signal id="Signal_1460js0" name="Cancell${instanceId}" /><bpmn:message id="Message_0kamrhm" name="parentProcess" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_Conversion_Cash_07eb2cce-4001-44a0-bb4d-a18a2a25cbd8"><bpmndi:BPMNEdge id="Flow_14iep0o_di" bpmnElement="Flow_14iep0o"><di:waypoint x="850" y="1012" /><di:waypoint x="950" y="1012" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0134aux_di" bpmnElement="Flow_0134aux"><di:waypoint x="3650" y="730" /><di:waypoint x="3650" y="621" /><di:waypoint x="3705" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a7pry7_di" bpmnElement="Flow_0a7pry7"><di:waypoint x="2970" y="1708" /><di:waypoint x="3010" y="1708" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14nx79v_di" bpmnElement="Flow_14nx79v"><di:waypoint x="2320" y="1710" /><di:waypoint x="2370" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0k6uf23_di" bpmnElement="Flow_0k6uf23"><di:waypoint x="290" y="1600" /><di:waypoint x="290" y="1668" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iowe2i_di" bpmnElement="Flow_0iowe2i"><di:waypoint x="1248" y="1710" /><di:waypoint x="1280" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02lt5xr_di" bpmnElement="Flow_02lt5xr"><di:waypoint x="1591" y="1708" /><di:waypoint x="1640" y="1708" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f2a5n2_di" bpmnElement="Flow_0f2a5n2"><di:waypoint x="2678" y="1710" /><di:waypoint x="2730" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03554m1_di" bpmnElement="Flow_03554m1"><di:waypoint x="3338" y="1706" /><di:waypoint x="3390" y="1707" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a6tw1m_di" bpmnElement="Flow_0a6tw1m"><di:waypoint x="3530" y="770" /><di:waypoint x="3610" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_188ky5w_di" bpmnElement="Flow_188ky5w"><di:waypoint x="3250" y="1708" /><di:waypoint x="3276" y="1708" /><di:waypoint x="3276" y="1706" /><di:waypoint x="3302" y="1706" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ulz6gz_di" bpmnElement="Flow_0ulz6gz"><di:waypoint x="2600" y="1710" /><di:waypoint x="2642" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1njwmf9_di" bpmnElement="Flow_1njwmf9"><di:waypoint x="1505" y="1711" /><di:waypoint x="1555" y="1711" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19dfih5_di" bpmnElement="Flow_19dfih5"><di:waypoint x="3610" y="500" /><di:waypoint x="3730" y="500" /><di:waypoint x="3730" y="596" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11730lo_di" bpmnElement="Flow_11730lo"><di:waypoint x="3755" y="621" /><di:waypoint x="3850" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ktqetd_di" bpmnElement="Flow_1ktqetd"><di:waypoint x="3610" y="621" /><di:waypoint x="3705" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jatalq_di" bpmnElement="Flow_1jatalq"><di:waypoint x="3530" y="930" /><di:waypoint x="2680" y="930" /><di:waypoint x="2680" y="661" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wn8dw7_di" bpmnElement="Flow_0wn8dw7"><di:waypoint x="3730" y="646" /><di:waypoint x="3730" y="930" /><di:waypoint x="3630" y="930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bceqnl_di" bpmnElement="Flow_0bceqnl"><di:waypoint x="3210" y="475" /><di:waypoint x="3210" y="320" /><di:waypoint x="2870" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1o6e6hm_di" bpmnElement="Flow_1o6e6hm"><di:waypoint x="3300" y="596" /><di:waypoint x="3300" y="320" /><di:waypoint x="2870" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18mvw38_di" bpmnElement="Flow_18mvw38"><di:waypoint x="3325" y="621" /><di:waypoint x="3510" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1obw9r0_di" bpmnElement="Flow_1obw9r0"><di:waypoint x="3350" y="745" /><di:waypoint x="3350" y="320" /><di:waypoint x="2870" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z3i8mk_di" bpmnElement="Flow_0z3i8mk"><di:waypoint x="3375" y="770" /><di:waypoint x="3430" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qo9ie4_di" bpmnElement="Flow_0qo9ie4"><di:waypoint x="3160" y="661" /><di:waypoint x="3160" y="770" /><di:waypoint x="3325" y="770" /><bpmndi:BPMNLabel><dc:Bounds x="3221" y="717" width="79" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09parhf_di" bpmnElement="Flow_09parhf"><di:waypoint x="3235" y="500" /><di:waypoint x="3510" y="500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1exdtg0_di" bpmnElement="Flow_1exdtg0"><di:waypoint x="3210" y="621" /><di:waypoint x="3275" y="621" /><bpmndi:BPMNLabel><dc:Bounds x="3217" y="586" width="66" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0eot04v_di" bpmnElement="Flow_0eot04v"><di:waypoint x="3160" y="581" /><di:waypoint x="3160" y="500" /><di:waypoint x="3185" y="500" /><bpmndi:BPMNLabel><dc:Bounds x="3072" y="516" width="75" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0k4ybrb_di" bpmnElement="Flow_0k4ybrb"><di:waypoint x="3055" y="621" /><di:waypoint x="3110" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rp8h5f_di" bpmnElement="Flow_0rp8h5f"><di:waypoint x="2965" y="621" /><di:waypoint x="3005" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11p1ra0_di" bpmnElement="Flow_11p1ra0"><di:waypoint x="3490" y="1708" /><di:waypoint x="3550" y="1708" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1c63ky0_di" bpmnElement="Flow_1c63ky0"><di:waypoint x="1190" y="1710" /><di:waypoint x="1212" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mzaq75_di" bpmnElement="Flow_1mzaq75"><di:waypoint x="2030" y="1710" /><di:waypoint x="2080" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1j5lo0x_di" bpmnElement="Flow_1j5lo0x"><di:waypoint x="1040" y="1709" /><di:waypoint x="1090" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kqzbv6_di" bpmnElement="Flow_0kqzbv6"><di:waypoint x="1460" y="180" /><di:waypoint x="1530" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rufp1o_di" bpmnElement="Flow_1rufp1o"><di:waypoint x="1320" y="470" /><di:waypoint x="1320" y="440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0r4bvp1_di" bpmnElement="Flow_0r4bvp1"><di:waypoint x="1320" y="360" /><di:waypoint x="1320" y="340" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1n497ul_di" bpmnElement="Flow_1n497ul"><di:waypoint x="2420" y="550" /><di:waypoint x="2420" y="733" /><di:waypoint x="2050" y="733" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1534lyb_di" bpmnElement="Flow_1534lyb"><di:waypoint x="1130" y="205" /><di:waypoint x="1130" y="703" /><di:waypoint x="1630" y="703" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a0o38s_di" bpmnElement="Flow_0a0o38s"><di:waypoint x="1155" y="180" /><di:waypoint x="1210" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w66xyn_di" bpmnElement="Flow_0w66xyn"><di:waypoint x="1310" y="180" /><di:waypoint x="1360" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fwnbb6_di" bpmnElement="Flow_1fwnbb6"><di:waypoint x="1070" y="180" /><di:waypoint x="1105" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1thuqc5_di" bpmnElement="Flow_1thuqc5"><di:waypoint x="930" y="180" /><di:waypoint x="970" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fz36g6_di" bpmnElement="Flow_0fz36g6"><di:waypoint x="1410" y="867" /><di:waypoint x="1460" y="868" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1h83mn0_di" bpmnElement="Flow_1h83mn0"><di:waypoint x="2420" y="220" /><di:waypoint x="2420" y="470" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dwxuuc_di" bpmnElement="Flow_1dwxuuc"><di:waypoint x="2280" y="205" /><di:waypoint x="2280" y="450" /><di:waypoint x="1680" y="450" /><di:waypoint x="1680" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11ns26y_di" bpmnElement="Flow_11ns26y"><di:waypoint x="1920" y="205" /><di:waypoint x="1920" y="450" /><di:waypoint x="1680" y="450" /><di:waypoint x="1680" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13adb2k_di" bpmnElement="Flow_13adb2k"><di:waypoint x="1680" y="205" /><di:waypoint x="1680" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01d0q0i_di" bpmnElement="Flow_01d0q0i"><di:waypoint x="2400" y="320" /><di:waypoint x="2480" y="320" /><di:waypoint x="2480" y="80" /><di:waypoint x="750" y="80" /><di:waypoint x="750" y="140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_058zj34_di" bpmnElement="Flow_058zj34"><di:waypoint x="2305" y="180" /><di:waypoint x="2330" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1atedi3_di" bpmnElement="Flow_1atedi3"><di:waypoint x="1860" y="180" /><di:waypoint x="1895" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11tf5j5_di" bpmnElement="Flow_11tf5j5"><di:waypoint x="1945" y="180" /><di:waypoint x="1990" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11d55sl_di" bpmnElement="Flow_11d55sl"><di:waypoint x="2220" y="180" /><di:waypoint x="2255" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tklip8_di" bpmnElement="Flow_0tklip8"><di:waypoint x="2090" y="180" /><di:waypoint x="2120" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_111ejey_di" bpmnElement="Flow_111ejey"><di:waypoint x="1705" y="180" /><di:waypoint x="1760" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0862dmq_di" bpmnElement="Flow_0862dmq"><di:waypoint x="1630" y="180" /><di:waypoint x="1655" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z7g86a_di" bpmnElement="Flow_0z7g86a"><di:waypoint x="800" y="180" /><di:waypoint x="830" y="180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1eebpin_di" bpmnElement="Flow_1eebpin"><di:waypoint x="2230" y="345" /><di:waypoint x="2230" y="450" /><di:waypoint x="1680" y="450" /><di:waypoint x="1680" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p5lot3_di" bpmnElement="Flow_0p5lot3"><di:waypoint x="2255" y="320" /><di:waypoint x="2300" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qrthfi_di" bpmnElement="Flow_0qrthfi"><di:waypoint x="1870" y="345" /><di:waypoint x="1870" y="450" /><di:waypoint x="1680" y="450" /><di:waypoint x="1680" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1axydxw_di" bpmnElement="Flow_1axydxw"><di:waypoint x="1895" y="320" /><di:waypoint x="1940" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1uw3jfe_di" bpmnElement="Flow_1uw3jfe"><di:waypoint x="1820" y="320" /><di:waypoint x="1845" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19l929z_di" bpmnElement="Flow_19l929z"><di:waypoint x="2170" y="320" /><di:waypoint x="2205" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i0eqah_di" bpmnElement="Flow_0i0eqah"><di:waypoint x="2040" y="320" /><di:waypoint x="2070" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wzivvh_di" bpmnElement="Flow_0wzivvh"><di:waypoint x="1605" y="320" /><di:waypoint x="1720" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0beubdf_di" bpmnElement="Flow_0beubdf"><di:waypoint x="1370" y="300" /><di:waypoint x="1463" y="300" /><di:waypoint x="1463" y="320" /><di:waypoint x="1555" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wpa7mn_di" bpmnElement="Flow_1wpa7mn"><di:waypoint x="1320" y="581" /><di:waypoint x="1320" y="550" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05fy85s_di" bpmnElement="Flow_05fy85s"><di:waypoint x="1485" y="733" /><di:waypoint x="1320" y="733" /><di:waypoint x="1320" y="661" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1f0mnpy_di" bpmnElement="Flow_1f0mnpy"><di:waypoint x="1510" y="830" /><di:waypoint x="1510" y="758" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e1l9xl_di" bpmnElement="Flow_0e1l9xl"><di:waypoint x="1580" y="345" /><di:waypoint x="1580" y="733" /><di:waypoint x="1630" y="733" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13lw7se_di" bpmnElement="Flow_13lw7se"><di:waypoint x="1535" y="733" /><di:waypoint x="1630" y="733" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1s1rait_di" bpmnElement="Flow_1s1rait"><di:waypoint x="3650" y="1708" /><di:waypoint x="3690" y="1708" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b9ydla_di" bpmnElement="Flow_1b9ydla"><di:waypoint x="560" y="1708" /><di:waypoint x="737" y="1708" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v9lpdh_di" bpmnElement="Flow_1v9lpdh"><di:waypoint x="2980" y="780" /><di:waypoint x="2680" y="780" /><di:waypoint x="2680" y="661" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rpn93o_di" bpmnElement="Flow_0rpn93o"><di:waypoint x="3030" y="646" /><di:waypoint x="3030" y="740" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rqr0ck_di" bpmnElement="Flow_0rqr0ck"><di:waypoint x="2940" y="596" /><di:waypoint x="2940" y="320" /><di:waypoint x="2870" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="2875" y="489" width="71" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ydm9jr_di" bpmnElement="SequenceFlow_1ydm9jr"><di:waypoint x="1380" y="1711" /><di:waypoint x="1405" y="1711" /><bpmndi:BPMNLabel><dc:Bounds x="3670.5" y="691.5" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1poybro_di" bpmnElement="Flow_1poybro"><di:waypoint x="3950" y="621" /><di:waypoint x="4030" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rm7xru_di" bpmnElement="Flow_1rm7xru"><di:waypoint x="4080" y="661" /><di:waypoint x="4080" y="1340" /><di:waypoint x="290" y="1340" /><di:waypoint x="290" y="1520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ifn8wb_di" bpmnElement="Flow_1ifn8wb"><di:waypoint x="4080" y="581" /><di:waypoint x="4080" y="230" /><di:waypoint x="2520" y="230" /><di:waypoint x="2520" y="579" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k0inmq_di" bpmnElement="Flow_1k0inmq"><di:waypoint x="2770" y="320" /><di:waypoint x="2647" y="320" /><di:waypoint x="2647" y="581" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rs5724_di" bpmnElement="Flow_0rs5724"><di:waypoint x="2870" y="621" /><di:waypoint x="2915" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fla32m_di" bpmnElement="SequenceFlow_1fla32m"><di:waypoint x="520" y="890" /><di:waypoint x="520" y="1012" /><di:waypoint x="668" y="1012" /><bpmndi:BPMNLabel><dc:Bounds x="151" y="734.5" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bvbo45_di" bpmnElement="SequenceFlow_1bvbo45"><di:waypoint x="1050" y="1012" /><di:waypoint x="1142" y="1012" /><bpmndi:BPMNLabel><dc:Bounds x="436" y="791" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02bhzvg_di" bpmnElement="SequenceFlow_02bhzvg"><di:waypoint x="704" y="1012" /><di:waypoint x="750" y="1012" /><bpmndi:BPMNLabel><dc:Bounds x="206.5" y="791" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bp4a1l_di" bpmnElement="SequenceFlow_1bp4a1l"><di:waypoint x="545" y="865" /><di:waypoint x="590" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="196.5" y="641" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bri3t6_di" bpmnElement="SequenceFlow_1bri3t6"><di:waypoint x="1630" y="870" /><di:waypoint x="1560" y="870" /><bpmndi:BPMNLabel><dc:Bounds x="1281" y="751" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vgsdrd_di" bpmnElement="SequenceFlow_1vgsdrd"><di:waypoint x="1680" y="773" /><di:waypoint x="1680" y="830" /><bpmndi:BPMNLabel><dc:Bounds x="1455" y="611.5" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_15vcndx_di" bpmnElement="SequenceFlow_15vcndx"><di:waypoint x="2730" y="621" /><di:waypoint x="2770" y="621" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fj427t_di" bpmnElement="Flow_1fj427t"><di:waypoint x="1740" y="1708" /><di:waypoint x="1760" y="1708" /><di:waypoint x="1760" y="1710" /><di:waypoint x="1780" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ps9zg9_di" bpmnElement="Flow_0ps9zg9"><di:waypoint x="2645" y="972" /><di:waypoint x="2645" y="816" /><di:waypoint x="2541" y="659" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1je1g49_di" bpmnElement="SequenceFlow_1je1g49"><di:waypoint x="3110" y="1708" /><di:waypoint x="3150" y="1708" /><bpmndi:BPMNLabel><dc:Bounds x="1970" y="49.5" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07gspcz_di" bpmnElement="SequenceFlow_07gspcz"><di:waypoint x="991" y="865" /><di:waypoint x="1028" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="-1552" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xdftum_di" bpmnElement="SequenceFlow_1xdftum"><di:waypoint x="2830" y="1710" /><di:waypoint x="2870" y="1710" /><bpmndi:BPMNLabel><dc:Bounds x="1771" y="-30" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18zjd8i_di" bpmnElement="SequenceFlow_18zjd8i"><di:waypoint x="3790" y="1708" /><di:waypoint x="3842" y="1708" /><bpmndi:BPMNLabel><dc:Bounds x="2163" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0umds0c_di" bpmnElement="SequenceFlow_0umds0c"><di:waypoint x="1880" y="1710" /><di:waypoint x="1930" y="1710" /><bpmndi:BPMNLabel><dc:Bounds x="1240" y="-39" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0dacjip_di" bpmnElement="SequenceFlow_0dacjip"><di:waypoint x="1266" y="865" /><di:waypoint x="1310" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="834" y="641" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0dn8x96_di" bpmnElement="SequenceFlow_0dn8x96"><di:waypoint x="1128" y="865" /><di:waypoint x="1166" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="-1416" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1luope9_di" bpmnElement="SequenceFlow_1luope9"><di:waypoint x="850" y="865" /><di:waypoint x="891" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="-1679" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rgi7mv_di" bpmnElement="SequenceFlow_1rgi7mv"><di:waypoint x="1845" y="733" /><di:waypoint x="1730" y="733" /><bpmndi:BPMNLabel><dc:Bounds x="1320.5" y="530" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ys0yxw_di" bpmnElement="SequenceFlow_0ys0yxw"><di:waypoint x="1870" y="758" /><di:waypoint x="1870" y="862" /><di:waypoint x="1900" y="862" /><bpmndi:BPMNLabel><dc:Bounds x="-819" y="-75.5" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wovcs6_di" bpmnElement="SequenceFlow_0wovcs6"><di:waypoint x="1950" y="733" /><di:waypoint x="1895" y="733" /><bpmndi:BPMNLabel><dc:Bounds x="1199" y="641" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1j4w30g_di" bpmnElement="SequenceFlow_1j4w30g"><di:waypoint x="2279" y="1038" /><di:waypoint x="2279" y="1116" /><bpmndi:BPMNLabel><dc:Bounds x="-451" y="329" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mz9bn7_di" bpmnElement="SequenceFlow_0mz9bn7"><di:waypoint x="2509" y="822" /><di:waypoint x="2509" y="659" /><bpmndi:BPMNLabel><dc:Bounds x="-56" y="99" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0egc8qj_di" bpmnElement="SequenceFlow_0egc8qj"><di:waypoint x="2534" y="1012" /><di:waypoint x="2595" y="1012" /><bpmndi:BPMNLabel><dc:Bounds x="-146" y="249" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_050h9jf_di" bpmnElement="SequenceFlow_050h9jf"><di:waypoint x="2509" y="987" /><di:waypoint x="2509" y="902" /><bpmndi:BPMNLabel><dc:Bounds x="2511" y="939" width="53" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0z98o3z_di" bpmnElement="SequenceFlow_0z98o3z"><di:waypoint x="2329" y="1178" /><di:waypoint x="2509" y="1178" /><di:waypoint x="2509" y="1037" /><bpmndi:BPMNLabel><dc:Bounds x="-326" y="415" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0af0dj8_di" bpmnElement="SequenceFlow_0af0dj8"><di:waypoint x="2279" y="887" /><di:waypoint x="2279" y="958" /><bpmndi:BPMNLabel><dc:Bounds x="-333" y="194.5" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13piphd_di" bpmnElement="SequenceFlow_13piphd"><di:waypoint x="2304" y="862" /><di:waypoint x="2400" y="862" /><di:waypoint x="2491" y="659" /><bpmndi:BPMNLabel><dc:Bounds x="-333" y="-20" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ozk3v3_di" bpmnElement="SequenceFlow_0ozk3v3"><di:waypoint x="2160" y="862" /><di:waypoint x="2254" y="862" /><bpmndi:BPMNLabel><dc:Bounds x="-394.5" y="99" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1o0lyem_di" bpmnElement="SequenceFlow_1o0lyem"><di:waypoint x="340" y="1708" /><di:waypoint x="460" y="1708" /><bpmndi:BPMNLabel><dc:Bounds x="489" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1evi218_di" bpmnElement="SequenceFlow_1evi218"><di:waypoint x="2000" y="862" /><di:waypoint x="2060" y="862" /><bpmndi:BPMNLabel><dc:Bounds x="-451" y="34" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1t3npv2_di" bpmnElement="SequenceFlow_1t3npv2"><di:waypoint x="2559" y="621" /><di:waypoint x="2630" y="621" /><bpmndi:BPMNLabel><dc:Bounds x="-133" y="-144" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0o6n7pv_di" bpmnElement="SequenceFlow_0o6n7pv"><di:waypoint x="690" y="865" /><di:waypoint x="750" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="-1849" y="95" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1o70m7e_di" bpmnElement="SequenceFlow_1o70m7e"><di:waypoint x="188" y="865" /><di:waypoint x="495" y="865" /><bpmndi:BPMNLabel><dc:Bounds x="14.5" y="687" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10qfoig_di" bpmnElement="SequenceFlow_10qfoig"><di:waypoint x="990" y="1818" /><di:waypoint x="990" y="1749" /><bpmndi:BPMNLabel><dc:Bounds x="908" y="185" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hqu97c_di" bpmnElement="SequenceFlow_0hqu97c"><di:waypoint x="812" y="1858" /><di:waypoint x="940" y="1858" /><bpmndi:BPMNLabel><dc:Bounds x="828.5" y="245" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04uhyo8_di" bpmnElement="SequenceFlow_04uhyo8"><di:waypoint x="990" y="1619" /><di:waypoint x="990" y="1669" /><bpmndi:BPMNLabel><dc:Bounds x="908" y="45.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1sjjcja_di" bpmnElement="SequenceFlow_1sjjcja"><di:waypoint x="812" y="1579" /><di:waypoint x="940" y="1579" /><bpmndi:BPMNLabel><dc:Bounds x="828.5" y="-34" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1la64qk_di" bpmnElement="SequenceFlow_1la64qk"><di:waypoint x="762" y="1683" /><di:waypoint x="762" y="1619" /><bpmndi:BPMNLabel><dc:Bounds x="768" y="1648" width="20" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1giodpb_di" bpmnElement="SequenceFlow_1giodpb"><di:waypoint x="762" y="1733" /><di:waypoint x="762" y="1818" /><bpmndi:BPMNLabel><dc:Bounds x="768" y="1773" width="19" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0y0ctio_di" bpmnElement="SequenceFlow_0y0ctio"><di:waypoint x="2180" y="1710" /><di:waypoint x="2220" y="1710" /><bpmndi:BPMNLabel><dc:Bounds x="1469.5" y="95" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0w5d4ys_di" bpmnElement="SequenceFlow_0w5d4ys"><di:waypoint x="2470" y="1710" /><di:waypoint x="2500" y="1710" /><bpmndi:BPMNLabel><dc:Bounds x="1549" y="45.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="847" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="-1112" y="138" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zxayik_di" bpmnElement="Task_02btl64"><dc:Bounds x="590" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1886nk7_di" bpmnElement="ServiceTask_1886nk7"><dc:Bounds x="750" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0m65vby_di" bpmnElement="UserTask_0m65vby" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="1780" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1asr8lq_di" bpmnElement="ServiceTask_1asr8lq"><dc:Bounds x="3550" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19o2ifn_di" bpmnElement="ServiceTask_19o2ifn"><dc:Bounds x="1930" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0c1c7mj_di" bpmnElement="ServiceTask_0c1c7mj"><dc:Bounds x="2370" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1aejeok_di" bpmnElement="ServiceTask_1aejeok"><dc:Bounds x="2730" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_07x5uiq_di" bpmnElement="ServiceTask_07x5uiq"><dc:Bounds x="3010" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zohvkd_di" bpmnElement="ServiceTask_0zohvkd"><dc:Bounds x="2080" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ny9ep8_di" bpmnElement="ServiceTask_1ny9ep8"><dc:Bounds x="891" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_129j2s1_di" bpmnElement="Gateway_05z0ebp" isMarkerVisible="true"><dc:Bounds x="737" y="1683" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00quaa7_di" bpmnElement="ServiceTask_00quaa7"><dc:Bounds x="712" y="1818" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1o2c9b4_di" bpmnElement="ServiceTask_1o2c9b4"><dc:Bounds x="940" y="1818" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_16zuevg_di" bpmnElement="ServiceTask_16zuevg"><dc:Bounds x="712" y="1539" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0uvhifv_di" bpmnElement="ServiceTask_0uvhifv"><dc:Bounds x="940" y="1539" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zjry5k_di" bpmnElement="ServiceTask_0zjry5k"><dc:Bounds x="1310" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0xxbcaj_di" bpmnElement="ServiceTask_0xxbcaj"><dc:Bounds x="2060" y="822" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_192xen6_di" bpmnElement="UserTask_192xen6" bioc:stroke="#1E88E5" bioc:fill="#BBDEFB"><dc:Bounds x="2630" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11nskeu_di" bpmnElement="ServiceTask_11nskeu"><dc:Bounds x="2459" y="579" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1nt78y4_di" bpmnElement="ServiceTask_1nt78y4"><dc:Bounds x="1900" y="822" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d9ryje_di" bpmnElement="ServiceTask_0d9ryje" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="940" y="1669" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lzas2b_di" bpmnElement="ServiceTask_0lzas2b"><dc:Bounds x="240" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_15d2c3m_di" bpmnElement="ExclusiveGateway_15d2c3m" isMarkerVisible="true"><dc:Bounds x="2254" y="837" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="-313" y="114" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0xmlzyz_di" bpmnElement="ServiceTask_0xmlzyz"><dc:Bounds x="2229" y="1116" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_12frtje_di" bpmnElement="ExclusiveGateway_12frtje" isMarkerVisible="true"><dc:Bounds x="2484" y="987" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="-316" y="264" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1wl47xw_di" bpmnElement="ServiceTask_1wl47xw"><dc:Bounds x="2459" y="822" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jx9kk2_di" bpmnElement="ServiceTask_1jx9kk2"><dc:Bounds x="2595" y="972" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0gpk18j_di" bpmnElement="ServiceTask_0gpk18j"><dc:Bounds x="2229" y="958" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0inge26_di" bpmnElement="ServiceTask_0inge26"><dc:Bounds x="1950" y="693" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0o6tx8a_di" bpmnElement="ExclusiveGateway_0o6tx8a" isMarkerVisible="true"><dc:Bounds x="1845" y="708" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="-869" y="3" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_06j0ukg_di" bpmnElement="ServiceTask_06j0ukg"><dc:Bounds x="2770" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ho9pan_di" bpmnElement="ServiceTask_0ho9pan"><dc:Bounds x="1028" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0sgzpzx_di" bpmnElement="ServiceTask_0sgzpzx"><dc:Bounds x="1166" y="825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0hxt3bs_di" bpmnElement="ServiceTask_0hxt3bs"><dc:Bounds x="3690" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_040kcvn_di" bpmnElement="ServiceTask_040kcvn" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1280" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0b5veyf_di" bpmnElement="Activity_0b5veyf"><dc:Bounds x="1640" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08aaoic_di" bpmnElement="ServiceTask_08aaoic"><dc:Bounds x="1630" y="693" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1e9vacu_di" bpmnElement="UserTask_1e9vacu" bioc:stroke="#1E88E5" bioc:fill="#BBDEFB"><dc:Bounds x="1630" y="830" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_01cnwk9_di" bpmnElement="ExclusiveGateway_1bq722f"><dc:Bounds x="495" y="840" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="135.609" y="615" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_1kx22nr_di" bpmnElement="IntermediateCatchEvent_1kx22nr"><dc:Bounds x="668" y="994" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="91" y="830" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1y7k950_di" bpmnElement="ServiceTask_1y7k950"><dc:Bounds x="950" y="972" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1iktr45_di" bpmnElement="EndEvent_1iktr45"><dc:Bounds x="1142" y="994" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="531" y="834" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1y8nbnq_di" bpmnElement="EndEvent_0djl7a3"><dc:Bounds x="3842" y="1690" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14zluc6_di" bpmnElement="Activity_14zluc6"><dc:Bounds x="2770" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qgfbel_di" bpmnElement="Activity_0qgfbel" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4030" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0hp7txj_di" bpmnElement="Activity_0hp7txj"><dc:Bounds x="3850" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_012f014_di" bpmnElement="Gateway_17p7vy2" isMarkerVisible="true"><dc:Bounds x="2915" y="596" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1db00vx_di" bpmnElement="Gateway_1lrjh87" isMarkerVisible="true"><dc:Bounds x="3005" y="596" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bajjew_di" bpmnElement="Activity_1bajjew"><dc:Bounds x="2980" y="740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_177k1xd_di" bpmnElement="Activity_177k1xd"><dc:Bounds x="460" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1tqj5dp_di" bpmnElement="Gateway_1tqj5dp" isMarkerVisible="true"><dc:Bounds x="1485" y="708" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06tdb0m_di" bpmnElement="Activity_06tdb0m"><dc:Bounds x="1270" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0025zhk_di" bpmnElement="Activity_0025zhk"><dc:Bounds x="1270" y="260" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0akixsr_di" bpmnElement="Gateway_0akixsr" isMarkerVisible="true"><dc:Bounds x="1555" y="295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_145cxew_di" bpmnElement="Activity_145cxew"><dc:Bounds x="2070" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17ot1o6_di" bpmnElement="Activity_17ot1o6"><dc:Bounds x="1940" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1npsm3t_di" bpmnElement="Activity_1npsm3t"><dc:Bounds x="1720" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qj91dk_di" bpmnElement="Activity_0qj91dk"><dc:Bounds x="2300" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wboa97_di" bpmnElement="Activity_0wboa97"><dc:Bounds x="1460" y="830" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_07zg12x_di" bpmnElement="Gateway_07zg12x" isMarkerVisible="true"><dc:Bounds x="1845" y="295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_07zlyhr_di" bpmnElement="Gateway_07zlyhr" isMarkerVisible="true"><dc:Bounds x="2205" y="295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1c9mpv1_di" bpmnElement="Activity_1c9mpv1"><dc:Bounds x="700" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j6dzvg_di" bpmnElement="Activity_0j6dzvg"><dc:Bounds x="1530" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ky0o6d_di" bpmnElement="Gateway_0ky0o6d" isMarkerVisible="true"><dc:Bounds x="1655" y="155" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vxokx6_di" bpmnElement="Activity_0vxokx6"><dc:Bounds x="2120" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_057ysxr_di" bpmnElement="Activity_057ysxr"><dc:Bounds x="1990" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1edwbbr_di" bpmnElement="Activity_1edwbbr"><dc:Bounds x="1760" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mqzsdt_di" bpmnElement="Activity_0mqzsdt"><dc:Bounds x="2330" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1mez76a_di" bpmnElement="Gateway_1mez76a" isMarkerVisible="true"><dc:Bounds x="1895" y="155" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1urrdke_di" bpmnElement="Gateway_1urrdke" isMarkerVisible="true"><dc:Bounds x="2255" y="155" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qep3om_di" bpmnElement="Activity_1qep3om"><dc:Bounds x="970" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1c4v8tn_di" bpmnElement="Activity_1c4v8tn"><dc:Bounds x="830" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dii91l_di" bpmnElement="Activity_1dii91l"><dc:Bounds x="1210" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0c69f6q_di" bpmnElement="Gateway_0c69f6q" isMarkerVisible="true"><dc:Bounds x="1105" y="155" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bhd7l8_di" bpmnElement="Activity_0bhd7l8"><dc:Bounds x="2370" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_135km0w_di" bpmnElement="Activity_135km0w"><dc:Bounds x="1270" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yzuwyh_di" bpmnElement="Activity_1yzuwyh"><dc:Bounds x="1270" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_127ewe0_di" bpmnElement="Activity_127ewe0"><dc:Bounds x="1360" y="140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0296igi_di" bpmnElement="Activity_0296igi" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="1090" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10scmgw_di" bpmnElement="Activity_10scmgw" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="1405" y="1671" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_07c8ywl_di" bpmnElement="Activity_07c8ywl" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2500" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1akkrkq_di" bpmnElement="Activity_1akkrkq" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3150" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0q1hkeb_di" bpmnElement="Activity_0q1hkeb" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3390" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_08bc98i_di" bpmnElement="Event_08bc98i"><dc:Bounds x="1212" y="1692" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1kfi13w_di" bpmnElement="Event_1kfi13w"><dc:Bounds x="1555" y="1690" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1r1szal_di" bpmnElement="Event_1r1szal"><dc:Bounds x="2642" y="1692" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0mcxsru_di" bpmnElement="Event_0mcxsru"><dc:Bounds x="3302" y="1688" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1abher1_di" bpmnElement="Activity_1abher1" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="3110" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_041mu36_di" bpmnElement="Activity_041mu36"><dc:Bounds x="3510" y="460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1uqj166_di" bpmnElement="Activity_1uqj166"><dc:Bounds x="3510" y="581" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00i2epz_di" bpmnElement="Activity_00i2epz"><dc:Bounds x="3430" y="730" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_151z9r9_di" bpmnElement="Gateway_151z9r9" isMarkerVisible="true"><dc:Bounds x="3185" y="475" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ftt3vj_di" bpmnElement="Gateway_0ftt3vj" isMarkerVisible="true"><dc:Bounds x="3325" y="745" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_158o7an_di" bpmnElement="Gateway_158o7an" isMarkerVisible="true"><dc:Bounds x="3275" y="596" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_17yu0t3_di" bpmnElement="Gateway_17yu0t3" isMarkerVisible="true"><dc:Bounds x="3705" y="596" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1anybj7_di" bpmnElement="Activity_1anybj7"><dc:Bounds x="3530" y="890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tej5yi_di" bpmnElement="Activity_0tej5yi"><dc:Bounds x="240" y="1520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nvboro_di" bpmnElement="Activity_1nvboro"><dc:Bounds x="2220" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15md3ei_di" bpmnElement="Activity_15md3ei"><dc:Bounds x="2870" y="1668" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qu3b64_di" bpmnElement="Activity_1qu3b64"><dc:Bounds x="3610" y="730" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1on4nq0_di" bpmnElement="Activity_161u4zr"><dc:Bounds x="750" y="972" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>