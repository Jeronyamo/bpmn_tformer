<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_FinancialGoalDefinitionQuestionnaire_49178d6f-9b0a-46db-a333-a8946d96f257" name="Анкетирование определения финансовых целей" isExecutable="true"><bpmn:documentation /><bpmn:serviceTask id="Activity_11sak0v" name="Статус: Заполнение анкеты"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение+анкеты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zd8ik7</bpmn:incoming><bpmn:outgoing>Flow_168p1tq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1ad3l6x" name="Сохраняем все данные в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes?incrementVersion=false&amp;esWaitUntil=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">var result_json = JSON.parse(result);
result_json.objectId = instanceId;
result_json.AnketaDateTime = AnketaDateTime;
result_json.QuestionnairesName = QuestionnairesName;
result_json.ProcessStep = "1";
result_json.ShortName = "Определение финансовых целей";
JSON.stringify(result_json)</camunda:script></camunda:inputParameter><camunda:outputParameter name="res_json"><camunda:script scriptFormat="javascript">var result_json = JSON.parse(result);
result_json.objectId = instanceId;
result_json.AnketaDateTime = AnketaDateTime;
result_json.QuestionnairesName = QuestionnairesName;
result_json.NextProcessButtons = ["FINISH"];
result_json.ProcessStep = "1";
result_json.ShortName = "Определение финансовых целей";
JSON.stringify(result_json)</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0iahp8e</bpmn:incoming><bpmn:incoming>Flow_13z98nn</bpmn:incoming><bpmn:incoming>Flow_1bd43bk</bpmn:incoming><bpmn:incoming>Flow_16xpftb</bpmn:incoming><bpmn:incoming>Flow_08uml12</bpmn:incoming><bpmn:incoming>Flow_13mytuy</bpmn:incoming><bpmn:outgoing>Flow_1qit2b9</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1homk9h" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="AnketaDateTime"><bpmn:incoming>Flow_1forsja</bpmn:incoming><bpmn:outgoing>Flow_05von8l</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1oijv2b" name="instanceId" scriptFormat="javascript" camunda:resultVariable="objectId"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_05von8l</bpmn:incoming><bpmn:outgoing>Flow_1bda7pn</bpmn:outgoing><bpmn:script>instanceId</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1eke9hj" name="Признак ручного заполнения" scriptFormat="javascript" camunda:resultVariable="IsHandle"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_168p1tq</bpmn:incoming><bpmn:incoming>Flow_124iqnj</bpmn:incoming><bpmn:outgoing>Flow_0tin5ke</bpmn:outgoing><bpmn:script>true</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1bda7pn" sourceRef="Activity_1oijv2b" targetRef="Gateway_1v8sgjn" /><bpmn:sequenceFlow id="Flow_168p1tq" sourceRef="Activity_11sak0v" targetRef="Activity_1eke9hj" /><bpmn:sequenceFlow id="Flow_05von8l" sourceRef="Activity_1homk9h" targetRef="Activity_1oijv2b" /><bpmn:sequenceFlow id="Flow_0tin5ke" sourceRef="Activity_1eke9hj" targetRef="Activity_1u5g3mr" /><bpmn:exclusiveGateway id="Gateway_1ckxki2" default="Flow_0mdksxt"><bpmn:incoming>Flow_0rw037r</bpmn:incoming><bpmn:outgoing>Flow_1sb9gat</bpmn:outgoing><bpmn:outgoing>Flow_0mdksxt</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1t6kbbh" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=ProcessStep&amp;systemName=ResultDateTime&amp;systemName=RiskProfileNumber&amp;systemName=ExpectedYield&amp;systemName=RiskEstimated&amp;systemName=AllowRisk&amp;systemName=FIN_GOAL_INVESTMENT_PERIOD&amp;systemName=MP_RP_compliance</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ProcessStep"><camunda:script scriptFormat="javascript">JSON.parse(response).ProcessStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="ResultDateTime"><camunda:script scriptFormat="javascript">JSON.parse(response).ResultDateTime</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskProfileValue"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskProfileNumber</camunda:script></camunda:outputParameter><camunda:outputParameter name="ExpectedYield"><camunda:script scriptFormat="javascript">JSON.parse(response).ExpectedYield</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskEstimated"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskEstimated</camunda:script></camunda:outputParameter><camunda:outputParameter name="AllowRisk"><camunda:script scriptFormat="javascript">JSON.parse(response).AllowRisk</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_INVESTMENT_PERIOD"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_INVESTMENT_PERIOD</camunda:script></camunda:outputParameter><camunda:outputParameter name="Compare"><camunda:script scriptFormat="javascript">JSON.parse(response).MP_RP_compliance</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0mdksxt</bpmn:incoming><bpmn:outgoing>Flow_147f80q</bpmn:outgoing></bpmn:serviceTask><bpmn:boundaryEvent id="Event_1i8sifz" attachedToRef="Activity_08tzw41"><bpmn:outgoing>Flow_1ua4k4f</bpmn:outgoing><bpmn:errorEventDefinition id="ErrorEventDefinition_0g9obvn" /></bpmn:boundaryEvent><bpmn:sequenceFlow id="Flow_1sb9gat" name="Ручной шаг" sourceRef="Gateway_1ckxki2" targetRef="Activity_08tzw41"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsHandle == true || IsHandle == 'true'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0mdksxt" name="из Мобильного Приложения" sourceRef="Gateway_1ckxki2" targetRef="Activity_1t6kbbh" /><bpmn:serviceTask id="Activity_1ky81ah" name="Статус: Определение результата"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Определение+результата</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1byc2j5</bpmn:incoming><bpmn:outgoing>Flow_0jn3guo</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1pnv0y0" default="Flow_0vx9xnt"><bpmn:incoming>Flow_1mracbs</bpmn:incoming><bpmn:outgoing>Flow_1oe5fr8</bpmn:outgoing><bpmn:outgoing>Flow_0za741n</bpmn:outgoing><bpmn:outgoing>Flow_0vx9xnt</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_147f80q" sourceRef="Activity_1t6kbbh" targetRef="Gateway_0go2wez" /><bpmn:sequenceFlow id="Flow_1oe5fr8" name="Шаг 2 (выбор клиента)" sourceRef="Gateway_1pnv0y0" targetRef="Activity_1jn47m4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == "2"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0jn3guo" sourceRef="Activity_1ky81ah" targetRef="Activity_0mztecc" /><bpmn:serviceTask id="Activity_0mztecc" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=FIN_GOAL&amp;systemName=FIN_GOAL_PROPERTY_OBLIGATION&amp;systemName=FIN_GOAL_SALE_ASSETS&amp;systemName=FIN_GOAL_CURRENCY&amp;systemName=FIN_GOAL_INITIAL_INVESTMENT_SUM&amp;systemName=FIN_GOAL_REGULAR_REPLENISHMENT&amp;systemName=FIN_GOAL_REGULAR_REPLENISHMENT_SUM&amp;systemName=FIN_GOAL_INVESTMENT_PERIOD&amp;systemName=FIN_GOAL_RISK_CATEGORY&amp;systemName=FIN_GOAL_CALCULATION_RESULT&amp;systemName=three_char_code</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="FIN_GOAL"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_PROPERTY_OBLIGATION"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_PROPERTY_OBLIGATION</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_SALE_ASSETS"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_SALE_ASSETS</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_CURRENCY"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_CURRENCY</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_INITIAL_INVESTMENT_SUM"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_INITIAL_INVESTMENT_SUM</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_REGULAR_REPLENISHMENT"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_REGULAR_REPLENISHMENT</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_REGULAR_REPLENISHMENT_SUM"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_REGULAR_REPLENISHMENT_SUM</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_INVESTMENT_PERIOD"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_INVESTMENT_PERIOD</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_RISK_CATEGORY"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_RISK_CATEGORY</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_CALCULATION_RESULT"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_CALCULATION_RESULT</camunda:script></camunda:outputParameter><camunda:outputParameter name="three_char_code"><camunda:script scriptFormat="javascript">JSON.parse(response).three_char_code</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jn3guo</bpmn:incoming><bpmn:outgoing>Flow_0ydcdei</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ydcdei" sourceRef="Activity_0mztecc" targetRef="Gateway_0kg6ytq" /><bpmn:exclusiveGateway id="Gateway_1horrh6" default="Flow_1tdqjfi"><bpmn:incoming>Flow_1kkiuth</bpmn:incoming><bpmn:outgoing>Flow_1tdqjfi</bpmn:outgoing><bpmn:outgoing>Flow_0rw037r</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0dj44h2" name="Статус: Незавершенная анкета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tdqjfi</bpmn:incoming><bpmn:outgoing>Flow_1qrnbg2</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_12fmjd5" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qrnbg2</bpmn:incoming><bpmn:outgoing>Flow_0e1nr9n</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1tdqjfi" sourceRef="Gateway_1horrh6" targetRef="Activity_0dj44h2" /><bpmn:sequenceFlow id="Flow_1qrnbg2" sourceRef="Activity_0dj44h2" targetRef="Activity_12fmjd5" /><bpmn:sequenceFlow id="Flow_0e1nr9n" sourceRef="Activity_12fmjd5" targetRef="Event_06czsl7" /><bpmn:sequenceFlow id="Flow_0rw037r" name="Нет таймаута" sourceRef="Gateway_1horrh6" targetRef="Gateway_1ckxki2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == false || timeout == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_13my4cc" name="Ищем риск-профиль"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "613ee7ec687006695cd4a171", 
"attributes.RiskProfileNumber": ${RiskProfileValue}
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="RiskProfile_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyRiskProfile"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xbe3uv</bpmn:incoming><bpmn:outgoing>Flow_07jv9kh</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_11tsn3c" default="Flow_04rxqkd"><bpmn:incoming>Flow_07jv9kh</bpmn:incoming><bpmn:outgoing>Flow_04rxqkd</bpmn:outgoing><bpmn:outgoing>Flow_0yxujqj</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0vo0a7a" name="Получаем  параметры риск-профиля"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${RiskProfile_refid}/getAttributes?systemName=pr_profit_risk&amp;systemName=RiskProfileName</camunda:inputParameter><camunda:outputParameter name="pr_profit_risk"><camunda:script scriptFormat="javascript">S(response).prop("pr_profit_risk")</camunda:script></camunda:outputParameter><camunda:outputParameter name="ccyQty"><camunda:script scriptFormat="javascript">S(response).prop("pr_profit_risk").elements().size()</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskProfileName"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskProfileName</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04rxqkd</bpmn:incoming><bpmn:outgoing>Flow_0e8d39g</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_07jv9kh" sourceRef="Activity_13my4cc" targetRef="Gateway_11tsn3c" /><bpmn:sequenceFlow id="Flow_04rxqkd" sourceRef="Gateway_11tsn3c" targetRef="Activity_0vo0a7a" /><bpmn:sequenceFlow id="Flow_0e8d39g" sourceRef="Activity_0vo0a7a" targetRef="Gateway_09jr4cy" /><bpmn:serviceTask id="Activity_0w1ipm1" name="Установка статуса &#34;Ошибка: не найден риск-профиль&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найден+риск+профиль</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0yxujqj</bpmn:incoming><bpmn:incoming>Flow_1m6xeu8</bpmn:incoming><bpmn:outgoing>Flow_0mishme</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_06qcc5h" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0mishme</bpmn:incoming><bpmn:outgoing>Flow_1suu02y</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1xyil6f"><bpmn:incoming>Flow_1suu02y</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0mishme" sourceRef="Activity_0w1ipm1" targetRef="Activity_06qcc5h" /><bpmn:sequenceFlow id="Flow_0yxujqj" sourceRef="Gateway_11tsn3c" targetRef="Activity_0w1ipm1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyRiskProfile == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0kg6ytq" default="Flow_02ot4ih"><bpmn:incoming>Flow_0ydcdei</bpmn:incoming><bpmn:outgoing>Flow_02ot4ih</bpmn:outgoing><bpmn:outgoing>Flow_047fj35</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_02ot4ih" sourceRef="Gateway_0kg6ytq" targetRef="Activity_0bps4ga" /><bpmn:serviceTask id="Activity_123iofn" name="Установка статуса &#34;Ошибка: не найдены параметры&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найдены+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_047fj35</bpmn:incoming><bpmn:incoming>Flow_0vx9xnt</bpmn:incoming><bpmn:incoming>Flow_19nfvck</bpmn:incoming><bpmn:outgoing>Flow_124iqnj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_047fj35" sourceRef="Gateway_0kg6ytq" targetRef="Activity_123iofn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${FIN_GOAL == null || FIN_GOAL_PROPERTY_OBLIGATION == null || FIN_GOAL_SALE_ASSETS == null || FIN_GOAL_CURRENCY == null || FIN_GOAL_INITIAL_INVESTMENT_SUM == null || FIN_GOAL_REGULAR_REPLENISHMENT== null || FIN_GOAL_REGULAR_REPLENISHMENT_SUM == null || FIN_GOAL_INVESTMENT_PERIOD == null || FIN_GOAL_RISK_CATEGORY == null || FIN_GOAL_CALCULATION_RESULT == null || three_char_code == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0bps4ga" name="Ищем валюту"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "instrument", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "61bae8891d28f2090eb77d32", 
"attributes.three_char_code": "${three_char_code}"
},
"projection": { 		"primaryId": 1,  "attributes.three_char_code": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Ccy_primaryId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].primaryId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyCcy"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="three_char_code"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.three_char_code
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02ot4ih</bpmn:incoming><bpmn:outgoing>Flow_01zaxib</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01zaxib" sourceRef="Activity_0bps4ga" targetRef="Gateway_0wgppri" /><bpmn:exclusiveGateway id="Gateway_0wgppri" default="Flow_0kmyjxs"><bpmn:incoming>Flow_01zaxib</bpmn:incoming><bpmn:outgoing>Flow_0kmyjxs</bpmn:outgoing><bpmn:outgoing>Flow_0pr6mi8</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0kmyjxs" sourceRef="Gateway_0wgppri" targetRef="Activity_1fhpu24" /><bpmn:serviceTask id="Activity_0qmkimh" name="Установка статуса &#34;Ошибка: не найдена валюта&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найдена+валюта</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0pr6mi8</bpmn:incoming><bpmn:outgoing>Flow_0cpsojz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0pr6mi8" sourceRef="Gateway_0wgppri" targetRef="Activity_0qmkimh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyCcy == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1ahnm49" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cpsojz</bpmn:incoming><bpmn:outgoing>Flow_0ss9o42</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0cpsojz" sourceRef="Activity_0qmkimh" targetRef="Activity_1ahnm49" /><bpmn:endEvent id="Event_1jvwlj8"><bpmn:incoming>Flow_0ss9o42</bpmn:incoming></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_09jr4cy" default="Flow_0x9j986"><bpmn:incoming>Flow_0e8d39g</bpmn:incoming><bpmn:outgoing>Flow_0x9j986</bpmn:outgoing><bpmn:outgoing>Flow_1m6xeu8</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0x9j986" sourceRef="Gateway_09jr4cy" targetRef="Activity_17bjaj8" /><bpmn:sequenceFlow id="Flow_1m6xeu8" sourceRef="Gateway_09jr4cy" targetRef="Activity_0w1ipm1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${pr_profit_risk == null || ccyQty == 0 || ccyQty == null || RiskProfileName == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_17bjaj8" name="Номер элемента из массива доходностей и рисков j=0" scriptFormat="javascript"><bpmn:incoming>Flow_0x9j986</bpmn:incoming><bpmn:outgoing>Flow_1al2ujp</bpmn:outgoing><bpmn:script>execution.setVariable('j', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1dzjdd5" default="Flow_02flpdz"><bpmn:incoming>Flow_051hbhi</bpmn:incoming><bpmn:outgoing>Flow_0mimwbo</bpmn:outgoing><bpmn:outgoing>Flow_02flpdz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1al2ujp" sourceRef="Activity_17bjaj8" targetRef="Activity_00ycflx" /><bpmn:sequenceFlow id="Flow_0mimwbo" sourceRef="Gateway_1dzjdd5" targetRef="Gateway_0q4gp83"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Ccy_primaryId_j == Ccy_primaryId}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_0vee5md" name="увеличиваем значение j" scriptFormat="javascript" camunda:resultVariable="j"><bpmn:incoming>Flow_02flpdz</bpmn:incoming><bpmn:outgoing>Flow_1gnqcbx</bpmn:outgoing><bpmn:script>Math.round(+j+1)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_02flpdz" sourceRef="Gateway_1dzjdd5" targetRef="Activity_0vee5md" /><bpmn:exclusiveGateway id="Gateway_0ilhn49" default="Flow_0m7huxt"><bpmn:incoming>Flow_1gnqcbx</bpmn:incoming><bpmn:outgoing>Flow_1honijm</bpmn:outgoing><bpmn:outgoing>Flow_0m7huxt</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1gnqcbx" sourceRef="Activity_0vee5md" targetRef="Gateway_0ilhn49" /><bpmn:sequenceFlow id="Flow_1honijm" sourceRef="Gateway_0ilhn49" targetRef="Activity_00ycflx"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${j &lt; ccyQty}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0m1v3p9" name="Установка статуса &#34;Ошибка: не найдена доходность для валюты&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найдена+доходность+для+валюты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0m7huxt</bpmn:incoming><bpmn:incoming>Flow_1u9ufq0</bpmn:incoming><bpmn:outgoing>Flow_195d8ok</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0m7huxt" sourceRef="Gateway_0ilhn49" targetRef="Activity_0m1v3p9" /><bpmn:serviceTask id="Activity_087s54j" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_195d8ok</bpmn:incoming><bpmn:outgoing>Flow_0mmpzpo</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_195d8ok" sourceRef="Activity_0m1v3p9" targetRef="Activity_087s54j" /><bpmn:endEvent id="Event_1oiupiu"><bpmn:incoming>Flow_0mmpzpo</bpmn:incoming></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_0q4gp83" default="Flow_1mlqv0q"><bpmn:incoming>Flow_0mimwbo</bpmn:incoming><bpmn:outgoing>Flow_1mlqv0q</bpmn:outgoing><bpmn:outgoing>Flow_1u9ufq0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1mlqv0q" sourceRef="Gateway_0q4gp83" targetRef="Activity_0tu4kqm" /><bpmn:sequenceFlow id="Flow_1u9ufq0" sourceRef="Gateway_0q4gp83" targetRef="Activity_0m1v3p9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ExpectedYield == null || RiskEstimated == null || AllowRisk == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_1edqgy8" default="Flow_0plb4iq"><bpmn:incoming>Flow_0twe2ov</bpmn:incoming><bpmn:outgoing>Flow_0v3bx4e</bpmn:outgoing><bpmn:outgoing>Flow_0plb4iq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0v3bx4e" name="Модельный портфель не подключен" sourceRef="Gateway_1edqgy8" targetRef="Activity_1vnxlrf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${mp_mp == false || ModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0plb4iq" sourceRef="Gateway_1edqgy8" targetRef="Activity_1irmq25" /><bpmn:exclusiveGateway id="Gateway_11l4stt" default="Flow_0hsd410"><bpmn:incoming>Flow_0yutt8a</bpmn:incoming><bpmn:outgoing>Flow_1wm36dw</bpmn:outgoing><bpmn:outgoing>Flow_0hsd410</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1cdhsnl" name="Установка статуса &#34;Модельный портфель не соответствует финансовым целям&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Модельный+портфель+не+соответствует+финансовым+целям</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wm36dw</bpmn:incoming><bpmn:outgoing>Flow_1qu4mqy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1wm36dw" sourceRef="Gateway_11l4stt" targetRef="Activity_1cdhsnl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RiskProfileValue &lt; mp_riskMetric || RiskProfileValue &gt; mp_riskMetric}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1qu4mqy" sourceRef="Activity_1cdhsnl" targetRef="Activity_0dz7kt2" /><bpmn:sequenceFlow id="Flow_0hsd410" sourceRef="Gateway_11l4stt" targetRef="Activity_1vnxlrf" /><bpmn:serviceTask id="Activity_06p9dra" name="апдейтим портфель, статус Ожидает согласования" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{  
        "TemplateType": "BrokeragePortfolio",
        "mp_source": "Авто",
        "brokerageAccountID": "${brokerageAccountID}",
        "Goal_RP_compliance": true,
        "ClientPortfolioStatus": "Ожидает согласования"
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0x3l9lc</bpmn:incoming><bpmn:outgoing>Flow_03g9w3c</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_119dpzh" name="Установка статуса анкеты &#34;Ожидает согласования&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидает+согласования</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1bl07ky</bpmn:incoming><bpmn:incoming>Flow_03g9w3c</bpmn:incoming><bpmn:incoming>Flow_0za741n</bpmn:incoming><bpmn:outgoing>Flow_06jr3zl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_03g9w3c" sourceRef="Activity_06p9dra" targetRef="Activity_119dpzh" /><bpmn:sequenceFlow id="Flow_06jr3zl" sourceRef="Activity_119dpzh" targetRef="Activity_0u2w8h7" /><bpmn:serviceTask id="Activity_08tzw41" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=Questions</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Questions"><camunda:script scriptFormat="javascript">S(response).prop("Questions")</camunda:script></camunda:outputParameter><camunda:outputParameter name="nQty"><camunda:script scriptFormat="javascript">S(response).prop("Questions").elements().size()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1sb9gat</bpmn:incoming><bpmn:outgoing>Flow_12zf9ig</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_12zf9ig" sourceRef="Activity_08tzw41" targetRef="Activity_1bb9jou" /><bpmn:subProcess id="Activity_1u5g3mr"><bpmn:incoming>Flow_0tin5ke</bpmn:incoming><bpmn:incoming>Flow_0ovwd9l</bpmn:incoming><bpmn:incoming>Flow_03w54iy</bpmn:incoming><bpmn:incoming>Flow_1ua4k4f</bpmn:incoming><bpmn:outgoing>Flow_1kkiuth</bpmn:outgoing><bpmn:startEvent id="Event_180avbg"><bpmn:outgoing>Flow_0lfh3cj</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_0lfh3cj" sourceRef="Event_180avbg" targetRef="Gateway_1y4q3rf" /><bpmn:parallelGateway id="Gateway_1y4q3rf"><bpmn:incoming>Flow_0lfh3cj</bpmn:incoming><bpmn:outgoing>Flow_1g3yemi</bpmn:outgoing><bpmn:outgoing>Flow_0cv41zz</bpmn:outgoing><bpmn:outgoing>Flow_0l0uzs7</bpmn:outgoing></bpmn:parallelGateway><bpmn:userTask id="Activity_1p39c7a" name="Ввод ответа" camunda:formKey="FILL" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>Flow_1g3yemi</bpmn:incoming><bpmn:outgoing>Flow_1qbxk5u</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="Flow_1g3yemi" sourceRef="Gateway_1y4q3rf" targetRef="Activity_1p39c7a" /><bpmn:sequenceFlow id="Flow_1qbxk5u" sourceRef="Activity_1p39c7a" targetRef="Activity_06eafzp" /><bpmn:serviceTask id="Activity_06eafzp" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1qbxk5u</bpmn:incoming><bpmn:outgoing>Flow_1v72ng2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1v72ng2" sourceRef="Activity_06eafzp" targetRef="Activity_1m8ol8g" /><bpmn:endEvent id="Event_1jsq5yq"><bpmn:incoming>Flow_0tt8y12</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1hqv36r" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0cv41zz" sourceRef="Gateway_1y4q3rf" targetRef="Event_0fbt9o8" /><bpmn:intermediateCatchEvent id="Event_0fbt9o8"><bpmn:incoming>Flow_0cv41zz</bpmn:incoming><bpmn:outgoing>Flow_0culqeg</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1lze4pv" signalRef="Signal_1gxzezn" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0gip4j1" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0culqeg</bpmn:incoming><bpmn:outgoing>Flow_09l4k08</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0culqeg" sourceRef="Event_0fbt9o8" targetRef="Activity_0gip4j1" /><bpmn:sequenceFlow id="Flow_09l4k08" sourceRef="Activity_0gip4j1" targetRef="Activity_0m962k5" /><bpmn:endEvent id="Event_1xznazv"><bpmn:incoming>Flow_1prl3am</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0nmib02" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0l0uzs7" sourceRef="Gateway_1y4q3rf" targetRef="Event_1vqunfq" /><bpmn:intermediateCatchEvent id="Event_1vqunfq"><bpmn:incoming>Flow_0l0uzs7</bpmn:incoming><bpmn:outgoing>Flow_01eptw9</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1rsn4hl"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT6000S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_15ev38y" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_01eptw9</bpmn:incoming><bpmn:outgoing>Flow_1jg0iep</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01eptw9" sourceRef="Event_1vqunfq" targetRef="Activity_15ev38y" /><bpmn:serviceTask id="Activity_0t8xgnv" name="Статус: Незавершенная анкета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1jg0iep</bpmn:incoming><bpmn:outgoing>Flow_1w9k7qq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1jg0iep" sourceRef="Activity_15ev38y" targetRef="Activity_0t8xgnv" /><bpmn:sequenceFlow id="Flow_1w9k7qq" sourceRef="Activity_0t8xgnv" targetRef="Event_0zkzjop" /><bpmn:endEvent id="Event_0zkzjop"><bpmn:incoming>Flow_1w9k7qq</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1qiash0" /></bpmn:endEvent><bpmn:scriptTask id="Activity_1m8ol8g" name="Признак ручного заполнения" scriptFormat="javascript" camunda:resultVariable="IsHandle"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_1v72ng2</bpmn:incoming><bpmn:outgoing>Flow_0tt8y12</bpmn:outgoing><bpmn:script>true</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0tt8y12" sourceRef="Activity_1m8ol8g" targetRef="Event_1jsq5yq" /><bpmn:scriptTask id="Activity_0m962k5" name="Признак ручного заполнения = false" scriptFormat="javascript" camunda:resultVariable="IsHandle"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_09l4k08</bpmn:incoming><bpmn:outgoing>Flow_1prl3am</bpmn:outgoing><bpmn:script>false</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1prl3am" sourceRef="Activity_0m962k5" targetRef="Event_1xznazv" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_1kkiuth" sourceRef="Activity_1u5g3mr" targetRef="Gateway_1horrh6" /><bpmn:sequenceFlow id="Flow_1ua4k4f" sourceRef="Event_1i8sifz" targetRef="Activity_1u5g3mr" /><bpmn:sequenceFlow id="Flow_124iqnj" sourceRef="Activity_123iofn" targetRef="Activity_1eke9hj" /><bpmn:sequenceFlow id="Flow_0ss9o42" sourceRef="Activity_1ahnm49" targetRef="Event_1jvwlj8" /><bpmn:sequenceFlow id="Flow_1suu02y" sourceRef="Activity_06qcc5h" targetRef="Event_1xyil6f" /><bpmn:serviceTask id="Activity_00ycflx" name="Получаем  параметры риск-профиля для j-й валюты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${RiskProfile_refid}/getAttributes?systemName=pr_profit_risk</camunda:inputParameter><camunda:outputParameter name="Ccy_primaryId_j"><camunda:script scriptFormat="javascript">JSON.parse(response).pr_profit_risk[j].rp_currency_directory.primaryId</camunda:script></camunda:outputParameter><camunda:outputParameter name="ExpectedYield"><camunda:script scriptFormat="javascript">JSON.parse(response).pr_profit_risk[j].AverageExpectedProfit</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskEstimated"><camunda:script scriptFormat="javascript">JSON.parse(response).pr_profit_risk[j].AverageEstimatedRisk</camunda:script></camunda:outputParameter><camunda:outputParameter name="AllowRisk"><camunda:script scriptFormat="javascript">JSON.parse(response).pr_profit_risk[j].AllowRisk</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1al2ujp</bpmn:incoming><bpmn:incoming>Flow_1honijm</bpmn:incoming><bpmn:outgoing>Flow_051hbhi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_051hbhi" sourceRef="Activity_00ycflx" targetRef="Gateway_1dzjdd5" /><bpmn:subProcess id="Activity_0u2w8h7" name="СОГЛАСОВАНИЕ"><bpmn:incoming>Flow_06jr3zl</bpmn:incoming><bpmn:incoming>Flow_1elbwnh</bpmn:incoming><bpmn:outgoing>Flow_0h7mf4n</bpmn:outgoing><bpmn:startEvent id="Event_15cisbh"><bpmn:outgoing>Flow_0gbxjmz</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_0gbxjmz" sourceRef="Event_15cisbh" targetRef="Gateway_1mggk4w" /><bpmn:parallelGateway id="Gateway_1mggk4w"><bpmn:incoming>Flow_0gbxjmz</bpmn:incoming><bpmn:outgoing>Flow_1exiuh5</bpmn:outgoing><bpmn:outgoing>Flow_13mq72r</bpmn:outgoing><bpmn:outgoing>Flow_0aie1m3</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_05csr7m"><bpmn:incoming>Flow_1exiuh5</bpmn:incoming><bpmn:outgoing>Flow_072755j</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0k8u2q0"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT6000S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="Event_1l630lv"><bpmn:incoming>Flow_1qclske</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_167g2cg" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1w7yadl" name="Установка статуса Незавершенная анкета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_072755j</bpmn:incoming><bpmn:outgoing>Flow_0d8y7uk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_072755j" sourceRef="Event_05csr7m" targetRef="Activity_1w7yadl" /><bpmn:sequenceFlow id="Flow_0d8y7uk" sourceRef="Activity_1w7yadl" targetRef="Activity_0e0kzzs" /><bpmn:sequenceFlow id="Flow_1exiuh5" sourceRef="Gateway_1mggk4w" targetRef="Event_05csr7m" /><bpmn:sequenceFlow id="Flow_13mq72r" sourceRef="Gateway_1mggk4w" targetRef="Event_1wpsybi" /><bpmn:intermediateCatchEvent id="Event_1wpsybi"><bpmn:incoming>Flow_13mq72r</bpmn:incoming><bpmn:outgoing>Flow_19lug0p</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0ehgc1g" signalRef="Signal_0shhym4" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_19lug0p" sourceRef="Event_1wpsybi" targetRef="Activity_1sk009e" /><bpmn:endEvent id="Event_0bq09to"><bpmn:incoming>Flow_1hraws5</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1mvfthp" /></bpmn:endEvent><bpmn:intermediateCatchEvent id="Event_1bw7m5z"><bpmn:incoming>Flow_03sohh3</bpmn:incoming><bpmn:incoming>Flow_0uq65ca</bpmn:incoming><bpmn:outgoing>Flow_0hskv6b</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1nb4g34" signalRef="Signal_1gxzezn" /></bpmn:intermediateCatchEvent><bpmn:exclusiveGateway id="Gateway_1h902iw" default="Flow_03sohh3"><bpmn:incoming>Flow_1xh5bet</bpmn:incoming><bpmn:outgoing>Flow_03sohh3</bpmn:outgoing><bpmn:outgoing>Flow_1ky9z0a</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0c0kmn9" name="Статус портфеля &#34;Модельный портфель не соответствует фин.целям&#34;" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{  
  "TemplateType": "BrokeragePortfolio",
        "mp_source": "Авто",
        "brokerageAccountID": "${brokerageAccountID}",
        "ClientPortfolioStatus": "Модельный портфель не соответствует финансовым целям",
        "PurposeDefinitionFlag" : true,
        "InvestmentHorizon" : "${FIN_GOAL_INVESTMENT_PERIOD}",
        "rp_RiskCategoria": ${RiskProfileValue},
        "ExcpectedYield" : ${ExpectedYield},
        "RiskEstimated" : ${RiskEstimated},
        "AllowRisk": ${AllowRisk},
        "objectId" : "${instanceId}",
        "Goal_RP_compliance" : false,
        "ResultDateTimeGoal" : "${ResultDateTime}",
        "mp_portfolioCurrency" : {
                  "primaryId" : "${InvestValuta}", 
                  "source" : "instrument", 
                  "_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
        }
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05ve5t4</bpmn:incoming><bpmn:outgoing>Flow_187ebr3</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ur18op" default="Flow_1ay9ptf"><bpmn:incoming>Flow_0obftcl</bpmn:incoming><bpmn:outgoing>Flow_05ve5t4</bpmn:outgoing><bpmn:outgoing>Flow_1ay9ptf</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_05mzhhw" name="Статус портфеля &#34;Профиль согласован&#34;" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{  
        "TemplateType": "BrokeragePortfolio",
        "mp_source": "Авто",
        "brokerageAccountID": "${brokerageAccountID}",
        "ClientPortfolioStatus": "Профиль согласован",
        "PurposeDefinitionFlag" : true,
        "InvestmentHorizon" : "${FIN_GOAL_INVESTMENT_PERIOD}",
        "rp_RiskCategoria": ${RiskProfileValue},
        "ExcpectedYield" : ${ExpectedYield},
        "RiskEstimated" : ${RiskEstimated},
        "AllowRisk": ${AllowRisk},
        "objectId" : "${instanceId}",
        "Goal_RP_compliance" : true,
        "ResultDateTimeGoal" : "${ResultDateTime}",
        "mp_portfolioCurrency" : {
                  "primaryId" : "${InvestValuta}", 
                  "source" : "instrument", 
                  "_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
        }
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ay9ptf</bpmn:incoming><bpmn:outgoing>Flow_1qsoxtt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_097prco" name="Установка статуса анкеты &#34;Согласована&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Согласована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qsoxtt</bpmn:incoming><bpmn:incoming>Flow_187ebr3</bpmn:incoming><bpmn:incoming>Flow_0hd1ome</bpmn:incoming><bpmn:incoming>Flow_14ieg5m</bpmn:incoming><bpmn:outgoing>Flow_0ech1r2</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1d3u5ei" name="Получаем значение  флага подписания ПЭП"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=Signed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Signed"><camunda:script scriptFormat="javascript">JSON.parse(response).Signed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hskv6b</bpmn:incoming><bpmn:outgoing>Flow_1xh5bet</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_03sohh3" sourceRef="Gateway_1h902iw" targetRef="Event_1bw7m5z" /><bpmn:sequenceFlow id="Flow_0hskv6b" sourceRef="Event_1bw7m5z" targetRef="Activity_1d3u5ei" /><bpmn:sequenceFlow id="Flow_1xh5bet" sourceRef="Activity_1d3u5ei" targetRef="Gateway_1h902iw" /><bpmn:sequenceFlow id="Flow_1ky9z0a" sourceRef="Gateway_1h902iw" targetRef="Gateway_0oct9h4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Signed == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_05ve5t4" name="Статус = Модельный портфель не соответствует фин.целям?" sourceRef="Gateway_0ur18op" targetRef="Activity_0c0kmn9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Compare == false || Compare == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_187ebr3" sourceRef="Activity_0c0kmn9" targetRef="Activity_097prco" /><bpmn:sequenceFlow id="Flow_1ay9ptf" sourceRef="Gateway_0ur18op" targetRef="Activity_05mzhhw" /><bpmn:sequenceFlow id="Flow_1qsoxtt" sourceRef="Activity_05mzhhw" targetRef="Activity_097prco" /><bpmn:sequenceFlow id="Flow_0aie1m3" sourceRef="Gateway_1mggk4w" targetRef="Activity_1tvgdm9" /><bpmn:sequenceFlow id="Flow_0ech1r2" sourceRef="Activity_097prco" targetRef="Activity_1wckguo" /><bpmn:endEvent id="Event_1jxdk29"><bpmn:incoming>Flow_09998p0</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1r20y6r" /></bpmn:endEvent><bpmn:serviceTask id="Activity_0e0kzzs" name="Признак подписания = false" camunda:expression="false" camunda:resultVariable="IsSigned"><bpmn:incoming>Flow_0d8y7uk</bpmn:incoming><bpmn:outgoing>Flow_1s9194h</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1s9194h" sourceRef="Activity_0e0kzzs" targetRef="Activity_0od60lw" /><bpmn:serviceTask id="Activity_1sk009e" name="Признак подписания = false" camunda:expression="false" camunda:resultVariable="IsSigned"><bpmn:incoming>Flow_19lug0p</bpmn:incoming><bpmn:outgoing>Flow_03kg0h2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_03kg0h2" sourceRef="Activity_1sk009e" targetRef="Activity_0kiop98" /><bpmn:serviceTask id="Activity_1wckguo" name="Признак подписания = true" camunda:expression="true" camunda:resultVariable="IsSigned"><bpmn:incoming>Flow_0ech1r2</bpmn:incoming><bpmn:outgoing>Flow_029h1o2</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0rcmqcz" name="Меняем в табличном блоке строку по заданному номеру" scriptFormat="javascript" camunda:resultVariable="GSA_modified"><bpmn:incoming>Flow_1a3t5gq</bpmn:incoming><bpmn:incoming>Flow_0hvf76p</bpmn:incoming><bpmn:outgoing>Flow_0rur5r5</bpmn:outgoing><bpmn:script>var GuideSteps_modified = JSON.parse(GuideSteps);

GuideSteps_modified[2]['NumStep'] = 3;
GuideSteps_modified[2]['NameProcessBar'] = StepName3;
GuideSteps_modified[2]['StatusStep'] = true;
GuideSteps_modified[2]['AnketaId'] = instanceId;
GuideSteps_modified[2]['ResultDateTime'] = ResultDateTime;

result = new Object();
result.GuideSteps = GuideSteps_modified;
JSON.stringify(result);</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1volt9j" name="json" scriptFormat="JavaScript" camunda:resultVariable="GuideSteps12"><bpmn:incoming>Flow_0rur5r5</bpmn:incoming><bpmn:outgoing>Flow_1dlus2k</bpmn:outgoing><bpmn:script>S(GSA_modified).prop("GuideSteps")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0rur5r5" sourceRef="Activity_0rcmqcz" targetRef="Activity_1volt9j" /><bpmn:exclusiveGateway id="Gateway_0oct9h4" default="Flow_1id13yb"><bpmn:incoming>Flow_1ky9z0a</bpmn:incoming><bpmn:outgoing>Flow_1id13yb</bpmn:outgoing><bpmn:outgoing>Flow_0obftcl</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1id13yb" sourceRef="Gateway_0oct9h4" targetRef="Activity_0259c3b" /><bpmn:sequenceFlow id="Flow_0obftcl" name="Не найден табл.блок этапов" sourceRef="Gateway_0oct9h4" targetRef="Gateway_0ur18op"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${GuideSteps == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0259c3b" name="Ищем этап 3 в списке этапов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "61cd56f319807c2315dfed7d", 
"attributes.NumStep" : 3
},
"projection": { 		"attributes.NameProcessBar": 1	}
}</camunda:inputParameter><camunda:outputParameter name="StepName3"><camunda:script scriptFormat="javascript">try {
var result_json = 
JSON.parse(response).cursor.firstBatch[0].attributes.NameProcessBar;
JSON.stringify(result_json).replaceAll("\"", "")
}
catch (e)
{
" "
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty1"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1id13yb</bpmn:incoming><bpmn:outgoing>Flow_0mog40d</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0akd32u" default="Flow_1a3t5gq"><bpmn:incoming>Flow_0mog40d</bpmn:incoming><bpmn:outgoing>Flow_0c14kgc</bpmn:outgoing><bpmn:outgoing>Flow_1a3t5gq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_124mnen" name="Название этапа" scriptFormat="JavaScript" camunda:resultVariable="StepName3"><bpmn:incoming>Flow_0c14kgc</bpmn:incoming><bpmn:outgoing>Flow_0hvf76p</bpmn:outgoing><bpmn:script>String('')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0c14kgc" sourceRef="Gateway_0akd32u" targetRef="Activity_124mnen"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty1 == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1a3t5gq" sourceRef="Gateway_0akd32u" targetRef="Activity_0rcmqcz" /><bpmn:sequenceFlow id="Flow_0hvf76p" sourceRef="Activity_124mnen" targetRef="Activity_0rcmqcz" /><bpmn:serviceTask id="Activity_0xu12xw" name="Статус портфеля &#34;Модельный портфель не соответствует фин.целям&#34;" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{  
        "TemplateType": "BrokeragePortfolio",
        "mp_source": "Авто",
        "brokerageAccountID": "${brokerageAccountID}",
        "ClientPortfolioStatus": "Модельный портфель не соответствует финансовым целям",
        "PurposeDefinitionFlag" : true,
        "InvestmentHorizon" : "${FIN_GOAL_INVESTMENT_PERIOD}",
        "rp_RiskCategoria": ${RiskProfileValue},
        "ExcpectedYield" : ${ExpectedYield},
        "RiskEstimated" : ${RiskEstimated},
        "AllowRisk": ${AllowRisk},
        "objectId" : "${instanceId}",
        "Goal_RP_compliance" : false,
        "ResultDateTimeGoal" : "${ResultDateTime}",
        "GuideSteps": ${GuideSteps12},
        "mp_portfolioCurrency" : {
                  "primaryId" : "${InvestValuta}", 
                  "source" : "instrument", 
                  "_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
        }
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1klpk1c</bpmn:incoming><bpmn:outgoing>Flow_0hd1ome</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0cimz0u" default="Flow_1flueer"><bpmn:incoming>Flow_1dlus2k</bpmn:incoming><bpmn:outgoing>Flow_1klpk1c</bpmn:outgoing><bpmn:outgoing>Flow_1flueer</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1d7yy3f" name="Статус портфеля &#34;Профиль согласован&#34;" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{  
        "TemplateType": "BrokeragePortfolio",
        "mp_source": "Авто",
        "brokerageAccountID": "${brokerageAccountID}",
        "ClientPortfolioStatus": "Профиль согласован",
        "PurposeDefinitionFlag" : true,
        "InvestmentHorizon" : "${FIN_GOAL_INVESTMENT_PERIOD}",
        "rp_RiskCategoria": ${RiskProfileValue},
        "ExcpectedYield" : ${ExpectedYield},
        "RiskEstimated" : ${RiskEstimated},
        "AllowRisk": ${AllowRisk},
        "objectId" : "${instanceId}",
        "Goal_RP_compliance" : true,
        "ResultDateTimeGoal" : "${ResultDateTime}",
        "GuideSteps": ${GuideSteps12},
        "mp_portfolioCurrency" : {
                  "primaryId" : "${InvestValuta}", 
                  "source" : "instrument", 
                  "_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
        }
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1flueer</bpmn:incoming><bpmn:outgoing>Flow_14ieg5m</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1klpk1c" name="Статус = Модельный портфель не соответствует фин.целям?" sourceRef="Gateway_0cimz0u" targetRef="Activity_0xu12xw"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Compare == false || Compare == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0hd1ome" sourceRef="Activity_0xu12xw" targetRef="Activity_097prco" /><bpmn:sequenceFlow id="Flow_1flueer" sourceRef="Gateway_0cimz0u" targetRef="Activity_1d7yy3f" /><bpmn:sequenceFlow id="Flow_0mog40d" sourceRef="Activity_0259c3b" targetRef="Gateway_0akd32u" /><bpmn:sequenceFlow id="Flow_14ieg5m" sourceRef="Activity_1d7yy3f" targetRef="Activity_097prco" /><bpmn:serviceTask id="Activity_0od60lw" name="Таймаут = true" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1s9194h</bpmn:incoming><bpmn:outgoing>Flow_1qclske</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qclske" sourceRef="Activity_0od60lw" targetRef="Event_1l630lv" /><bpmn:serviceTask id="Activity_0kiop98" name="Таймаут = false" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_03kg0h2</bpmn:incoming><bpmn:outgoing>Flow_1hraws5</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1hraws5" sourceRef="Activity_0kiop98" targetRef="Event_0bq09to" /><bpmn:serviceTask id="Activity_059h7ol" name="Таймаут = false" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_029h1o2</bpmn:incoming><bpmn:outgoing>Flow_09998p0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_09998p0" sourceRef="Activity_059h7ol" targetRef="Event_1jxdk29" /><bpmn:sequenceFlow id="Flow_029h1o2" sourceRef="Activity_1wckguo" targetRef="Activity_059h7ol" /><bpmn:serviceTask id="Activity_1tvgdm9" name="Получаем значение параметра валюты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=InvestmentCurrency</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="InvestValuta"><camunda:script scriptFormat="javascript">JSON.parse(response).InvestmentCurrency</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0aie1m3</bpmn:incoming><bpmn:outgoing>Flow_0uq65ca</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0uq65ca" sourceRef="Activity_1tvgdm9" targetRef="Event_1bw7m5z" /><bpmn:sequenceFlow id="Flow_1dlus2k" sourceRef="Activity_1volt9j" targetRef="Gateway_0cimz0u" /><bpmn:textAnnotation id="TextAnnotation_0cwqbkc"><bpmn:text>Здесь устанавливается срок подписания</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_0rf42ds" sourceRef="Event_05csr7m" targetRef="TextAnnotation_0cwqbkc" /><bpmn:textAnnotation id="TextAnnotation_1xz2440"><bpmn:text>Сигнал изменения срока подписания</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1pwocr5" sourceRef="Event_1wpsybi" targetRef="TextAnnotation_1xz2440" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_0h7mf4n" sourceRef="Activity_0u2w8h7" targetRef="Gateway_1n3kxzv" /><bpmn:subProcess id="Activity_1qnnp13" name="НЕСООТВЕТСТВИЕ МП ФИНАНСОВЫМ ЦЕЛЯМ"><bpmn:incoming>Flow_0uogpiu</bpmn:incoming><bpmn:incoming>Flow_014dl68</bpmn:incoming><bpmn:incoming>Flow_10563ik</bpmn:incoming><bpmn:incoming>Flow_00dp544</bpmn:incoming><bpmn:outgoing>Flow_0p6z1iy</bpmn:outgoing><bpmn:startEvent id="Event_1xbwlnx"><bpmn:outgoing>Flow_1hyavyx</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_1hyavyx" sourceRef="Event_1xbwlnx" targetRef="Gateway_1w18u5d" /><bpmn:parallelGateway id="Gateway_1w18u5d"><bpmn:incoming>Flow_1hyavyx</bpmn:incoming><bpmn:outgoing>Flow_1vi5ucg</bpmn:outgoing><bpmn:outgoing>Flow_0qz9oyz</bpmn:outgoing><bpmn:outgoing>Flow_1b1pcl1</bpmn:outgoing></bpmn:parallelGateway><bpmn:sequenceFlow id="Flow_1vi5ucg" sourceRef="Gateway_1w18u5d" targetRef="Event_02yevka" /><bpmn:intermediateCatchEvent id="Event_02yevka"><bpmn:incoming>Flow_1vi5ucg</bpmn:incoming><bpmn:outgoing>Flow_0w83zsp</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1wff61f" signalRef="Signal_1gxzezn" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0mkhupx" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0w83zsp</bpmn:incoming><bpmn:outgoing>Flow_0pjrk57</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0w83zsp" sourceRef="Event_02yevka" targetRef="Activity_0mkhupx" /><bpmn:userTask id="Activity_0ffbs3s" name="Кнопки Продолжить, Завершить" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Sign&#34;, &#34;label&#34;: &#34;SIGN&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;NotSign&#34;, &#34;label&#34;: &#34;NOT_SING&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0qz9oyz</bpmn:incoming><bpmn:outgoing>Flow_18qca0t</bpmn:outgoing><bpmn:outgoing>Flow_1bw8z58</bpmn:outgoing></bpmn:userTask><bpmn:endEvent id="Event_0ttn6zj"><bpmn:incoming>Flow_0pv5zzz</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1w3lx1k" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_18qca0t" sourceRef="Activity_0ffbs3s" targetRef="Activity_14ovj1l"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Sign'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1bw8z58" sourceRef="Activity_0ffbs3s" targetRef="Activity_0bn6mu9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'NotSign'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0qz9oyz" sourceRef="Gateway_1w18u5d" targetRef="Activity_0ffbs3s" /><bpmn:serviceTask id="Activity_14ovj1l" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_18qca0t</bpmn:incoming><bpmn:outgoing>Flow_0fnn6wf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0fnn6wf" sourceRef="Activity_14ovj1l" targetRef="Activity_1bgoxqm" /><bpmn:endEvent id="Event_1gm6j7o"><bpmn:incoming>Flow_0kkfvek</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1r8f383" /></bpmn:endEvent><bpmn:serviceTask id="Activity_0bn6mu9" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1bw8z58</bpmn:incoming><bpmn:outgoing>Flow_19mra56</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_19mra56" sourceRef="Activity_0bn6mu9" targetRef="Activity_1mjcp0q" /><bpmn:sequenceFlow id="Flow_1b1pcl1" sourceRef="Gateway_1w18u5d" targetRef="Event_05m470j" /><bpmn:serviceTask id="Activity_07hnqdy" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0a6kb4i</bpmn:incoming><bpmn:outgoing>Flow_0uiwega</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="Event_05m470j"><bpmn:incoming>Flow_1b1pcl1</bpmn:incoming><bpmn:outgoing>Flow_0a6kb4i</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_10oq1ve"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT600S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_0a6kb4i" sourceRef="Event_05m470j" targetRef="Activity_07hnqdy" /><bpmn:sequenceFlow id="Flow_0uiwega" sourceRef="Activity_07hnqdy" targetRef="Event_1v1f05j" /><bpmn:endEvent id="Event_1v1f05j"><bpmn:incoming>Flow_0uiwega</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1n1a2lb" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0pjrk57" sourceRef="Activity_0mkhupx" targetRef="Activity_1i8wnyf" /><bpmn:endEvent id="Event_1u1wil0"><bpmn:incoming>Flow_0b6bxjn</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_00dgqtv" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1i8wnyf" name="Получаем значение ProcessButton"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=ProcessButton</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ProcessButton"><camunda:script scriptFormat="javascript">JSON.parse(response).ProcessButton</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0pjrk57</bpmn:incoming><bpmn:outgoing>Flow_0b6bxjn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0b6bxjn" sourceRef="Activity_1i8wnyf" targetRef="Event_1u1wil0" /><bpmn:scriptTask id="Activity_1mjcp0q" name="ProcessButton = NOT_SIGN" scriptFormat="javascript" camunda:resultVariable="ProcessButton"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_19mra56</bpmn:incoming><bpmn:outgoing>Flow_0pv5zzz</bpmn:outgoing><bpmn:script>String('NOT_SIGN')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0pv5zzz" sourceRef="Activity_1mjcp0q" targetRef="Event_0ttn6zj" /><bpmn:scriptTask id="Activity_1bgoxqm" name="ProcessButton = SIGN" scriptFormat="javascript" camunda:resultVariable="ProcessButton"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="deleteFileServiceTask" /><camunda:property name="requestType" value="DELETE_FILE_SERVICE_TASK" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_0fnn6wf</bpmn:incoming><bpmn:outgoing>Flow_0kkfvek</bpmn:outgoing><bpmn:script>String('SIGN')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0kkfvek" sourceRef="Activity_1bgoxqm" targetRef="Event_1gm6j7o" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_1vrrux3" default="Flow_1cd1n4a"><bpmn:incoming>Flow_0p6z1iy</bpmn:incoming><bpmn:outgoing>Flow_0bvpdas</bpmn:outgoing><bpmn:outgoing>Flow_1cd1n4a</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0p6z1iy" sourceRef="Activity_1qnnp13" targetRef="Gateway_1vrrux3" /><bpmn:exclusiveGateway id="Gateway_1uwbnn5" default="Flow_0uogpiu"><bpmn:incoming>Flow_0bvpdas</bpmn:incoming><bpmn:outgoing>Flow_0v2kl2n</bpmn:outgoing><bpmn:outgoing>Flow_0uogpiu</bpmn:outgoing><bpmn:outgoing>Flow_1p44sqr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0bvpdas" name="Нет таймаута" sourceRef="Gateway_1vrrux3" targetRef="Gateway_1uwbnn5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0v2kl2n" name="SIGN" sourceRef="Gateway_1uwbnn5" targetRef="Activity_1p2oi1g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessButton == 'SIGN'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0uogpiu" sourceRef="Gateway_1uwbnn5" targetRef="Activity_1qnnp13" /><bpmn:serviceTask id="Activity_1wshbg7" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01tdnay</bpmn:incoming><bpmn:incoming>Flow_02teu0h</bpmn:incoming><bpmn:outgoing>Flow_1hs04qj</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1n3kxzv" default="Flow_090rcop"><bpmn:incoming>Flow_0h7mf4n</bpmn:incoming><bpmn:outgoing>Flow_090rcop</bpmn:outgoing><bpmn:outgoing>Flow_01tdnay</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_090rcop" sourceRef="Gateway_1n3kxzv" targetRef="Gateway_0tqpe1v" /><bpmn:sequenceFlow id="Flow_01tdnay" name="Таймаут" sourceRef="Gateway_1n3kxzv" targetRef="Activity_1wshbg7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == 'true'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1hs04qj" sourceRef="Activity_1wshbg7" targetRef="Event_02mf4wu" /><bpmn:scriptTask id="Activity_1bb9jou" name="Номер ответа из массива ответов j=0" scriptFormat="javascript"><bpmn:incoming>Flow_12zf9ig</bpmn:incoming><bpmn:outgoing>Flow_04493ad</bpmn:outgoing><bpmn:script>execution.setVariable('j', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1s8q0sh" name="Флаг поиска параметров" scriptFormat="javascript"><bpmn:incoming>Flow_04493ad</bpmn:incoming><bpmn:outgoing>Flow_046mx2t</bpmn:outgoing><bpmn:script>var f_FIN_GOAL = new Boolean(false);
var f_FIN_GOAL_PROPERTY_OBLIGATION = new Boolean(false);
var f_FIN_GOAL_SALE_ASSETS = new Boolean(false);
var f_FIN_GOAL_CURRENCY = new Boolean(false);
var f_FIN_GOAL_INITIAL_INVESTMENT_SUM = new Boolean(false);
var f_FIN_GOAL_REGULAR_REPLENISHMENT = new Boolean(false);
var f_FIN_GOAL_REGULAR_REPLENISHMENT_SUM = new Boolean(false);
var f_FIN_GOAL_INVESTMENT_PERIOD = new Boolean(false);
var f_FIN_GOAL_RISK_CATEGORY = new Boolean(false);
var f_FIN_GOAL_CALCULATION_RESULT = new Boolean(false);
var f_FIN_GOAL_ACHIEVE_DATE = new Boolean(false);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_04493ad" sourceRef="Activity_1bb9jou" targetRef="Activity_1s8q0sh" /><bpmn:serviceTask id="Activity_1g0ojrb" name="Получаем текущее значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=Questions</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Q_QuestionCode"><camunda:script scriptFormat="javascript">JSON.parse(response).Questions[j].Q_QuestionCode</camunda:script></camunda:outputParameter><camunda:outputParameter name="Q_Answer"><camunda:script scriptFormat="javascript">try{
JSON.parse(response).Questions[j].Q_Answer[0]
} catch(e) {
'0'
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="Q_AnswerType"><camunda:script scriptFormat="javascript">JSON.parse(response).Questions[j].Q_AnswerType</camunda:script></camunda:outputParameter><camunda:outputParameter name="Q_Answer_Str"><camunda:script scriptFormat="javascript">JSON.parse(response).Questions[j].Q_Answer_Str</camunda:script></camunda:outputParameter><camunda:outputParameter name="Q_Answer_Num"><camunda:script scriptFormat="javascript">JSON.parse(response).Questions[j].Q_Answer_Num</camunda:script></camunda:outputParameter><camunda:outputParameter name="Q_QuestionNumber"><camunda:script scriptFormat="javascript">JSON.parse(response).Questions[j].Q_QuestionNumber</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_046mx2t</bpmn:incoming><bpmn:incoming>Flow_14ipuq1</bpmn:incoming><bpmn:outgoing>Flow_0kwhau9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_046mx2t" sourceRef="Activity_1s8q0sh" targetRef="Activity_1g0ojrb" /><bpmn:exclusiveGateway id="Gateway_0njt8xy" default="Flow_008o36s"><bpmn:incoming>Flow_1a51fkp</bpmn:incoming><bpmn:outgoing>Flow_0cn4mo3</bpmn:outgoing><bpmn:outgoing>Flow_0w44jqs</bpmn:outgoing><bpmn:outgoing>Flow_1cmngln</bpmn:outgoing><bpmn:outgoing>Flow_196enl9</bpmn:outgoing><bpmn:outgoing>Flow_1x8h1ry</bpmn:outgoing><bpmn:outgoing>Flow_0ktc94n</bpmn:outgoing><bpmn:outgoing>Flow_1700mnz</bpmn:outgoing><bpmn:outgoing>Flow_0hoeh2u</bpmn:outgoing><bpmn:outgoing>Flow_191pvra</bpmn:outgoing><bpmn:outgoing>Flow_0e4amoo</bpmn:outgoing><bpmn:outgoing>Flow_008o36s</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0kwhau9" sourceRef="Activity_1g0ojrb" targetRef="Gateway_13v25nw" /><bpmn:sequenceFlow id="Flow_0cn4mo3" sourceRef="Gateway_0njt8xy" targetRef="Activity_1a53fnr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0w44jqs" sourceRef="Gateway_0njt8xy" targetRef="Activity_05mhfyr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_CURRENCY'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1cmngln" sourceRef="Gateway_0njt8xy" targetRef="Gateway_0r4be0n"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_INITIAL_INVESTMENT_SUM'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_196enl9" sourceRef="Gateway_0njt8xy" targetRef="Activity_0md8yur"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_REGULAR_REPLENISHMENT'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1x8h1ry" sourceRef="Gateway_0njt8xy" targetRef="Gateway_0dp6zlp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_REGULAR_REPLENISHMENT_SUM'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ktc94n" sourceRef="Gateway_0njt8xy" targetRef="Gateway_1drvsmc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_INVESTMENT_PERIOD'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1700mnz" sourceRef="Gateway_0njt8xy" targetRef="Gateway_0wavdj0"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_CALCULATION_RESULT'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0hoeh2u" sourceRef="Gateway_0njt8xy" targetRef="Gateway_1v9jzp3"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_PROPERTY_OBLIGATION'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_191pvra" sourceRef="Gateway_0njt8xy" targetRef="Activity_1p74m4y"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_SALE_ASSETS'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0e4amoo" sourceRef="Gateway_0njt8xy" targetRef="Activity_1yt9lai"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == 'FIN_GOAL_RISK_CATEGORY'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0vcyise" name="Установка статуса &#34;Ошибка маппинга ответов&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+маппинга+ответов</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_008o36s</bpmn:incoming><bpmn:incoming>Flow_1pympva</bpmn:incoming><bpmn:incoming>Flow_0mdcvpp</bpmn:incoming><bpmn:incoming>Flow_0pswn4a</bpmn:incoming><bpmn:incoming>Flow_0oli8re</bpmn:incoming><bpmn:incoming>Flow_09zwxqx</bpmn:incoming><bpmn:incoming>Flow_1ji3u77</bpmn:incoming><bpmn:incoming>Flow_0q9z63q</bpmn:incoming><bpmn:incoming>Flow_14doqcj</bpmn:incoming><bpmn:incoming>Flow_0b80tdn</bpmn:incoming><bpmn:incoming>Flow_0hsaqey</bpmn:incoming><bpmn:incoming>Flow_1hztnkx</bpmn:incoming><bpmn:incoming>Flow_0nr2pg7</bpmn:incoming><bpmn:outgoing>Flow_03w54iy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_008o36s" sourceRef="Gateway_0njt8xy" targetRef="Activity_0vcyise" /><bpmn:sequenceFlow id="Flow_03w54iy" sourceRef="Activity_0vcyise" targetRef="Activity_1u5g3mr" /><bpmn:serviceTask id="Activity_1a53fnr" name="Ищем ответ на  вопрос в базе ответов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6130f7c6687006695cd45b8c", 
"attributes.QuestionnairesType": "${QuestionnairesType}", 
"attributes.LinkedQuestionnaireNumber": "${QuestionnairesNumber}", 
"attributes.QuestionNumber": "${Q_QuestionNumber}", 
"attributes.AnswerNumber": "${Q_Answer}" 
},
"projection": { 		"_id": 1,
"attributes.Answer":1  	}
}</camunda:inputParameter><camunda:outputParameter name="AnswerId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Answer1"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Answer
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cn4mo3</bpmn:incoming><bpmn:outgoing>Flow_0fq6zai</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ciizag" default="Flow_0wwgwnp"><bpmn:incoming>Flow_0fq6zai</bpmn:incoming><bpmn:outgoing>Flow_1pympva</bpmn:outgoing><bpmn:outgoing>Flow_0wwgwnp</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0fq6zai" sourceRef="Activity_1a53fnr" targetRef="Gateway_0ciizag" /><bpmn:sequenceFlow id="Flow_1pympva" sourceRef="Gateway_0ciizag" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0wwgwnp" sourceRef="Gateway_0ciizag" targetRef="Activity_1b421yy" /><bpmn:exclusiveGateway id="Gateway_13v25nw" default="Flow_1a51fkp"><bpmn:incoming>Flow_0kwhau9</bpmn:incoming><bpmn:outgoing>Flow_1a51fkp</bpmn:outgoing><bpmn:outgoing>Flow_0mdcvpp</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1a51fkp" sourceRef="Gateway_13v25nw" targetRef="Gateway_0njt8xy" /><bpmn:sequenceFlow id="Flow_0mdcvpp" name="Не найден код, номер или тип вопроса" sourceRef="Gateway_13v25nw" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_QuestionCode == null || Q_QuestionNumber == null || Q_AnswerType == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1b421yy" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL"><bpmn:incoming>Flow_0wwgwnp</bpmn:incoming><bpmn:outgoing>Flow_08f1mkx</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1v9jzp3" default="Flow_0lqqlyb"><bpmn:incoming>Flow_0hoeh2u</bpmn:incoming><bpmn:outgoing>Flow_0lqqlyb</bpmn:outgoing><bpmn:outgoing>Flow_0pswn4a</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0lqqlyb" sourceRef="Gateway_1v9jzp3" targetRef="Activity_04kovmc" /><bpmn:sequenceFlow id="Flow_0pswn4a" sourceRef="Gateway_1v9jzp3" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_Answer_Num == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_04kovmc" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_PROPERTY_OBLIGATION"><bpmn:incoming>Flow_0lqqlyb</bpmn:incoming><bpmn:outgoing>Flow_0a40nyk</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1v7uoqt" default="Flow_1jqph67"><bpmn:incoming>Flow_1v2z32p</bpmn:incoming><bpmn:outgoing>Flow_0oli8re</bpmn:outgoing><bpmn:outgoing>Flow_1jqph67</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1p74m4y" name="Ищем ответ на  вопрос в базе ответов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6130f7c6687006695cd45b8c", 
"attributes.QuestionnairesType": "${QuestionnairesType}", 
"attributes.LinkedQuestionnaireNumber": "${QuestionnairesNumber}", 
"attributes.QuestionNumber": "${Q_QuestionNumber}", 
"attributes.AnswerNumber": "${Q_Answer}" 
},
"projection": { 		"_id": 1,
"attributes.Answer":1  	}
}</camunda:inputParameter><camunda:outputParameter name="AnswerId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Answer1"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Answer
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_191pvra</bpmn:incoming><bpmn:outgoing>Flow_1v2z32p</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1v2z32p" sourceRef="Activity_1p74m4y" targetRef="Gateway_1v7uoqt" /><bpmn:sequenceFlow id="Flow_0oli8re" sourceRef="Gateway_1v7uoqt" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1jqph67" sourceRef="Gateway_1v7uoqt" targetRef="Activity_0f0do1g" /><bpmn:serviceTask id="Activity_0f0do1g" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FFIN_GOAL_SALE_ASSETS"><bpmn:incoming>Flow_1jqph67</bpmn:incoming><bpmn:outgoing>Flow_02bpoqq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_05mhfyr" name="Ищем ответ на  вопрос в базе ответов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6130f7c6687006695cd45b8c", 
"attributes.QuestionnairesType": "${QuestionnairesType}", 
"attributes.LinkedQuestionnaireNumber": "${QuestionnairesNumber}", 
"attributes.QuestionNumber": "${Q_QuestionNumber}", 
"attributes.AnswerNumber": "${Q_Answer}" 
},
"projection": { 		"_id": 1,
"attributes.Answer":1,
"attributes.Note":1 	  	}
}</camunda:inputParameter><camunda:outputParameter name="AnswerId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Answer1"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Answer
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="CcyCode"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Note
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0w44jqs</bpmn:incoming><bpmn:outgoing>Flow_01lcnjy</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1pxrph5" default="Flow_1vclijt"><bpmn:incoming>Flow_01lcnjy</bpmn:incoming><bpmn:outgoing>Flow_09zwxqx</bpmn:outgoing><bpmn:outgoing>Flow_1vclijt</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_01lcnjy" sourceRef="Activity_05mhfyr" targetRef="Gateway_1pxrph5" /><bpmn:sequenceFlow id="Flow_09zwxqx" sourceRef="Gateway_1pxrph5" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0r4be0n" default="Flow_0tdg2k7"><bpmn:incoming>Flow_1cmngln</bpmn:incoming><bpmn:outgoing>Flow_1ji3u77</bpmn:outgoing><bpmn:outgoing>Flow_0tdg2k7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_0i71u3u" default="Flow_04kkpt6"><bpmn:incoming>Flow_063q00a</bpmn:incoming><bpmn:outgoing>Flow_0q9z63q</bpmn:outgoing><bpmn:outgoing>Flow_04kkpt6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_0dp6zlp" default="Flow_06d20rx"><bpmn:incoming>Flow_1x8h1ry</bpmn:incoming><bpmn:outgoing>Flow_14doqcj</bpmn:outgoing><bpmn:outgoing>Flow_06d20rx</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_1drvsmc" default="Flow_1svobl4"><bpmn:incoming>Flow_0ktc94n</bpmn:incoming><bpmn:outgoing>Flow_0b80tdn</bpmn:outgoing><bpmn:outgoing>Flow_1svobl4</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_0b9ax5r" default="Flow_1br50cd"><bpmn:incoming>Flow_1iu26me</bpmn:incoming><bpmn:outgoing>Flow_0hsaqey</bpmn:outgoing><bpmn:outgoing>Flow_1br50cd</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_0wavdj0" default="Flow_0bjaezp"><bpmn:incoming>Flow_1700mnz</bpmn:incoming><bpmn:outgoing>Flow_1hztnkx</bpmn:outgoing><bpmn:outgoing>Flow_0bjaezp</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1ji3u77" sourceRef="Gateway_0r4be0n" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_Answer_Num == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0q9z63q" sourceRef="Gateway_0i71u3u" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_14doqcj" sourceRef="Gateway_0dp6zlp" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_Answer_Num == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0b80tdn" sourceRef="Gateway_1drvsmc" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_Answer_Str == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0hsaqey" sourceRef="Gateway_0b9ax5r" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1hztnkx" sourceRef="Gateway_0wavdj0" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Q_Answer_Num == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_08f1mkx" sourceRef="Activity_1b421yy" targetRef="Activity_1u919zu" /><bpmn:sequenceFlow id="Flow_0a40nyk" sourceRef="Activity_04kovmc" targetRef="Activity_0ja5gbt" /><bpmn:sequenceFlow id="Flow_02bpoqq" sourceRef="Activity_0f0do1g" targetRef="Activity_10g2ib8" /><bpmn:serviceTask id="Activity_0qolpfx" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_CURRENCY"><bpmn:incoming>Flow_0pf4828</bpmn:incoming><bpmn:outgoing>Flow_1ygv3v2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1vclijt" sourceRef="Gateway_1pxrph5" targetRef="Activity_0s33ryk" /><bpmn:serviceTask id="Activity_1eqvjq0" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_INITIAL_INVESTMENT_SUM"><bpmn:incoming>Flow_0tdg2k7</bpmn:incoming><bpmn:outgoing>Flow_1bna5ux</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0etmqtw" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_REGULAR_REPLENISHMENT"><bpmn:incoming>Flow_04kkpt6</bpmn:incoming><bpmn:outgoing>Flow_1q3exjm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1qubt0f" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_REGULAR_REPLENISHMENT_SUM"><bpmn:incoming>Flow_06d20rx</bpmn:incoming><bpmn:outgoing>Flow_1xi9hey</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0v67a78" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_INVESTMENT_PERIOD"><bpmn:incoming>Flow_1svobl4</bpmn:incoming><bpmn:outgoing>Flow_1bvzpax</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1r46uey" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_RISK_CATEGORY"><bpmn:incoming>Flow_1br50cd</bpmn:incoming><bpmn:outgoing>Flow_160umgb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0tdg2k7" sourceRef="Gateway_0r4be0n" targetRef="Activity_1eqvjq0" /><bpmn:sequenceFlow id="Flow_04kkpt6" sourceRef="Gateway_0i71u3u" targetRef="Activity_0etmqtw" /><bpmn:sequenceFlow id="Flow_06d20rx" sourceRef="Gateway_0dp6zlp" targetRef="Activity_1qubt0f" /><bpmn:sequenceFlow id="Flow_1svobl4" sourceRef="Gateway_1drvsmc" targetRef="Activity_0v67a78" /><bpmn:sequenceFlow id="Flow_1br50cd" sourceRef="Gateway_0b9ax5r" targetRef="Activity_1r46uey" /><bpmn:serviceTask id="Activity_1x1wb0r" name="Флаг = true" camunda:expression="true" camunda:resultVariable="f_FIN_GOAL_CALCULATION_RESULT"><bpmn:incoming>Flow_0bjaezp</bpmn:incoming><bpmn:outgoing>Flow_0p0a39g</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0bjaezp" sourceRef="Gateway_0wavdj0" targetRef="Activity_1x1wb0r" /><bpmn:sequenceFlow id="Flow_0p0a39g" sourceRef="Activity_1x1wb0r" targetRef="Activity_0m7jpn0" /><bpmn:sequenceFlow id="Flow_160umgb" sourceRef="Activity_1r46uey" targetRef="Activity_0006x3j" /><bpmn:sequenceFlow id="Flow_1bvzpax" sourceRef="Activity_0v67a78" targetRef="Activity_1b16tly" /><bpmn:sequenceFlow id="Flow_1xi9hey" sourceRef="Activity_1qubt0f" targetRef="Activity_0jk0d40" /><bpmn:sequenceFlow id="Flow_1q3exjm" sourceRef="Activity_0etmqtw" targetRef="Activity_1jduj7r" /><bpmn:sequenceFlow id="Flow_1bna5ux" sourceRef="Activity_1eqvjq0" targetRef="Activity_0tbm399" /><bpmn:serviceTask id="Activity_0s33ryk" name="Ищем валюту"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "instrument", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "61bae8891d28f2090eb77d32", 
"attributes.three_char_code": "${CcyCode}"
},
"projection": { 		"primaryId": 1,  "attributes.three_char_code": 1,
"attributes.char_code_cyrrency": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Ccy_primaryId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].primaryId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyCcy"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="char_code_cyrrency"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.char_code_cyrrency
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1vclijt</bpmn:incoming><bpmn:outgoing>Flow_1orxr1o</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1orxr1o" sourceRef="Activity_0s33ryk" targetRef="Gateway_0gib4u6" /><bpmn:exclusiveGateway id="Gateway_0gib4u6" default="Flow_0pf4828"><bpmn:incoming>Flow_1orxr1o</bpmn:incoming><bpmn:outgoing>Flow_0pf4828</bpmn:outgoing><bpmn:outgoing>Flow_0nr2pg7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0pf4828" sourceRef="Gateway_0gib4u6" targetRef="Activity_0qolpfx" /><bpmn:sequenceFlow id="Flow_0nr2pg7" sourceRef="Gateway_0gib4u6" targetRef="Activity_0vcyise"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyCcy == true || char_code_cyrrency == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0md8yur" name="Ищем ответ на  вопрос в базе ответов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6130f7c6687006695cd45b8c", 
"attributes.QuestionnairesType": "${QuestionnairesType}", 
"attributes.LinkedQuestionnaireNumber": "${QuestionnairesNumber}", 
"attributes.QuestionNumber": "${Q_QuestionNumber}", 
"attributes.AnswerNumber": "${Q_Answer}" 
},
"projection": { 		"_id": 1,
"attributes.Answer":1  	}
}</camunda:inputParameter><camunda:outputParameter name="AnswerId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Answer1"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Answer
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_196enl9</bpmn:incoming><bpmn:outgoing>Flow_063q00a</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_063q00a" sourceRef="Activity_0md8yur" targetRef="Gateway_0i71u3u" /><bpmn:serviceTask id="Activity_1yt9lai" name="Ищем ответ на  вопрос в базе ответов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6130f7c6687006695cd45b8c", 
"attributes.QuestionnairesType": "${QuestionnairesType}", 
"attributes.LinkedQuestionnaireNumber": "${QuestionnairesNumber}", 
"attributes.QuestionNumber": "${Q_QuestionNumber}", 
"attributes.AnswerNumber": "${Q_Answer}" 
},
"projection": { 		"_id": 1,
"attributes.Answer":1  	}
}</camunda:inputParameter><camunda:outputParameter name="AnswerId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Answer1"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Answer
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0e4amoo</bpmn:incoming><bpmn:outgoing>Flow_1iu26me</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1iu26me" sourceRef="Activity_1yt9lai" targetRef="Gateway_0b9ax5r" /><bpmn:scriptTask id="Activity_1z0tja3" name="увеличиваем значение номера ответа j" scriptFormat="javascript" camunda:resultVariable="j"><bpmn:incoming>Flow_149jvcr</bpmn:incoming><bpmn:incoming>Flow_19n7k78</bpmn:incoming><bpmn:incoming>Flow_1yio11i</bpmn:incoming><bpmn:incoming>Flow_06c6w21</bpmn:incoming><bpmn:incoming>Flow_0xuo6fm</bpmn:incoming><bpmn:incoming>Flow_0bt0gdr</bpmn:incoming><bpmn:incoming>Flow_1nur3mc</bpmn:incoming><bpmn:incoming>Flow_0ww4eak</bpmn:incoming><bpmn:incoming>Flow_1lqaixv</bpmn:incoming><bpmn:incoming>Flow_0rk2vk8</bpmn:incoming><bpmn:outgoing>Flow_0g1iufh</bpmn:outgoing><bpmn:script>Math.round(+j+1)</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1bd77as" default="Flow_1vecv2u"><bpmn:incoming>Flow_0g1iufh</bpmn:incoming><bpmn:outgoing>Flow_14ipuq1</bpmn:outgoing><bpmn:outgoing>Flow_1vecv2u</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0g1iufh" sourceRef="Activity_1z0tja3" targetRef="Gateway_1bd77as" /><bpmn:sequenceFlow id="Flow_14ipuq1" sourceRef="Gateway_1bd77as" targetRef="Activity_1g0ojrb"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${j &lt; nQty}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0y1touy" default="Flow_1x9k0kh"><bpmn:incoming>Flow_1vecv2u</bpmn:incoming><bpmn:outgoing>Flow_11p2hyf</bpmn:outgoing><bpmn:outgoing>Flow_1x9k0kh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1vecv2u" sourceRef="Gateway_1bd77as" targetRef="Gateway_0y1touy" /><bpmn:serviceTask id="Activity_1l1k2jh" name="Установка статуса &#34;Не все ответы даны&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+все+ответы+даны</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11p2hyf</bpmn:incoming><bpmn:outgoing>Flow_0ovwd9l</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_11p2hyf" sourceRef="Gateway_0y1touy" targetRef="Activity_1l1k2jh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${f_FIN_GOAL == false || f_FIN_GOAL_PROPERTY_OBLIGATION == false || f_FFIN_GOAL_SALE_ASSETS == false || f_FIN_GOAL_CURRENCY == null || f_FIN_GOAL_INITIAL_INVESTMENT_SUM == false || f_FIN_GOAL_REGULAR_REPLENISHMENT == false || f_FIN_GOAL_REGULAR_REPLENISHMENT_SUM == false || f_FIN_GOAL_INVESTMENT_PERIOD == false || f_FIN_GOAL_RISK_CATEGORY == false || f_FIN_GOAL_CALCULATION_RESULT == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ovwd9l" sourceRef="Activity_1l1k2jh" targetRef="Activity_1u5g3mr" /><bpmn:serviceTask id="Activity_0opp9st" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("FIN_GOAL", FIN_GOAL)
.prop("FIN_GOAL_PROPERTY_OBLIGATION", FIN_GOAL_PROPERTY_OBLIGATION)
.prop("FIN_GOAL_SALE_ASSETS", FIN_GOAL_SALE_ASSETS)
.prop("FIN_GOAL_CURRENCY", FIN_GOAL_CURRENCY)
.prop("CcySymbolCode", char_code_cyrrency)
.prop("three_char_code", CcyCode)
.prop("FIN_GOAL_INITIAL_INVESTMENT_SUM", FIN_GOAL_INITIAL_INVESTMENT_SUM)
.prop("FIN_GOAL_REGULAR_REPLENISHMENT", FIN_GOAL_REGULAR_REPLENISHMENT)
.prop("FIN_GOAL_REGULAR_REPLENISHMENT_SUM", FIN_GOAL_REGULAR_REPLENISHMENT_SUM)
.prop("FIN_GOAL_INVESTMENT_PERIOD", FIN_GOAL_INVESTMENT_PERIOD)
.prop("FIN_GOAL_RISK_CATEGORY", FIN_GOAL_RISK_CATEGORY)
.prop("FIN_GOAL_CALCULATION_RESULT", FIN_GOAL_CALCULATION_RESULT)
.prop("ProcessStep", "2")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1x9k0kh</bpmn:incoming><bpmn:outgoing>Flow_1mxnr9r</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1x9k0kh" sourceRef="Gateway_0y1touy" targetRef="Activity_0opp9st" /><bpmn:sequenceFlow id="Flow_1mxnr9r" sourceRef="Activity_0opp9st" targetRef="Activity_0p3ue08" /><bpmn:sequenceFlow id="Flow_0mmpzpo" sourceRef="Activity_087s54j" targetRef="Event_1oiupiu" /><bpmn:scriptTask id="Activity_1fhpu24" name="Риск-профиль в виде числа" scriptFormat="javascript" camunda:resultVariable="RiskProfileValue"><bpmn:incoming>Flow_0kmyjxs</bpmn:incoming><bpmn:outgoing>Flow_1xbe3uv</bpmn:outgoing><bpmn:script>Math.round(Number(FIN_GOAL_RISK_CATEGORY))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1xbe3uv" sourceRef="Activity_1fhpu24" targetRef="Activity_13my4cc" /><bpmn:scriptTask id="Activity_1u919zu" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL"><bpmn:incoming>Flow_08f1mkx</bpmn:incoming><bpmn:outgoing>Flow_149jvcr</bpmn:outgoing><bpmn:script>Answer1</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_0ja5gbt" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_PROPERTY_OBLIGATION"><bpmn:incoming>Flow_0a40nyk</bpmn:incoming><bpmn:outgoing>Flow_19n7k78</bpmn:outgoing><bpmn:script>Q_Answer_Num</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_10g2ib8" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_SALE_ASSETS"><bpmn:incoming>Flow_02bpoqq</bpmn:incoming><bpmn:outgoing>Flow_1yio11i</bpmn:outgoing><bpmn:script>Answer1</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1drms6m" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_CURRENCY"><bpmn:incoming>Flow_1ygv3v2</bpmn:incoming><bpmn:outgoing>Flow_0rk2vk8</bpmn:outgoing><bpmn:script>Answer1</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1ygv3v2" sourceRef="Activity_0qolpfx" targetRef="Activity_1drms6m" /><bpmn:sequenceFlow id="Flow_0rk2vk8" sourceRef="Activity_1drms6m" targetRef="Activity_1z0tja3" /><bpmn:sequenceFlow id="Flow_149jvcr" sourceRef="Activity_1u919zu" targetRef="Activity_1z0tja3" /><bpmn:sequenceFlow id="Flow_19n7k78" sourceRef="Activity_0ja5gbt" targetRef="Activity_1z0tja3" /><bpmn:sequenceFlow id="Flow_1yio11i" sourceRef="Activity_10g2ib8" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_0tbm399" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_INITIAL_INVESTMENT_SUM"><bpmn:incoming>Flow_1bna5ux</bpmn:incoming><bpmn:outgoing>Flow_06c6w21</bpmn:outgoing><bpmn:script>Q_Answer_Num</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_06c6w21" sourceRef="Activity_0tbm399" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_1jduj7r" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_REGULAR_REPLENISHMENT"><bpmn:incoming>Flow_1q3exjm</bpmn:incoming><bpmn:outgoing>Flow_0xuo6fm</bpmn:outgoing><bpmn:script>Answer1</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0xuo6fm" sourceRef="Activity_1jduj7r" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_0jk0d40" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_REGULAR_REPLENISHMENT_SUM"><bpmn:incoming>Flow_1xi9hey</bpmn:incoming><bpmn:outgoing>Flow_0bt0gdr</bpmn:outgoing><bpmn:script>Q_Answer_Num</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0bt0gdr" sourceRef="Activity_0jk0d40" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_1b16tly" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_INVESTMENT_PERIOD"><bpmn:incoming>Flow_1bvzpax</bpmn:incoming><bpmn:outgoing>Flow_1nur3mc</bpmn:outgoing><bpmn:script>Q_Answer_Str</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1nur3mc" sourceRef="Activity_1b16tly" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_0006x3j" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_RISK_CATEGORY"><bpmn:incoming>Flow_160umgb</bpmn:incoming><bpmn:outgoing>Flow_0ww4eak</bpmn:outgoing><bpmn:script>Q_Answer</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0ww4eak" sourceRef="Activity_0006x3j" targetRef="Activity_1z0tja3" /><bpmn:scriptTask id="Activity_0m7jpn0" name="Значение переменной" scriptFormat="javascript" camunda:resultVariable="FIN_GOAL_CALCULATION_RESULT"><bpmn:incoming>Flow_0p0a39g</bpmn:incoming><bpmn:outgoing>Flow_1lqaixv</bpmn:outgoing><bpmn:script>Q_Answer_Num</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1lqaixv" sourceRef="Activity_0m7jpn0" targetRef="Activity_1z0tja3" /><bpmn:serviceTask id="Activity_0n4zeqr" name="Получаем результат запроса AnketaFG"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.status = "SUCCESS"
} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qit2b9</bpmn:incoming><bpmn:incoming>Flow_0ymheky</bpmn:incoming><bpmn:outgoing>Flow_0zd8ik7</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1ailazu" name="Приводим ответ к формату табличных блоков" scriptFormat="javascript" camunda:resultVariable="result"><bpmn:incoming>Flow_1jz6oe6</bpmn:incoming><bpmn:outgoing>Flow_085v3dc</bpmn:outgoing><bpmn:script>var anws = JSON.parse(answers);

var q = new Object();
var q_anwsers = [];
var q_quest = [];

var q1 = null;
var q2 = null;
var q3 = null;
var q4 = null;
var q5 = null;
var q6 = null;
var q7 = null;
var q8 = null;
var q9 = null;
var q10 = null;
try {
	for (var i = 0; i &lt; anws.length; i++) {
		var anw = anws[i];

		if (anw["question"]["attributes"]["QuestionNumber"] == '1') {
			if (q1 == null) {
				q1 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
				q_quest.push(q_question);			

			}				
			var q_ans1 = new Object();
			q_ans1.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];
			q_ans1.AnswerNumber = anw["answer"]["attributes"]["AnswerNumber"];
			q_ans1.Answer = anw["answer"]["attributes"]["Answer"];
			q_ans1.Note = anw["answer"]["attributes"]["Note"]; 
			q_anwsers.push(q_ans1);			
		}

		if (anw["question"]["attributes"]["QuestionNumber"] == '2' ) {
			if (q2 == null) {
				q2 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
			q_quest.push(q_question);			
			}
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '3') {
			if (q3 == null) {
				q3 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
			q_quest.push(q_question);			
			}				
			var q_ans1 = new Object();
			q_ans1.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];
			q_ans1.AnswerNumber = anw["answer"]["attributes"]["AnswerNumber"];
			q_ans1.Answer = anw["answer"]["attributes"]["Answer"];
			q_ans1.Note = anw["answer"]["attributes"]["Note"]; 
			q_anwsers.push(q_ans1);			
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '4' ) {
			if (q4 == null) {
				q4 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
			q_quest.push(q_question);			
			}
			var q_ans1 = new Object();
			q_ans1.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];
			q_ans1.AnswerNumber = anw["answer"]["attributes"]["AnswerNumber"];
			q_ans1.Answer = anw["answer"]["attributes"]["Answer"];
			q_ans1.Note = anw["answer"]["attributes"]["Note"]; 
			q_anwsers.push(q_ans1);			
			}
		if (anw["question"]["attributes"]["QuestionNumber"] == '5' ) {
			if (q5 == null) {
				q5 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
			q_quest.push(q_question);			
			}
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '6' ) {
			if (q6 == null) {
				q6 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
				q_quest.push(q_question);			
			}
			var q_ans1 = new Object();
			q_ans1.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];
			q_ans1.AnswerNumber = anw["answer"]["attributes"]["AnswerNumber"];
			q_ans1.Answer = anw["answer"]["attributes"]["Answer"];
			q_ans1.Note = anw["answer"]["attributes"]["Note"]; 
			q_anwsers.push(q_ans1);			
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '7' ) {
			if (q7 == null) {
				q7 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
				q_quest.push(q_question);			
			}
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '8' ) {
			if (q8 == null) {
				q8 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
			q_quest.push(q_question);			
			}
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '9' ) {
			if (q9 == null) {
				q9 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
				q_quest.push(q_question);			
			}
			var q_ans1 = new Object();
			q_ans1.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];
			q_ans1.AnswerNumber = anw["answer"]["attributes"]["AnswerNumber"];
			q_ans1.Answer = anw["answer"]["attributes"]["Answer"];
			q_ans1.Note = anw["answer"]["attributes"]["Note"]; 
			q_anwsers.push(q_ans1);			
		}
		if (anw["question"]["attributes"]["QuestionNumber"] == '10' ) {
			if (q10 == null) {
				q10 = 1;
			            var q_question = new Object();
				q_question.Q_QuestionNumber = anw["question"]["attributes"]["QuestionNumber"];			
				q_question.Q_AnswerType = anw["question"]["attributes"]["AnswerType"];				
				q_question.Q_QuestionCode = anw["question"]["attributes"]["CodeQuestion"];
				q_question.Q_Question = anw["question"]["attributes"]["Question"];
				q_question.Q_MultipleChoiceAnswer = anw["question"]["attributes"]["MultipleChoiceAnswer"];
				q_quest.push(q_question);			
			}
		}
}

} catch (e)
{
		JSON.stringify([]);
}

q.Questions = q_quest; 
q.Q_Answers= q_anwsers; 

JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_085v3dc" sourceRef="Activity_1ailazu" targetRef="Activity_031hqc9" /><bpmn:sequenceFlow id="Flow_0zd8ik7" sourceRef="Activity_0n4zeqr" targetRef="Activity_11sak0v" /><bpmn:serviceTask id="Activity_0dz7kt2" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AnswerDateTime", AnswerDateTime)
.prop("ResultDateTime", ResultDateTime)
.prop("RiskProfileNumber", RiskProfileValue)
.prop("RiskProfileName", RiskProfileName)
.prop("InvestmentHorizon", FIN_GOAL_INVESTMENT_PERIOD)
.prop("ExpectedYield", ExpectedYield)
.prop("RiskEstimated", RiskEstimated)
.prop("AllowRisk", AllowRisk)
.prop("MP_RP_compliance", false)
.prop("Message", "Модельный портфель не соответствует финансовым целям")
.prop("NextProcessButtons", ["SIGN", "NOT_SIGN"])
.prop("ProcessStep", "2")
.prop("Currency", three_char_code)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qu4mqy</bpmn:incoming><bpmn:outgoing>Flow_014dl68</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_014dl68" sourceRef="Activity_0dz7kt2" targetRef="Activity_1qnnp13" /><bpmn:scriptTask id="Activity_0p3ue08" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="AnswerDateTime"><bpmn:incoming>Flow_1mxnr9r</bpmn:incoming><bpmn:outgoing>Flow_1byc2j5</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1byc2j5" sourceRef="Activity_0p3ue08" targetRef="Activity_1ky81ah" /><bpmn:scriptTask id="Activity_0tu4kqm" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:incoming>Flow_1mlqv0q</bpmn:incoming><bpmn:outgoing>Flow_15i1kjj</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1vnxlrf" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AnswerDateTime", AnswerDateTime)
.prop("ResultDateTime", ResultDateTime)
.prop("FIN_GOAL_ACHIEVE_DATE", FIN_GOAL_ACHIEVE_DATE)
.prop("RiskProfileNumber", RiskProfileValue)
.prop("RiskProfileName", RiskProfileName)
.prop("InvestmentHorizon", FIN_GOAL_INVESTMENT_PERIOD)
.prop("ExpectedYield", ExpectedYield)
.prop("RiskEstimated", RiskEstimated)
.prop("AllowRisk", AllowRisk)
.prop("MP_RP_compliance", true)
.prop("Message", " ")
.prop("ProcessStep", "3")
.prop("Currency", three_char_code)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hsd410</bpmn:incoming><bpmn:incoming>Flow_0v3bx4e</bpmn:incoming><bpmn:incoming>Flow_0es5piz</bpmn:incoming><bpmn:outgoing>Flow_0mj3jhf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0mj3jhf" sourceRef="Activity_1vnxlrf" targetRef="Activity_0jj12wf" /><bpmn:serviceTask id="Activity_1dwpta6" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("MP_RP_compliance", false)
.prop("Message", "Модельный портфель не соответствует финансовым целям")
.prop("ProcessStep", "3")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0lhi8zq</bpmn:incoming><bpmn:outgoing>Flow_1bl07ky</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1bl07ky" sourceRef="Activity_1dwpta6" targetRef="Activity_119dpzh" /><bpmn:sequenceFlow id="Flow_0za741n" name="Шаг 3 (ожидание согласоания)" sourceRef="Gateway_1pnv0y0" targetRef="Activity_119dpzh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == "3"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0go2wez" default="Flow_1mracbs"><bpmn:incoming>Flow_147f80q</bpmn:incoming><bpmn:outgoing>Flow_1mracbs</bpmn:outgoing><bpmn:outgoing>Flow_19nfvck</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1mracbs" sourceRef="Gateway_0go2wez" targetRef="Gateway_1pnv0y0" /><bpmn:sequenceFlow id="Flow_0vx9xnt" sourceRef="Gateway_1pnv0y0" targetRef="Activity_123iofn" /><bpmn:sequenceFlow id="Flow_19nfvck" name="Не заполнены параметры" sourceRef="Gateway_0go2wez" targetRef="Activity_123iofn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == null || ResultDateTime == null || RiskProfileValue == null || ExpectedYield == null || RiskEstimated == null || AllowRisk == null || FIN_GOAL_INVESTMENT_PERIOD == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0cmdtzl" name="Получаем  параметры клиентского портфеля"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${Portfolio_refid}/getAttributes?systemName=mp_mp&amp;systemName=ModelPersPortfolio&amp;systemName=GuideSteps&amp;systemName=enablingAccountDateTime&amp;systemName=objectId&amp;systemName=ResultDateTimeGoal</camunda:inputParameter><camunda:outputParameter name="PrevResultDateTime"><camunda:script scriptFormat="javascript">JSON.parse(response).ResultDateTimeGoal</camunda:script></camunda:outputParameter><camunda:outputParameter name="PrevenablingAccountDateTime"><camunda:script scriptFormat="javascript">JSON.parse(response).enablingAccountDateTime</camunda:script></camunda:outputParameter><camunda:outputParameter name="PrevAnketaId"><camunda:script scriptFormat="javascript">JSON.parse(response).objectId</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_mp"><camunda:script scriptFormat="javascript">JSON.parse(response).mp_mp</camunda:script></camunda:outputParameter><camunda:outputParameter name="ModelPersPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).ModelPersPortfolio</camunda:script></camunda:outputParameter><camunda:outputParameter name="GuideSteps"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps")
} catch(e) {
throw new org.camunda.bpm.engine.delegate.BpmnError("IT_EXCEPTION",e);
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TestLength"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps").elements().size()
} catch(e) {
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1cr4uli</bpmn:incoming><bpmn:incoming>Flow_1n1ccp9</bpmn:incoming><bpmn:outgoing>Flow_1jz6oe6</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0rsv0ff" default="Flow_1cr4uli"><bpmn:incoming>Flow_0i9kyqx</bpmn:incoming><bpmn:outgoing>Flow_1cr4uli</bpmn:outgoing><bpmn:outgoing>Flow_082s379</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1cr4uli" sourceRef="Gateway_0rsv0ff" targetRef="Activity_0cmdtzl" /><bpmn:sequenceFlow id="Flow_1jz6oe6" sourceRef="Activity_0cmdtzl" targetRef="Activity_1ailazu" /><bpmn:serviceTask id="Activity_1x13wjq" name="Ищем клиентский портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6167d4df7ef9df0776685460", 
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="Portfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_082s379</bpmn:incoming><bpmn:outgoing>Flow_0dgmrfn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_082s379" sourceRef="Gateway_0rsv0ff" targetRef="Activity_1x13wjq"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_00kragb" default="Flow_1n1ccp9"><bpmn:incoming>Flow_0dgmrfn</bpmn:incoming><bpmn:outgoing>Flow_1n1ccp9</bpmn:outgoing><bpmn:outgoing>Flow_18qelxg</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0dgmrfn" sourceRef="Activity_1x13wjq" targetRef="Gateway_00kragb" /><bpmn:sequenceFlow id="Flow_1n1ccp9" sourceRef="Gateway_00kragb" targetRef="Activity_0cmdtzl" /><bpmn:serviceTask id="Activity_0b6g1gp" name="Установка статуса &#34;Ошибка: не найден клиентский портфель&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найден+клиентский+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18qelxg</bpmn:incoming><bpmn:outgoing>Flow_1g492rn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0j7a9ll" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xf1jn7</bpmn:incoming><bpmn:outgoing>Flow_1eg5s6x</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_03am7r1"><bpmn:incoming>Flow_1eg5s6x</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1g492rn" sourceRef="Activity_0b6g1gp" targetRef="Activity_1brotij" /><bpmn:sequenceFlow id="Flow_1eg5s6x" sourceRef="Activity_0j7a9ll" targetRef="Event_03am7r1" /><bpmn:sequenceFlow id="Flow_18qelxg" sourceRef="Gateway_00kragb" targetRef="Activity_0b6g1gp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1jn47m4" name="Установка статуса &#34;Модельный портфель не соответствует финансовым целям&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Модельный+портфель+не+соответствует+финансовым+целям</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1oe5fr8</bpmn:incoming><bpmn:outgoing>Flow_10563ik</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_10563ik" sourceRef="Activity_1jn47m4" targetRef="Activity_1qnnp13" /><bpmn:exclusiveGateway id="Gateway_0tqpe1v" default="Flow_1inkqy6"><bpmn:incoming>Flow_090rcop</bpmn:incoming><bpmn:outgoing>Flow_1inkqy6</bpmn:outgoing><bpmn:outgoing>Flow_02teu0h</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1inkqy6" sourceRef="Gateway_0tqpe1v" targetRef="Activity_1evmjw9" /><bpmn:sequenceFlow id="Flow_02teu0h" name="Подписана" sourceRef="Gateway_0tqpe1v" targetRef="Activity_1wshbg7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsSigned == 'true'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0dmfff1" default="Flow_1elbwnh"><bpmn:incoming>Flow_1s7chuq</bpmn:incoming><bpmn:outgoing>Flow_00dp544</bpmn:outgoing><bpmn:outgoing>Flow_1elbwnh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1evmjw9" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=ProcessStep&amp;systemName=ResultDateTime&amp;systemName=RiskProfileNumber&amp;systemName=ExpectedYield&amp;systemName=RiskEstimated&amp;systemName=AllowRisk&amp;systemName=FIN_GOAL_INVESTMENT_PERIOD&amp;systemName=MP_RP_compliance</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ProcessStep"><camunda:script scriptFormat="javascript">JSON.parse(response).ProcessStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="ResultDateTime"><camunda:script scriptFormat="javascript">JSON.parse(response).ResultDateTime</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskProfileValue"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskProfileNumber</camunda:script></camunda:outputParameter><camunda:outputParameter name="ExpectedYield"><camunda:script scriptFormat="javascript">JSON.parse(response).ExpectedYield</camunda:script></camunda:outputParameter><camunda:outputParameter name="RiskEstimated"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskEstimated</camunda:script></camunda:outputParameter><camunda:outputParameter name="AllowRisk"><camunda:script scriptFormat="javascript">JSON.parse(response).AllowRisk</camunda:script></camunda:outputParameter><camunda:outputParameter name="FIN_GOAL_INVESTMENT_PERIOD"><camunda:script scriptFormat="javascript">JSON.parse(response).FIN_GOAL_INVESTMENT_PERIOD</camunda:script></camunda:outputParameter><camunda:outputParameter name="Compare"><camunda:script scriptFormat="javascript">JSON.parse(response).MP_RP_compliance</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1inkqy6</bpmn:incoming><bpmn:outgoing>Flow_1s7chuq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1s7chuq" sourceRef="Activity_1evmjw9" targetRef="Gateway_0dmfff1" /><bpmn:sequenceFlow id="Flow_00dp544" sourceRef="Gateway_0dmfff1" targetRef="Activity_1qnnp13"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == "2"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1elbwnh" sourceRef="Gateway_0dmfff1" targetRef="Activity_0u2w8h7" /><bpmn:endEvent id="Event_02mf4wu"><bpmn:incoming>Flow_1hs04qj</bpmn:incoming></bpmn:endEvent><bpmn:endEvent id="Event_06czsl7"><bpmn:incoming>Flow_0e1nr9n</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0jj12wf" name="Соответствие = true" camunda:expression="true" camunda:resultVariable="Compare"><bpmn:incoming>Flow_0mj3jhf</bpmn:incoming><bpmn:outgoing>Flow_0x3l9lc</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0x3l9lc" sourceRef="Activity_0jj12wf" targetRef="Activity_06p9dra" /><bpmn:serviceTask id="Activity_1p2oi1g" name="Соответствие = false" camunda:expression="false" camunda:resultVariable="Compare"><bpmn:incoming>Flow_0v2kl2n</bpmn:incoming><bpmn:outgoing>Flow_0lhi8zq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0lhi8zq" sourceRef="Activity_1p2oi1g" targetRef="Activity_1dwpta6" /><bpmn:sequenceFlow id="Flow_0twe2ov" sourceRef="Activity_09inhq6" targetRef="Gateway_1edqgy8" /><bpmn:scriptTask id="Activity_09inhq6" name="Считаем дату достижения целей" scriptFormat="JavaScript"><bpmn:incoming>Flow_15i1kjj</bpmn:incoming><bpmn:outgoing>Flow_0twe2ov</bpmn:outgoing><bpmn:script>var res = FIN_GOAL_INVESTMENT_PERIOD.split(",");var resultDate = new Date(ResultDateTime);if(res.length == 2){ resultDate.setFullYear(resultDate.getFullYear()+Number(res[0])); resultDate.setMonth(Number(resultDate.getMonth())+Number(res[1]));}else if(res.length == 1){ resultDate.setFullYear(resultDate.getFullYear()+Number(res[0]));}var FIN_GOAL_ACHIEVE_DATE = ("0" + (resultDate.getMonth() + 1)).slice(-2)+ "." + resultDate.getFullYear();execution.setVariable("FIN_GOAL_ACHIEVE_DATE",FIN_GOAL_ACHIEVE_DATE);</bpmn:script></bpmn:scriptTask><bpmn:userTask id="Activity_0v2ms5w" name="Кнопка2" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Sign&#34;, &#34;label&#34;: &#34;Кнопка2&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements></bpmn:userTask><bpmn:sequenceFlow id="Flow_15i1kjj" sourceRef="Activity_0tu4kqm" targetRef="Activity_09inhq6" /><bpmn:startEvent id="Event_0107pn5"><bpmn:outgoing>Flow_1dlh9c3</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Activity_08lwkba" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=QuestionnairesType&amp;systemName=QuestionnairesNumber&amp;systemName=cifID&amp;systemName=QuestionsQuantity&amp;systemName=brokerageAccountID</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="QuestionnairesNumber"><camunda:script scriptFormat="javascript">JSON.parse(response).QuestionnairesNumber</camunda:script></camunda:outputParameter><camunda:outputParameter name="QuestionnairesType"><camunda:script scriptFormat="javascript">JSON.parse(response).QuestionnairesType</camunda:script></camunda:outputParameter><camunda:outputParameter name="CIF"><camunda:script scriptFormat="javascript">JSON.parse(response).cifID</camunda:script></camunda:outputParameter><camunda:outputParameter name="QuestionsQuantity"><camunda:script scriptFormat="javascript">JSON.parse(response).QuestionsQuantity</camunda:script></camunda:outputParameter><camunda:outputParameter name="brokerageAccountID"><camunda:script scriptFormat="javascript">JSON.parse(response).brokerageAccountID</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dlbxk3</bpmn:incoming><bpmn:incoming>Flow_0p29n07</bpmn:incoming><bpmn:outgoing>Flow_1b5t4ny</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ewvetz" default="Flow_180w3b6"><bpmn:incoming>Flow_0y55upr</bpmn:incoming><bpmn:outgoing>Flow_180w3b6</bpmn:outgoing><bpmn:outgoing>Flow_18cp3hw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_12qzo4j" name="Установка статуса &#34;Ошибка поиска анкеты&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+поиска+анкеты</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18cp3hw</bpmn:incoming><bpmn:outgoing>Flow_09pfwze</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1icflpo" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ob8djd</bpmn:incoming><bpmn:outgoing>Flow_0n5thyk</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1b6vf6r"><bpmn:incoming>Flow_0n5thyk</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1wov8bw" name="Получаем название анкеты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${QuestionnaireVersion_refid}/getAttributes?systemName=QuestionnairesName</camunda:inputParameter><camunda:outputParameter name="QuestionnairesName"><camunda:script scriptFormat="javascript">JSON.parse(response).QuestionnairesName</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_180w3b6</bpmn:incoming><bpmn:outgoing>Flow_123mx2f</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_14qn6ae" name="Получаем варианты ответов"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/anketaGoal</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"QuestionnairesNumber": "${QuestionnairesNumber}",
	"QuestionnairesType": "${QuestionnairesType}",
	"qty":5
}</camunda:inputParameter><camunda:outputParameter name="answers"><camunda:script scriptFormat="javascript">try{
S(response).prop("cursor").prop("firstBatch")
} catch(e) {
throw new org.camunda.bpm.engine.delegate.BpmnError("IT_EXCEPTION",e);
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_123mx2f</bpmn:incoming><bpmn:outgoing>Flow_0i9kyqx</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0xcsyg3" default="Flow_1maflx4"><bpmn:incoming>Flow_1b5t4ny</bpmn:incoming><bpmn:outgoing>Flow_1maflx4</bpmn:outgoing><bpmn:outgoing>Flow_0l642dk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1u71wrl" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1slsmdt</bpmn:incoming><bpmn:outgoing>Flow_14828c5</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0mggzd9"><bpmn:incoming>Flow_14828c5</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0ngd02e" name="Ищем клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="ClientId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1maflx4</bpmn:incoming><bpmn:outgoing>Flow_1tyigil</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1vjc4xe" default="Flow_0plbd3l"><bpmn:incoming>Flow_1tyigil</bpmn:incoming><bpmn:outgoing>Flow_1rnj5i8</bpmn:outgoing><bpmn:outgoing>Flow_0plbd3l</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0rzfnyu" name="Ищем анкету"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "619631587f006d3781cbda5c", 
"attributes.QuestionnairesNumber": "${QuestionnairesNumber}",
"attributes.QuestionnairesType": "${QuestionnairesType}"
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="QuestionnaireVersion_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1h3qr4o</bpmn:incoming><bpmn:outgoing>Flow_0y55upr</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0y5zznb" name="Ищем клиентский портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6167d4df7ef9df0776685460", 
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Portfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0sk1zx7</bpmn:incoming><bpmn:outgoing>Flow_0gtshy3</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1qcfmp4" default="Flow_0ihiu00"><bpmn:incoming>Flow_0gtshy3</bpmn:incoming><bpmn:outgoing>Flow_0ihiu00</bpmn:outgoing><bpmn:outgoing>Flow_1woxurr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0zzzchk" name="Установка статуса &#34;Ошибка - не заполнен CIF или ID счета&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+заполнен+CIF+или+ID+счета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0l642dk</bpmn:incoming><bpmn:outgoing>Flow_10dz3zz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1i8tusj" name="Установка статуса &#34;Ошибка: не найден клиент&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найден+клиент</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rnj5i8</bpmn:incoming><bpmn:outgoing>Flow_02ct7cy</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1x6oo15" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_16zknjm</bpmn:incoming><bpmn:outgoing>Flow_0emgjsv</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0i34ctx"><bpmn:incoming>Flow_0emgjsv</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0jd1kmp" name="Получаем риск-профиль клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/individual/${ClientId}/getAttributes?systemName=RiskProfileNumber</camunda:inputParameter><camunda:outputParameter name="RiskProfileNumber"><camunda:script scriptFormat="javascript">JSON.parse(response).RiskProfileNumber</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0plbd3l</bpmn:incoming><bpmn:outgoing>Flow_0y0s1wg</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0dl3q7b" default="Flow_1lf6hb6"><bpmn:incoming>Flow_0y0s1wg</bpmn:incoming><bpmn:outgoing>Flow_1lf6hb6</bpmn:outgoing><bpmn:outgoing>Flow_0g8ffqw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1ezmn5e" name="Установка статуса &#34;Ошибка: не найден риск-профиль&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найден+риск+профиль</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0g8ffqw</bpmn:incoming><bpmn:incoming>Flow_19yz4ma</bpmn:incoming><bpmn:outgoing>Flow_0e8kzmz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0tf1xys" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1m3r72o</bpmn:incoming><bpmn:outgoing>Flow_1vnik1y</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_02o657y"><bpmn:incoming>Flow_1vnik1y</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_09xl67p" name="Ищем риск-профиль"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "613ee7ec687006695cd4a171", 
"attributes.RiskProfileNumber": ${RiskProfileNumber}
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="RiskProfile_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyRiskProfile"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1lf6hb6</bpmn:incoming><bpmn:outgoing>Flow_098f6wj</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1g82req" default="Flow_0sk1zx7"><bpmn:incoming>Flow_098f6wj</bpmn:incoming><bpmn:outgoing>Flow_0sk1zx7</bpmn:outgoing><bpmn:outgoing>Flow_19yz4ma</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_19wxxcq" name="Признак редактирования анкеты = false" camunda:expression="false" camunda:resultVariable="IsEdit"><bpmn:incoming>Flow_154k22i</bpmn:incoming><bpmn:outgoing>Flow_0p29n07</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_03lwdxk" name="Ветка таймера = true" camunda:expression="true" camunda:resultVariable="IsTimer"><bpmn:incoming>Flow_1dlh9c3</bpmn:incoming><bpmn:outgoing>Flow_154k22i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ga37b7" name="Установка статуса &#34;Ошибка: не найден клиентский портфель&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка:+Не+найден+клиентский+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1woxurr</bpmn:incoming><bpmn:outgoing>Flow_09ls36f</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1e9qo1x" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Не найден клиентский портфель")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09ls36f</bpmn:incoming><bpmn:outgoing>Flow_146860e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0gymev7" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не найден клиентский портфель"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_146860e</bpmn:incoming><bpmn:outgoing>Flow_07vr12w</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0c9sxep" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07vr12w</bpmn:incoming><bpmn:outgoing>Flow_1e0pr2b</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0mh7feq"><bpmn:incoming>Flow_1e0pr2b</bpmn:incoming></bpmn:endEvent><bpmn:boundaryEvent id="Event_01b6hfj" attachedToRef="Activity_14qn6ae"><bpmn:outgoing>Flow_0dlbxk3</bpmn:outgoing><bpmn:errorEventDefinition id="ErrorEventDefinition_0x0gxuw" /></bpmn:boundaryEvent><bpmn:sequenceFlow id="Flow_1dlh9c3" sourceRef="Event_0107pn5" targetRef="Activity_03lwdxk" /><bpmn:sequenceFlow id="Flow_0dlbxk3" sourceRef="Event_01b6hfj" targetRef="Activity_08lwkba" /><bpmn:sequenceFlow id="Flow_0p29n07" sourceRef="Activity_19wxxcq" targetRef="Activity_08lwkba" /><bpmn:sequenceFlow id="Flow_1b5t4ny" sourceRef="Activity_08lwkba" targetRef="Gateway_0xcsyg3" /><bpmn:sequenceFlow id="Flow_0y55upr" sourceRef="Activity_0rzfnyu" targetRef="Gateway_0ewvetz" /><bpmn:sequenceFlow id="Flow_180w3b6" sourceRef="Gateway_0ewvetz" targetRef="Activity_1wov8bw" /><bpmn:sequenceFlow id="Flow_18cp3hw" sourceRef="Gateway_0ewvetz" targetRef="Activity_12qzo4j"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_09pfwze" sourceRef="Activity_12qzo4j" targetRef="Activity_1qqomyr" /><bpmn:sequenceFlow id="Flow_0n5thyk" sourceRef="Activity_1icflpo" targetRef="Event_1b6vf6r" /><bpmn:sequenceFlow id="Flow_123mx2f" sourceRef="Activity_1wov8bw" targetRef="Activity_14qn6ae" /><bpmn:sequenceFlow id="Flow_1maflx4" sourceRef="Gateway_0xcsyg3" targetRef="Activity_0ngd02e" /><bpmn:sequenceFlow id="Flow_0l642dk" sourceRef="Gateway_0xcsyg3" targetRef="Activity_0zzzchk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${CIF== null || brokerageAccountID == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_10dz3zz" sourceRef="Activity_0zzzchk" targetRef="Activity_05ltu6j" /><bpmn:sequenceFlow id="Flow_14828c5" sourceRef="Activity_1u71wrl" targetRef="Event_0mggzd9" /><bpmn:sequenceFlow id="Flow_1tyigil" sourceRef="Activity_0ngd02e" targetRef="Gateway_1vjc4xe" /><bpmn:sequenceFlow id="Flow_1rnj5i8" name="Клиент не найден" sourceRef="Gateway_1vjc4xe" targetRef="Activity_1i8tusj"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0plbd3l" sourceRef="Gateway_1vjc4xe" targetRef="Activity_0jd1kmp" /><bpmn:sequenceFlow id="Flow_0ihiu00" sourceRef="Gateway_1qcfmp4" targetRef="Activity_01vn093" /><bpmn:sequenceFlow id="Flow_0sk1zx7" sourceRef="Gateway_1g82req" targetRef="Activity_0y5zznb" /><bpmn:sequenceFlow id="Flow_0gtshy3" sourceRef="Activity_0y5zznb" targetRef="Gateway_1qcfmp4" /><bpmn:sequenceFlow id="Flow_1woxurr" sourceRef="Gateway_1qcfmp4" targetRef="Activity_0ga37b7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_02ct7cy" sourceRef="Activity_1i8tusj" targetRef="Activity_017v5yy" /><bpmn:sequenceFlow id="Flow_0emgjsv" sourceRef="Activity_1x6oo15" targetRef="Event_0i34ctx" /><bpmn:sequenceFlow id="Flow_0y0s1wg" sourceRef="Activity_0jd1kmp" targetRef="Gateway_0dl3q7b" /><bpmn:sequenceFlow id="Flow_1lf6hb6" sourceRef="Gateway_0dl3q7b" targetRef="Activity_09xl67p" /><bpmn:sequenceFlow id="Flow_0g8ffqw" sourceRef="Gateway_0dl3q7b" targetRef="Activity_1ezmn5e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RiskProfileNumber == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_19yz4ma" sourceRef="Gateway_1g82req" targetRef="Activity_1ezmn5e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyRiskProfile == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0e8kzmz" sourceRef="Activity_1ezmn5e" targetRef="Activity_0628xpg" /><bpmn:sequenceFlow id="Flow_1vnik1y" sourceRef="Activity_0tf1xys" targetRef="Event_02o657y" /><bpmn:sequenceFlow id="Flow_098f6wj" sourceRef="Activity_09xl67p" targetRef="Gateway_1g82req" /><bpmn:sequenceFlow id="Flow_154k22i" sourceRef="Activity_03lwdxk" targetRef="Activity_19wxxcq" /><bpmn:sequenceFlow id="Flow_09ls36f" sourceRef="Activity_0ga37b7" targetRef="Activity_1e9qo1x" /><bpmn:sequenceFlow id="Flow_146860e" sourceRef="Activity_1e9qo1x" targetRef="Activity_0gymev7" /><bpmn:sequenceFlow id="Flow_07vr12w" sourceRef="Activity_0gymev7" targetRef="Activity_0c9sxep" /><bpmn:sequenceFlow id="Flow_1e0pr2b" sourceRef="Activity_0c9sxep" targetRef="Event_0mh7feq" /><bpmn:sequenceFlow id="Flow_0i9kyqx" sourceRef="Activity_14qn6ae" targetRef="Gateway_0rsv0ff" /><bpmn:userTask id="Activity_1fjkrq7" name="Кнопки Продолжить, Завершить" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Sign&#34;, &#34;label&#34;: &#34;Продолжить 1&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements></bpmn:userTask><bpmn:serviceTask id="Activity_1irmq25" name="Ищем мод.портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "613ef0ac687006695cd4a397", 
"primaryId": "${ModelPersPortfolio}"
},
"projection": { 		"_id": 1 , "attributes.mp_riskMetric": 1	}
}</camunda:inputParameter><camunda:outputParameter name="MP_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyMP"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_riskMetric"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_riskMetric
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0plb4iq</bpmn:incoming><bpmn:outgoing>Flow_14oee7d</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_14oee7d" sourceRef="Activity_1irmq25" targetRef="Gateway_09rt8fa" /><bpmn:exclusiveGateway id="Gateway_09rt8fa" default="Flow_0yutt8a"><bpmn:incoming>Flow_14oee7d</bpmn:incoming><bpmn:outgoing>Flow_0yutt8a</bpmn:outgoing><bpmn:outgoing>Flow_0es5piz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0yutt8a" sourceRef="Gateway_09rt8fa" targetRef="Gateway_11l4stt" /><bpmn:sequenceFlow id="Flow_0es5piz" sourceRef="Gateway_09rt8fa" targetRef="Activity_1vnxlrf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyMP == true || mp_riskMetric == 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0628xpg" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Не найден риск-профиль")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0e8kzmz</bpmn:incoming><bpmn:outgoing>Flow_04kr4v5</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_04kr4v5" sourceRef="Activity_0628xpg" targetRef="Activity_1h94umr" /><bpmn:serviceTask id="Activity_1h94umr" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не найден риск-профиль"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04kr4v5</bpmn:incoming><bpmn:outgoing>Flow_1m3r72o</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1m3r72o" sourceRef="Activity_1h94umr" targetRef="Activity_0tf1xys" /><bpmn:serviceTask id="Activity_017v5yy" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Не найден клиент")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02ct7cy</bpmn:incoming><bpmn:outgoing>Flow_1dtayyk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1dtayyk" sourceRef="Activity_017v5yy" targetRef="Activity_1mqhmsd" /><bpmn:serviceTask id="Activity_1mqhmsd" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не найден клиент"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1dtayyk</bpmn:incoming><bpmn:outgoing>Flow_16zknjm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_16zknjm" sourceRef="Activity_1mqhmsd" targetRef="Activity_1x6oo15" /><bpmn:serviceTask id="Activity_05ltu6j" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Не заполнены обязательные параметры cifId или brokerageAccountID")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10dz3zz</bpmn:incoming><bpmn:outgoing>Flow_0p15urr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0p15urr" sourceRef="Activity_05ltu6j" targetRef="Activity_0hpn7zz" /><bpmn:serviceTask id="Activity_0hpn7zz" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не заполнены обязательные параметры cifId или brokerageAccountID"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0p15urr</bpmn:incoming><bpmn:outgoing>Flow_1slsmdt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1slsmdt" sourceRef="Activity_0hpn7zz" targetRef="Activity_1u71wrl" /><bpmn:serviceTask id="Activity_1qqomyr" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Ошибка поиска анкеты")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09pfwze</bpmn:incoming><bpmn:outgoing>Flow_17h6u5q</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_17h6u5q" sourceRef="Activity_1qqomyr" targetRef="Activity_02cvaaa" /><bpmn:serviceTask id="Activity_02cvaaa" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Ошибка поиска анкеты"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17h6u5q</bpmn:incoming><bpmn:outgoing>Flow_0ob8djd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ob8djd" sourceRef="Activity_02cvaaa" targetRef="Activity_1icflpo" /><bpmn:serviceTask id="Activity_1brotij" name="Установка значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("QuestionnairesNumber", "1")
.prop("Message", "Не найден клиентский портфель")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1g492rn</bpmn:incoming><bpmn:outgoing>Flow_0fln98t</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_15hbjf1" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не найден клиентский портфель"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0fln98t</bpmn:incoming><bpmn:outgoing>Flow_1xf1jn7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0fln98t" sourceRef="Activity_1brotij" targetRef="Activity_15hbjf1" /><bpmn:sequenceFlow id="Flow_1xf1jn7" sourceRef="Activity_15hbjf1" targetRef="Activity_0j7a9ll" /><bpmn:serviceTask id="Activity_1lleqcp" name="Ищем предыдущую анкету - черновик"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "DRAFT", 
"templatePrimaryId": "61978242039c1a3ae9955552", 
"attributes.cifID": "${CIF}",
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.QuestionnairesNumber": "${QuestionnairesNumber}",
"labelStatus": "Ожидает согласования",
"attributes.QuestionnairesType": "${QuestionnairesType}",
"createDate" : { $gte : ISODate("${PrevenablingAccountDateTime}Z") }
},
"projection": { 		"_id": 1 	},
"sort": { "createDate": -1 } 
}</camunda:inputParameter><camunda:outputParameter name="Old_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsEmptyDraft"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10s2axe</bpmn:incoming><bpmn:outgoing>Flow_0b84wol</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1v8sgjn" default="Flow_1lw99vq"><bpmn:incoming>Flow_1bda7pn</bpmn:incoming><bpmn:outgoing>Flow_13mytuy</bpmn:outgoing><bpmn:outgoing>Flow_1lw99vq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_13mytuy" name="Услуга подключена" sourceRef="Gateway_1v8sgjn" targetRef="Activity_1ad3l6x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${PrevenablingAccountDateTime == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1lw99vq" name="Услуга НЕ  подключена" sourceRef="Gateway_1v8sgjn" targetRef="Gateway_0397ouw" /><bpmn:exclusiveGateway id="Gateway_1aycgui" default="Flow_06gjjpi"><bpmn:incoming>Flow_0b84wol</bpmn:incoming><bpmn:incoming>Flow_1cdf1sq</bpmn:incoming><bpmn:outgoing>Flow_1fn3kk1</bpmn:outgoing><bpmn:outgoing>Flow_06gjjpi</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0b84wol" sourceRef="Activity_1lleqcp" targetRef="Gateway_1aycgui" /><bpmn:exclusiveGateway id="Gateway_0qs9zzb" default="Flow_168lbew"><bpmn:incoming>Flow_1fn3kk1</bpmn:incoming><bpmn:outgoing>Flow_168lbew</bpmn:outgoing><bpmn:outgoing>Flow_0iahp8e</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1fn3kk1" name="Черновик не найден" sourceRef="Gateway_1aycgui" targetRef="Gateway_0qs9zzb"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsEmptyDraft == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0huqbzl" name="Ищем предыдущую пройденную анкету"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "61978242039c1a3ae9955552", 
"attributes.objectId": "${PrevAnketaId}",
"attributes.cifID": "${CIF}",
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.QuestionnairesNumber": "${QuestionnairesNumber}",
"labelStatus": "Согласована",
"attributes.QuestionnairesType": "${QuestionnairesType}"
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="Old_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyActive"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_168lbew</bpmn:incoming><bpmn:outgoing>Flow_1v6io2i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_168lbew" name="пред.подтвержденная анкета есть" sourceRef="Gateway_0qs9zzb" targetRef="Activity_0huqbzl" /><bpmn:sequenceFlow id="Flow_0iahp8e" name="Пред.подтвержденной анкеты нет" sourceRef="Gateway_0qs9zzb" targetRef="Activity_1ad3l6x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${PrevAnketaId == null || PrevAnketaId == ""}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_06gjjpi" name="Черновик найден" sourceRef="Gateway_1aycgui" targetRef="Activity_0fopqni" /><bpmn:exclusiveGateway id="Gateway_0g3wgi5" default="Flow_0ig8sr3"><bpmn:incoming>Flow_1v6io2i</bpmn:incoming><bpmn:outgoing>Flow_13z98nn</bpmn:outgoing><bpmn:outgoing>Flow_0ig8sr3</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1v6io2i" sourceRef="Activity_0huqbzl" targetRef="Gateway_0g3wgi5" /><bpmn:sequenceFlow id="Flow_13z98nn" name="Подтвержденная анкета не найдена" sourceRef="Gateway_0g3wgi5" targetRef="Activity_1ad3l6x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyActive == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ig8sr3" name="Подтвержденная анкета найдена" sourceRef="Gateway_0g3wgi5" targetRef="Activity_0fopqni" /><bpmn:exclusiveGateway id="Gateway_0btahgb" default="Flow_1bd43bk"><bpmn:incoming>Flow_1q3i5vz</bpmn:incoming><bpmn:outgoing>Flow_037uyiq</bpmn:outgoing><bpmn:outgoing>Flow_1bd43bk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_037uyiq" name="Кол-во вопросов совпадает" sourceRef="Gateway_0btahgb" targetRef="Activity_1g49kja"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldQuestionsQuantity == QuestionsQuantity}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1bd43bk" name="Кол-во вопросов не совпадает" sourceRef="Gateway_0btahgb" targetRef="Activity_1ad3l6x" /><bpmn:sequenceFlow id="Flow_1qit2b9" sourceRef="Activity_1ad3l6x" targetRef="Activity_0n4zeqr" /><bpmn:serviceTask id="Activity_0fopqni" name="Получаем  параметры анкеты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${Old_refid}/getAttributes?systemName=QuestionsQuantity&amp;systemName=Questions</camunda:inputParameter><camunda:outputParameter name="OldQuestionsQuantity"><camunda:script scriptFormat="javascript">JSON.parse(response).QuestionsQuantity</camunda:script></camunda:outputParameter><camunda:outputParameter name="OldQuestions"><camunda:script scriptFormat="javascript">try{
S(response).prop("Questions")
} catch(e) {
throw new org.camunda.bpm.engine.delegate.BpmnError("IT_EXCEPTION",e);
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_06gjjpi</bpmn:incoming><bpmn:incoming>Flow_0ig8sr3</bpmn:incoming><bpmn:outgoing>Flow_1q3i5vz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1q3i5vz" sourceRef="Activity_0fopqni" targetRef="Gateway_0btahgb" /><bpmn:intermediateCatchEvent id="Event_06wcz56"><bpmn:timerEventDefinition id="TimerEventDefinition_1k1hwxm"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT600S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:scriptTask id="Activity_031hqc9" name="Приводим вопросы к формату табличных блоков" scriptFormat="javascript" camunda:resultVariable="NewQuestions"><bpmn:incoming>Flow_085v3dc</bpmn:incoming><bpmn:outgoing>Flow_02j57h2</bpmn:outgoing><bpmn:script>var result_json = JSON.parse(result);

var q = new Object();
q = result_json.Questions; 

JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1g49kja" name="Номер элемента массива вопросов НОВОЙ анкеты" scriptFormat="javascript"><bpmn:incoming>Flow_037uyiq</bpmn:incoming><bpmn:outgoing>Flow_0dsgpar</bpmn:outgoing><bpmn:script>execution.setVariable('j', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_08zus9p" name="Получаем текущее значение вопроса НОВОЙ анкеты" scriptFormat="javascript" camunda:resultVariable="NewQuestion"><bpmn:incoming>Flow_0tz7rc0</bpmn:incoming><bpmn:incoming>Flow_0zxhafo</bpmn:incoming><bpmn:outgoing>Flow_0i41dcl</bpmn:outgoing><bpmn:script>JSON.parse(NewQuestions)[j].Q_Question</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0dsgpar" sourceRef="Activity_1g49kja" targetRef="Activity_002y3m4" /><bpmn:exclusiveGateway id="Gateway_0ql89pb" default="Flow_07nxy33"><bpmn:incoming>Flow_1ckgmr1</bpmn:incoming><bpmn:outgoing>Flow_0tz7rc0</bpmn:outgoing><bpmn:outgoing>Flow_07nxy33</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_1k7jqnh" name="Получаем текущий номер вопроса СТАРОЙ анкеты" scriptFormat="javascript" camunda:resultVariable="OldQuestionNumber"><bpmn:incoming>Flow_1nf4izz</bpmn:incoming><bpmn:outgoing>Flow_1ckgmr1</bpmn:outgoing><bpmn:script>JSON.parse(OldQuestions)[k].Q_QuestionNumber</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_146xk8v" name="Получаем текущий номер вопроса НОВОЙ анкеты" scriptFormat="javascript" camunda:resultVariable="NewQuestionNumber"><bpmn:incoming>Flow_0gc1tlq</bpmn:incoming><bpmn:incoming>Flow_0e74odg</bpmn:incoming><bpmn:outgoing>Flow_1nf4izz</bpmn:outgoing><bpmn:script>JSON.parse(NewQuestions)[j].Q_QuestionNumber</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1nf4izz" sourceRef="Activity_146xk8v" targetRef="Activity_1k7jqnh" /><bpmn:scriptTask id="Activity_17tjpzi" name="Получаем текущее значение вопроса СТАРОЙ анкеты" scriptFormat="javascript" camunda:resultVariable="OldQuestion"><bpmn:incoming>Flow_0i41dcl</bpmn:incoming><bpmn:outgoing>Flow_0vc0rb7</bpmn:outgoing><bpmn:script>JSON.parse(OldQuestions)[k].Q_Question</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1ckgmr1" sourceRef="Activity_1k7jqnh" targetRef="Gateway_0ql89pb" /><bpmn:sequenceFlow id="Flow_0tz7rc0" name="Номер вопроса совпадает" sourceRef="Gateway_0ql89pb" targetRef="Activity_08zus9p"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${NewQuestionNumber == OldQuestionNumber}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0i41dcl" sourceRef="Activity_08zus9p" targetRef="Activity_17tjpzi" /><bpmn:scriptTask id="Activity_1svgrfq" name="Номер элемента массива вопросов СТАРОЙ анкеты" scriptFormat="javascript"><bpmn:incoming>Flow_07nxy33</bpmn:incoming><bpmn:outgoing>Flow_0s5ici1</bpmn:outgoing><bpmn:script>execution.setVariable('k', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_07nxy33" sourceRef="Gateway_0ql89pb" targetRef="Activity_1svgrfq" /><bpmn:scriptTask id="Activity_0u3ukv1" name="Получаем текущий номер вопроса СТАРОЙ анкеты" scriptFormat="javascript" camunda:resultVariable="OldQuestionNumber"><bpmn:incoming>Flow_0s5ici1</bpmn:incoming><bpmn:incoming>Flow_0juqli7</bpmn:incoming><bpmn:outgoing>Flow_117cgkt</bpmn:outgoing><bpmn:script>JSON.parse(OldQuestions)[k].Q_QuestionNumber</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0s5ici1" sourceRef="Activity_1svgrfq" targetRef="Activity_0u3ukv1" /><bpmn:scriptTask id="Activity_002y3m4" name="Номер элемента массива вопросов СТАРОЙ анкеты" scriptFormat="javascript"><bpmn:incoming>Flow_0dsgpar</bpmn:incoming><bpmn:outgoing>Flow_0gc1tlq</bpmn:outgoing><bpmn:script>execution.setVariable('k', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0gc1tlq" sourceRef="Activity_002y3m4" targetRef="Activity_146xk8v" /><bpmn:exclusiveGateway id="Gateway_15fv62x" default="Flow_01zg9ib"><bpmn:incoming>Flow_117cgkt</bpmn:incoming><bpmn:outgoing>Flow_0zxhafo</bpmn:outgoing><bpmn:outgoing>Flow_01zg9ib</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_117cgkt" sourceRef="Activity_0u3ukv1" targetRef="Gateway_15fv62x" /><bpmn:sequenceFlow id="Flow_0zxhafo" sourceRef="Gateway_15fv62x" targetRef="Activity_08zus9p"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${NewQuestionNumber == OldQuestionNumber}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1djr5qh" name="увеличиваем значение k" scriptFormat="javascript" camunda:resultVariable="k"><bpmn:incoming>Flow_01zg9ib</bpmn:incoming><bpmn:outgoing>Flow_078fxw8</bpmn:outgoing><bpmn:script>Math.round(+k+1)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_01zg9ib" sourceRef="Gateway_15fv62x" targetRef="Activity_1djr5qh" /><bpmn:exclusiveGateway id="Gateway_0ntpl13" default="Flow_16xpftb"><bpmn:incoming>Flow_078fxw8</bpmn:incoming><bpmn:outgoing>Flow_0juqli7</bpmn:outgoing><bpmn:outgoing>Flow_16xpftb</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_078fxw8" sourceRef="Activity_1djr5qh" targetRef="Gateway_0ntpl13" /><bpmn:sequenceFlow id="Flow_0juqli7" name="следующий вопрос старой анкеты" sourceRef="Gateway_0ntpl13" targetRef="Activity_0u3ukv1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${k &lt; QuestionsQuantity}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_16xpftb" name="Ошибка: не найден вопрос" sourceRef="Gateway_0ntpl13" targetRef="Activity_1ad3l6x" /><bpmn:exclusiveGateway id="Gateway_1ljc6v7" default="Flow_08uml12"><bpmn:incoming>Flow_0vc0rb7</bpmn:incoming><bpmn:outgoing>Flow_1k44of1</bpmn:outgoing><bpmn:outgoing>Flow_08uml12</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0vc0rb7" sourceRef="Activity_17tjpzi" targetRef="Gateway_1ljc6v7" /><bpmn:scriptTask id="Activity_0r9dwlz" name="увеличиваем значение j" scriptFormat="javascript" camunda:resultVariable="j"><bpmn:incoming>Flow_1k44of1</bpmn:incoming><bpmn:outgoing>Flow_011fq5e</bpmn:outgoing><bpmn:script>Math.round(+j+1)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1k44of1" name="вопросы совпадают" sourceRef="Gateway_1ljc6v7" targetRef="Activity_0r9dwlz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${NewQuestion == OldQuestion}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_08uml12" sourceRef="Gateway_1ljc6v7" targetRef="Activity_1ad3l6x" /><bpmn:exclusiveGateway id="Gateway_1xijhom" default="Flow_0uuai09"><bpmn:incoming>Flow_0oot6ch</bpmn:incoming><bpmn:outgoing>Flow_0e74odg</bpmn:outgoing><bpmn:outgoing>Flow_0uuai09</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_011fq5e" sourceRef="Activity_0r9dwlz" targetRef="Activity_1kpehj6" /><bpmn:scriptTask id="Activity_1kpehj6" name="увеличиваем значение k" scriptFormat="javascript" camunda:resultVariable="k"><bpmn:incoming>Flow_011fq5e</bpmn:incoming><bpmn:outgoing>Flow_0oot6ch</bpmn:outgoing><bpmn:script>Math.round(+j)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0oot6ch" sourceRef="Activity_1kpehj6" targetRef="Gateway_1xijhom" /><bpmn:sequenceFlow id="Flow_0e74odg" sourceRef="Gateway_1xijhom" targetRef="Activity_146xk8v"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${j &lt; QuestionsQuantity}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0uuai09" sourceRef="Gateway_1xijhom" targetRef="Activity_1rh4ilb" /><bpmn:serviceTask id="Activity_1rh4ilb" name="Сохраняем все данные в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes?incrementVersion=false&amp;esWaitUntil=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("objectId", instanceId)
.prop("AnketaDateTime", AnketaDateTime)
.prop("QuestionnairesName", QuestionnairesName)
.prop("ProcessStep", "1")
.prop("ShortName", "Определение финансовых целей")
.prop("Questions", OldQuestions)
.prop("Q_Answers", NewAnswers)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0uuai09</bpmn:incoming><bpmn:outgoing>Flow_0ymheky</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ymheky" sourceRef="Activity_1rh4ilb" targetRef="Activity_0n4zeqr" /><bpmn:scriptTask id="Activity_0gayomp" name="Приводим варианты ответов к формату табличных блоков" scriptFormat="javascript" camunda:resultVariable="NewAnswersStr"><bpmn:incoming>Flow_02j57h2</bpmn:incoming><bpmn:outgoing>Flow_0uc51nx</bpmn:outgoing><bpmn:script>var result_json = JSON.parse(result);

var q = new Object();
q.Q_Answers = result_json.Q_Answers; 

JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_02j57h2" sourceRef="Activity_031hqc9" targetRef="Activity_0gayomp" /><bpmn:scriptTask id="Activity_172v09z" name="json" scriptFormat="JavaScript" camunda:resultVariable="NewAnswers"><bpmn:incoming>Flow_0uc51nx</bpmn:incoming><bpmn:outgoing>Flow_1forsja</bpmn:outgoing><bpmn:script>S(NewAnswersStr).prop("Q_Answers")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0uc51nx" sourceRef="Activity_0gayomp" targetRef="Activity_172v09z" /><bpmn:sequenceFlow id="Flow_1forsja" sourceRef="Activity_172v09z" targetRef="Activity_1homk9h" /><bpmn:exclusiveGateway id="Gateway_0397ouw" default="Flow_110l66c"><bpmn:incoming>Flow_1lw99vq</bpmn:incoming><bpmn:outgoing>Flow_110l66c</bpmn:outgoing><bpmn:outgoing>Flow_10s2axe</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_19feovs" name="Ищем предыдущую анкету - черновик"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "DRAFT", 
"templatePrimaryId": "61978242039c1a3ae9955552", 
"attributes.cifID": "${CIF}",
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.QuestionnairesNumber": "${QuestionnairesNumber}",
"labelStatus": "Ожидает согласования",
"attributes.QuestionnairesType": "${QuestionnairesType}",
"createDate" : { $gte : ISODate("${PrevResultDateTime}Z")}
},
"projection": { 		"_id": 1 	},
"sort": { "createDate": -1 } 
}</camunda:inputParameter><camunda:outputParameter name="Old_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsEmptyDraft"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_110l66c</bpmn:incoming><bpmn:outgoing>Flow_1cdf1sq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_110l66c" sourceRef="Gateway_0397ouw" targetRef="Activity_19feovs" /><bpmn:sequenceFlow id="Flow_10s2axe" name="нет предыдущего опр целей" sourceRef="Gateway_0397ouw" targetRef="Activity_1lleqcp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${PrevResultDateTime == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1cdf1sq" sourceRef="Activity_19feovs" targetRef="Gateway_1aycgui" /><bpmn:serviceTask id="Activity_01vn093" name="Получаем  параметры клиентского портфеля"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${Portfolio_refid}/getAttributes?systemName=GuideSteps</camunda:inputParameter><camunda:outputParameter name="GuideSteps"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps")
} catch(e) {
throw new org.camunda.bpm.engine.delegate.BpmnError("IT_EXCEPTION",e);
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TestLength"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps").elements().size()
} catch(e) {
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ihiu00</bpmn:incoming><bpmn:outgoing>Flow_0gt9eao</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1c4v5jx" default="Flow_1lncuso"><bpmn:incoming>Flow_0gt9eao</bpmn:incoming><bpmn:outgoing>Flow_01hdvqs</bpmn:outgoing><bpmn:outgoing>Flow_1lncuso</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0g2bf0y" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден список этапов в клиентском портфеле")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0i8jwbj</bpmn:incoming><bpmn:outgoing>Flow_0klmurb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1nehyho" name="Статус: Не найден список этапов в клиентском портфеле"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+список+этапов+в+клиентском+портфеле</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01hdvqs</bpmn:incoming><bpmn:outgoing>Flow_0i8jwbj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1l4w5go" name="Получаем  прохождение этапов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${Portfolio_refid}/getAttributes?systemName=GuideSteps</camunda:inputParameter><camunda:outputParameter name="StatusStep1"><camunda:script scriptFormat="javascript">JSON.parse(response).GuideSteps[0].StatusStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="StatusStep2"><camunda:script scriptFormat="javascript">JSON.parse(response).GuideSteps[1].StatusStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="TestLength"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps").elements().size()
} catch(e) {
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1lncuso</bpmn:incoming><bpmn:outgoing>Flow_0ujqf4q</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_07frlbz" default="Flow_1h3qr4o"><bpmn:incoming>Flow_06o4sme</bpmn:incoming><bpmn:outgoing>Flow_17fywm4</bpmn:outgoing><bpmn:outgoing>Flow_1h3qr4o</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0h7491i" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не пройдено подключение услуги")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cgv7xr</bpmn:incoming><bpmn:outgoing>Flow_0ililqu</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1dbzj47" default="Flow_06o4sme"><bpmn:incoming>Flow_0ujqf4q</bpmn:incoming><bpmn:outgoing>Flow_06o4sme</bpmn:outgoing><bpmn:outgoing>Flow_0h9s3f0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1dcbod6" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не пройдено риск-профилирование")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04tolxj</bpmn:incoming><bpmn:outgoing>Flow_1ky8gnj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_04log7j" name="Статус: Не пройдено риск-профилирование"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+пройдено+риск-профилирование</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0h9s3f0</bpmn:incoming><bpmn:outgoing>Flow_04tolxj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_05bb70x" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0iocvdr</bpmn:incoming><bpmn:incoming>Flow_1jz47kx</bpmn:incoming><bpmn:incoming>Flow_1do8d28</bpmn:incoming><bpmn:outgoing>Flow_1v7jgfj</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0yeu9yk"><bpmn:incoming>Flow_1v7jgfj</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1ajduwk" name="Статус: Не пройдено подключение услуги"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+пройдено+подключение+услуги</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17fywm4</bpmn:incoming><bpmn:outgoing>Flow_0cgv7xr</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0mf24id" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не найден список этапов"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0klmurb</bpmn:incoming><bpmn:outgoing>Flow_0iocvdr</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1gos152" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не пройдено риск-профилирование"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ky8gnj</bpmn:incoming><bpmn:outgoing>Flow_1jz47kx</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1ijd6pl" name="Получаем результат запроса AnketaFG" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/AnketaFG</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"instanceId": "${instanceId}"
}</camunda:inputParameter><camunda:outputParameter name="Q_Result"><camunda:script scriptFormat="javascript">try {
var q =
JSON.parse(response).cursor.firstBatch[0].attributes
q.message = "Не пройдено подключение услуги"
q.status = "ERROR"

} catch(e) {
var q = " "
}
JSON.stringify(q);</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ililqu</bpmn:incoming><bpmn:outgoing>Flow_1do8d28</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0gt9eao" sourceRef="Activity_01vn093" targetRef="Gateway_1c4v5jx" /><bpmn:sequenceFlow id="Flow_01hdvqs" name="Не найден список этапов" sourceRef="Gateway_1c4v5jx" targetRef="Activity_1nehyho"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${GuideSteps == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1lncuso" sourceRef="Gateway_1c4v5jx" targetRef="Activity_1l4w5go" /><bpmn:sequenceFlow id="Flow_0i8jwbj" sourceRef="Activity_1nehyho" targetRef="Activity_0g2bf0y" /><bpmn:sequenceFlow id="Flow_0klmurb" sourceRef="Activity_0g2bf0y" targetRef="Activity_0mf24id" /><bpmn:sequenceFlow id="Flow_0ujqf4q" sourceRef="Activity_1l4w5go" targetRef="Gateway_1dbzj47" /><bpmn:sequenceFlow id="Flow_06o4sme" sourceRef="Gateway_1dbzj47" targetRef="Gateway_07frlbz" /><bpmn:sequenceFlow id="Flow_17fywm4" name="Этап 2 = false" sourceRef="Gateway_07frlbz" targetRef="Activity_1ajduwk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${StatusStep2 == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0cgv7xr" sourceRef="Activity_1ajduwk" targetRef="Activity_0h7491i" /><bpmn:sequenceFlow id="Flow_0ililqu" sourceRef="Activity_0h7491i" targetRef="Activity_1ijd6pl" /><bpmn:sequenceFlow id="Flow_0h9s3f0" name="Этап 1 = false" sourceRef="Gateway_1dbzj47" targetRef="Activity_04log7j"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${StatusStep1 == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_04tolxj" sourceRef="Activity_04log7j" targetRef="Activity_1dcbod6" /><bpmn:sequenceFlow id="Flow_1ky8gnj" sourceRef="Activity_1dcbod6" targetRef="Activity_1gos152" /><bpmn:sequenceFlow id="Flow_0iocvdr" sourceRef="Activity_0mf24id" targetRef="Activity_05bb70x" /><bpmn:sequenceFlow id="Flow_1jz47kx" sourceRef="Activity_1gos152" targetRef="Activity_05bb70x" /><bpmn:sequenceFlow id="Flow_1do8d28" sourceRef="Activity_1ijd6pl" targetRef="Activity_05bb70x" /><bpmn:sequenceFlow id="Flow_1v7jgfj" sourceRef="Activity_05bb70x" targetRef="Event_0yeu9yk" /><bpmn:sequenceFlow id="Flow_1h3qr4o" sourceRef="Gateway_07frlbz" targetRef="Activity_0rzfnyu" /><bpmn:serviceTask id="Activity_1dregp4" name="Сообщаем об окончании процесса" camunda:asyncBefore="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1stscse</bpmn:incoming><bpmn:outgoing>Flow_16lcd55</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1ovzi1p"><bpmn:incoming>Flow_16lcd55</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_16lcd55" sourceRef="Activity_1dregp4" targetRef="Event_1ovzi1p" /><bpmn:sequenceFlow id="Flow_1p44sqr" name="NOT_SIGN" sourceRef="Gateway_1uwbnn5" targetRef="Activity_0bhj1h3"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessButton == 'NOT_SIGN'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1cd1n4a" name="Таймаут" sourceRef="Gateway_1vrrux3" targetRef="Activity_0bhj1h3" /><bpmn:serviceTask id="Activity_0bhj1h3" name="Установка статуса &#34;Незавершенная анкета&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="Error">1</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1cd1n4a</bpmn:incoming><bpmn:incoming>Flow_1p44sqr</bpmn:incoming><bpmn:outgoing>Flow_1stscse</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1stscse" sourceRef="Activity_0bhj1h3" targetRef="Activity_1dregp4" /><bpmn:textAnnotation id="TextAnnotation_19idupk"><bpmn:text>номер риск-профиля при риск-профилировании</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1sj1acb" sourceRef="Activity_0jd1kmp" targetRef="TextAnnotation_19idupk" /></bpmn:process><bpmn:signal id="Signal_1gxzezn" name="bookUpdateReceive${instanceId}" /><bpmn:signal id="Signal_0lcezk7" name="qwerty" /><bpmn:signal id="Signal_0shhym4" name="BookEditTerm${instanceId}" /><bpmn:signal id="Signal_0tdofqq" name="bookEditFinGoals${instanceId}" /><bpmn:signal id="Signal_0gqo9hh" name="BookEndProcess${instanceId}" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_FinancialGoalDefinitionQuestionnaire_49178d6f-9b0a-46db-a333-a8946d96f257"><bpmndi:BPMNEdge id="Flow_1stscse_di" bpmnElement="Flow_1stscse"><di:waypoint x="4680" y="4365" /><di:waypoint x="4730" y="4365" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cd1n4a_di" bpmnElement="Flow_1cd1n4a"><di:waypoint x="4473" y="4365" /><di:waypoint x="4580" y="4365" /><bpmndi:BPMNLabel><dc:Bounds x="4483" y="4393" width="43" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1p44sqr_di" bpmnElement="Flow_1p44sqr"><di:waypoint x="4473" y="4270" /><di:waypoint x="4630" y="4270" /><di:waypoint x="4630" y="4325" /><bpmndi:BPMNLabel><dc:Bounds x="4508" y="4243" width="57" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16lcd55_di" bpmnElement="Flow_16lcd55"><di:waypoint x="4830" y="4365" /><di:waypoint x="4882" y="4365" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1h3qr4o_di" bpmnElement="Flow_1h3qr4o"><di:waypoint x="2705" y="1230" /><di:waypoint x="2860" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v7jgfj_di" bpmnElement="Flow_1v7jgfj"><di:waypoint x="2480" y="1770" /><di:waypoint x="2480" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1do8d28_di" bpmnElement="Flow_1do8d28"><di:waypoint x="2680" y="1650" /><di:waypoint x="2680" y="1730" /><di:waypoint x="2530" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jz47kx_di" bpmnElement="Flow_1jz47kx"><di:waypoint x="2480" y="1650" /><di:waypoint x="2480" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iocvdr_di" bpmnElement="Flow_0iocvdr"><di:waypoint x="2200" y="1650" /><di:waypoint x="2200" y="1730" /><di:waypoint x="2430" y="1730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ky8gnj_di" bpmnElement="Flow_1ky8gnj"><di:waypoint x="2480" y="1520" /><di:waypoint x="2480" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04tolxj_di" bpmnElement="Flow_04tolxj"><di:waypoint x="2480" y="1390" /><di:waypoint x="2480" y="1440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h9s3f0_di" bpmnElement="Flow_0h9s3f0"><di:waypoint x="2480" y="1255" /><di:waypoint x="2480" y="1310" /><bpmndi:BPMNLabel><dc:Bounds x="2485" y="1260" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ililqu_di" bpmnElement="Flow_0ililqu"><di:waypoint x="2680" y="1520" /><di:waypoint x="2680" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cgv7xr_di" bpmnElement="Flow_0cgv7xr"><di:waypoint x="2680" y="1390" /><di:waypoint x="2680" y="1440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17fywm4_di" bpmnElement="Flow_17fywm4"><di:waypoint x="2680" y="1255" /><di:waypoint x="2680" y="1310" /><bpmndi:BPMNLabel><dc:Bounds x="2695" y="1269" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06o4sme_di" bpmnElement="Flow_06o4sme"><di:waypoint x="2505" y="1230" /><di:waypoint x="2655" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ujqf4q_di" bpmnElement="Flow_0ujqf4q"><di:waypoint x="2390" y="1230" /><di:waypoint x="2455" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0klmurb_di" bpmnElement="Flow_0klmurb"><di:waypoint x="2200" y="1520" /><di:waypoint x="2200" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i8jwbj_di" bpmnElement="Flow_0i8jwbj"><di:waypoint x="2200" y="1390" /><di:waypoint x="2200" y="1440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lncuso_di" bpmnElement="Flow_1lncuso"><di:waypoint x="2225" y="1230" /><di:waypoint x="2290" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01hdvqs_di" bpmnElement="Flow_01hdvqs"><di:waypoint x="2200" y="1255" /><di:waypoint x="2200" y="1310" /><bpmndi:BPMNLabel><dc:Bounds x="2204" y="1262" width="72" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gt9eao_di" bpmnElement="Flow_0gt9eao"><di:waypoint x="2090" y="1230" /><di:waypoint x="2175" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cdf1sq_di" bpmnElement="Flow_1cdf1sq"><di:waypoint x="3920" y="820" /><di:waypoint x="3985" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10s2axe_di" bpmnElement="Flow_10s2axe"><di:waypoint x="3940" y="995" /><di:waypoint x="3940" y="940" /><di:waypoint x="3960" y="940" /><bpmndi:BPMNLabel><dc:Bounds x="3875" y="904" width="90" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_110l66c_di" bpmnElement="Flow_110l66c"><di:waypoint x="3915" y="1020" /><di:waypoint x="3870" y="1020" /><di:waypoint x="3870" y="860" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1forsja_di" bpmnElement="Flow_1forsja"><di:waypoint x="3840" y="1230" /><di:waypoint x="3880" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uc51nx_di" bpmnElement="Flow_0uc51nx"><di:waypoint x="3790" y="1050" /><di:waypoint x="3790" y="1190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02j57h2_di" bpmnElement="Flow_02j57h2"><di:waypoint x="3700" y="1010" /><di:waypoint x="3740" y="1010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ymheky_di" bpmnElement="Flow_0ymheky"><di:waypoint x="5190" y="1000" /><di:waypoint x="5190" y="1150" /><di:waypoint x="4380" y="1150" /><di:waypoint x="4380" y="1190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uuai09_di" bpmnElement="Flow_0uuai09"><di:waypoint x="6485" y="460" /><di:waypoint x="6540" y="460" /><di:waypoint x="6540" y="830" /><di:waypoint x="5190" y="830" /><di:waypoint x="5190" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e74odg_di" bpmnElement="Flow_0e74odg"><di:waypoint x="6460" y="485" /><di:waypoint x="6460" y="580" /><di:waypoint x="5200" y="580" /><di:waypoint x="5200" y="500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0oot6ch_di" bpmnElement="Flow_0oot6ch"><di:waypoint x="6380" y="460" /><di:waypoint x="6435" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_011fq5e_di" bpmnElement="Flow_011fq5e"><di:waypoint x="6230" y="460" /><di:waypoint x="6280" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08uml12_di" bpmnElement="Flow_08uml12"><di:waypoint x="6010" y="485" /><di:waypoint x="6010" y="560" /><di:waypoint x="4260" y="560" /><di:waypoint x="4260" y="980" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k44of1_di" bpmnElement="Flow_1k44of1"><di:waypoint x="6035" y="460" /><di:waypoint x="6130" y="460" /><bpmndi:BPMNLabel><dc:Bounds x="6054" y="426" width="57" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vc0rb7_di" bpmnElement="Flow_0vc0rb7"><di:waypoint x="5920" y="460" /><di:waypoint x="5985" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16xpftb_di" bpmnElement="Flow_16xpftb"><di:waypoint x="5565" y="110" /><di:waypoint x="4240" y="110" /><di:waypoint x="4240" y="980" /><bpmndi:BPMNLabel><dc:Bounds x="4223" y="531" width="77" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0juqli7_di" bpmnElement="Flow_0juqli7"><di:waypoint x="5590" y="135" /><di:waypoint x="5590" y="200" /><bpmndi:BPMNLabel><dc:Bounds x="5513" y="140" width="74" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_078fxw8_di" bpmnElement="Flow_078fxw8"><di:waypoint x="5680" y="110" /><di:waypoint x="5615" y="110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01zg9ib_di" bpmnElement="Flow_01zg9ib"><di:waypoint x="5730" y="215" /><di:waypoint x="5730" y="160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zxhafo_di" bpmnElement="Flow_0zxhafo"><di:waypoint x="5730" y="265" /><di:waypoint x="5730" y="420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_117cgkt_di" bpmnElement="Flow_117cgkt"><di:waypoint x="5640" y="240" /><di:waypoint x="5705" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gc1tlq_di" bpmnElement="Flow_0gc1tlq"><di:waypoint x="5060" y="460" /><di:waypoint x="5150" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0s5ici1_di" bpmnElement="Flow_0s5ici1"><di:waypoint x="5590" y="330" /><di:waypoint x="5590" y="280" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07nxy33_di" bpmnElement="Flow_07nxy33"><di:waypoint x="5490" y="435" /><di:waypoint x="5490" y="370" /><di:waypoint x="5540" y="370" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i41dcl_di" bpmnElement="Flow_0i41dcl"><di:waypoint x="5780" y="460" /><di:waypoint x="5820" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tz7rc0_di" bpmnElement="Flow_0tz7rc0"><di:waypoint x="5515" y="460" /><di:waypoint x="5680" y="460" /><bpmndi:BPMNLabel><dc:Bounds x="5558" y="426" width="79" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ckgmr1_di" bpmnElement="Flow_1ckgmr1"><di:waypoint x="5390" y="460" /><di:waypoint x="5465" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nf4izz_di" bpmnElement="Flow_1nf4izz"><di:waypoint x="5250" y="460" /><di:waypoint x="5290" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dsgpar_di" bpmnElement="Flow_0dsgpar"><di:waypoint x="4910" y="460" /><di:waypoint x="4960" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1q3i5vz_di" bpmnElement="Flow_1q3i5vz"><di:waypoint x="4740" y="820" /><di:waypoint x="4835" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qit2b9_di" bpmnElement="Flow_1qit2b9"><di:waypoint x="4230" y="1060" /><di:waypoint x="4230" y="1230" /><di:waypoint x="4330" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bd43bk_di" bpmnElement="Flow_1bd43bk"><di:waypoint x="4860" y="845" /><di:waypoint x="4860" y="1020" /><di:waypoint x="4280" y="1020" /><bpmndi:BPMNLabel><dc:Bounds x="4759" y="889" width="86" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_037uyiq_di" bpmnElement="Flow_037uyiq"><di:waypoint x="4860" y="795" /><di:waypoint x="4860" y="500" /><bpmndi:BPMNLabel><dc:Bounds x="4778" y="631" width="86" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ig8sr3_di" bpmnElement="Flow_0ig8sr3"><di:waypoint x="4545" y="820" /><di:waypoint x="4640" y="820" /><bpmndi:BPMNLabel><dc:Bounds x="4530" y="776" width="88" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13z98nn_di" bpmnElement="Flow_13z98nn"><di:waypoint x="4520" y="845" /><di:waypoint x="4520" y="1020" /><di:waypoint x="4280" y="1020" /><bpmndi:BPMNLabel><dc:Bounds x="4422" y="912" width="88" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v6io2i_di" bpmnElement="Flow_1v6io2i"><di:waypoint x="4420" y="820" /><di:waypoint x="4495" y="820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06gjjpi_di" bpmnElement="Flow_06gjjpi"><di:waypoint x="4010" y="795" /><di:waypoint x="4010" y="690" /><di:waypoint x="4690" y="690" /><di:waypoint x="4690" y="780" /><bpmndi:BPMNLabel><dc:Bounds x="4306" y="673" width="89" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iahp8e_di" bpmnElement="Flow_0iahp8e"><di:waypoint x="4190" y="845" /><di:waypoint x="4190" y="918" /><di:waypoint x="4230" y="918" /><di:waypoint x="4230" y="980" /><bpmndi:BPMNLabel><dc:Bounds x="4108" y="856" width="85" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_168lbew_di" bpmnElement="Flow_168lbew"><di:waypoint x="4215" y="820" /><di:waypoint x="4320" y="820" /><bpmndi:BPMNLabel><dc:Bounds x="4194" y="786" width="89" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fn3kk1_di" bpmnElement="Flow_1fn3kk1"><di:waypoint x="4035" y="820" /><di:waypoint x="4165" y="820" /><bpmndi:BPMNLabel><dc:Bounds x="4058" y="786" width="64" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b84wol_di" bpmnElement="Flow_0b84wol"><di:waypoint x="4010" y="878" /><di:waypoint x="4010" y="845" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lw99vq_di" bpmnElement="Flow_1lw99vq"><di:waypoint x="4035" y="1020" /><di:waypoint x="3965" y="1020" /><bpmndi:BPMNLabel><dc:Bounds x="4099" y="986" width="62" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13mytuy_di" bpmnElement="Flow_13mytuy"><di:waypoint x="4085" y="1020" /><di:waypoint x="4180" y="1020" /><bpmndi:BPMNLabel><dc:Bounds x="3969" y="986" width="62" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xf1jn7_di" bpmnElement="Flow_1xf1jn7"><di:waypoint x="3540" y="1710" /><di:waypoint x="3540" y="1750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fln98t_di" bpmnElement="Flow_0fln98t"><di:waypoint x="3540" y="1600" /><di:waypoint x="3540" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ob8djd_di" bpmnElement="Flow_0ob8djd"><di:waypoint x="3120" y="1630" /><di:waypoint x="3120" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17h6u5q_di" bpmnElement="Flow_17h6u5q"><di:waypoint x="3120" y="1510" /><di:waypoint x="3120" y="1550" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1slsmdt_di" bpmnElement="Flow_1slsmdt"><di:waypoint x="800" y="1630" /><di:waypoint x="800" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p15urr_di" bpmnElement="Flow_0p15urr"><di:waypoint x="800" y="1510" /><di:waypoint x="800" y="1550" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16zknjm_di" bpmnElement="Flow_16zknjm"><di:waypoint x="1080" y="1620" /><di:waypoint x="1080" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dtayyk_di" bpmnElement="Flow_1dtayyk"><di:waypoint x="1080" y="1500" /><di:waypoint x="1080" y="1540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1m3r72o_di" bpmnElement="Flow_1m3r72o"><di:waypoint x="1370" y="1610" /><di:waypoint x="1370" y="1680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04kr4v5_di" bpmnElement="Flow_04kr4v5"><di:waypoint x="1370" y="1500" /><di:waypoint x="1370" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0es5piz_di" bpmnElement="Flow_0es5piz"><di:waypoint x="3450" y="3870" /><di:waypoint x="3450" y="3810" /><di:waypoint x="3730" y="3810" /><di:waypoint x="3730" y="3855" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0yutt8a_di" bpmnElement="Flow_0yutt8a"><di:waypoint x="3475" y="3895" /><di:waypoint x="3595" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14oee7d_di" bpmnElement="Flow_14oee7d"><di:waypoint x="3380" y="3895" /><di:waypoint x="3425" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i9kyqx_di" bpmnElement="Flow_0i9kyqx"><di:waypoint x="3340" y="1230" /><di:waypoint x="3465" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1e0pr2b_di" bpmnElement="Flow_1e0pr2b"><di:waypoint x="1860" y="1770" /><di:waypoint x="1860" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07vr12w_di" bpmnElement="Flow_07vr12w"><di:waypoint x="1860" y="1650" /><di:waypoint x="1860" y="1690" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_146860e_di" bpmnElement="Flow_146860e"><di:waypoint x="1860" y="1540" /><di:waypoint x="1860" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09ls36f_di" bpmnElement="Flow_09ls36f"><di:waypoint x="1860" y="1430" /><di:waypoint x="1860" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_154k22i_di" bpmnElement="Flow_154k22i"><di:waypoint x="340" y="1230" /><di:waypoint x="390" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_098f6wj_di" bpmnElement="Flow_098f6wj"><di:waypoint x="1560" y="1230" /><di:waypoint x="1615" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vnik1y_di" bpmnElement="Flow_1vnik1y"><di:waypoint x="1360" y="1760" /><di:waypoint x="1360" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e8kzmz_di" bpmnElement="Flow_0e8kzmz"><di:waypoint x="1370" y="1390" /><di:waypoint x="1370" y="1420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19yz4ma_di" bpmnElement="Flow_19yz4ma"><di:waypoint x="1640" y="1255" /><di:waypoint x="1640" y="1350" /><di:waypoint x="1410" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g8ffqw_di" bpmnElement="Flow_0g8ffqw"><di:waypoint x="1360" y="1255" /><di:waypoint x="1360" y="1310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lf6hb6_di" bpmnElement="Flow_1lf6hb6"><di:waypoint x="1385" y="1230" /><di:waypoint x="1460" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0y0s1wg_di" bpmnElement="Flow_0y0s1wg"><di:waypoint x="1280" y="1230" /><di:waypoint x="1335" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0emgjsv_di" bpmnElement="Flow_0emgjsv"><di:waypoint x="1080" y="1770" /><di:waypoint x="1080" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02ct7cy_di" bpmnElement="Flow_02ct7cy"><di:waypoint x="1080" y="1390" /><di:waypoint x="1080" y="1420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1woxurr_di" bpmnElement="Flow_1woxurr"><di:waypoint x="1860" y="1255" /><di:waypoint x="1860" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gtshy3_di" bpmnElement="Flow_0gtshy3"><di:waypoint x="1810" y="1230" /><di:waypoint x="1835" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0sk1zx7_di" bpmnElement="Flow_0sk1zx7"><di:waypoint x="1665" y="1230" /><di:waypoint x="1710" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ihiu00_di" bpmnElement="Flow_0ihiu00"><di:waypoint x="1885" y="1230" /><di:waypoint x="1990" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0plbd3l_di" bpmnElement="Flow_0plbd3l"><di:waypoint x="1105" y="1230" /><di:waypoint x="1180" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rnj5i8_di" bpmnElement="Flow_1rnj5i8"><di:waypoint x="1080" y="1255" /><di:waypoint x="1080" y="1310" /><bpmndi:BPMNLabel><dc:Bounds x="1084" y="1262" width="52" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tyigil_di" bpmnElement="Flow_1tyigil"><di:waypoint x="1000" y="1230" /><di:waypoint x="1055" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14828c5_di" bpmnElement="Flow_14828c5"><di:waypoint x="800" y="1770" /><di:waypoint x="800" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10dz3zz_di" bpmnElement="Flow_10dz3zz"><di:waypoint x="800" y="1390" /><di:waypoint x="800" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0l642dk_di" bpmnElement="Flow_0l642dk"><di:waypoint x="800" y="1255" /><di:waypoint x="800" y="1310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1maflx4_di" bpmnElement="Flow_1maflx4"><di:waypoint x="825" y="1230" /><di:waypoint x="900" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_123mx2f_di" bpmnElement="Flow_123mx2f"><di:waypoint x="3200" y="1230" /><di:waypoint x="3240" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n5thyk_di" bpmnElement="Flow_0n5thyk"><di:waypoint x="3120" y="1770" /><di:waypoint x="3120" y="1802" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09pfwze_di" bpmnElement="Flow_09pfwze"><di:waypoint x="3120" y="1390" /><di:waypoint x="3120" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18cp3hw_di" bpmnElement="Flow_18cp3hw"><di:waypoint x="3020" y="1255" /><di:waypoint x="3020" y="1350" /><di:waypoint x="3070" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_180w3b6_di" bpmnElement="Flow_180w3b6"><di:waypoint x="3045" y="1230" /><di:waypoint x="3100" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0y55upr_di" bpmnElement="Flow_0y55upr"><di:waypoint x="2960" y="1230" /><di:waypoint x="2995" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b5t4ny_di" bpmnElement="Flow_1b5t4ny"><di:waypoint x="660" y="1230" /><di:waypoint x="775" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p29n07_di" bpmnElement="Flow_0p29n07"><di:waypoint x="490" y="1230" /><di:waypoint x="560" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dlbxk3_di" bpmnElement="Flow_0dlbxk3"><di:waypoint x="3340" y="1172" /><di:waypoint x="3340" y="1090" /><di:waypoint x="610" y="1090" /><di:waypoint x="610" y="1190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dlh9c3_di" bpmnElement="Flow_1dlh9c3"><di:waypoint x="188" y="1230" /><di:waypoint x="240" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15i1kjj_di" bpmnElement="Flow_15i1kjj"><di:waypoint x="2880" y="3895" /><di:waypoint x="2950" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0twe2ov_di" bpmnElement="Flow_0twe2ov"><di:waypoint x="3050" y="3895" /><di:waypoint x="3175" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lhi8zq_di" bpmnElement="Flow_0lhi8zq"><di:waypoint x="4448" y="4075" /><di:waypoint x="4448" y="4035" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0x3l9lc_di" bpmnElement="Flow_0x3l9lc"><di:waypoint x="3920" y="3895" /><di:waypoint x="4130" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1elbwnh_di" bpmnElement="Flow_1elbwnh"><di:waypoint x="7350" y="3840" /><di:waypoint x="7350" y="3680" /><di:waypoint x="6700" y="3680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00dp544_di" bpmnElement="Flow_00dp544"><di:waypoint x="7350" y="3890" /><di:waypoint x="7350" y="4780" /><di:waypoint x="3920" y="4780" /><di:waypoint x="3920" y="4695" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1s7chuq_di" bpmnElement="Flow_1s7chuq"><di:waypoint x="7230" y="3865" /><di:waypoint x="7325" y="3865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02teu0h_di" bpmnElement="Flow_02teu0h"><di:waypoint x="7050" y="3890" /><di:waypoint x="7050" y="3995" /><di:waypoint x="6920" y="3995" /><bpmndi:BPMNLabel><dc:Bounds x="6980" y="3968" width="57" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1inkqy6_di" bpmnElement="Flow_1inkqy6"><di:waypoint x="7075" y="3865" /><di:waypoint x="7130" y="3865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10563ik_di" bpmnElement="Flow_10563ik"><di:waypoint x="4000" y="4155" /><di:waypoint x="4000" y="4210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18qelxg_di" bpmnElement="Flow_18qelxg"><di:waypoint x="3650" y="1375" /><di:waypoint x="3650" y="1460" /><di:waypoint x="3590" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1eg5s6x_di" bpmnElement="Flow_1eg5s6x"><di:waypoint x="3540" y="1830" /><di:waypoint x="3540" y="1862" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g492rn_di" bpmnElement="Flow_1g492rn"><di:waypoint x="3540" y="1500" /><di:waypoint x="3540" y="1520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1n1ccp9_di" bpmnElement="Flow_1n1ccp9"><di:waypoint x="3650" y="1325" /><di:waypoint x="3650" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dgmrfn_di" bpmnElement="Flow_0dgmrfn"><di:waypoint x="3540" y="1350" /><di:waypoint x="3625" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_082s379_di" bpmnElement="Flow_082s379"><di:waypoint x="3490" y="1255" /><di:waypoint x="3490" y="1310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jz6oe6_di" bpmnElement="Flow_1jz6oe6"><di:waypoint x="3650" y="1190" /><di:waypoint x="3650" y="1160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cr4uli_di" bpmnElement="Flow_1cr4uli"><di:waypoint x="3515" y="1230" /><di:waypoint x="3600" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19nfvck_di" bpmnElement="Flow_19nfvck"><di:waypoint x="4985" y="2560" /><di:waypoint x="4010" y="2560" /><di:waypoint x="4010" y="3240" /><di:waypoint x="3750" y="3240" /><bpmndi:BPMNLabel><dc:Bounds x="4573" y="2516" width="73" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vx9xnt_di" bpmnElement="Flow_0vx9xnt"><di:waypoint x="4423" y="3240" /><di:waypoint x="3750" y="3240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mracbs_di" bpmnElement="Flow_1mracbs"><di:waypoint x="5010" y="2585" /><di:waypoint x="5010" y="3240" /><di:waypoint x="4473" y="3240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0za741n_di" bpmnElement="Flow_0za741n"><di:waypoint x="4448" y="3265" /><di:waypoint x="4448" y="3855" /><bpmndi:BPMNLabel><dc:Bounds x="4454" y="3525" width="87" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bl07ky_di" bpmnElement="Flow_1bl07ky"><di:waypoint x="4448" y="3955" /><di:waypoint x="4448" y="3935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mj3jhf_di" bpmnElement="Flow_0mj3jhf"><di:waypoint x="3780" y="3895" /><di:waypoint x="3820" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1byc2j5_di" bpmnElement="Flow_1byc2j5"><di:waypoint x="7470" y="2950" /><di:waypoint x="7470" y="3445" /><di:waypoint x="4920" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_014dl68_di" bpmnElement="Flow_014dl68"><di:waypoint x="3620" y="4170" /><di:waypoint x="3620" y="4210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zd8ik7_di" bpmnElement="Flow_0zd8ik7"><di:waypoint x="4430" y="1230" /><di:waypoint x="4510" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_085v3dc_di" bpmnElement="Flow_085v3dc"><di:waypoint x="3650" y="1080" /><di:waypoint x="3650" y="1050" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lqaixv_di" bpmnElement="Flow_1lqaixv"><di:waypoint x="7050" y="2700" /><di:waypoint x="7130" y="2700" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ww4eak_di" bpmnElement="Flow_0ww4eak"><di:waypoint x="7050" y="2600" /><di:waypoint x="7130" y="2600" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nur3mc_di" bpmnElement="Flow_1nur3mc"><di:waypoint x="7050" y="2500" /><di:waypoint x="7130" y="2500" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bt0gdr_di" bpmnElement="Flow_0bt0gdr"><di:waypoint x="7050" y="2410" /><di:waypoint x="7130" y="2410" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xuo6fm_di" bpmnElement="Flow_0xuo6fm"><di:waypoint x="6903" y="2320" /><di:waypoint x="7130" y="2320" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06c6w21_di" bpmnElement="Flow_06c6w21"><di:waypoint x="6900" y="2230" /><di:waypoint x="7130" y="2230" /><di:waypoint x="7130" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yio11i_di" bpmnElement="Flow_1yio11i"><di:waypoint x="6903" y="2040" /><di:waypoint x="7130" y="2040" /><di:waypoint x="7130" y="2100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19n7k78_di" bpmnElement="Flow_19n7k78"><di:waypoint x="6900" y="1920" /><di:waypoint x="7130" y="1920" /><di:waypoint x="7130" y="2100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_149jvcr_di" bpmnElement="Flow_149jvcr"><di:waypoint x="6890" y="1780" /><di:waypoint x="7130" y="1780" /><di:waypoint x="7130" y="2100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rk2vk8_di" bpmnElement="Flow_0rk2vk8"><di:waypoint x="6900" y="2140" /><di:waypoint x="7080" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ygv3v2_di" bpmnElement="Flow_1ygv3v2"><di:waypoint x="6765" y="2140" /><di:waypoint x="6800" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xbe3uv_di" bpmnElement="Flow_1xbe3uv"><di:waypoint x="2820" y="3445" /><di:waypoint x="2620" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mmpzpo_di" bpmnElement="Flow_0mmpzpo"><di:waypoint x="2600" y="4305" /><di:waypoint x="2600" y="4347" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mxnr9r_di" bpmnElement="Flow_1mxnr9r"><di:waypoint x="7470" y="2410" /><di:waypoint x="7470" y="2870" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1x9k0kh_di" bpmnElement="Flow_1x9k0kh"><di:waypoint x="7470" y="2165" /><di:waypoint x="7470" y="2330" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ovwd9l_di" bpmnElement="Flow_0ovwd9l"><di:waypoint x="7080" y="1390" /><di:waypoint x="6260" y="1390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11p2hyf_di" bpmnElement="Flow_11p2hyf"><di:waypoint x="7470" y="2115" /><di:waypoint x="7470" y="1390" /><di:waypoint x="7180" y="1390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vecv2u_di" bpmnElement="Flow_1vecv2u"><di:waypoint x="7275" y="2140" /><di:waypoint x="7445" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14ipuq1_di" bpmnElement="Flow_14ipuq1"><di:waypoint x="7250" y="2165" /><di:waypoint x="7250" y="2810" /><di:waypoint x="5540" y="2810" /><di:waypoint x="5540" y="2180" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g1iufh_di" bpmnElement="Flow_0g1iufh"><di:waypoint x="7180" y="2140" /><di:waypoint x="7225" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1iu26me_di" bpmnElement="Flow_1iu26me"><di:waypoint x="6210" y="2600" /><di:waypoint x="6445" y="2600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_063q00a_di" bpmnElement="Flow_063q00a"><di:waypoint x="6170" y="2320" /><di:waypoint x="6325" y="2320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nr2pg7_di" bpmnElement="Flow_0nr2pg7"><di:waypoint x="6260" y="2115" /><di:waypoint x="6260" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pf4828_di" bpmnElement="Flow_0pf4828"><di:waypoint x="6285" y="2140" /><di:waypoint x="6665" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1orxr1o_di" bpmnElement="Flow_1orxr1o"><di:waypoint x="6210" y="2140" /><di:waypoint x="6235" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bna5ux_di" bpmnElement="Flow_1bna5ux"><di:waypoint x="6765" y="2230" /><di:waypoint x="6800" y="2230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1q3exjm_di" bpmnElement="Flow_1q3exjm"><di:waypoint x="6765" y="2320" /><di:waypoint x="6803" y="2320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xi9hey_di" bpmnElement="Flow_1xi9hey"><di:waypoint x="6765" y="2410" /><di:waypoint x="6950" y="2410" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bvzpax_di" bpmnElement="Flow_1bvzpax"><di:waypoint x="6765" y="2500" /><di:waypoint x="6950" y="2500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_160umgb_di" bpmnElement="Flow_160umgb"><di:waypoint x="6760" y="2600" /><di:waypoint x="6950" y="2600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p0a39g_di" bpmnElement="Flow_0p0a39g"><di:waypoint x="6765" y="2700" /><di:waypoint x="6950" y="2700" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bjaezp_di" bpmnElement="Flow_0bjaezp"><di:waypoint x="6535" y="2700" /><di:waypoint x="6665" y="2700" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1br50cd_di" bpmnElement="Flow_1br50cd"><di:waypoint x="6495" y="2600" /><di:waypoint x="6660" y="2600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1svobl4_di" bpmnElement="Flow_1svobl4"><di:waypoint x="6455" y="2500" /><di:waypoint x="6665" y="2500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06d20rx_di" bpmnElement="Flow_06d20rx"><di:waypoint x="6415" y="2410" /><di:waypoint x="6665" y="2410" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04kkpt6_di" bpmnElement="Flow_04kkpt6"><di:waypoint x="6375" y="2320" /><di:waypoint x="6665" y="2320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tdg2k7_di" bpmnElement="Flow_0tdg2k7"><di:waypoint x="6335" y="2230" /><di:waypoint x="6665" y="2230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vclijt_di" bpmnElement="Flow_1vclijt"><di:waypoint x="6085" y="2140" /><di:waypoint x="6110" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02bpoqq_di" bpmnElement="Flow_02bpoqq"><di:waypoint x="6765" y="2040" /><di:waypoint x="6803" y="2040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a40nyk_di" bpmnElement="Flow_0a40nyk"><di:waypoint x="6765" y="1920" /><di:waypoint x="6800" y="1920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08f1mkx_di" bpmnElement="Flow_08f1mkx"><di:waypoint x="6765" y="1780" /><di:waypoint x="6790" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hztnkx_di" bpmnElement="Flow_1hztnkx"><di:waypoint x="6510" y="2675" /><di:waypoint x="6510" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hsaqey_di" bpmnElement="Flow_0hsaqey"><di:waypoint x="6470" y="2575" /><di:waypoint x="6470" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b80tdn_di" bpmnElement="Flow_0b80tdn"><di:waypoint x="6430" y="2475" /><di:waypoint x="6430" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14doqcj_di" bpmnElement="Flow_14doqcj"><di:waypoint x="6390" y="2385" /><di:waypoint x="6390" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q9z63q_di" bpmnElement="Flow_0q9z63q"><di:waypoint x="6350" y="2295" /><di:waypoint x="6350" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ji3u77_di" bpmnElement="Flow_1ji3u77"><di:waypoint x="6310" y="2205" /><di:waypoint x="6310" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09zwxqx_di" bpmnElement="Flow_09zwxqx"><di:waypoint x="6060" y="2115" /><di:waypoint x="6060" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01lcnjy_di" bpmnElement="Flow_01lcnjy"><di:waypoint x="6020" y="2140" /><di:waypoint x="6035" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jqph67_di" bpmnElement="Flow_1jqph67"><di:waypoint x="6225" y="2040" /><di:waypoint x="6665" y="2040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0oli8re_di" bpmnElement="Flow_0oli8re"><di:waypoint x="6200" y="2015" /><di:waypoint x="6200" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v2z32p_di" bpmnElement="Flow_1v2z32p"><di:waypoint x="6040" y="2040" /><di:waypoint x="6175" y="2040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pswn4a_di" bpmnElement="Flow_0pswn4a"><di:waypoint x="6150" y="1895" /><di:waypoint x="6150" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lqqlyb_di" bpmnElement="Flow_0lqqlyb"><di:waypoint x="6175" y="1920" /><di:waypoint x="6665" y="1920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mdcvpp_di" bpmnElement="Flow_0mdcvpp"><di:waypoint x="5650" y="2115" /><di:waypoint x="5650" y="1710" /><di:waypoint x="5770" y="1710" /><bpmndi:BPMNLabel><dc:Bounds x="5561" y="1900" width="78" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1a51fkp_di" bpmnElement="Flow_1a51fkp"><di:waypoint x="5675" y="2140" /><di:waypoint x="5795" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wwgwnp_di" bpmnElement="Flow_0wwgwnp"><di:waypoint x="6125" y="1780" /><di:waypoint x="6665" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pympva_di" bpmnElement="Flow_1pympva"><di:waypoint x="6100" y="1755" /><di:waypoint x="6100" y="1710" /><di:waypoint x="5870" y="1710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fq6zai_di" bpmnElement="Flow_0fq6zai"><di:waypoint x="6040" y="1780" /><di:waypoint x="6075" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03w54iy_di" bpmnElement="Flow_03w54iy"><di:waypoint x="5820" y="1670" /><di:waypoint x="5820" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_008o36s_di" bpmnElement="Flow_008o36s"><di:waypoint x="5820" y="2115" /><di:waypoint x="5820" y="1750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e4amoo_di" bpmnElement="Flow_0e4amoo"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2600" /><di:waypoint x="6110" y="2600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_191pvra_di" bpmnElement="Flow_191pvra"><di:waypoint x="5820" y="2115" /><di:waypoint x="5820" y="2040" /><di:waypoint x="5940" y="2040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hoeh2u_di" bpmnElement="Flow_0hoeh2u"><di:waypoint x="5820" y="2115" /><di:waypoint x="5820" y="1920" /><di:waypoint x="6125" y="1920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1700mnz_di" bpmnElement="Flow_1700mnz"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2700" /><di:waypoint x="6485" y="2700" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ktc94n_di" bpmnElement="Flow_0ktc94n"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2500" /><di:waypoint x="6405" y="2500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1x8h1ry_di" bpmnElement="Flow_1x8h1ry"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2410" /><di:waypoint x="6365" y="2410" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_196enl9_di" bpmnElement="Flow_196enl9"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2320" /><di:waypoint x="6070" y="2320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cmngln_di" bpmnElement="Flow_1cmngln"><di:waypoint x="5820" y="2165" /><di:waypoint x="5820" y="2230" /><di:waypoint x="6285" y="2230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w44jqs_di" bpmnElement="Flow_0w44jqs"><di:waypoint x="5845" y="2140" /><di:waypoint x="5920" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cn4mo3_di" bpmnElement="Flow_0cn4mo3"><di:waypoint x="5820" y="2115" /><di:waypoint x="5820" y="1780" /><di:waypoint x="5940" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kwhau9_di" bpmnElement="Flow_0kwhau9"><di:waypoint x="5590" y="2140" /><di:waypoint x="5625" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_046mx2t_di" bpmnElement="Flow_046mx2t"><di:waypoint x="5440" y="2140" /><di:waypoint x="5490" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04493ad_di" bpmnElement="Flow_04493ad"><di:waypoint x="5300" y="2140" /><di:waypoint x="5340" y="2140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hs04qj_di" bpmnElement="Flow_1hs04qj"><di:waypoint x="6870" y="4035" /><di:waypoint x="6870" y="4097" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01tdnay_di" bpmnElement="Flow_01tdnay"><di:waypoint x="6870" y="3890" /><di:waypoint x="6870" y="3955" /><bpmndi:BPMNLabel><dc:Bounds x="6864" y="3902" width="43" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_090rcop_di" bpmnElement="Flow_090rcop"><di:waypoint x="6895" y="3865" /><di:waypoint x="7025" y="3865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uogpiu_di" bpmnElement="Flow_0uogpiu"><di:waypoint x="4423" y="4270" /><di:waypoint x="4327" y="4270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0v2kl2n_di" bpmnElement="Flow_0v2kl2n"><di:waypoint x="4448" y="4245" /><di:waypoint x="4448" y="4155" /><bpmndi:BPMNLabel><dc:Bounds x="4450" y="4205" width="27" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bvpdas_di" bpmnElement="Flow_0bvpdas"><di:waypoint x="4448" y="4340" /><di:waypoint x="4448" y="4295" /><bpmndi:BPMNLabel><dc:Bounds x="4375" y="4311" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p6z1iy_di" bpmnElement="Flow_0p6z1iy"><di:waypoint x="4327" y="4365" /><di:waypoint x="4423" y="4365" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h7mf4n_di" bpmnElement="Flow_0h7mf4n"><di:waypoint x="6700" y="3865" /><di:waypoint x="6845" y="3865" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_051hbhi_di" bpmnElement="Flow_051hbhi"><di:waypoint x="2300" y="3895" /><di:waypoint x="2545" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1suu02y_di" bpmnElement="Flow_1suu02y"><di:waypoint x="2970" y="3565" /><di:waypoint x="3012" y="3565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ss9o42_di" bpmnElement="Flow_0ss9o42"><di:waypoint x="3130" y="3725" /><di:waypoint x="3130" y="3767" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_124iqnj_di" bpmnElement="Flow_124iqnj"><di:waypoint x="3700" y="3200" /><di:waypoint x="3700" y="1530" /><di:waypoint x="4720" y="1530" /><di:waypoint x="4720" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ua4k4f_di" bpmnElement="Flow_1ua4k4f"><di:waypoint x="5250" y="1842" /><di:waypoint x="5250" y="1390" /><di:waypoint x="5360" y="1390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kkiuth_di" bpmnElement="Flow_1kkiuth"><di:waypoint x="5360" y="1320" /><di:waypoint x="4890" y="1320" /><di:waypoint x="4890" y="1735" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12zf9ig_di" bpmnElement="Flow_12zf9ig"><di:waypoint x="5260" y="1940" /><di:waypoint x="5260" y="2100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06jr3zl_di" bpmnElement="Flow_06jr3zl"><di:waypoint x="4498" y="3895" /><di:waypoint x="5320" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03g9w3c_di" bpmnElement="Flow_03g9w3c"><di:waypoint x="4230" y="3895" /><di:waypoint x="4398" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hsd410_di" bpmnElement="Flow_0hsd410"><di:waypoint x="3645" y="3895" /><di:waypoint x="3680" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qu4mqy_di" bpmnElement="Flow_1qu4mqy"><di:waypoint x="3620" y="4065" /><di:waypoint x="3620" y="4090" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wm36dw_di" bpmnElement="Flow_1wm36dw"><di:waypoint x="3620" y="3920" /><di:waypoint x="3620" y="3985" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0plb4iq_di" bpmnElement="Flow_0plb4iq"><di:waypoint x="3225" y="3895" /><di:waypoint x="3280" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0v3bx4e_di" bpmnElement="Flow_0v3bx4e"><di:waypoint x="3200" y="3870" /><di:waypoint x="3200" y="3720" /><di:waypoint x="3730" y="3720" /><di:waypoint x="3730" y="3855" /><bpmndi:BPMNLabel><dc:Bounds x="3438" y="3665" width="66" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u9ufq0_di" bpmnElement="Flow_1u9ufq0"><di:waypoint x="2710" y="3920" /><di:waypoint x="2710" y="4145" /><di:waypoint x="2650" y="4145" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mlqv0q_di" bpmnElement="Flow_1mlqv0q"><di:waypoint x="2735" y="3895" /><di:waypoint x="2780" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_195d8ok_di" bpmnElement="Flow_195d8ok"><di:waypoint x="2600" y="4185" /><di:waypoint x="2600" y="4225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0m7huxt_di" bpmnElement="Flow_0m7huxt"><di:waypoint x="2250" y="4070" /><di:waypoint x="2250" y="4145" /><di:waypoint x="2550" y="4145" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1honijm_di" bpmnElement="Flow_1honijm"><di:waypoint x="2250" y="4020" /><di:waypoint x="2250" y="3935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gnqcbx_di" bpmnElement="Flow_1gnqcbx"><di:waypoint x="2410" y="4045" /><di:waypoint x="2275" y="4045" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02flpdz_di" bpmnElement="Flow_02flpdz"><di:waypoint x="2570" y="3920" /><di:waypoint x="2570" y="4045" /><di:waypoint x="2510" y="4045" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mimwbo_di" bpmnElement="Flow_0mimwbo"><di:waypoint x="2595" y="3895" /><di:waypoint x="2685" y="3895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1al2ujp_di" bpmnElement="Flow_1al2ujp"><di:waypoint x="2250" y="3825" /><di:waypoint x="2250" y="3855" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1m6xeu8_di" bpmnElement="Flow_1m6xeu8"><di:waypoint x="2595" y="3785" /><di:waypoint x="2790" y="3785" /><di:waypoint x="2790" y="3605" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0x9j986_di" bpmnElement="Flow_0x9j986"><di:waypoint x="2545" y="3785" /><di:waypoint x="2300" y="3785" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cpsojz_di" bpmnElement="Flow_0cpsojz"><di:waypoint x="3130" y="3605" /><di:waypoint x="3130" y="3645" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pr6mi8_di" bpmnElement="Flow_0pr6mi8"><di:waypoint x="3130" y="3470" /><di:waypoint x="3130" y="3525" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kmyjxs_di" bpmnElement="Flow_0kmyjxs"><di:waypoint x="3105" y="3445" /><di:waypoint x="2920" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01zaxib_di" bpmnElement="Flow_01zaxib"><di:waypoint x="3270" y="3445" /><di:waypoint x="3155" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_047fj35_di" bpmnElement="Flow_047fj35"><di:waypoint x="3700" y="3420" /><di:waypoint x="3700" y="3280" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02ot4ih_di" bpmnElement="Flow_02ot4ih"><di:waypoint x="3675" y="3445" /><di:waypoint x="3370" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0yxujqj_di" bpmnElement="Flow_0yxujqj"><di:waypoint x="2595" y="3565" /><di:waypoint x="2740" y="3565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mishme_di" bpmnElement="Flow_0mishme"><di:waypoint x="2840" y="3565" /><di:waypoint x="2870" y="3565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e8d39g_di" bpmnElement="Flow_0e8d39g"><di:waypoint x="2570" y="3725" /><di:waypoint x="2570" y="3760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04rxqkd_di" bpmnElement="Flow_04rxqkd"><di:waypoint x="2570" y="3590" /><di:waypoint x="2570" y="3645" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07jv9kh_di" bpmnElement="Flow_07jv9kh"><di:waypoint x="2570" y="3485" /><di:waypoint x="2570" y="3540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rw037r_di" bpmnElement="Flow_0rw037r"><di:waypoint x="4915" y="1760" /><di:waypoint x="5010" y="1760" /><di:waypoint x="5010" y="1875" /><bpmndi:BPMNLabel><dc:Bounds x="4928" y="1742" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e1nr9n_di" bpmnElement="Flow_0e1nr9n"><di:waypoint x="4890" y="2050" /><di:waypoint x="4890" y="2102" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qrnbg2_di" bpmnElement="Flow_1qrnbg2"><di:waypoint x="4890" y="1930" /><di:waypoint x="4890" y="1970" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tdqjfi_di" bpmnElement="Flow_1tdqjfi"><di:waypoint x="4890" y="1785" /><di:waypoint x="4890" y="1850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ydcdei_di" bpmnElement="Flow_0ydcdei"><di:waypoint x="3870" y="3445" /><di:waypoint x="3725" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jn3guo_di" bpmnElement="Flow_0jn3guo"><di:waypoint x="4820" y="3445" /><di:waypoint x="3970" y="3445" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oe5fr8_di" bpmnElement="Flow_1oe5fr8"><di:waypoint x="4439" y="3256" /><di:waypoint x="4390" y="3350" /><di:waypoint x="4000" y="3350" /><di:waypoint x="4000" y="4075" /><bpmndi:BPMNLabel><dc:Bounds x="4160" y="3316" width="70" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_147f80q_di" bpmnElement="Flow_147f80q"><di:waypoint x="5010" y="2300" /><di:waypoint x="5010" y="2535" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mdksxt_di" bpmnElement="Flow_0mdksxt"><di:waypoint x="5010" y="1925" /><di:waypoint x="5010" y="2220" /><bpmndi:BPMNLabel><dc:Bounds x="5022" y="2067" width="77" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1sb9gat_di" bpmnElement="Flow_1sb9gat"><di:waypoint x="5035" y="1900" /><di:waypoint x="5210" y="1900" /><bpmndi:BPMNLabel><dc:Bounds x="5063" y="1882" width="60" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tin5ke_di" bpmnElement="Flow_0tin5ke"><di:waypoint x="4770" y="1230" /><di:waypoint x="5360" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05von8l_di" bpmnElement="Flow_05von8l"><di:waypoint x="3980" y="1230" /><di:waypoint x="4010" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_168p1tq_di" bpmnElement="Flow_168p1tq"><di:waypoint x="4610" y="1230" /><di:waypoint x="4670" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bda7pn_di" bpmnElement="Flow_1bda7pn"><di:waypoint x="4060" y="1190" /><di:waypoint x="4060" y="1045" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_11sak0v_di" bpmnElement="Activity_11sak0v"><dc:Bounds x="4510" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ad3l6x_di" bpmnElement="Activity_1ad3l6x" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="4180" y="980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1homk9h_di" bpmnElement="Activity_1homk9h"><dc:Bounds x="3880" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1oijv2b_di" bpmnElement="Activity_1oijv2b"><dc:Bounds x="4010" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1eke9hj_di" bpmnElement="Activity_1eke9hj"><dc:Bounds x="4670" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ckxki2_di" bpmnElement="Gateway_1ckxki2" isMarkerVisible="true"><dc:Bounds x="4985" y="1875" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1t6kbbh_di" bpmnElement="Activity_1t6kbbh"><dc:Bounds x="4960" y="2220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ky81ah_di" bpmnElement="Activity_1ky81ah"><dc:Bounds x="4820" y="3405" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1pnv0y0_di" bpmnElement="Gateway_1pnv0y0" isMarkerVisible="true"><dc:Bounds x="4423" y="3215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mztecc_di" bpmnElement="Activity_0mztecc"><dc:Bounds x="3870" y="3405" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1horrh6_di" bpmnElement="Gateway_1horrh6" isMarkerVisible="true"><dc:Bounds x="4865" y="1735" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dj44h2_di" bpmnElement="Activity_0dj44h2"><dc:Bounds x="4840" y="1850" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12fmjd5_di" bpmnElement="Activity_12fmjd5"><dc:Bounds x="4840" y="1970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13my4cc_di" bpmnElement="Activity_13my4cc"><dc:Bounds x="2520" y="3405" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_11tsn3c_di" bpmnElement="Gateway_11tsn3c" isMarkerVisible="true"><dc:Bounds x="2545" y="3540" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vo0a7a_di" bpmnElement="Activity_0vo0a7a"><dc:Bounds x="2520" y="3645" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0w1ipm1_di" bpmnElement="Activity_0w1ipm1"><dc:Bounds x="2740" y="3525" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06qcc5h_di" bpmnElement="Activity_06qcc5h"><dc:Bounds x="2870" y="3525" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1xyil6f_di" bpmnElement="Event_1xyil6f"><dc:Bounds x="3012" y="3547" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0kg6ytq_di" bpmnElement="Gateway_0kg6ytq" isMarkerVisible="true"><dc:Bounds x="3675" y="3420" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_123iofn_di" bpmnElement="Activity_123iofn"><dc:Bounds x="3650" y="3200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bps4ga_di" bpmnElement="Activity_0bps4ga"><dc:Bounds x="3270" y="3405" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0wgppri_di" bpmnElement="Gateway_0wgppri" isMarkerVisible="true"><dc:Bounds x="3105" y="3420" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qmkimh_di" bpmnElement="Activity_0qmkimh"><dc:Bounds x="3080" y="3525" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ahnm49_di" bpmnElement="Activity_1ahnm49"><dc:Bounds x="3080" y="3645" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1jvwlj8_di" bpmnElement="Event_1jvwlj8"><dc:Bounds x="3112" y="3767" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_09jr4cy_di" bpmnElement="Gateway_09jr4cy" isMarkerVisible="true"><dc:Bounds x="2545" y="3760" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17bjaj8_di" bpmnElement="Activity_17bjaj8"><dc:Bounds x="2200" y="3745" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1dzjdd5_di" bpmnElement="Gateway_1dzjdd5" isMarkerVisible="true"><dc:Bounds x="2545" y="3870" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vee5md_di" bpmnElement="Activity_0vee5md"><dc:Bounds x="2410" y="4005" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ilhn49_di" bpmnElement="Gateway_0ilhn49" isMarkerVisible="true"><dc:Bounds x="2225" y="4020" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m1v3p9_di" bpmnElement="Activity_0m1v3p9"><dc:Bounds x="2550" y="4105" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_087s54j_di" bpmnElement="Activity_087s54j"><dc:Bounds x="2550" y="4225" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1oiupiu_di" bpmnElement="Event_1oiupiu"><dc:Bounds x="2582" y="4347" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0q4gp83_di" bpmnElement="Gateway_0q4gp83" isMarkerVisible="true"><dc:Bounds x="2685" y="3870" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1edqgy8_di" bpmnElement="Gateway_1edqgy8" isMarkerVisible="true"><dc:Bounds x="3175" y="3870" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_11l4stt_di" bpmnElement="Gateway_11l4stt" isMarkerVisible="true"><dc:Bounds x="3595" y="3870" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1cdhsnl_di" bpmnElement="Activity_1cdhsnl"><dc:Bounds x="3570" y="3985" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06p9dra_di" bpmnElement="Activity_06p9dra" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="4130" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_119dpzh_di" bpmnElement="Activity_119dpzh"><dc:Bounds x="4398" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08tzw41_di" bpmnElement="Activity_08tzw41"><dc:Bounds x="5210" y="1860" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1u5g3mr_di" bpmnElement="Activity_1u5g3mr" isExpanded="true"><dc:Bounds x="5360" y="980" width="900" height="550" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1prl3am_di" bpmnElement="Flow_1prl3am"><di:waypoint x="6030" y="1320" /><di:waypoint x="6082" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tt8y12_di" bpmnElement="Flow_0tt8y12"><di:waypoint x="6050" y="1110" /><di:waypoint x="6112" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1w9k7qq_di" bpmnElement="Flow_1w9k7qq"><di:waypoint x="6020" y="1430" /><di:waypoint x="6082" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jg0iep_di" bpmnElement="Flow_1jg0iep"><di:waypoint x="5860" y="1430" /><di:waypoint x="5920" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01eptw9_di" bpmnElement="Flow_01eptw9"><di:waypoint x="5698" y="1430" /><di:waypoint x="5760" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0l0uzs7_di" bpmnElement="Flow_0l0uzs7"><di:waypoint x="5570" y="1345" /><di:waypoint x="5570" y="1430" /><di:waypoint x="5662" y="1430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09l4k08_di" bpmnElement="Flow_09l4k08"><di:waypoint x="5860" y="1320" /><di:waypoint x="5930" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0culqeg_di" bpmnElement="Flow_0culqeg"><di:waypoint x="5698" y="1320" /><di:waypoint x="5760" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cv41zz_di" bpmnElement="Flow_0cv41zz"><di:waypoint x="5595" y="1320" /><di:waypoint x="5662" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v72ng2_di" bpmnElement="Flow_1v72ng2"><di:waypoint x="5910" y="1110" /><di:waypoint x="5950" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qbxk5u_di" bpmnElement="Flow_1qbxk5u"><di:waypoint x="5760" y="1110" /><di:waypoint x="5810" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g3yemi_di" bpmnElement="Flow_1g3yemi"><di:waypoint x="5570" y="1295" /><di:waypoint x="5570" y="1110" /><di:waypoint x="5660" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lfh3cj_di" bpmnElement="Flow_0lfh3cj"><di:waypoint x="5488" y="1320" /><di:waypoint x="5545" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_180avbg_di" bpmnElement="Event_180avbg"><dc:Bounds x="5452" y="1302" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0egm19k_di" bpmnElement="Gateway_1y4q3rf"><dc:Bounds x="5545" y="1295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1p39c7a_di" bpmnElement="Activity_1p39c7a"><dc:Bounds x="5660" y="1070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06eafzp_di" bpmnElement="Activity_06eafzp"><dc:Bounds x="5810" y="1070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_18syxqs_di" bpmnElement="Event_1jsq5yq"><dc:Bounds x="6112" y="1092" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0gj72tu_di" bpmnElement="Event_0fbt9o8"><dc:Bounds x="5662" y="1302" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gip4j1_di" bpmnElement="Activity_0gip4j1"><dc:Bounds x="5760" y="1280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1d6j4q9_di" bpmnElement="Event_1xznazv"><dc:Bounds x="6082" y="1302" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1nms9h1_di" bpmnElement="Event_1vqunfq"><dc:Bounds x="5662" y="1412" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15ev38y_di" bpmnElement="Activity_15ev38y"><dc:Bounds x="5760" y="1390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0t8xgnv_di" bpmnElement="Activity_0t8xgnv"><dc:Bounds x="5920" y="1390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_04rsjbw_di" bpmnElement="Event_0zkzjop"><dc:Bounds x="6082" y="1412" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1m8ol8g_di" bpmnElement="Activity_1m8ol8g"><dc:Bounds x="5950" y="1070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m962k5_di" bpmnElement="Activity_0m962k5"><dc:Bounds x="5930" y="1280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00ycflx_di" bpmnElement="Activity_00ycflx"><dc:Bounds x="2200" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0u2w8h7_di" bpmnElement="Activity_0u2w8h7" isExpanded="true"><dc:Bounds x="5320" y="3550" width="1380" height="1020" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1dlus2k_di" bpmnElement="Flow_1dlus2k"><di:waypoint x="5910" y="4360" /><di:waypoint x="5995" y="4360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uq65ca_di" bpmnElement="Flow_0uq65ca"><di:waypoint x="5490" y="3980" /><di:waypoint x="5490" y="4052" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_029h1o2_di" bpmnElement="Flow_029h1o2"><di:waypoint x="6420" y="4059" /><di:waypoint x="6460" y="4059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09998p0_di" bpmnElement="Flow_09998p0"><di:waypoint x="6560" y="4059" /><di:waypoint x="6612" y="4059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hraws5_di" bpmnElement="Flow_1hraws5"><di:waypoint x="5950" y="3850" /><di:waypoint x="6032" y="3850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qclske_di" bpmnElement="Flow_1qclske"><di:waypoint x="6090" y="3710" /><di:waypoint x="6152" y="3710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14ieg5m_di" bpmnElement="Flow_14ieg5m"><di:waypoint x="6170" y="4420" /><di:waypoint x="6230" y="4420" /><di:waypoint x="6230" y="4099" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mog40d_di" bpmnElement="Flow_0mog40d"><di:waypoint x="5500" y="4250" /><di:waypoint x="5475" y="4250" /><di:waypoint x="5475" y="4360" /><di:waypoint x="5525" y="4360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1flueer_di" bpmnElement="Flow_1flueer"><di:waypoint x="6020" y="4385" /><di:waypoint x="6020" y="4420" /><di:waypoint x="6070" y="4420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hd1ome_di" bpmnElement="Flow_0hd1ome"><di:waypoint x="6170" y="4270" /><di:waypoint x="6230" y="4270" /><di:waypoint x="6230" y="4099" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1klpk1c_di" bpmnElement="Flow_1klpk1c"><di:waypoint x="6020" y="4335" /><di:waypoint x="6020" y="4270" /><di:waypoint x="6070" y="4270" /><bpmndi:BPMNLabel><dc:Bounds x="5943" y="4260" width="73" height="66" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hvf76p_di" bpmnElement="Flow_0hvf76p"><di:waypoint x="5600" y="4500" /><di:waypoint x="5710" y="4500" /><di:waypoint x="5710" y="4400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1a3t5gq_di" bpmnElement="Flow_1a3t5gq"><di:waypoint x="5575" y="4360" /><di:waypoint x="5660" y="4360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0c14kgc_di" bpmnElement="Flow_0c14kgc"><di:waypoint x="5550" y="4385" /><di:waypoint x="5550" y="4460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0obftcl_di" bpmnElement="Flow_0obftcl"><di:waypoint x="5815" y="4250" /><di:waypoint x="5870" y="4250" /><di:waypoint x="5870" y="4070" /><di:waypoint x="5905" y="4070" /><bpmndi:BPMNLabel><dc:Bounds x="5796" y="4206" width="87" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1id13yb_di" bpmnElement="Flow_1id13yb"><di:waypoint x="5765" y="4250" /><di:waypoint x="5600" y="4250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rur5r5_di" bpmnElement="Flow_0rur5r5"><di:waypoint x="5760" y="4360" /><di:waypoint x="5810" y="4360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03kg0h2_di" bpmnElement="Flow_03kg0h2"><di:waypoint x="5760" y="3850" /><di:waypoint x="5850" y="3850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1s9194h_di" bpmnElement="Flow_1s9194h"><di:waypoint x="5930" y="3710" /><di:waypoint x="5990" y="3710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ech1r2_di" bpmnElement="Flow_0ech1r2"><di:waypoint x="6280" y="4059" /><di:waypoint x="6320" y="4059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aie1m3_di" bpmnElement="Flow_0aie1m3"><di:waypoint x="5490" y="3875" /><di:waypoint x="5490" y="3900" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qsoxtt_di" bpmnElement="Flow_1qsoxtt"><di:waypoint x="6080" y="4160" /><di:waypoint x="6145" y="4160" /><di:waypoint x="6145" y="4059" /><di:waypoint x="6180" y="4059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ay9ptf_di" bpmnElement="Flow_1ay9ptf"><di:waypoint x="5930" y="4095" /><di:waypoint x="5930" y="4160" /><di:waypoint x="5980" y="4160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_187ebr3_di" bpmnElement="Flow_187ebr3"><di:waypoint x="6080" y="3960" /><di:waypoint x="6145" y="3960" /><di:waypoint x="6145" y="4059" /><di:waypoint x="6180" y="4059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05ve5t4_di" bpmnElement="Flow_05ve5t4"><di:waypoint x="5930" y="4045" /><di:waypoint x="5930" y="3960" /><di:waypoint x="5980" y="3960" /><bpmndi:BPMNLabel><dc:Bounds x="5853" y="3957" width="73" height="66" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ky9z0a_di" bpmnElement="Flow_1ky9z0a"><di:waypoint x="5790" y="4095" /><di:waypoint x="5790" y="4225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xh5bet_di" bpmnElement="Flow_1xh5bet"><di:waypoint x="5700" y="4070" /><di:waypoint x="5765" y="4070" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hskv6b_di" bpmnElement="Flow_0hskv6b"><di:waypoint x="5508" y="4070" /><di:waypoint x="5600" y="4070" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03sohh3_di" bpmnElement="Flow_03sohh3"><di:waypoint x="5790" y="4095" /><di:waypoint x="5790" y="4160" /><di:waypoint x="5490" y="4160" /><di:waypoint x="5490" y="4088" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19lug0p_di" bpmnElement="Flow_19lug0p"><di:waypoint x="5608" y="3850" /><di:waypoint x="5660" y="3850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13mq72r_di" bpmnElement="Flow_13mq72r"><di:waypoint x="5515" y="3850" /><di:waypoint x="5572" y="3850" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1exiuh5_di" bpmnElement="Flow_1exiuh5"><di:waypoint x="5490" y="3825" /><di:waypoint x="5490" y="3710" /><di:waypoint x="5522" y="3710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d8y7uk_di" bpmnElement="Flow_0d8y7uk"><di:waypoint x="5760" y="3710" /><di:waypoint x="5830" y="3710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_072755j_di" bpmnElement="Flow_072755j"><di:waypoint x="5558" y="3710" /><di:waypoint x="5660" y="3710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gbxjmz_di" bpmnElement="Flow_0gbxjmz"><di:waypoint x="5408" y="3850" /><di:waypoint x="5465" y="3850" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_15cisbh_di" bpmnElement="Event_15cisbh"><dc:Bounds x="5372" y="3832" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_081ccvq_di" bpmnElement="Gateway_1mggk4w"><dc:Bounds x="5465" y="3825" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_05csr7m_di" bpmnElement="Event_05csr7m" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="5522" y="3692" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1l630lv_di" bpmnElement="Event_1l630lv"><dc:Bounds x="6152" y="3692" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1w7yadl_di" bpmnElement="Activity_1w7yadl" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="5660" y="3670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_113ac83_di" bpmnElement="Event_1wpsybi" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5572" y="3832" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1c08km4_di" bpmnElement="Event_0bq09to"><dc:Bounds x="6032" y="3832" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1bw7m5z_di" bpmnElement="Event_1bw7m5z"><dc:Bounds x="5472" y="4052" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1h902iw_di" bpmnElement="Gateway_1h902iw" isMarkerVisible="true"><dc:Bounds x="5765" y="4045" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0c0kmn9_di" bpmnElement="Activity_0c0kmn9" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="5980" y="3920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ur18op_di" bpmnElement="Gateway_0ur18op" isMarkerVisible="true"><dc:Bounds x="5905" y="4045" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05mzhhw_di" bpmnElement="Activity_05mzhhw" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="5980" y="4120" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_097prco_di" bpmnElement="Activity_097prco"><dc:Bounds x="6180" y="4019" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1d3u5ei_di" bpmnElement="Activity_1d3u5ei"><dc:Bounds x="5600" y="4030" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0lvkmt8_di" bpmnElement="Event_1jxdk29"><dc:Bounds x="6612" y="4041" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0e0kzzs_di" bpmnElement="Activity_0e0kzzs"><dc:Bounds x="5830" y="3670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1sk009e_di" bpmnElement="Activity_1sk009e"><dc:Bounds x="5660" y="3810" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wckguo_di" bpmnElement="Activity_1wckguo"><dc:Bounds x="6320" y="4019" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rcmqcz_di" bpmnElement="Activity_0rcmqcz"><dc:Bounds x="5660" y="4320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1volt9j_di" bpmnElement="Activity_1volt9j"><dc:Bounds x="5810" y="4320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0oct9h4_di" bpmnElement="Gateway_0oct9h4" isMarkerVisible="true"><dc:Bounds x="5765" y="4225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0259c3b_di" bpmnElement="Activity_0259c3b"><dc:Bounds x="5500" y="4210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0akd32u_di" bpmnElement="Gateway_0akd32u" isMarkerVisible="true"><dc:Bounds x="5525" y="4335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_124mnen_di" bpmnElement="Activity_124mnen"><dc:Bounds x="5500" y="4460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0xu12xw_di" bpmnElement="Activity_0xu12xw" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="6070" y="4230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0cimz0u_di" bpmnElement="Gateway_0cimz0u" isMarkerVisible="true"><dc:Bounds x="5995" y="4335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1d7yy3f_di" bpmnElement="Activity_1d7yy3f" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="6070" y="4380" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0od60lw_di" bpmnElement="Activity_0od60lw"><dc:Bounds x="5990" y="3670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0kiop98_di" bpmnElement="Activity_0kiop98"><dc:Bounds x="5850" y="3810" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_059h7ol_di" bpmnElement="Activity_059h7ol"><dc:Bounds x="6460" y="4019" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1tvgdm9_di" bpmnElement="Activity_1tvgdm9"><dc:Bounds x="5440" y="3900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_0cwqbkc_di" bpmnElement="TextAnnotation_0cwqbkc"><dc:Bounds x="5500" y="3590" width="100" height="66" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1xz2440_di" bpmnElement="TextAnnotation_1xz2440"><dc:Bounds x="5570" y="3740" width="100" height="66" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_0rf42ds_di" bpmnElement="Association_0rf42ds"><di:waypoint x="5542" y="3692" /><di:waypoint x="5545" y="3656" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_1pwocr5_di" bpmnElement="Association_1pwocr5"><di:waypoint x="5593" y="3833" /><di:waypoint x="5599" y="3806" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_1qnnp13_di" bpmnElement="Activity_1qnnp13" isExpanded="true"><dc:Bounds x="3512" y="4210" width="815" height="485" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0kkfvek_di" bpmnElement="Flow_0kkfvek"><di:waypoint x="4192" y="4285" /><di:waypoint x="4259" y="4285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pv5zzz_di" bpmnElement="Flow_0pv5zzz"><di:waypoint x="4042" y="4390" /><di:waypoint x="4259" y="4390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b6bxjn_di" bpmnElement="Flow_0b6bxjn"><di:waypoint x="3930" y="4610" /><di:waypoint x="4259" y="4610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pjrk57_di" bpmnElement="Flow_0pjrk57"><di:waypoint x="3790" y="4610" /><di:waypoint x="3830" y="4610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uiwega_di" bpmnElement="Flow_0uiwega"><di:waypoint x="4042" y="4490" /><di:waypoint x="4259" y="4490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a6kb4i_di" bpmnElement="Flow_0a6kb4i"><di:waypoint x="3860" y="4490" /><di:waypoint x="3942" y="4490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b1pcl1_di" bpmnElement="Flow_1b1pcl1"><di:waypoint x="3652" y="4490" /><di:waypoint x="3824" y="4490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19mra56_di" bpmnElement="Flow_19mra56"><di:waypoint x="3892" y="4390" /><di:waypoint x="3942" y="4390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fnn6wf_di" bpmnElement="Flow_0fnn6wf"><di:waypoint x="4042" y="4285" /><di:waypoint x="4092" y="4285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qz9oyz_di" bpmnElement="Flow_0qz9oyz"><di:waypoint x="3627" y="4465" /><di:waypoint x="3627" y="4285" /><di:waypoint x="3677" y="4285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bw8z58_di" bpmnElement="Flow_1bw8z58"><di:waypoint x="3727" y="4325" /><di:waypoint x="3727" y="4390" /><di:waypoint x="3792" y="4390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18qca0t_di" bpmnElement="Flow_18qca0t"><di:waypoint x="3777" y="4285" /><di:waypoint x="3942" y="4285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w83zsp_di" bpmnElement="Flow_0w83zsp"><di:waypoint x="3645" y="4610" /><di:waypoint x="3690" y="4610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vi5ucg_di" bpmnElement="Flow_1vi5ucg"><di:waypoint x="3627" y="4515" /><di:waypoint x="3627" y="4592" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hyavyx_di" bpmnElement="Flow_1hyavyx"><di:waypoint x="3575" y="4490" /><di:waypoint x="3602" y="4490" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_1xbwlnx_di" bpmnElement="Event_1xbwlnx"><dc:Bounds x="3539" y="4472" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0b3gjcm_di" bpmnElement="Gateway_1w18u5d"><dc:Bounds x="3602" y="4465" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_14ifriw_di" bpmnElement="Event_02yevka"><dc:Bounds x="3609" y="4592" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mkhupx_di" bpmnElement="Activity_0mkhupx"><dc:Bounds x="3690" y="4570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ffbs3s_di" bpmnElement="Activity_0ffbs3s" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="3677" y="4245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0ttn6zj_di" bpmnElement="Event_0ttn6zj"><dc:Bounds x="4259" y="4372" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14ovj1l_di" bpmnElement="Activity_14ovj1l"><dc:Bounds x="3942" y="4245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1pz7oac_di" bpmnElement="Event_1gm6j7o"><dc:Bounds x="4259" y="4267" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bn6mu9_di" bpmnElement="Activity_0bn6mu9"><dc:Bounds x="3792" y="4350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_07hnqdy_di" bpmnElement="Activity_07hnqdy"><dc:Bounds x="3942" y="4450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_045e4ty_di" bpmnElement="Event_05m470j"><dc:Bounds x="3824" y="4472" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1jtesjb_di" bpmnElement="Event_1v1f05j"><dc:Bounds x="4259" y="4472" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0zr94vb_di" bpmnElement="Event_1u1wil0"><dc:Bounds x="4259" y="4592" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1i8wnyf_di" bpmnElement="Activity_1i8wnyf"><dc:Bounds x="3830" y="4570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mjcp0q_di" bpmnElement="Activity_1mjcp0q"><dc:Bounds x="3942" y="4350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bgoxqm_di" bpmnElement="Activity_1bgoxqm"><dc:Bounds x="4092" y="4245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1vrrux3_di" bpmnElement="Gateway_1vrrux3" isMarkerVisible="true"><dc:Bounds x="4423" y="4340" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1uwbnn5_di" bpmnElement="Gateway_1uwbnn5" isMarkerVisible="true"><dc:Bounds x="4423" y="4245" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wshbg7_di" bpmnElement="Activity_1wshbg7"><dc:Bounds x="6820" y="3955" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1n3kxzv_di" bpmnElement="Gateway_1n3kxzv" isMarkerVisible="true"><dc:Bounds x="6845" y="3840" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bb9jou_di" bpmnElement="Activity_1bb9jou"><dc:Bounds x="5200" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1s8q0sh_di" bpmnElement="Activity_1s8q0sh"><dc:Bounds x="5340" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1g0ojrb_di" bpmnElement="Activity_1g0ojrb"><dc:Bounds x="5490" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0njt8xy_di" bpmnElement="Gateway_0njt8xy" isMarkerVisible="true"><dc:Bounds x="5795" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vcyise_di" bpmnElement="Activity_0vcyise"><dc:Bounds x="5770" y="1670" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1a53fnr_di" bpmnElement="Activity_1a53fnr"><dc:Bounds x="5940" y="1740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ciizag_di" bpmnElement="Gateway_0ciizag" isMarkerVisible="true"><dc:Bounds x="6075" y="1755" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_13v25nw_di" bpmnElement="Gateway_13v25nw" isMarkerVisible="true"><dc:Bounds x="5625" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1b421yy_di" bpmnElement="Activity_1b421yy"><dc:Bounds x="6665" y="1740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1v9jzp3_di" bpmnElement="Gateway_1v9jzp3" isMarkerVisible="true"><dc:Bounds x="6125" y="1895" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04kovmc_di" bpmnElement="Activity_04kovmc"><dc:Bounds x="6665" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1v7uoqt_di" bpmnElement="Gateway_1v7uoqt" isMarkerVisible="true"><dc:Bounds x="6175" y="2015" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1p74m4y_di" bpmnElement="Activity_1p74m4y"><dc:Bounds x="5940" y="2000" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0f0do1g_di" bpmnElement="Activity_0f0do1g"><dc:Bounds x="6665" y="2000" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05mhfyr_di" bpmnElement="Activity_05mhfyr"><dc:Bounds x="5920" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1pxrph5_di" bpmnElement="Gateway_1pxrph5" isMarkerVisible="true"><dc:Bounds x="6035" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0r4be0n_di" bpmnElement="Gateway_0r4be0n" isMarkerVisible="true"><dc:Bounds x="6285" y="2205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0i71u3u_di" bpmnElement="Gateway_0i71u3u" isMarkerVisible="true"><dc:Bounds x="6325" y="2295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dp6zlp_di" bpmnElement="Gateway_0dp6zlp" isMarkerVisible="true"><dc:Bounds x="6365" y="2385" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1drvsmc_di" bpmnElement="Gateway_1drvsmc" isMarkerVisible="true"><dc:Bounds x="6405" y="2475" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0b9ax5r_di" bpmnElement="Gateway_0b9ax5r" isMarkerVisible="true"><dc:Bounds x="6445" y="2575" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0wavdj0_di" bpmnElement="Gateway_0wavdj0" isMarkerVisible="true"><dc:Bounds x="6485" y="2675" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qolpfx_di" bpmnElement="Activity_0qolpfx"><dc:Bounds x="6665" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1eqvjq0_di" bpmnElement="Activity_1eqvjq0"><dc:Bounds x="6665" y="2190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0etmqtw_di" bpmnElement="Activity_0etmqtw"><dc:Bounds x="6665" y="2280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qubt0f_di" bpmnElement="Activity_1qubt0f"><dc:Bounds x="6665" y="2370" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0v67a78_di" bpmnElement="Activity_0v67a78"><dc:Bounds x="6665" y="2460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1r46uey_di" bpmnElement="Activity_1r46uey"><dc:Bounds x="6660" y="2560" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1x1wb0r_di" bpmnElement="Activity_1x1wb0r"><dc:Bounds x="6665" y="2660" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0s33ryk_di" bpmnElement="Activity_0s33ryk"><dc:Bounds x="6110" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0gib4u6_di" bpmnElement="Gateway_0gib4u6" isMarkerVisible="true"><dc:Bounds x="6235" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0md8yur_di" bpmnElement="Activity_0md8yur"><dc:Bounds x="6070" y="2280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yt9lai_di" bpmnElement="Activity_1yt9lai"><dc:Bounds x="6110" y="2560" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1z0tja3_di" bpmnElement="Activity_1z0tja3"><dc:Bounds x="7080" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1bd77as_di" bpmnElement="Gateway_1bd77as" isMarkerVisible="true"><dc:Bounds x="7225" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0y1touy_di" bpmnElement="Gateway_0y1touy" isMarkerVisible="true"><dc:Bounds x="7445" y="2115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1l1k2jh_di" bpmnElement="Activity_1l1k2jh"><dc:Bounds x="7080" y="1350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0opp9st_di" bpmnElement="Activity_0opp9st"><dc:Bounds x="7420" y="2330" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1fhpu24_di" bpmnElement="Activity_1fhpu24"><dc:Bounds x="2820" y="3405" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hkuq7z_di" bpmnElement="Activity_1u919zu"><dc:Bounds x="6790" y="1740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ja5gbt_di" bpmnElement="Activity_0ja5gbt"><dc:Bounds x="6800" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10g2ib8_di" bpmnElement="Activity_10g2ib8"><dc:Bounds x="6803" y="2000" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1drms6m_di" bpmnElement="Activity_1drms6m"><dc:Bounds x="6800" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tbm399_di" bpmnElement="Activity_0tbm399"><dc:Bounds x="6800" y="2190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jduj7r_di" bpmnElement="Activity_1jduj7r"><dc:Bounds x="6803" y="2280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jk0d40_di" bpmnElement="Activity_0jk0d40"><dc:Bounds x="6950" y="2370" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1b16tly_di" bpmnElement="Activity_1b16tly"><dc:Bounds x="6950" y="2460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0006x3j_di" bpmnElement="Activity_0006x3j"><dc:Bounds x="6950" y="2560" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m7jpn0_di" bpmnElement="Activity_0m7jpn0"><dc:Bounds x="6950" y="2660" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n4zeqr_di" bpmnElement="Activity_0n4zeqr" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="4330" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ailazu_di" bpmnElement="Activity_1ailazu"><dc:Bounds x="3600" y="1080" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dz7kt2_di" bpmnElement="Activity_0dz7kt2"><dc:Bounds x="3570" y="4090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0p3ue08_di" bpmnElement="Activity_0p3ue08"><dc:Bounds x="7420" y="2870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tu4kqm_di" bpmnElement="Activity_0tu4kqm"><dc:Bounds x="2780" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vnxlrf_di" bpmnElement="Activity_1vnxlrf"><dc:Bounds x="3680" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dwpta6_di" bpmnElement="Activity_1dwpta6"><dc:Bounds x="4398" y="3955" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0go2wez_di" bpmnElement="Gateway_0go2wez" isMarkerVisible="true"><dc:Bounds x="4985" y="2535" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0cmdtzl_di" bpmnElement="Activity_0cmdtzl"><dc:Bounds x="3600" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0rsv0ff_di" bpmnElement="Gateway_0rsv0ff" isMarkerVisible="true"><dc:Bounds x="3465" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1x13wjq_di" bpmnElement="Activity_1x13wjq"><dc:Bounds x="3440" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_00kragb_di" bpmnElement="Gateway_00kragb" isMarkerVisible="true"><dc:Bounds x="3625" y="1325" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0b6g1gp_di" bpmnElement="Activity_0b6g1gp"><dc:Bounds x="3490" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j7a9ll_di" bpmnElement="Activity_0j7a9ll"><dc:Bounds x="3490" y="1750" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_03am7r1_di" bpmnElement="Event_03am7r1"><dc:Bounds x="3522" y="1862" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jn47m4_di" bpmnElement="Activity_1jn47m4"><dc:Bounds x="3950" y="4075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0tqpe1v_di" bpmnElement="Gateway_0tqpe1v" isMarkerVisible="true"><dc:Bounds x="7025" y="3840" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dmfff1_di" bpmnElement="Gateway_0dmfff1" isMarkerVisible="true"><dc:Bounds x="7325" y="3840" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1evmjw9_di" bpmnElement="Activity_1evmjw9"><dc:Bounds x="7130" y="3825" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_06vwops_di" bpmnElement="Event_02mf4wu"><dc:Bounds x="6852" y="4097" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1eufsnx_di" bpmnElement="Event_06czsl7"><dc:Bounds x="4872" y="2102" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jj12wf_di" bpmnElement="Activity_0jj12wf"><dc:Bounds x="3820" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1p2oi1g_di" bpmnElement="Activity_1p2oi1g"><dc:Bounds x="4398" y="4075" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n00ui1_di" bpmnElement="Activity_09inhq6"><dc:Bounds x="2950" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0v2ms5w_di" bpmnElement="Activity_0v2ms5w" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="7600" y="2610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0107pn5_di" bpmnElement="Event_0107pn5"><dc:Bounds x="152" y="1212" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08lwkba_di" bpmnElement="Activity_08lwkba"><dc:Bounds x="560" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ewvetz_di" bpmnElement="Gateway_0ewvetz" isMarkerVisible="true"><dc:Bounds x="2995" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12qzo4j_di" bpmnElement="Activity_12qzo4j"><dc:Bounds x="3070" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1icflpo_di" bpmnElement="Activity_1icflpo"><dc:Bounds x="3070" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1b6vf6r_di" bpmnElement="Event_1b6vf6r"><dc:Bounds x="3102" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wov8bw_di" bpmnElement="Activity_1wov8bw"><dc:Bounds x="3100" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14qn6ae_di" bpmnElement="Activity_14qn6ae" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3240" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0xcsyg3_di" bpmnElement="Gateway_0xcsyg3" isMarkerVisible="true"><dc:Bounds x="775" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1u71wrl_di" bpmnElement="Activity_1u71wrl"><dc:Bounds x="750" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0mggzd9_di" bpmnElement="Event_0mggzd9"><dc:Bounds x="782" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ngd02e_di" bpmnElement="Activity_0ngd02e"><dc:Bounds x="900" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1vjc4xe_di" bpmnElement="Gateway_1vjc4xe" isMarkerVisible="true"><dc:Bounds x="1055" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rzfnyu_di" bpmnElement="Activity_0rzfnyu"><dc:Bounds x="2860" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0y5zznb_di" bpmnElement="Activity_0y5zznb"><dc:Bounds x="1710" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1qcfmp4_di" bpmnElement="Gateway_1qcfmp4" isMarkerVisible="true"><dc:Bounds x="1835" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zzzchk_di" bpmnElement="Activity_0zzzchk"><dc:Bounds x="750" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1i8tusj_di" bpmnElement="Activity_1i8tusj"><dc:Bounds x="1030" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1x6oo15_di" bpmnElement="Activity_1x6oo15"><dc:Bounds x="1030" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0i34ctx_di" bpmnElement="Event_0i34ctx"><dc:Bounds x="1062" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jd1kmp_di" bpmnElement="Activity_0jd1kmp"><dc:Bounds x="1180" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dl3q7b_di" bpmnElement="Gateway_0dl3q7b" isMarkerVisible="true"><dc:Bounds x="1335" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ezmn5e_di" bpmnElement="Activity_1ezmn5e"><dc:Bounds x="1310" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tf1xys_di" bpmnElement="Activity_0tf1xys"><dc:Bounds x="1310" y="1680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_02o657y_di" bpmnElement="Event_02o657y"><dc:Bounds x="1342" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09xl67p_di" bpmnElement="Activity_09xl67p"><dc:Bounds x="1460" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1g82req_di" bpmnElement="Gateway_1g82req" isMarkerVisible="true"><dc:Bounds x="1615" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19wxxcq_di" bpmnElement="Activity_19wxxcq"><dc:Bounds x="390" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03lwdxk_di" bpmnElement="Activity_03lwdxk"><dc:Bounds x="240" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ga37b7_di" bpmnElement="Activity_0ga37b7"><dc:Bounds x="1810" y="1350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1e9qo1x_di" bpmnElement="Activity_1e9qo1x"><dc:Bounds x="1810" y="1460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gymev7_di" bpmnElement="Activity_0gymev7" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="1810" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0c9sxep_di" bpmnElement="Activity_0c9sxep"><dc:Bounds x="1810" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0mh7feq_di" bpmnElement="Event_0mh7feq"><dc:Bounds x="1842" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1fjkrq7_di" bpmnElement="Activity_1fjkrq7" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="4730" y="4150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1irmq25_di" bpmnElement="Activity_1irmq25"><dc:Bounds x="3280" y="3855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_09rt8fa_di" bpmnElement="Gateway_09rt8fa" isMarkerVisible="true"><dc:Bounds x="3425" y="3870" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0628xpg_di" bpmnElement="Activity_0628xpg"><dc:Bounds x="1320" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1h94umr_di" bpmnElement="Activity_1h94umr" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="1320" y="1530" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_017v5yy_di" bpmnElement="Activity_017v5yy"><dc:Bounds x="1030" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mqhmsd_di" bpmnElement="Activity_1mqhmsd" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="1030" y="1540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05ltu6j_di" bpmnElement="Activity_05ltu6j"><dc:Bounds x="750" y="1430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0hpn7zz_di" bpmnElement="Activity_0hpn7zz" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="750" y="1550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qqomyr_di" bpmnElement="Activity_1qqomyr"><dc:Bounds x="3070" y="1430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02cvaaa_di" bpmnElement="Activity_02cvaaa" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3070" y="1550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1brotij_di" bpmnElement="Activity_1brotij"><dc:Bounds x="3490" y="1520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15hbjf1_di" bpmnElement="Activity_15hbjf1" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3490" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lleqcp_di" bpmnElement="Activity_1lleqcp" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3960" y="878" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1v8sgjn_di" bpmnElement="Gateway_1v8sgjn" isMarkerVisible="true"><dc:Bounds x="4035" y="995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1aycgui_di" bpmnElement="Gateway_1aycgui" isMarkerVisible="true"><dc:Bounds x="3985" y="795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0qs9zzb_di" bpmnElement="Gateway_0qs9zzb" isMarkerVisible="true"><dc:Bounds x="4165" y="795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0huqbzl_di" bpmnElement="Activity_0huqbzl" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="4320" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0g3wgi5_di" bpmnElement="Gateway_0g3wgi5" isMarkerVisible="true"><dc:Bounds x="4495" y="795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0btahgb_di" bpmnElement="Gateway_0btahgb" isMarkerVisible="true"><dc:Bounds x="4835" y="795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fopqni_di" bpmnElement="Activity_0fopqni"><dc:Bounds x="4640" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0h5fgue_di" bpmnElement="Event_06wcz56"><dc:Bounds x="4952" y="672" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_031hqc9_di" bpmnElement="Activity_031hqc9"><dc:Bounds x="3600" y="970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1g49kja_di" bpmnElement="Activity_1g49kja"><dc:Bounds x="4810" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08zus9p_di" bpmnElement="Activity_08zus9p"><dc:Bounds x="5680" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ql89pb_di" bpmnElement="Gateway_0ql89pb" isMarkerVisible="true"><dc:Bounds x="5465" y="435" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1k7jqnh_di" bpmnElement="Activity_1k7jqnh"><dc:Bounds x="5290" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_146xk8v_di" bpmnElement="Activity_146xk8v"><dc:Bounds x="5150" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17tjpzi_di" bpmnElement="Activity_17tjpzi"><dc:Bounds x="5820" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1svgrfq_di" bpmnElement="Activity_1svgrfq"><dc:Bounds x="5540" y="330" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0u3ukv1_di" bpmnElement="Activity_0u3ukv1"><dc:Bounds x="5540" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_002y3m4_di" bpmnElement="Activity_002y3m4"><dc:Bounds x="4960" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_15fv62x_di" bpmnElement="Gateway_15fv62x" isMarkerVisible="true"><dc:Bounds x="5705" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1djr5qh_di" bpmnElement="Activity_1djr5qh"><dc:Bounds x="5680" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ntpl13_di" bpmnElement="Gateway_0ntpl13" isMarkerVisible="true"><dc:Bounds x="5565" y="85" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ljc6v7_di" bpmnElement="Gateway_1ljc6v7" isMarkerVisible="true"><dc:Bounds x="5985" y="435" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0r9dwlz_di" bpmnElement="Activity_0r9dwlz"><dc:Bounds x="6130" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1xijhom_di" bpmnElement="Gateway_1xijhom" isMarkerVisible="true"><dc:Bounds x="6435" y="435" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1kpehj6_di" bpmnElement="Activity_1kpehj6"><dc:Bounds x="6280" y="420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rh4ilb_di" bpmnElement="Activity_1rh4ilb" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="5140" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gayomp_di" bpmnElement="Activity_0gayomp"><dc:Bounds x="3740" y="970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_172v09z_di" bpmnElement="Activity_172v09z"><dc:Bounds x="3740" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0vkf2aj_di" bpmnElement="Gateway_0397ouw" isMarkerVisible="true"><dc:Bounds x="3915" y="995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19feovs_di" bpmnElement="Activity_19feovs" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3820" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01vn093_di" bpmnElement="Activity_01vn093"><dc:Bounds x="1990" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1c4v5jx_di" bpmnElement="Gateway_1c4v5jx" isMarkerVisible="true"><dc:Bounds x="2175" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0g2bf0y_di" bpmnElement="Activity_0g2bf0y"><dc:Bounds x="2150" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nehyho_di" bpmnElement="Activity_1nehyho"><dc:Bounds x="2150" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1l4w5go_di" bpmnElement="Activity_1l4w5go"><dc:Bounds x="2290" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_07frlbz_di" bpmnElement="Gateway_07frlbz" isMarkerVisible="true"><dc:Bounds x="2655" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0h7491i_di" bpmnElement="Activity_0h7491i"><dc:Bounds x="2630" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1dbzj47_di" bpmnElement="Gateway_1dbzj47" isMarkerVisible="true"><dc:Bounds x="2455" y="1205" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dcbod6_di" bpmnElement="Activity_1dcbod6"><dc:Bounds x="2430" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04log7j_di" bpmnElement="Activity_04log7j"><dc:Bounds x="2430" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05bb70x_di" bpmnElement="Activity_05bb70x"><dc:Bounds x="2430" y="1690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0yeu9yk_di" bpmnElement="Event_0yeu9yk"><dc:Bounds x="2462" y="1802" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ajduwk_di" bpmnElement="Activity_1ajduwk"><dc:Bounds x="2630" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mf24id_di" bpmnElement="Activity_0mf24id" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2150" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gos152_di" bpmnElement="Activity_1gos152" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2430" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ijd6pl_di" bpmnElement="Activity_1ijd6pl" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2630" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dregp4_di" bpmnElement="Activity_1dregp4"><dc:Bounds x="4730" y="4325" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1ovzi1p_di" bpmnElement="Event_1ovzi1p"><dc:Bounds x="4882" y="4347" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bhj1h3_di" bpmnElement="Activity_0bhj1h3"><dc:Bounds x="4580" y="4325" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_19idupk_di" bpmnElement="TextAnnotation_19idupk"><dc:Bounds x="1190" y="1110" width="156" height="46" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_01b6hfj_di" bpmnElement="Event_01b6hfj"><dc:Bounds x="3322" y="1172" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1i8sifz_di" bpmnElement="Event_1i8sifz"><dc:Bounds x="5232" y="1842" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_1sj1acb_di" bpmnElement="Association_1sj1acb"><di:waypoint x="1234" y="1190" /><di:waypoint x="1237" y="1156" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>