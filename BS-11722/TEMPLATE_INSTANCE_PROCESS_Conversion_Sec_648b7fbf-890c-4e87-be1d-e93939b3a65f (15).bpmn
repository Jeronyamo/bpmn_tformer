<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_Conversion_Sec_648b7fbf-890c-4e87-be1d-e93939b3a65f" name="Конвертация Ценных бумаг" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1" camunda:asyncBefore="true"><bpmn:outgoing>SequenceFlow_0or7jn6</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Task_02btl64" name="Статус Заполнение: Дата поставки актива"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Дата+поставки+актива</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0k9kboq</bpmn:incoming><bpmn:incoming>Flow_1rkls9l</bpmn:incoming><bpmn:incoming>Flow_1tdbl9b</bpmn:incoming><bpmn:incoming>Flow_1hubln6</bpmn:incoming><bpmn:incoming>Flow_0nm5zou</bpmn:incoming><bpmn:outgoing>SequenceFlow_17bt84k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_17bt84k" sourceRef="Task_02btl64" targetRef="ServiceTask_1rzax8c" /><bpmn:sequenceFlow id="SequenceFlow_0or7jn6" sourceRef="StartEvent_1" targetRef="ExclusiveGateway_086itpq" /><bpmn:userTask id="UserTask_0x91f5v" name="Подтверждение исполнения пользователем" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;BO&#34;,&#34;label&#34;:&#34;Подтвердить исполнение&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1alzad0</bpmn:incoming><bpmn:outgoing>SequenceFlow_02idij0</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_02idij0" sourceRef="UserTask_0x91f5v" targetRef="ServiceTask_12sgz1d" /><bpmn:serviceTask id="ServiceTask_12sgz1d" name="Статус Подтверждено"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Подтверждено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_02idij0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ccrdax</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ccrdax" sourceRef="ServiceTask_12sgz1d" targetRef="Activity_06bn8x0" /><bpmn:serviceTask id="ServiceTask_1rzax8c" name="Тип операции = Конвертация ЦБ"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonotorDetails___DealType___ValueDisplayed?value=Конвертация_ЦБ</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_17bt84k</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bl25eu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1bl25eu" sourceRef="ServiceTask_1rzax8c" targetRef="Activity_1enwnac" /><bpmn:serviceTask id="ServiceTask_1nciut3" name="Получить значение параметра Направление"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttribute/TradeMonitorDetails___Side___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Napr">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cagets</bpmn:incoming><bpmn:outgoing>SequenceFlow_0lnsxan</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0lnsxan" sourceRef="ServiceTask_1nciut3" targetRef="Gateway_04shomr" /><bpmn:sequenceFlow id="SequenceFlow_1swwe4j" sourceRef="Gateway_04shomr" targetRef="ServiceTask_1ritpae"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Napr == "Buy"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_04shomr" default="SequenceFlow_1oebcoc"><bpmn:incoming>SequenceFlow_0lnsxan</bpmn:incoming><bpmn:outgoing>SequenceFlow_1swwe4j</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1oebcoc</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1ritpae" name="Направление = Зачисление"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Side___ValueDisplayed?value=Зачисление</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1swwe4j</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y6qliy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1y6qliy" sourceRef="ServiceTask_1ritpae" targetRef="Activity_0u68l5z" /><bpmn:serviceTask id="ServiceTask_0ljyn9j" name="Направление = Списание"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/TradeMonitorDetails___Side___ValueDisplayed?value=Списание</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1oebcoc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1phtmx7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1oebcoc" sourceRef="Gateway_04shomr" targetRef="ServiceTask_0ljyn9j" /><bpmn:sequenceFlow id="SequenceFlow_1phtmx7" sourceRef="ServiceTask_0ljyn9j" targetRef="Activity_0u68l5z" /><bpmn:serviceTask id="ServiceTask_0vgehqk" name="Поиск об-ва"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/obligations/one/by-attribute?name=AssetFlow___FlowType___Value&amp;value=3</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="OutputSec">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17agq16</bpmn:incoming><bpmn:outgoing>SequenceFlow_1e8r3yq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1e8r3yq" sourceRef="ServiceTask_0vgehqk" targetRef="Activity_1mg4wye" /><bpmn:serviceTask id="ServiceTask_06vg3ge" name="Создание фактов" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/fact/${OutputSec}?AssetFlow___IsActual___ValueDisplayed=Факт&amp;AssetFlow___FlowDate___Value=${DT1}&amp;AssetFlow___Id___Value=${PrimaryId2}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ybcjjb</bpmn:incoming><bpmn:outgoing>SequenceFlow_19mehn4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_19mehn4" sourceRef="ServiceTask_06vg3ge" targetRef="Activity_0kc28cr" /><bpmn:userTask id="Activity_1yskc10" name="Заполнение даты поставки актива" camunda:formKey="FILL" camunda:candidateGroups="jira-users,cb_backoffice"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="DealEventDetails___DeliveryDate___Value" label="Дата поставки актива" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0w47kdv</bpmn:incoming><bpmn:incoming>Flow_1uyi9qc</bpmn:incoming><bpmn:outgoing>Flow_0jyt4is</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="Flow_0jyt4is" sourceRef="Activity_1yskc10" targetRef="Activity_1rllltn" /><bpmn:serviceTask id="Activity_153rxqz" name="Статус: Заполнение: подтверждение исполнения"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+подтверждение+исполнения</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0nqsem9</bpmn:incoming><bpmn:outgoing>Flow_1alzad0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1alzad0" sourceRef="Activity_153rxqz" targetRef="UserTask_0x91f5v" /><bpmn:serviceTask id="Activity_1cwhmx4" name="Завершение обработки" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/processCompleted/${instanceId}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1k6po3z</bpmn:incoming><bpmn:outgoing>Flow_01nsdhu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01nsdhu" sourceRef="Activity_1cwhmx4" targetRef="EndEvent_0djl7a3" /><bpmn:serviceTask id="Activity_06bn8x0" name="Получение даты факта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=DealEventDetails___DeliveryDate___Value</camunda:inputParameter><camunda:outputParameter name="DT1">${S(response).prop('DealEventDetails___DeliveryDate___Value').stringValue()}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ccrdax</bpmn:incoming><bpmn:outgoing>Flow_00lgxyf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_00lgxyf" sourceRef="Activity_06bn8x0" targetRef="Activity_0wmnd23" /><bpmn:serviceTask id="Activity_0wmnd23" name="Получение РО и счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=TradeMonitorDetails___Custodian___ValueDisplayed&amp;systemName=TradeMonitorDetails___CustodianAccount___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="RO1">${S(response).prop('TradeMonitorDetails___Custodian___ValueDisplayed').stringValue()}</camunda:outputParameter><camunda:outputParameter name="ACC1">${S(response).prop('TradeMonitorDetails___CustodianAccount___ValueDisplayed').stringValue()}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00lgxyf</bpmn:incoming><bpmn:outgoing>Flow_17agq16</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_17agq16" sourceRef="Activity_0wmnd23" targetRef="ServiceTask_0vgehqk" /><bpmn:serviceTask id="Activity_1mg4wye" name="Установить параметры  РО И СЧЕТ"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment-obligation/${OutputSec}/setAttributes?incrementVersion=true</camunda:inputParameter><camunda:inputParameter name="payload">{
"TradeMonitorDetails___Custodian___ValueDisplayed" : "${RO1}",
"TradeMonitorDetails___CustodianAccount___ValueDisplayed" : "${ACC1}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1e8r3yq</bpmn:incoming><bpmn:outgoing>Flow_0xwzjxg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0xwzjxg" sourceRef="Activity_1mg4wye" targetRef="Activity_0oe19i4" /><bpmn:serviceTask id="Activity_1enwnac" name="Достаем primaryId объекта"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bl25eu</bpmn:incoming><bpmn:outgoing>Flow_0hubxw1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0hubxw1" sourceRef="Activity_1enwnac" targetRef="Activity_1xc527w" /><bpmn:serviceTask id="Activity_1xc527w" name="Записываем внешний ID"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttribute/hlk_EzDoc_ID?value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hubxw1</bpmn:incoming><bpmn:outgoing>Flow_01jydv2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01jydv2" sourceRef="Activity_1xc527w" targetRef="Activity_1tz138g" /><bpmn:serviceTask id="Activity_1tz138g" name="Установка атрибутов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_cancel_plan" : "false","hlk_create_plan" : "false"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01jydv2</bpmn:incoming><bpmn:outgoing>Flow_0cagets</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0cagets" sourceRef="Activity_1tz138g" targetRef="ServiceTask_1nciut3" /><bpmn:serviceTask id="Activity_0k8gizu" name="Создание плана" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/sendInstanceTo/ENRICHMENT_OBLIGATION/${instanceId}?closedSegment=false</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AssetFlow___RegistrationDate___Value", RegDate)
.prop("AssetFlow___FlowDate___Value", DT1)
.prop("AssetFlow___Amount___Value", Sum1)
.prop("AssetFlow___Underlying___ValueDisplayed", Asset1)
.prop("TradeMonitorDetails___Custodian___ValueDisplayed", RO1)
.prop("TradeMonitorDetails___CustodianAccount___ValueDisplayed", ACC1)
.prop("AssetFlow___AssetflowStatus___ValueDisplayed", "Открыта")
.prop("AssetFlow___FlowType___Value", "3")
.prop("AssetFlows___lkupFlowType___Value", "3")
.prop("AssetFlow___FlowType___ValueDisplayed", "Physical")
.prop("AssetFlows___cmbDirection___ValueDisplayed", SIDE1)
.prop("AssetFlow___IsActual___ValueDisplayed", "Плановая")
.prop("AssetFlow___Id___Value", primaryId + "_P")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qk4ckn</bpmn:incoming><bpmn:outgoing>Flow_13sqfeh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_13sqfeh" sourceRef="Activity_0k8gizu" targetRef="Activity_1jtdvci" /><bpmn:serviceTask id="Activity_1rllltn" name="Получаем значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=DealEventDetails___DeliveryDate___Value&amp;systemName=DealEventDetails___Qty___Value&amp;systemName=TradeMonitorDetails___Underlying___ValueDisplayed&amp;systemName=TradeMonitorDetails___Custodian___ValueDisplayed&amp;systemName=TradeMonitorDetails___CustodianAccount___ValueDisplayed&amp;systemName=TradeMonitorDetails___Side___ValueDisplayed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="DT1"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___DeliveryDate___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="Sum1"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___Qty___Value</camunda:script></camunda:outputParameter><camunda:outputParameter name="Asset1"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Underlying___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="RO1"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Custodian___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="ACC1"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___CustodianAccount___ValueDisplayed</camunda:script></camunda:outputParameter><camunda:outputParameter name="SIDE1"><camunda:script scriptFormat="javascript">JSON.parse(response).TradeMonitorDetails___Side___ValueDisplayed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jyt4is</bpmn:incoming><bpmn:outgoing>Flow_1kx9lyr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1kx9lyr" sourceRef="Activity_1rllltn" targetRef="Gateway_1vxj07m" /><bpmn:sequenceFlow id="SequenceFlow_1vo8viu" sourceRef="ExclusiveGateway_086itpq" targetRef="Activity_0k56nmg" /><bpmn:parallelGateway id="ExclusiveGateway_086itpq"><bpmn:incoming>SequenceFlow_0or7jn6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vo8viu</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1wo0kdu</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_0a8w19w"><bpmn:incoming>SequenceFlow_1wo0kdu</bpmn:incoming><bpmn:outgoing>SequenceFlow_0b5cefj</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1hm4j9t" signalRef="Signal_0cmcgfe" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="ServiceTask_0bgo9ix" name="завершить процесс" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zken7p</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dxsa2s</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_042yubs"><bpmn:incoming>SequenceFlow_1dxsa2s</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1e4r10o" /></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_0b5cefj" sourceRef="IntermediateCatchEvent_0a8w19w" targetRef="Activity_1nb6hnu" /><bpmn:sequenceFlow id="SequenceFlow_1dxsa2s" sourceRef="ServiceTask_0bgo9ix" targetRef="EndEvent_042yubs" /><bpmn:sequenceFlow id="SequenceFlow_1wo0kdu" sourceRef="ExclusiveGateway_086itpq" targetRef="IntermediateCatchEvent_0a8w19w" /><bpmn:endEvent id="EndEvent_0djl7a3"><bpmn:incoming>Flow_01nsdhu</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0woha6w" /></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_05rtgg5" default="Flow_01w2sqw"><bpmn:incoming>Flow_18o1xi8</bpmn:incoming><bpmn:outgoing>Flow_0k9kboq</bpmn:outgoing><bpmn:outgoing>Flow_01w2sqw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1auerb6" name="Получаем инстанс-ид СЧЕТА"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getRefId/F_Account</camunda:inputParameter><camunda:outputParameter name="Acc_refid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01w2sqw</bpmn:incoming><bpmn:outgoing>Flow_05skcf1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1ed5fyr" name="Получаем РО счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid}/getAttributes?systemName=hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_ID"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_clearing_system</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05skcf1</bpmn:incoming><bpmn:outgoing>Flow_1ot1b7n</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1fa661b" default="Flow_02oeyen"><bpmn:incoming>Flow_1ot1b7n</bpmn:incoming><bpmn:outgoing>Flow_1rkls9l</bpmn:outgoing><bpmn:outgoing>Flow_02oeyen</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0cwnu4r" name="Получаем навзание РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/legalEntity/${RO_refid}/getAttributes?systemName=ShortName</camunda:inputParameter><camunda:outputParameter name="RO_NAME"><camunda:script scriptFormat="javascript">JSON.parse(response).ShortName</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1fkyxg9</bpmn:incoming><bpmn:outgoing>Flow_0vvpttg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0cqe3ob" name="Получаем праймари-ид РО"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "legalEntity",
	"filter": {
		"_id": ObjectId("${RO_refid}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="RO_primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xxbypb</bpmn:incoming><bpmn:outgoing>Flow_1fkyxg9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_16kjycq" name="Получаем инстанс-ид РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/invoice/${Acc_refid}/getRefId/hlk_clearing_system</camunda:inputParameter><camunda:outputParameter name="RO_refid">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02oeyen</bpmn:incoming><bpmn:outgoing>Flow_07nk6nd</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_06t3twl" name="Установка атрибутов РО"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("F_Clearing_system", S("{}")
  .prop("value", RO_NAME)
  .prop("primaryId", RO_primaryId)
  .prop("source", "legalEntity"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0k4ej7b</bpmn:incoming><bpmn:outgoing>Flow_1tdbl9b</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0k56nmg" name="Получение счета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=F_Account</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="payload" /><camunda:outputParameter name="ACCOUNT"><camunda:script scriptFormat="javascript">JSON.parse(response).F_Account</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vo8viu</bpmn:incoming><bpmn:outgoing>Flow_18o1xi8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0k9kboq" sourceRef="Gateway_05rtgg5" targetRef="Task_02btl64"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ACCOUNT == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1rkls9l" sourceRef="Gateway_1fa661b" targetRef="Task_02btl64"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_ID == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1tdbl9b" sourceRef="Activity_06t3twl" targetRef="Task_02btl64" /><bpmn:sequenceFlow id="Flow_18o1xi8" sourceRef="Activity_0k56nmg" targetRef="Gateway_05rtgg5" /><bpmn:sequenceFlow id="Flow_01w2sqw" sourceRef="Gateway_05rtgg5" targetRef="Activity_1auerb6" /><bpmn:sequenceFlow id="Flow_05skcf1" sourceRef="Activity_1auerb6" targetRef="Activity_1ed5fyr" /><bpmn:sequenceFlow id="Flow_1ot1b7n" sourceRef="Activity_1ed5fyr" targetRef="Gateway_1fa661b" /><bpmn:sequenceFlow id="Flow_02oeyen" sourceRef="Gateway_1fa661b" targetRef="Activity_16kjycq" /><bpmn:sequenceFlow id="Flow_1fkyxg9" sourceRef="Activity_0cqe3ob" targetRef="Activity_0cwnu4r" /><bpmn:sequenceFlow id="Flow_0vvpttg" sourceRef="Activity_0cwnu4r" targetRef="Gateway_1wjpqz1" /><bpmn:sequenceFlow id="Flow_07nk6nd" sourceRef="Activity_16kjycq" targetRef="Gateway_13l7so7" /><bpmn:sequenceFlow id="Flow_1xxbypb" sourceRef="Gateway_13l7so7" targetRef="Activity_0cqe3ob" /><bpmn:exclusiveGateway id="Gateway_13l7so7" default="Flow_1xxbypb"><bpmn:incoming>Flow_07nk6nd</bpmn:incoming><bpmn:outgoing>Flow_1xxbypb</bpmn:outgoing><bpmn:outgoing>Flow_1hubln6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1hubln6" sourceRef="Gateway_13l7so7" targetRef="Task_02btl64"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_refid == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0k4ej7b" sourceRef="Gateway_1wjpqz1" targetRef="Activity_06t3twl" /><bpmn:exclusiveGateway id="Gateway_1wjpqz1" default="Flow_0k4ej7b"><bpmn:incoming>Flow_0vvpttg</bpmn:incoming><bpmn:outgoing>Flow_0k4ej7b</bpmn:outgoing><bpmn:outgoing>Flow_0nm5zou</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0nm5zou" sourceRef="Gateway_1wjpqz1" targetRef="Task_02btl64"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RO_primaryId == null || RO_NAME == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1jtdvci" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>Flow_13sqfeh</bpmn:incoming><bpmn:outgoing>Flow_1b25q7c</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for A signal")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1b25q7c" sourceRef="Activity_1jtdvci" targetRef="Event_055dfez" /><bpmn:scriptTask id="Activity_0kc28cr" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_19mehn4</bpmn:incoming><bpmn:outgoing>Flow_0g0ddym</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": waiting for B signal")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0g0ddym" sourceRef="Activity_0kc28cr" targetRef="Event_1921uzf" /><bpmn:scriptTask id="Activity_141m4sq" name="log" camunda:asyncBefore="true" scriptFormat="javascript"><bpmn:incoming>Flow_0723zpe</bpmn:incoming><bpmn:outgoing>Flow_1k6po3z</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": ALL DONE!")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1k6po3z" sourceRef="Activity_141m4sq" targetRef="Activity_1cwhmx4" /><bpmn:serviceTask id="Activity_0u68l5z" name="Получаем значения параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/${instanceId}/getAttributes?systemName=DealEventDetails___RegistrationDate___Value</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="RegDate"><camunda:script scriptFormat="javascript">JSON.parse(response).DealEventDetails___RegistrationDate___Value</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1y6qliy</bpmn:incoming><bpmn:incoming>SequenceFlow_1phtmx7</bpmn:incoming><bpmn:outgoing>Flow_0w47kdv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0w47kdv" sourceRef="Activity_0u68l5z" targetRef="Activity_1yskc10" /><bpmn:exclusiveGateway id="Gateway_1vxj07m" default="Flow_1iy8y3h"><bpmn:incoming>Flow_1kx9lyr</bpmn:incoming><bpmn:outgoing>Flow_1iy8y3h</bpmn:outgoing><bpmn:outgoing>Flow_1dd29iv</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1iy8y3h" sourceRef="Gateway_1vxj07m" targetRef="Activity_1pt0lkb" /><bpmn:serviceTask id="Activity_0fxpv4m" name="Статус &#34;Заполнение: дата операции не раньше даты регистрации&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/enrichment/saveLabel/${instanceId}?label=Заполнение:+Дата+операции+не+раньше+даты+регистрации</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1dd29iv</bpmn:incoming><bpmn:outgoing>Flow_1uyi9qc</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1dd29iv" sourceRef="Gateway_1vxj07m" targetRef="Activity_0fxpv4m"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DT1 &lt; RegDate}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1uyi9qc" sourceRef="Activity_0fxpv4m" targetRef="Activity_1yskc10" /><bpmn:intermediateCatchEvent id="Event_055dfez" camunda:asyncAfter="true"><bpmn:incoming>Flow_1b25q7c</bpmn:incoming><bpmn:outgoing>Flow_0nqsem9</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0qicfqa" messageRef="Message_0zn6jid" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_0nqsem9" sourceRef="Event_055dfez" targetRef="Activity_153rxqz" /><bpmn:intermediateCatchEvent id="Event_1921uzf" camunda:asyncAfter="true"><bpmn:incoming>Flow_0g0ddym</bpmn:incoming><bpmn:outgoing>Flow_0723zpe</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0efp1g3" messageRef="Message_0nc5k7q" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_0723zpe" sourceRef="Event_1921uzf" targetRef="Activity_141m4sq" /><bpmn:serviceTask id="Activity_1pt0lkb" name="Достаем primaryId объекта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "enrichment",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1iy8y3h</bpmn:incoming><bpmn:outgoing>Flow_1qk4ckn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qk4ckn" sourceRef="Activity_1pt0lkb" targetRef="Activity_0k8gizu" /><bpmn:scriptTask id="Activity_0oe19i4" name="Идентификатор факта" scriptFormat="javascript" camunda:resultVariable="PrimaryId2"><bpmn:incoming>Flow_0xwzjxg</bpmn:incoming><bpmn:outgoing>Flow_1ybcjjb</bpmn:outgoing><bpmn:script>primaryId + "_F"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1ybcjjb" sourceRef="Activity_0oe19i4" targetRef="ServiceTask_06vg3ge" /><bpmn:sequenceFlow id="Flow_0zken7p" sourceRef="Activity_1nb6hnu" targetRef="ServiceTask_0bgo9ix" /><bpmn:scriptTask id="Activity_1nb6hnu" name="Log" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0b5cefj</bpmn:incoming><bpmn:outgoing>Flow_0zken7p</bpmn:outgoing><bpmn:script>print(new Date() + ": PARENT - " + instanceId + ": Cancel Signal Recieved! ")</bpmn:script></bpmn:scriptTask></bpmn:process><bpmn:signal id="Signal_0cmcgfe" name="Cancell${instanceId}" /><bpmn:message id="Message_0zn6jid" name="parentProcess" /><bpmn:message id="Message_0nc5k7q" name="parentProcess" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_Conversion_Sec_648b7fbf-890c-4e87-be1d-e93939b3a65f"><bpmndi:BPMNEdge id="Flow_0zken7p_di" bpmnElement="Flow_0zken7p"><di:waypoint x="600" y="535" /><di:waypoint x="700" y="535" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ybcjjb_di" bpmnElement="Flow_1ybcjjb"><di:waypoint x="2200" y="783" /><di:waypoint x="2220" y="783" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qk4ckn_di" bpmnElement="Flow_1qk4ckn"><di:waypoint x="2460" y="390" /><di:waypoint x="2500" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0723zpe_di" bpmnElement="Flow_0723zpe"><di:waypoint x="2528" y="783" /><di:waypoint x="2580" y="783" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nqsem9_di" bpmnElement="Flow_0nqsem9"><di:waypoint x="2252" y="600" /><di:waypoint x="1205" y="600" /><di:waypoint x="1205" y="743" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1uyi9qc_di" bpmnElement="Flow_1uyi9qc"><di:waypoint x="2240" y="260" /><di:waypoint x="2020" y="260" /><di:waypoint x="2020" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dd29iv_di" bpmnElement="Flow_1dd29iv"><di:waypoint x="2290" y="365" /><di:waypoint x="2290" y="300" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1iy8y3h_di" bpmnElement="Flow_1iy8y3h"><di:waypoint x="2315" y="390" /><di:waypoint x="2360" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w47kdv_di" bpmnElement="Flow_0w47kdv"><di:waypoint x="1920" y="390" /><di:waypoint x="1970" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k6po3z_di" bpmnElement="Flow_1k6po3z"><di:waypoint x="2680" y="783" /><di:waypoint x="2730" y="783" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g0ddym_di" bpmnElement="Flow_0g0ddym"><di:waypoint x="2450" y="783" /><di:waypoint x="2492" y="783" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b25q7c_di" bpmnElement="Flow_1b25q7c"><di:waypoint x="2550" y="550" /><di:waypoint x="2550" y="600" /><di:waypoint x="2288" y="600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nm5zou_di" bpmnElement="Flow_0nm5zou"><di:waypoint x="1380" y="145" /><di:waypoint x="1380" y="260" /><di:waypoint x="750" y="260" /><di:waypoint x="750" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0k4ej7b_di" bpmnElement="Flow_0k4ej7b"><di:waypoint x="1405" y="120" /><di:waypoint x="1450" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hubln6_di" bpmnElement="Flow_1hubln6"><di:waypoint x="980" y="145" /><di:waypoint x="980" y="260" /><di:waypoint x="750" y="260" /><di:waypoint x="750" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xxbypb_di" bpmnElement="Flow_1xxbypb"><di:waypoint x="1005" y="120" /><di:waypoint x="1060" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07nk6nd_di" bpmnElement="Flow_07nk6nd"><di:waypoint x="910" y="120" /><di:waypoint x="955" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vvpttg_di" bpmnElement="Flow_0vvpttg"><di:waypoint x="1320" y="120" /><di:waypoint x="1355" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fkyxg9_di" bpmnElement="Flow_1fkyxg9"><di:waypoint x="1160" y="120" /><di:waypoint x="1220" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02oeyen_di" bpmnElement="Flow_02oeyen"><di:waypoint x="775" y="120" /><di:waypoint x="810" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ot1b7n_di" bpmnElement="Flow_1ot1b7n"><di:waypoint x="680" y="120" /><di:waypoint x="725" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05skcf1_di" bpmnElement="Flow_05skcf1"><di:waypoint x="540" y="120" /><di:waypoint x="580" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01w2sqw_di" bpmnElement="Flow_01w2sqw"><di:waypoint x="490" y="235" /><di:waypoint x="490" y="160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18o1xi8_di" bpmnElement="Flow_18o1xi8"><di:waypoint x="490" y="350" /><di:waypoint x="490" y="285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tdbl9b_di" bpmnElement="Flow_1tdbl9b"><di:waypoint x="1500" y="160" /><di:waypoint x="1500" y="260" /><di:waypoint x="750" y="260" /><di:waypoint x="750" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rkls9l_di" bpmnElement="Flow_1rkls9l"><di:waypoint x="750" y="145" /><di:waypoint x="750" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0k9kboq_di" bpmnElement="Flow_0k9kboq"><di:waypoint x="515" y="260" /><di:waypoint x="750" y="260" /><di:waypoint x="750" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wo0kdu_di" bpmnElement="SequenceFlow_1wo0kdu"><di:waypoint x="350" y="415" /><di:waypoint x="350" y="535" /><di:waypoint x="392" y="535" /><bpmndi:BPMNLabel><dc:Bounds x="-777.5" y="175" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dxsa2s_di" bpmnElement="SequenceFlow_1dxsa2s"><di:waypoint x="800" y="535" /><di:waypoint x="842" y="535" /><bpmndi:BPMNLabel><dc:Bounds x="-477" y="244" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0b5cefj_di" bpmnElement="SequenceFlow_0b5cefj"><di:waypoint x="428" y="535" /><di:waypoint x="500" y="535" /><bpmndi:BPMNLabel><dc:Bounds x="-706.5" y="244" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vo8viu_di" bpmnElement="SequenceFlow_1vo8viu"><di:waypoint x="375" y="390" /><di:waypoint x="440" y="390" /><bpmndi:BPMNLabel><dc:Bounds x="-696.5" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kx9lyr_di" bpmnElement="Flow_1kx9lyr"><di:waypoint x="2210" y="390" /><di:waypoint x="2265" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13sqfeh_di" bpmnElement="Flow_13sqfeh"><di:waypoint x="2550" y="430" /><di:waypoint x="2550" y="470" /><bpmndi:BPMNLabel><dc:Bounds x="1690" y="304.5" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cagets_di" bpmnElement="Flow_0cagets"><di:waypoint x="1320" y="390" /><di:waypoint x="1390" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01jydv2_di" bpmnElement="Flow_01jydv2"><di:waypoint x="1190" y="390" /><di:waypoint x="1220" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hubxw1_di" bpmnElement="Flow_0hubxw1"><di:waypoint x="1060" y="390" /><di:waypoint x="1090" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xwzjxg_di" bpmnElement="Flow_0xwzjxg"><di:waypoint x="2080" y="783" /><di:waypoint x="2100" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="2122.5" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17agq16_di" bpmnElement="Flow_17agq16"><di:waypoint x="1820" y="783" /><di:waypoint x="1850" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1788" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00lgxyf_di" bpmnElement="Flow_00lgxyf"><di:waypoint x="1680" y="783" /><di:waypoint x="1720" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1622" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01nsdhu_di" bpmnElement="Flow_01nsdhu"><di:waypoint x="2830" y="783" /><di:waypoint x="2882" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="2639" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1alzad0_di" bpmnElement="Flow_1alzad0"><di:waypoint x="1255" y="783" /><di:waypoint x="1290" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1044.5" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jyt4is_di" bpmnElement="Flow_0jyt4is"><di:waypoint x="2070" y="390" /><di:waypoint x="2110" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19mehn4_di" bpmnElement="SequenceFlow_19mehn4"><di:waypoint x="2320" y="783" /><di:waypoint x="2350" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="2295.5" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e8r3yq_di" bpmnElement="SequenceFlow_1e8r3yq"><di:waypoint x="1950" y="783" /><di:waypoint x="1980" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1951" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1phtmx7_di" bpmnElement="SequenceFlow_1phtmx7"><di:waypoint x="1730" y="490" /><di:waypoint x="1860" y="490" /><di:waypoint x="1860" y="430" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1oebcoc_di" bpmnElement="SequenceFlow_1oebcoc"><di:waypoint x="1550" y="415" /><di:waypoint x="1550" y="490" /><di:waypoint x="1630" y="490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y6qliy_di" bpmnElement="SequenceFlow_1y6qliy"><di:waypoint x="1730" y="290" /><di:waypoint x="1870" y="290" /><di:waypoint x="1870" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1swwe4j_di" bpmnElement="SequenceFlow_1swwe4j"><di:waypoint x="1550" y="365" /><di:waypoint x="1550" y="290" /><di:waypoint x="1630" y="290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0lnsxan_di" bpmnElement="SequenceFlow_0lnsxan"><di:waypoint x="1490" y="390" /><di:waypoint x="1525" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bl25eu_di" bpmnElement="SequenceFlow_1bl25eu"><di:waypoint x="930" y="390" /><di:waypoint x="960" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ccrdax_di" bpmnElement="SequenceFlow_1ccrdax"><di:waypoint x="1540" y="783" /><di:waypoint x="1580" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1450" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02idij0_di" bpmnElement="SequenceFlow_02idij0"><di:waypoint x="1390" y="783" /><di:waypoint x="1440" y="783" /><bpmndi:BPMNLabel><dc:Bounds x="1282" y="608" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or7jn6_di" bpmnElement="SequenceFlow_0or7jn6"><di:waypoint x="188" y="390" /><di:waypoint x="325" y="390" /><bpmndi:BPMNLabel><dc:Bounds x="53" y="218" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17bt84k_di" bpmnElement="SequenceFlow_17bt84k"><di:waypoint x="800" y="390" /><di:waypoint x="830" y="390" /><bpmndi:BPMNLabel><dc:Bounds x="734.5" y="99" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="372" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="-149" y="137" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zxayik_di" bpmnElement="Task_02btl64"><dc:Bounds x="700" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0x91f5v_di" bpmnElement="UserTask_0x91f5v" bioc:stroke="#1E88E5" bioc:fill="#BBDEFB"><dc:Bounds x="1290" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12sgz1d_di" bpmnElement="ServiceTask_12sgz1d"><dc:Bounds x="1440" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1rzax8c_di" bpmnElement="ServiceTask_1rzax8c"><dc:Bounds x="830" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1nciut3_di" bpmnElement="ServiceTask_1nciut3"><dc:Bounds x="1390" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1u4ozcu_di" bpmnElement="Gateway_04shomr" isMarkerVisible="true"><dc:Bounds x="1525" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ritpae_di" bpmnElement="ServiceTask_1ritpae"><dc:Bounds x="1630" y="250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ljyn9j_di" bpmnElement="ServiceTask_0ljyn9j"><dc:Bounds x="1630" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0vgehqk_di" bpmnElement="ServiceTask_0vgehqk"><dc:Bounds x="1850" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_06vg3ge_di" bpmnElement="ServiceTask_06vg3ge"><dc:Bounds x="2220" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yskc10_di" bpmnElement="Activity_1yskc10" bioc:stroke="#1E88E5" bioc:fill="#BBDEFB"><dc:Bounds x="1970" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_153rxqz_di" bpmnElement="Activity_153rxqz"><dc:Bounds x="1155" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1cwhmx4_di" bpmnElement="Activity_1cwhmx4"><dc:Bounds x="2730" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06bn8x0_di" bpmnElement="Activity_06bn8x0"><dc:Bounds x="1580" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wmnd23_di" bpmnElement="Activity_0wmnd23"><dc:Bounds x="1720" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mg4wye_di" bpmnElement="Activity_1mg4wye"><dc:Bounds x="1980" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1enwnac_di" bpmnElement="Activity_1enwnac"><dc:Bounds x="960" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xc527w_di" bpmnElement="Activity_1xc527w"><dc:Bounds x="1090" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1tz138g_di" bpmnElement="Activity_1tz138g"><dc:Bounds x="1220" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0k8gizu_di" bpmnElement="Activity_0k8gizu" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="2500" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rllltn_di" bpmnElement="Activity_1rllltn"><dc:Bounds x="2110" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_1mozw5y_di" bpmnElement="ExclusiveGateway_086itpq"><dc:Bounds x="325" y="365" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="-778" y="73" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_0a8w19w_di" bpmnElement="IntermediateCatchEvent_0a8w19w"><dc:Bounds x="392" y="517" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="-822" y="283" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bgo9ix_di" bpmnElement="ServiceTask_0bgo9ix"><dc:Bounds x="700" y="495" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_042yubs_di" bpmnElement="EndEvent_042yubs"><dc:Bounds x="842" y="517" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="-382" y="287" width="0" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_19a8vrn_di" bpmnElement="EndEvent_0djl7a3"><dc:Bounds x="2882" y="765" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="2702" y="651" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_05rtgg5_di" bpmnElement="Gateway_05rtgg5" isMarkerVisible="true"><dc:Bounds x="465" y="235" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1auerb6_di" bpmnElement="Activity_1auerb6"><dc:Bounds x="440" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ed5fyr_di" bpmnElement="Activity_1ed5fyr"><dc:Bounds x="580" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1fa661b_di" bpmnElement="Gateway_1fa661b" isMarkerVisible="true"><dc:Bounds x="725" y="95" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0cwnu4r_di" bpmnElement="Activity_0cwnu4r"><dc:Bounds x="1220" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0cqe3ob_di" bpmnElement="Activity_0cqe3ob"><dc:Bounds x="1060" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16kjycq_di" bpmnElement="Activity_16kjycq"><dc:Bounds x="810" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06t3twl_di" bpmnElement="Activity_06t3twl"><dc:Bounds x="1450" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0k56nmg_di" bpmnElement="Activity_0k56nmg"><dc:Bounds x="440" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0w17d6i_di" bpmnElement="Gateway_13l7so7" isMarkerVisible="true"><dc:Bounds x="955" y="95" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0kowt3v_di" bpmnElement="Gateway_1wjpqz1" isMarkerVisible="true"><dc:Bounds x="1355" y="95" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jtdvci_di" bpmnElement="Activity_1jtdvci" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2500" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0kc28cr_di" bpmnElement="Activity_0kc28cr" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2350" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_141m4sq_di" bpmnElement="Activity_141m4sq" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2580" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0u68l5z_di" bpmnElement="Activity_0u68l5z"><dc:Bounds x="1820" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1vxj07m_di" bpmnElement="Gateway_1vxj07m" isMarkerVisible="true"><dc:Bounds x="2265" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fxpv4m_di" bpmnElement="Activity_0fxpv4m"><dc:Bounds x="2240" y="220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_055dfez_di" bpmnElement="Event_055dfez"><dc:Bounds x="2252" y="582" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1921uzf_di" bpmnElement="Event_1921uzf"><dc:Bounds x="2492" y="765" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1pt0lkb_di" bpmnElement="Activity_1pt0lkb"><dc:Bounds x="2360" y="350" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0oe19i4_di" bpmnElement="Activity_0oe19i4"><dc:Bounds x="2100" y="743" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ftiqlo_di" bpmnElement="Activity_1nb6hnu"><dc:Bounds x="500" y="495" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>