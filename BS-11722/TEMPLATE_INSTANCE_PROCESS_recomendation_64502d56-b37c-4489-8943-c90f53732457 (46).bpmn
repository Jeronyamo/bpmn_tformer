<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_recomendation_64502d56-b37c-4489-8943-c90f53732457" name="Рекомендация" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1"><bpmn:outgoing>SequenceFlow_0or7jn6</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="SequenceFlow_0or7jn6" sourceRef="StartEvent_1" targetRef="Activity_1frzfv3" /><bpmn:serviceTask id="Activity_1kad5f3" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=cifID&amp;systemName=brokerageAccountID&amp;systemName=rebalancingType&amp;systemName=PushCounter</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="CIF"><camunda:script scriptFormat="javascript">JSON.parse(response).cifID</camunda:script></camunda:outputParameter><camunda:outputParameter name="brokerageAccountID"><camunda:script scriptFormat="javascript">JSON.parse(response).brokerageAccountID</camunda:script></camunda:outputParameter><camunda:outputParameter name="rebalancingType"><camunda:script scriptFormat="javascript">JSON.parse(response).rebalancingType</camunda:script></camunda:outputParameter><camunda:outputParameter name="PushCounter"><camunda:script scriptFormat="javascript">JSON.parse(response).PushCounter</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_15pozx9</bpmn:incoming><bpmn:outgoing>Flow_0a8lms1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0o0t86y" name="Ищем клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1, "attributes.RiskPrifileNumber": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="ClientId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Cl_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.RiskPrifileNumber
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1igdt9v</bpmn:incoming><bpmn:outgoing>Flow_0ikemw3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_123zxue" name="Ищем клиентский портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6167d4df7ef9df0776685460", 
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1, "attributes.rp_RiskCategoria": 1 , "attributes.TotalNumberUnfulfilledRecommendations": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Portfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="CP_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.rp_RiskCategoria
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TotalNumberUnfulfilledRecommendations"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.TotalNumberUnfulfilledRecommendations
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0w1cvxl</bpmn:incoming><bpmn:outgoing>Flow_1yvqn30</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ya57u0" default="Flow_1k1kq5q"><bpmn:incoming>Flow_1yvqn30</bpmn:incoming><bpmn:outgoing>Flow_1tewhug</bpmn:outgoing><bpmn:outgoing>Flow_1k1kq5q</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1tvuv8m" name="Статус: Не найден клиентский портфель"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиентский+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tzy0u5</bpmn:incoming><bpmn:outgoing>Flow_1ighaoa</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_07ssjse"><bpmn:incoming>Flow_1doz1ka</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_16e1xgk" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиентский портфель")
.prop("recomendationId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tewhug</bpmn:incoming><bpmn:outgoing>Flow_1tzy0u5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1fv0oiz" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ighaoa</bpmn:incoming><bpmn:outgoing>Flow_1doz1ka</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0sigsff" default="Flow_0w1cvxl"><bpmn:incoming>Flow_0ikemw3</bpmn:incoming><bpmn:outgoing>Flow_0w1cvxl</bpmn:outgoing><bpmn:outgoing>Flow_15tu2x0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1dwmtv8" name="Статус: Не найден клиент"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиент</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1pzm1nn</bpmn:incoming><bpmn:outgoing>Flow_13ulutu</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_00jojk9"><bpmn:incoming>Flow_0ytwwz0</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_04p28xg" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиент")
.prop("recomendationId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_15tu2x0</bpmn:incoming><bpmn:outgoing>Flow_1pzm1nn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_13gsv4q" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13ulutu</bpmn:incoming><bpmn:outgoing>Flow_0ytwwz0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ikemw3" sourceRef="Activity_0o0t86y" targetRef="Gateway_0sigsff" /><bpmn:sequenceFlow id="Flow_0w1cvxl" sourceRef="Gateway_0sigsff" targetRef="Activity_123zxue" /><bpmn:sequenceFlow id="Flow_1yvqn30" sourceRef="Activity_123zxue" targetRef="Gateway_0ya57u0" /><bpmn:sequenceFlow id="Flow_1tewhug" name="Не найден портфель" sourceRef="Gateway_0ya57u0" targetRef="Activity_16e1xgk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1tzy0u5" sourceRef="Activity_16e1xgk" targetRef="Activity_1tvuv8m" /><bpmn:sequenceFlow id="Flow_1ighaoa" sourceRef="Activity_1tvuv8m" targetRef="Activity_1fv0oiz" /><bpmn:sequenceFlow id="Flow_1doz1ka" sourceRef="Activity_1fv0oiz" targetRef="Event_07ssjse" /><bpmn:sequenceFlow id="Flow_15tu2x0" name="Не найден клиент" sourceRef="Gateway_0sigsff" targetRef="Activity_04p28xg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1pzm1nn" sourceRef="Activity_04p28xg" targetRef="Activity_1dwmtv8" /><bpmn:sequenceFlow id="Flow_13ulutu" sourceRef="Activity_1dwmtv8" targetRef="Activity_13gsv4q" /><bpmn:sequenceFlow id="Flow_0ytwwz0" sourceRef="Activity_13gsv4q" targetRef="Event_00jojk9" /><bpmn:sequenceFlow id="Flow_0a8lms1" sourceRef="Activity_1kad5f3" targetRef="Gateway_1omyhy3" /><bpmn:exclusiveGateway id="Gateway_1omyhy3" default="Flow_1igdt9v"><bpmn:incoming>Flow_0a8lms1</bpmn:incoming><bpmn:outgoing>Flow_1igdt9v</bpmn:outgoing><bpmn:outgoing>Flow_088bb8k</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1igdt9v" sourceRef="Gateway_1omyhy3" targetRef="Activity_0o0t86y" /><bpmn:serviceTask id="Activity_1xzk0xq" name="Статус: Не заданы обязательные параметры"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+заданы+обязательные+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0f9neqn</bpmn:incoming><bpmn:outgoing>Flow_1m629ig</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_138gtiq"><bpmn:incoming>Flow_1u506p1</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_03s7023" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не заданы обязательные атрибуты")
.prop("recomendationId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_088bb8k</bpmn:incoming><bpmn:outgoing>Flow_0f9neqn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1d0cnq7" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1m629ig</bpmn:incoming><bpmn:outgoing>Flow_1u506p1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0f9neqn" sourceRef="Activity_03s7023" targetRef="Activity_1xzk0xq" /><bpmn:sequenceFlow id="Flow_1m629ig" sourceRef="Activity_1xzk0xq" targetRef="Activity_1d0cnq7" /><bpmn:sequenceFlow id="Flow_1u506p1" sourceRef="Activity_1d0cnq7" targetRef="Event_138gtiq" /><bpmn:sequenceFlow id="Flow_088bb8k" name="Не найдены обязательные параметры" sourceRef="Gateway_1omyhy3" targetRef="Activity_03s7023"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${CIF == null || brokerageAccountID == null || rebalancingType == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1g9miya" name="Ищем тип ребалансировки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6246c872e6afeb45a496738d", 
"attributes.typeRebalancing": "${rebalancingType}"
},
"projection": { 		"_id": 1, "attributes.rebalancingDescription": 1 , "attributes.serviceDisabling": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="RebalancType_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyType"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="rebalancingDescription"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.rebalancingDescription
}
catch (e)
{
" "
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="serviceDisabling"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.serviceDisabling
}
catch (e)
{
false
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1k1kq5q</bpmn:incoming><bpmn:outgoing>Flow_0587rl1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1k1kq5q" sourceRef="Gateway_0ya57u0" targetRef="Activity_1g9miya" /><bpmn:exclusiveGateway id="Gateway_1urwl7w" default="Flow_1mehuam"><bpmn:incoming>Flow_0587rl1</bpmn:incoming><bpmn:outgoing>Flow_07r63ok</bpmn:outgoing><bpmn:outgoing>Flow_1mehuam</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0587rl1" sourceRef="Activity_1g9miya" targetRef="Gateway_1urwl7w" /><bpmn:serviceTask id="Activity_0lt6usw" name="Статус: Не найден тип ребалансировки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+тип+ребалансировки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_003a9cz</bpmn:incoming><bpmn:outgoing>Flow_19pb7bt</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_03mv7q4"><bpmn:incoming>Flow_1rvqcbv</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1vrh6ri" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден тип ребалансировки")
.prop("recomendationId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07r63ok</bpmn:incoming><bpmn:outgoing>Flow_003a9cz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1db6h3t" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_19pb7bt</bpmn:incoming><bpmn:outgoing>Flow_1rvqcbv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_003a9cz" sourceRef="Activity_1vrh6ri" targetRef="Activity_0lt6usw" /><bpmn:sequenceFlow id="Flow_19pb7bt" sourceRef="Activity_0lt6usw" targetRef="Activity_1db6h3t" /><bpmn:sequenceFlow id="Flow_1rvqcbv" sourceRef="Activity_1db6h3t" targetRef="Event_03mv7q4" /><bpmn:sequenceFlow id="Flow_07r63ok" name="Не найден тип ребалансировки" sourceRef="Gateway_1urwl7w" targetRef="Activity_1vrh6ri"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyType == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_0mv4ug6" name="Получаем текущую дату и время формирования рекомендации" scriptFormat="JavaScript" camunda:resultVariable="RecomendationDateTime"><bpmn:incoming>Flow_1mehuam</bpmn:incoming><bpmn:outgoing>Flow_1bl8vrx</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1mehuam" sourceRef="Gateway_1urwl7w" targetRef="Activity_0mv4ug6" /><bpmn:serviceTask id="Activity_0ppqnq2" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("rebalancingDescription", rebalancingDescription ? rebalancingDescription : S('{"x":null}').prop("x"))
.prop("RecomendationDateTime", RecomendationDateTime)
.prop("RecommendationID", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1hdt2zi</bpmn:incoming><bpmn:incoming>Flow_1e8e47c</bpmn:incoming><bpmn:incoming>Flow_0nvdo29</bpmn:incoming><bpmn:outgoing>Flow_06qmhow</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1bl8vrx" sourceRef="Activity_0mv4ug6" targetRef="Gateway_0gx6m0u" /><bpmn:scriptTask id="Activity_1tse3xi" name="Получаем текущую дату и время отправки пуша" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:incoming>Flow_06qmhow</bpmn:incoming><bpmn:outgoing>Flow_1ar176b</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_06qmhow" sourceRef="Activity_0ppqnq2" targetRef="Activity_1tse3xi" /><bpmn:subProcess id="Activity_09nf5qf" name="ПРЕДВАРИТЕЛЬНЫЙ И УТОЧНЕННЫЙ РАСЧЕТ ПОРТФЕЛЯ, ПОЛУЧЕНИЕ СТАТУСА ПАКЕТНОЙ ЗАЯВКИ"><bpmn:incoming>Flow_11aoxum</bpmn:incoming><bpmn:incoming>Flow_118er6e</bpmn:incoming><bpmn:incoming>Flow_14u0l1k</bpmn:incoming><bpmn:outgoing>Flow_1843poh</bpmn:outgoing><bpmn:startEvent id="Event_1c5lw0l"><bpmn:outgoing>Flow_00sq808</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_00angqi"><bpmn:incoming>Flow_00sq808</bpmn:incoming><bpmn:outgoing>Flow_1t60ry5</bpmn:outgoing><bpmn:outgoing>Flow_04z5ecz</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_0yjp3ns"><bpmn:incoming>Flow_04z5ecz</bpmn:incoming><bpmn:incoming>Flow_1cun3sk</bpmn:incoming><bpmn:incoming>Flow_0uwndw2</bpmn:incoming><bpmn:outgoing>Flow_10atpz4</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0ujblyy" signalRef="Signal_1t4cb6s" /></bpmn:intermediateCatchEvent><bpmn:intermediateCatchEvent id="Event_0n67zmv"><bpmn:incoming>Flow_1t60ry5</bpmn:incoming><bpmn:outgoing>Flow_09x5rni</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_047igjl"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT${forTimer}S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0isv8n8" name="Таймаут?" camunda:expression="timeout" camunda:resultVariable="timeout"><bpmn:incoming>Flow_09x5rni</bpmn:incoming><bpmn:outgoing>Flow_085itcj</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0lbfvno"><bpmn:incoming>Flow_085itcj</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_06gc5aj" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_085itcj" sourceRef="Activity_0isv8n8" targetRef="Event_0lbfvno" /><bpmn:sequenceFlow id="Flow_1t60ry5" sourceRef="Gateway_00angqi" targetRef="Event_0n67zmv" /><bpmn:sequenceFlow id="Flow_04z5ecz" sourceRef="Gateway_00angqi" targetRef="Event_0yjp3ns" /><bpmn:sequenceFlow id="Flow_00sq808" sourceRef="Event_1c5lw0l" targetRef="Gateway_00angqi" /><bpmn:serviceTask id="Activity_0is8nm4" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=ProcessStep</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ProcessStep"><camunda:script scriptFormat="javascript">JSON.parse(response).ProcessStep</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10atpz4</bpmn:incoming><bpmn:outgoing>Flow_15o8r7c</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_15o8r7c" sourceRef="Activity_0is8nm4" targetRef="Gateway_16sp82s" /><bpmn:sequenceFlow id="Flow_10atpz4" sourceRef="Event_0yjp3ns" targetRef="Activity_0is8nm4" /><bpmn:exclusiveGateway id="Gateway_16sp82s"><bpmn:incoming>Flow_15o8r7c</bpmn:incoming><bpmn:outgoing>Flow_1cun3sk</bpmn:outgoing><bpmn:outgoing>Flow_1pjq9iq</bpmn:outgoing><bpmn:outgoing>Flow_18ujyju</bpmn:outgoing><bpmn:outgoing>Flow_0e02xcs</bpmn:outgoing><bpmn:outgoing>Flow_03nkpa6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1cun3sk" name="Ожидание предв.или уточн.запроса" sourceRef="Gateway_16sp82s" targetRef="Event_0yjp3ns"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == '1' || ProcessStep == '2'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0od3oa4" name="Таймаут?" camunda:expression="execute" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1pjq9iq</bpmn:incoming><bpmn:outgoing>Flow_11chwlk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_11chwlk" sourceRef="Activity_0od3oa4" targetRef="Event_1iamo3z" /><bpmn:endEvent id="Event_1iamo3z"><bpmn:incoming>Flow_11chwlk</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_19057jq" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1pjq9iq" name="Исполнение ПЗ" sourceRef="Gateway_16sp82s" targetRef="Activity_0od3oa4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == '4'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1akglmc" name="Таймаут?" camunda:expression="reject" camunda:resultVariable="timeout"><bpmn:incoming>Flow_18ujyju</bpmn:incoming><bpmn:outgoing>Flow_1dfwy8x</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_18ujyju" name="Отмена ПЗ" sourceRef="Gateway_16sp82s" targetRef="Activity_1akglmc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == '5'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0vzlu61" name="Таймаут?" camunda:expression="end" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0e02xcs</bpmn:incoming><bpmn:outgoing>Flow_0s578jj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1dfwy8x" sourceRef="Activity_1akglmc" targetRef="Event_1kmlv10" /><bpmn:endEvent id="Event_1kmlv10"><bpmn:incoming>Flow_1dfwy8x</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1k13nqv" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0e02xcs" name="Конечный статус" sourceRef="Gateway_16sp82s" targetRef="Activity_0vzlu61"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == '6'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0s578jj" sourceRef="Activity_0vzlu61" targetRef="Event_12gl0az" /><bpmn:endEvent id="Event_12gl0az"><bpmn:incoming>Flow_0s578jj</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1drezae" /></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_07quxyi" default="Flow_0576a8q"><bpmn:incoming>Flow_03nkpa6</bpmn:incoming><bpmn:outgoing>Flow_0576a8q</bpmn:outgoing><bpmn:outgoing>Flow_0dlo2zt</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_0igfdtr" name="Счетчик пушей = 1" scriptFormat="javascript"><bpmn:incoming>Flow_0dlo2zt</bpmn:incoming><bpmn:outgoing>Flow_0zrzohu</bpmn:outgoing><bpmn:script>execution.setVariable('PushCounter', org.camunda.bpm.engine.variable.Variables.integerValue(1))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_13pfylz" name="Счетчик пушей увеличиваем на 1" scriptFormat="javascript" camunda:resultVariable="PushCounter"><bpmn:incoming>Flow_0576a8q</bpmn:incoming><bpmn:outgoing>Flow_1rjienb</bpmn:outgoing><bpmn:script>Math.round(+PushCounter+1)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_079a9su" name="Устанавливаем значение параметров (счетчик пушей)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("PushCounter", PushCounter)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zrzohu</bpmn:incoming><bpmn:incoming>Flow_1rjienb</bpmn:incoming><bpmn:outgoing>Flow_1qs0ofu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0576a8q" sourceRef="Gateway_07quxyi" targetRef="Activity_13pfylz" /><bpmn:sequenceFlow id="Flow_0dlo2zt" name="сч.пушей пустой" sourceRef="Gateway_07quxyi" targetRef="Activity_0igfdtr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${PushCounter == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0zrzohu" sourceRef="Activity_0igfdtr" targetRef="Activity_079a9su" /><bpmn:sequenceFlow id="Flow_1rjienb" sourceRef="Activity_13pfylz" targetRef="Activity_079a9su" /><bpmn:serviceTask id="Activity_08e503k" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",     "TotalNumberUnfulfilledRecommendations": ${TotalNumberUnfulfilledRecommendations},
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${ResultDateTime}",
        "recomendationStatus": "Рекомендована",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter><camunda:outputParameter name="ClientPort_id"><camunda:script scriptFormat="javascript">JSON.parse(response).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qs0ofu</bpmn:incoming><bpmn:outgoing>Flow_0uwndw2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qs0ofu" sourceRef="Activity_079a9su" targetRef="Activity_08e503k" /><bpmn:sequenceFlow id="Flow_03nkpa6" name="Ожидание подтверждения ПЗ" sourceRef="Gateway_16sp82s" targetRef="Gateway_07quxyi"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ProcessStep == '3'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0uwndw2" sourceRef="Activity_08e503k" targetRef="Event_0yjp3ns" /><bpmn:sequenceFlow id="Flow_09x5rni" sourceRef="Event_0n67zmv" targetRef="Activity_0isv8n8" /><bpmn:textAnnotation id="TextAnnotation_19jtdjl"><bpmn:text>предварительный расчет, окончательный расчет, подтверждение ПЗ</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_17n62i5" sourceRef="Event_0yjp3ns" targetRef="TextAnnotation_19jtdjl" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_1ar176b" sourceRef="Activity_1tse3xi" targetRef="Activity_0t1q12z" /><bpmn:exclusiveGateway id="Gateway_0oo0nqf"><bpmn:incoming>Flow_1843poh</bpmn:incoming><bpmn:outgoing>Flow_0aj5b1q</bpmn:outgoing><bpmn:outgoing>Flow_1rum2lb</bpmn:outgoing><bpmn:outgoing>Flow_10rp84o</bpmn:outgoing><bpmn:outgoing>Flow_17wusfc</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1843poh" sourceRef="Activity_09nf5qf" targetRef="Gateway_0oo0nqf" /><bpmn:sequenceFlow id="Flow_0aj5b1q" name="timeout" sourceRef="Gateway_0oo0nqf" targetRef="Activity_1glyxqc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == "timeout"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0t1q12z" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("recomendationStatus", "Рекомендована")
.prop("ResultDateTime", ResultDateTime)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ar176b</bpmn:incoming><bpmn:outgoing>Flow_0yfb2pi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0yfb2pi" sourceRef="Activity_0t1q12z" targetRef="Activity_003orlp" /><bpmn:serviceTask id="Activity_0s8822s" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",
        "TotalNumberUnfulfilledRecommendations": ${TotalNumberUnfulfilledRecommendations},
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${RecomendationDateTime}",
        "recomendationStatus": "Рекомендована",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0iklg7y</bpmn:incoming><bpmn:outgoing>Flow_0nd77bz</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_09799bn" name="увеличиваем значение неисп.рекоменд." scriptFormat="javascript" camunda:resultVariable="TotalNumberUnfulfilledRecommendations"><bpmn:incoming>Flow_1llrjei</bpmn:incoming><bpmn:outgoing>Flow_0iklg7y</bpmn:outgoing><bpmn:script>Math.round(+TotalNumberUnfulfilledRecommendations+1)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0iklg7y" sourceRef="Activity_09799bn" targetRef="Activity_0s8822s" /><bpmn:sequenceFlow id="Flow_0nd77bz" sourceRef="Activity_0s8822s" targetRef="Activity_1i7i9t6" /><bpmn:exclusiveGateway id="Gateway_0b3n25h" default="Flow_0aykcpa"><bpmn:incoming>Flow_1q4ka4b</bpmn:incoming><bpmn:outgoing>Flow_0vke1zr</bpmn:outgoing><bpmn:outgoing>Flow_0h3vwxt</bpmn:outgoing><bpmn:outgoing>Flow_0aykcpa</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0vke1zr" name="Статус Рекомендации = Не требуется" sourceRef="Gateway_0b3n25h" targetRef="Activity_00fp0k4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${recomendationStatus  == "Не требуется"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1jcogxu" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",     "TotalNumberUnfulfilledRecommendations": 0,
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${RecomendationDateTime}",
        "recomendationStatus": "${recomendationStatus}",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0h3vwxt</bpmn:incoming><bpmn:outgoing>Flow_0krgmln</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0h3vwxt" name="статус рекомендации = Подтверждена" sourceRef="Gateway_0b3n25h" targetRef="Activity_1jcogxu"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${recomendationStatus  == "Подтверждена"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0krgmln" sourceRef="Activity_1jcogxu" targetRef="Gateway_0idnlqi" /><bpmn:intermediateCatchEvent id="Event_0hugrro"><bpmn:incoming>Flow_0vu22kt</bpmn:incoming><bpmn:outgoing>Flow_0n38kkj</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_02gz7vs" signalRef="Signal_1t4cb6s" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0ix0xmi" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="executionResult"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0n38kkj</bpmn:incoming><bpmn:outgoing>Flow_0gp9o8g</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0n38kkj" sourceRef="Event_0hugrro" targetRef="Activity_0ix0xmi" /><bpmn:exclusiveGateway id="Gateway_0idnlqi" default="Flow_1qma5oy"><bpmn:incoming>Flow_0krgmln</bpmn:incoming><bpmn:incoming>Flow_0gp9o8g</bpmn:incoming><bpmn:outgoing>Flow_0vu22kt</bpmn:outgoing><bpmn:outgoing>Flow_1qma5oy</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0vu22kt" name="Исполняется" sourceRef="Gateway_0idnlqi" targetRef="Event_0hugrro"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${executionResult == "Исполняется"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_10r6yi1" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=recomendationStatus&amp;systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="recomendationStatus"><camunda:script scriptFormat="javascript">JSON.parse(response).recomendationStatus</camunda:script></camunda:outputParameter><camunda:outputParameter name="executionResult"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17wusfc</bpmn:incoming><bpmn:outgoing>Flow_1q4ka4b</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1q4ka4b" sourceRef="Activity_10r6yi1" targetRef="Gateway_0b3n25h" /><bpmn:serviceTask id="Activity_1c1rf9f" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0aykcpa</bpmn:incoming><bpmn:incoming>Flow_0ivaq6x</bpmn:incoming><bpmn:outgoing>Flow_13qdon8</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1powdci"><bpmn:incoming>Flow_13qdon8</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_13qdon8" sourceRef="Activity_1c1rf9f" targetRef="Event_1powdci" /><bpmn:sequenceFlow id="Flow_0gp9o8g" sourceRef="Activity_0ix0xmi" targetRef="Gateway_0idnlqi" /><bpmn:serviceTask id="Activity_1jz9t1d" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qma5oy</bpmn:incoming><bpmn:outgoing>Flow_1g80192</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qma5oy" sourceRef="Gateway_0idnlqi" targetRef="Activity_1jz9t1d" /><bpmn:endEvent id="Event_1h8dchl"><bpmn:incoming>Flow_1g80192</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1g80192" sourceRef="Activity_1jz9t1d" targetRef="Event_1h8dchl" /><bpmn:sequenceFlow id="Flow_0aykcpa" sourceRef="Gateway_0b3n25h" targetRef="Activity_1c1rf9f" /><bpmn:scriptTask id="Activity_0j5mtzp" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_1k86imn</bpmn:incoming><bpmn:outgoing>Flow_11aoxum</bpmn:outgoing><bpmn:script>Math.round(2000*(+TotalNumberUnfulfilledRecommendations+1))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_11aoxum" sourceRef="Activity_0j5mtzp" targetRef="Activity_09nf5qf" /><bpmn:sequenceFlow id="Flow_1k86imn" name="Календарная" sourceRef="Gateway_1d5oxwl" targetRef="Activity_0j5mtzp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Календарная'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_1d5oxwl" default="Flow_1qy1o5q"><bpmn:incoming>Flow_18jxcro</bpmn:incoming><bpmn:outgoing>Flow_1k86imn</bpmn:outgoing><bpmn:outgoing>Flow_0l82mr4</bpmn:outgoing><bpmn:outgoing>Flow_1qy1o5q</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_03qae7l" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_0l82mr4</bpmn:incoming><bpmn:outgoing>Flow_118er6e</bpmn:outgoing><bpmn:script>Math.round(2000*(+TotalNumberUnfulfilledRecommendations+1))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1u6zp4r" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_1qy1o5q</bpmn:incoming><bpmn:outgoing>Flow_14u0l1k</bpmn:outgoing><bpmn:script>Math.round(200*(+TotalNumberUnfulfilledRecommendations+1))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0l82mr4" name="Весовая" sourceRef="Gateway_1d5oxwl" targetRef="Activity_03qae7l"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Весовая'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1qy1o5q" name="Аналитическая" sourceRef="Gateway_1d5oxwl" targetRef="Activity_1u6zp4r" /><bpmn:sequenceFlow id="Flow_118er6e" sourceRef="Activity_03qae7l" targetRef="Activity_09nf5qf" /><bpmn:sequenceFlow id="Flow_14u0l1k" sourceRef="Activity_1u6zp4r" targetRef="Activity_09nf5qf" /><bpmn:serviceTask id="Activity_003orlp" name="Запрос для отправки пуша"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/mongo/executeRequest/getRebalancingNotification</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ }</camunda:inputParameter><camunda:outputParameter name="Rtype"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].type
}
catch (e)
{
""
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="response_r">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0yfb2pi</bpmn:incoming><bpmn:outgoing>Flow_0jm6nv9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0jm6nv9" sourceRef="Activity_003orlp" targetRef="Activity_049v39g" /><bpmn:serviceTask id="Activity_1i7i9t6" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("recomendationStatus", "Рекомендована")
.prop("isTimeout", true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0nd77bz</bpmn:incoming><bpmn:outgoing>Flow_00ap2nd</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1glyxqc" name="Статус: Рекомендована"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Рекомендована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0aj5b1q</bpmn:incoming><bpmn:outgoing>Flow_1llrjei</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_049v39g" name="json" scriptFormat="JavaScript" camunda:resultVariable="cifIDs12"><bpmn:incoming>Flow_0jm6nv9</bpmn:incoming><bpmn:outgoing>Flow_0lyxks6</bpmn:outgoing><bpmn:script>S(response_r).prop("cursor")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0lyxks6" sourceRef="Activity_049v39g" targetRef="Activity_0ejoe0m" /><bpmn:scriptTask id="Activity_0ejoe0m" name="Формирование ответа" scriptFormat="javascript" camunda:resultVariable="cifIDs"><bpmn:incoming>Flow_0lyxks6</bpmn:incoming><bpmn:outgoing>Flow_1fl842w</bpmn:outgoing><bpmn:script>var q = new Object();
var cifId111 = JSON.parse(cifIDs12);
q =  cifId111.firstBatch[0].cifIDs;
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1ao0db5" sourceRef="Activity_0m7f7os" targetRef="Activity_0qdkljc" /><bpmn:serviceTask id="Activity_1f8asw6" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ProcessStep", "6")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0rb9kde</bpmn:incoming><bpmn:outgoing>Flow_0ivaq6x</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ivaq6x" sourceRef="Activity_1f8asw6" targetRef="Activity_1c1rf9f" /><bpmn:serviceTask id="Activity_13sd32i" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",
        "TotalNumberUnfulfilledRecommendations": ${TotalNumberUnfulfilledRecommendations},
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${RecomendationDateTime}",
        "recomendationStatus": "Отклонена",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0t52zg5</bpmn:incoming><bpmn:outgoing>Flow_1y8ge4r</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0ad1rss" name="увеличиваем значение неисп.рекоменд." scriptFormat="javascript" camunda:resultVariable="TotalNumberUnfulfilledRecommendations"><bpmn:incoming>Flow_0d92ln4</bpmn:incoming><bpmn:outgoing>Flow_0t52zg5</bpmn:outgoing><bpmn:script>Math.round(+TotalNumberUnfulfilledRecommendations+1)</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1y02ppl" default="Flow_1ugsa39"><bpmn:incoming>Flow_1rjeqq5</bpmn:incoming><bpmn:incoming>Flow_00ap2nd</bpmn:incoming><bpmn:outgoing>Flow_0bnmqtl</bpmn:outgoing><bpmn:outgoing>Flow_1ugsa39</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_0qy2853" default="Flow_1ax24lm"><bpmn:incoming>Flow_0bnmqtl</bpmn:incoming><bpmn:outgoing>Flow_1oy44gb</bpmn:outgoing><bpmn:outgoing>Flow_1ax24lm</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1u15909" name="Отключение услуги"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
    "attributes": {
        "cifID": "${CIF}",
        "brokerageAccountID": "${brokerageAccountID}",
        "QuestionnairesType": "disablingAccount"     }
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1oy44gb</bpmn:incoming><bpmn:outgoing>Flow_1sta930</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_14kybui"><bpmn:incoming>Flow_143gywh</bpmn:incoming></bpmn:endEvent><bpmn:scriptTask id="Activity_12xcnci" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_1d9e1j4</bpmn:incoming><bpmn:outgoing>Flow_1thidu4</bpmn:outgoing><bpmn:script>Math.round(200*(+TotalNumberUnfulfilledRecommendations))</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_0kzu5ks" default="Flow_0eesd8s"><bpmn:incoming>Flow_1ugsa39</bpmn:incoming><bpmn:incoming>Flow_1ax24lm</bpmn:incoming><bpmn:incoming>Flow_1sta930</bpmn:incoming><bpmn:outgoing>Flow_1d9e1j4</bpmn:outgoing><bpmn:outgoing>Flow_15ieurn</bpmn:outgoing><bpmn:outgoing>Flow_0eesd8s</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_1mxbo8t" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_15ieurn</bpmn:incoming><bpmn:outgoing>Flow_1js6v3t</bpmn:outgoing><bpmn:script>Math.round(200*(+TotalNumberUnfulfilledRecommendations))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_19uw74s" name="считаем таймаут" scriptFormat="javascript" camunda:resultVariable="forTimer"><bpmn:incoming>Flow_0eesd8s</bpmn:incoming><bpmn:outgoing>Flow_1ey33w4</bpmn:outgoing><bpmn:script>Math.round(200*(+TotalNumberUnfulfilledRecommendations))</bpmn:script></bpmn:scriptTask><bpmn:intermediateCatchEvent id="Event_1osh6kt"><bpmn:incoming>Flow_1thidu4</bpmn:incoming><bpmn:incoming>Flow_1js6v3t</bpmn:incoming><bpmn:incoming>Flow_1ey33w4</bpmn:incoming><bpmn:outgoing>Flow_16lvsq1</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0zm872d"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT${forTimer}S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_04q2ji2" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("recomendationStatus", "Отклонена")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1y8ge4r</bpmn:incoming><bpmn:outgoing>Flow_1rjeqq5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ty8lsf" name="Статус: Отклонена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отклонена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rum2lb</bpmn:incoming><bpmn:outgoing>Flow_0d92ln4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0t52zg5" sourceRef="Activity_0ad1rss" targetRef="Activity_13sd32i" /><bpmn:sequenceFlow id="Flow_1y8ge4r" sourceRef="Activity_13sd32i" targetRef="Activity_04q2ji2" /><bpmn:sequenceFlow id="Flow_1rjeqq5" sourceRef="Activity_04q2ji2" targetRef="Gateway_1y02ppl" /><bpmn:sequenceFlow id="Flow_0bnmqtl" name="Возможность отключения = true" sourceRef="Gateway_1y02ppl" targetRef="Gateway_0qy2853"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${serviceDisabling == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1ugsa39" sourceRef="Gateway_1y02ppl" targetRef="Gateway_0kzu5ks" /><bpmn:sequenceFlow id="Flow_1oy44gb" name="Отключение услуги (здесь задается значение счетчика!!)" sourceRef="Gateway_0qy2853" targetRef="Activity_1u15909"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TotalNumberUnfulfilledRecommendations &gt; 20 || TotalNumberUnfulfilledRecommendations == 20}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1ax24lm" sourceRef="Gateway_0qy2853" targetRef="Gateway_0kzu5ks" /><bpmn:sequenceFlow id="Flow_1sta930" sourceRef="Activity_1u15909" targetRef="Gateway_0kzu5ks" /><bpmn:sequenceFlow id="Flow_1d9e1j4" name="Календарная" sourceRef="Gateway_0kzu5ks" targetRef="Activity_12xcnci"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Календарная'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1thidu4" sourceRef="Activity_12xcnci" targetRef="Event_1osh6kt" /><bpmn:sequenceFlow id="Flow_15ieurn" name="Весовая" sourceRef="Gateway_0kzu5ks" targetRef="Activity_1mxbo8t"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Весовая'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0eesd8s" sourceRef="Gateway_0kzu5ks" targetRef="Activity_19uw74s" /><bpmn:sequenceFlow id="Flow_1js6v3t" sourceRef="Activity_1mxbo8t" targetRef="Event_1osh6kt" /><bpmn:sequenceFlow id="Flow_1ey33w4" sourceRef="Activity_19uw74s" targetRef="Event_1osh6kt" /><bpmn:sequenceFlow id="Flow_16lvsq1" sourceRef="Event_1osh6kt" targetRef="Activity_0a1rl5i" /><bpmn:sequenceFlow id="Flow_1rum2lb" name="reject" sourceRef="Gateway_0oo0nqf" targetRef="Activity_0ty8lsf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == "reject"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_00ap2nd" sourceRef="Activity_1i7i9t6" targetRef="Gateway_1y02ppl" /><bpmn:serviceTask id="Activity_1px29bs" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1kb9p1k</bpmn:incoming><bpmn:incoming>Flow_0lzq0id</bpmn:incoming><bpmn:outgoing>Flow_01hmrtf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_10rp84o" name="end" sourceRef="Gateway_0oo0nqf" targetRef="Activity_1uq8swe"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == "end"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_1qncm8e"><bpmn:incoming>Flow_01hmrtf</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_01hmrtf" sourceRef="Activity_1px29bs" targetRef="Event_1qncm8e" /><bpmn:sequenceFlow id="Flow_1llrjei" sourceRef="Activity_1glyxqc" targetRef="Activity_09799bn" /><bpmn:sequenceFlow id="Flow_0d92ln4" sourceRef="Activity_0ty8lsf" targetRef="Activity_0ad1rss" /><bpmn:serviceTask id="Activity_0a1rl5i" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_16lvsq1</bpmn:incoming><bpmn:outgoing>Flow_143gywh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_143gywh" sourceRef="Activity_0a1rl5i" targetRef="Event_14kybui" /><bpmn:sequenceFlow id="Flow_17wusfc" name="execute" sourceRef="Gateway_0oo0nqf" targetRef="Activity_10r6yi1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == "execute"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1frzfv3" name="переменная адрес коннекта" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0or7jn6</bpmn:incoming><bpmn:outgoing>Flow_1smpbrr</bpmn:outgoing><bpmn:script>execution.setVariable("connectUrl", (java.lang.System).getenv("connectUrl"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1smpbrr" sourceRef="Activity_1frzfv3" targetRef="Activity_091w281" /><bpmn:serviceTask id="Activity_0bfvoaf" name="Отправка пуша"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/ExportPushNotifications/command-executor?cmd=SendExternalNotification</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"type": "rebalancing_notification",
"cifID":  "${CIF}", 
"typeRebalancing": "${RebalancType}"
}</camunda:inputParameter><camunda:outputParameter name="r_response2">${response}</camunda:outputParameter><camunda:outputParameter name="IsSuccess"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).success
}
catch (e)
{
false
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1fl842w</bpmn:incoming><bpmn:outgoing>Flow_18jxcro</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1olwe5o" default="Flow_0q89ie2"><bpmn:outgoing>Flow_0q89ie2</bpmn:outgoing><bpmn:outgoing>Flow_1y7qxuu</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_0wk2gyh" name="Счетчик пушей = 1" scriptFormat="javascript"><bpmn:incoming>Flow_1y7qxuu</bpmn:incoming><bpmn:outgoing>Flow_0hmggjj</bpmn:outgoing><bpmn:script>execution.setVariable('PushCounter', org.camunda.bpm.engine.variable.Variables.integerValue(1))</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_051ebq5" name="Счетчик пушей увеличиваем на 1" scriptFormat="javascript" camunda:resultVariable="PushCounter"><bpmn:incoming>Flow_0q89ie2</bpmn:incoming><bpmn:outgoing>Flow_06zzyk8</bpmn:outgoing><bpmn:script>Math.round(+PushCounter+1)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0m7f7os" name="Устанавливаем значение параметров (счетчик пушей)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("PushCounter", PushCounter)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hmggjj</bpmn:incoming><bpmn:incoming>Flow_06zzyk8</bpmn:incoming><bpmn:outgoing>Flow_1ao0db5</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0q89ie2" sourceRef="Gateway_1olwe5o" targetRef="Activity_051ebq5" /><bpmn:sequenceFlow id="Flow_1y7qxuu" name="сч.пушей пустой" sourceRef="Gateway_1olwe5o" targetRef="Activity_0wk2gyh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${PushCounter == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0hmggjj" sourceRef="Activity_0wk2gyh" targetRef="Activity_0m7f7os" /><bpmn:sequenceFlow id="Flow_06zzyk8" sourceRef="Activity_051ebq5" targetRef="Activity_0m7f7os" /><bpmn:sequenceFlow id="Flow_1fl842w" sourceRef="Activity_0ejoe0m" targetRef="Activity_0bfvoaf" /><bpmn:sequenceFlow id="Flow_18jxcro" sourceRef="Activity_0bfvoaf" targetRef="Gateway_1d5oxwl" /><bpmn:serviceTask id="Activity_1uq8swe" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=recomendationStatus&amp;systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="recomendationStatus"><camunda:script scriptFormat="javascript">JSON.parse(response).recomendationStatus</camunda:script></camunda:outputParameter><camunda:outputParameter name="executionResult"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10rp84o</bpmn:incoming><bpmn:outgoing>Flow_0m8j1fm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0m8j1fm" sourceRef="Activity_1uq8swe" targetRef="Gateway_0cv9w6i" /><bpmn:exclusiveGateway id="Gateway_0cv9w6i" default="Flow_0lzq0id"><bpmn:incoming>Flow_0m8j1fm</bpmn:incoming><bpmn:outgoing>Flow_18u8tbr</bpmn:outgoing><bpmn:outgoing>Flow_0lzq0id</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_18u8tbr" sourceRef="Gateway_0cv9w6i" targetRef="Activity_1ld4w00"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${recomendationStatus  == "Подтверждена"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1ld4w00" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",     "TotalNumberUnfulfilledRecommendations": 0,
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${RecomendationDateTime}",
        "recomendationStatus": "${recomendationStatus}",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18u8tbr</bpmn:incoming><bpmn:outgoing>Flow_1kb9p1k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1kb9p1k" sourceRef="Activity_1ld4w00" targetRef="Activity_1px29bs" /><bpmn:sequenceFlow id="Flow_0lzq0id" sourceRef="Gateway_0cv9w6i" targetRef="Activity_1px29bs" /><bpmn:scriptTask id="Activity_091w281" name="переменная для авторизации" scriptFormat="javascript"><bpmn:incoming>Flow_1smpbrr</bpmn:incoming><bpmn:outgoing>Flow_15pozx9</bpmn:outgoing><bpmn:script>execution.setVariable("Authorization", (java.lang.System).getenv("Authorization"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_15pozx9" sourceRef="Activity_091w281" targetRef="Activity_1kad5f3" /><bpmn:exclusiveGateway id="Gateway_0gx6m0u" default="Flow_0bx3vk9"><bpmn:incoming>Flow_1bl8vrx</bpmn:incoming><bpmn:outgoing>Flow_0bx3vk9</bpmn:outgoing><bpmn:outgoing>Flow_15r0a24</bpmn:outgoing><bpmn:outgoing>Flow_0qpq4dd</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0bx3vk9" sourceRef="Gateway_0gx6m0u" targetRef="Activity_1nknczw" /><bpmn:scriptTask id="Activity_08m1ehr" name="Тип ребалансировки" scriptFormat="javascript" camunda:resultVariable="RebalancType"><bpmn:incoming>Flow_15r0a24</bpmn:incoming><bpmn:outgoing>Flow_1e8e47c</bpmn:outgoing><bpmn:script>"weight"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_15r0a24" sourceRef="Gateway_0gx6m0u" targetRef="Activity_08m1ehr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Весовая'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_092rp73" name="Тип ребалансировки" scriptFormat="javascript" camunda:resultVariable="RebalancType"><bpmn:incoming>Flow_0qpq4dd</bpmn:incoming><bpmn:outgoing>Flow_0nvdo29</bpmn:outgoing><bpmn:script>"calendar"</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_1nknczw" name="Тип ребалансировки" scriptFormat="javascript" camunda:resultVariable="RebalancType"><bpmn:incoming>Flow_0bx3vk9</bpmn:incoming><bpmn:outgoing>Flow_1hdt2zi</bpmn:outgoing><bpmn:script>"analytical"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1hdt2zi" sourceRef="Activity_1nknczw" targetRef="Activity_0ppqnq2" /><bpmn:sequenceFlow id="Flow_0qpq4dd" sourceRef="Gateway_0gx6m0u" targetRef="Activity_092rp73"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${rebalancingType == 'Календарная'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1e8e47c" sourceRef="Activity_08m1ehr" targetRef="Activity_0ppqnq2" /><bpmn:sequenceFlow id="Flow_0nvdo29" sourceRef="Activity_092rp73" targetRef="Activity_0ppqnq2" /><bpmn:serviceTask id="Activity_0qdkljc" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",     "TotalNumberUnfulfilledRecommendations": ${TotalNumberUnfulfilledRecommendations},
        "RecomendationId": "${instanceId}",
        "RecomendationDateTime": "${ResultDateTime}",
        "recomendationStatus": "Рекомендована",
        "rebalancingType": "${rebalancingType}"
        }
}</camunda:inputParameter><camunda:outputParameter name="ClientPort_id"><camunda:script scriptFormat="javascript">JSON.parse(response).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ao0db5</bpmn:incoming></bpmn:serviceTask><bpmn:serviceTask id="Activity_00fp0k4" name="Статус: Не требуется"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+требуется</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0vke1zr</bpmn:incoming><bpmn:outgoing>Flow_0rb9kde</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0rb9kde" sourceRef="Activity_00fp0k4" targetRef="Activity_1f8asw6" /><bpmn:textAnnotation id="TextAnnotation_1ea5lgq"><bpmn:text>Ждем изменения статуса пакетной заявки</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1ry39ro" sourceRef="Event_0hugrro" targetRef="TextAnnotation_1ea5lgq" /><bpmn:textAnnotation id="TextAnnotation_02u1d9g"><bpmn:text>обнуляем счетчик</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_152l6km" sourceRef="Activity_1jcogxu" targetRef="TextAnnotation_02u1d9g" /><bpmn:textAnnotation id="TextAnnotation_0qoxzy3"><bpmn:text>Таймер статуса Повторить</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1p9uhcm" sourceRef="Event_1osh6kt" targetRef="TextAnnotation_0qoxzy3" /><bpmn:textAnnotation id="TextAnnotation_0dtr1oz"><bpmn:text>обнуляем счетчик</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_0m9xnfp" sourceRef="Activity_1ld4w00" targetRef="TextAnnotation_0dtr1oz" /></bpmn:process><bpmn:signal id="Signal_1t4cb6s" name="CalcRebalancing${instanceId}" /><bpmn:signal id="Signal_0t4qb0e" name="POstatusUpdate${instanceId}" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_recomendation_64502d56-b37c-4489-8943-c90f53732457"><bpmndi:BPMNEdge id="Flow_0rb9kde_di" bpmnElement="Flow_0rb9kde"><di:waypoint x="3940" y="1360" /><di:waypoint x="3990" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nvdo29_di" bpmnElement="Flow_0nvdo29"><di:waypoint x="2330" y="350" /><di:waypoint x="2450" y="350" /><di:waypoint x="2450" y="240" /><di:waypoint x="2570" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1e8e47c_di" bpmnElement="Flow_1e8e47c"><di:waypoint x="2330" y="140" /><di:waypoint x="2450" y="140" /><di:waypoint x="2450" y="240" /><di:waypoint x="2570" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qpq4dd_di" bpmnElement="Flow_0qpq4dd"><di:waypoint x="2150" y="265" /><di:waypoint x="2150" y="350" /><di:waypoint x="2230" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hdt2zi_di" bpmnElement="Flow_1hdt2zi"><di:waypoint x="2330" y="240" /><di:waypoint x="2570" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15r0a24_di" bpmnElement="Flow_15r0a24"><di:waypoint x="2150" y="215" /><di:waypoint x="2150" y="140" /><di:waypoint x="2230" y="140" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bx3vk9_di" bpmnElement="Flow_0bx3vk9"><di:waypoint x="2175" y="240" /><di:waypoint x="2230" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15pozx9_di" bpmnElement="Flow_15pozx9"><di:waypoint x="530" y="240" /><di:waypoint x="680" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lzq0id_di" bpmnElement="Flow_0lzq0id"><di:waypoint x="3355" y="1140" /><di:waypoint x="3470" y="1140" /><di:waypoint x="3470" y="1050" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kb9p1k_di" bpmnElement="Flow_1kb9p1k"><di:waypoint x="3380" y="1010" /><di:waypoint x="3420" y="1010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18u8tbr_di" bpmnElement="Flow_18u8tbr"><di:waypoint x="3330" y="1115" /><di:waypoint x="3330" y="1050" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0m8j1fm_di" bpmnElement="Flow_0m8j1fm"><di:waypoint x="3330" y="1210" /><di:waypoint x="3330" y="1165" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18jxcro_di" bpmnElement="Flow_18jxcro"><di:waypoint x="3430" y="280" /><di:waypoint x="3430" y="390" /><di:waypoint x="3020" y="390" /><di:waypoint x="3020" y="465" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fl842w_di" bpmnElement="Flow_1fl842w"><di:waypoint x="3340" y="240" /><di:waypoint x="3380" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06zzyk8_di" bpmnElement="Flow_06zzyk8"><di:waypoint x="3870" y="160" /><di:waypoint x="3870" y="380" /><di:waypoint x="3760" y="380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hmggjj_di" bpmnElement="Flow_0hmggjj"><di:waypoint x="3710" y="280" /><di:waypoint x="3710" y="340" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1y7qxuu_di" bpmnElement="Flow_1y7qxuu"><di:waypoint x="3575" y="240" /><di:waypoint x="3660" y="240" /><bpmndi:BPMNLabel><dc:Bounds x="3576" y="222" width="84" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q89ie2_di" bpmnElement="Flow_0q89ie2"><di:waypoint x="3550" y="215" /><di:waypoint x="3550" y="120" /><di:waypoint x="3820" y="120" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1smpbrr_di" bpmnElement="Flow_1smpbrr"><di:waypoint x="350" y="240" /><di:waypoint x="430" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17wusfc_di" bpmnElement="Flow_17wusfc"><di:waypoint x="3355" y="1360" /><di:waypoint x="3470" y="1360" /><bpmndi:BPMNLabel><dc:Bounds x="3393" y="1342" width="39" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_143gywh_di" bpmnElement="Flow_143gywh"><di:waypoint x="5120" y="1930" /><di:waypoint x="5182" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d92ln4_di" bpmnElement="Flow_0d92ln4"><di:waypoint x="3520" y="1860" /><di:waypoint x="3520" y="1890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1llrjei_di" bpmnElement="Flow_1llrjei"><di:waypoint x="3310" y="2120" /><di:waypoint x="3310" y="2160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01hmrtf_di" bpmnElement="Flow_01hmrtf"><di:waypoint x="3520" y="1010" /><di:waypoint x="3582" y="1010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10rp84o_di" bpmnElement="Flow_10rp84o"><di:waypoint x="3330" y="1335" /><di:waypoint x="3330" y="1290" /><bpmndi:BPMNLabel><dc:Bounds x="3341" y="1303" width="19" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00ap2nd_di" bpmnElement="Flow_00ap2nd"><di:waypoint x="3750" y="2200" /><di:waypoint x="3930" y="2200" /><di:waypoint x="3930" y="1960" /><di:waypoint x="3938" y="1943" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rum2lb_di" bpmnElement="Flow_1rum2lb"><di:waypoint x="3330" y="1385" /><di:waypoint x="3330" y="1638" /><di:waypoint x="3520" y="1638" /><di:waypoint x="3520" y="1780" /><bpmndi:BPMNLabel><dc:Bounds x="3526" y="1697" width="28" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16lvsq1_di" bpmnElement="Flow_16lvsq1"><di:waypoint x="4848" y="1930" /><di:waypoint x="5020" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ey33w4_di" bpmnElement="Flow_1ey33w4"><di:waypoint x="4670" y="1820" /><di:waypoint x="4830" y="1820" /><di:waypoint x="4830" y="1912" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1js6v3t_di" bpmnElement="Flow_1js6v3t"><di:waypoint x="4740" y="1930" /><di:waypoint x="4812" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0eesd8s_di" bpmnElement="Flow_0eesd8s"><di:waypoint x="4520" y="1905" /><di:waypoint x="4520" y="1820" /><di:waypoint x="4570" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15ieurn_di" bpmnElement="Flow_15ieurn"><di:waypoint x="4545" y="1930" /><di:waypoint x="4640" y="1930" /><bpmndi:BPMNLabel><dc:Bounds x="4558" y="1913" width="44" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1thidu4_di" bpmnElement="Flow_1thidu4"><di:waypoint x="4680" y="2040" /><di:waypoint x="4830" y="2040" /><di:waypoint x="4830" y="1948" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1d9e1j4_di" bpmnElement="Flow_1d9e1j4"><di:waypoint x="4520" y="1955" /><di:waypoint x="4520" y="2040" /><di:waypoint x="4580" y="2040" /><bpmndi:BPMNLabel><dc:Bounds x="4516" y="1973" width="68" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1sta930_di" bpmnElement="Flow_1sta930"><di:waypoint x="4380" y="1930" /><di:waypoint x="4495" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ax24lm_di" bpmnElement="Flow_1ax24lm"><di:waypoint x="4150" y="1955" /><di:waypoint x="4150" y="2030" /><di:waypoint x="4440" y="2030" /><di:waypoint x="4440" y="1930" /><di:waypoint x="4495" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oy44gb_di" bpmnElement="Flow_1oy44gb" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><di:waypoint x="4175" y="1930" /><di:waypoint x="4280" y="1930" /><bpmndi:BPMNLabel><dc:Bounds x="4186" y="1857" width="68" height="66" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ugsa39_di" bpmnElement="Flow_1ugsa39"><di:waypoint x="3950" y="1955" /><di:waypoint x="3950" y="2100" /><di:waypoint x="4440" y="2100" /><di:waypoint x="4440" y="1930" /><di:waypoint x="4495" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bnmqtl_di" bpmnElement="Flow_0bnmqtl"><di:waypoint x="3975" y="1930" /><di:waypoint x="4125" y="1930" /><bpmndi:BPMNLabel><dc:Bounds x="4015" y="1880" width="71" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rjeqq5_di" bpmnElement="Flow_1rjeqq5"><di:waypoint x="3880" y="1930" /><di:waypoint x="3925" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1y8ge4r_di" bpmnElement="Flow_1y8ge4r"><di:waypoint x="3730" y="1930" /><di:waypoint x="3780" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t52zg5_di" bpmnElement="Flow_0t52zg5"><di:waypoint x="3570" y="1930" /><di:waypoint x="3630" y="1930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ivaq6x_di" bpmnElement="Flow_0ivaq6x"><di:waypoint x="4090" y="1360" /><di:waypoint x="4150" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ao0db5_di" bpmnElement="Flow_1ao0db5"><di:waypoint x="3660" y="380" /><di:waypoint x="3610" y="380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lyxks6_di" bpmnElement="Flow_0lyxks6"><di:waypoint x="3200" y="240" /><di:waypoint x="3240" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jm6nv9_di" bpmnElement="Flow_0jm6nv9"><di:waypoint x="3080" y="240" /><di:waypoint x="3100" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14u0l1k_di" bpmnElement="Flow_14u0l1k"><di:waypoint x="3170" y="710" /><di:waypoint x="3170" y="1090" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_118er6e_di" bpmnElement="Flow_118er6e"><di:waypoint x="2870" y="710" /><di:waypoint x="2870" y="1090" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qy1o5q_di" bpmnElement="Flow_1qy1o5q"><di:waypoint x="3045" y="490" /><di:waypoint x="3170" y="490" /><di:waypoint x="3170" y="630" /><bpmndi:BPMNLabel><dc:Bounds x="3070" y="472" width="77" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0l82mr4_di" bpmnElement="Flow_0l82mr4"><di:waypoint x="2995" y="490" /><di:waypoint x="2870" y="490" /><di:waypoint x="2870" y="630" /><bpmndi:BPMNLabel><dc:Bounds x="2911" y="472" width="44" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k86imn_di" bpmnElement="Flow_1k86imn"><di:waypoint x="3020" y="515" /><di:waypoint x="3020" y="630" /><bpmndi:BPMNLabel><dc:Bounds x="2986" y="543" width="68" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11aoxum_di" bpmnElement="Flow_11aoxum"><di:waypoint x="3020" y="710" /><di:waypoint x="3020" y="1090" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aykcpa_di" bpmnElement="Flow_0aykcpa"><di:waypoint x="3680" y="1385" /><di:waypoint x="3680" y="1470" /><di:waypoint x="4200" y="1470" /><di:waypoint x="4200" y="1400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g80192_di" bpmnElement="Flow_1g80192"><di:waypoint x="4230" y="990" /><di:waypoint x="4252" y="990" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qma5oy_di" bpmnElement="Flow_1qma5oy"><di:waypoint x="3940" y="1105" /><di:waypoint x="3940" y="990" /><di:waypoint x="4130" y="990" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gp9o8g_di" bpmnElement="Flow_0gp9o8g"><di:waypoint x="4270" y="1170" /><di:waypoint x="4270" y="1220" /><di:waypoint x="3940" y="1220" /><di:waypoint x="3940" y="1155" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13qdon8_di" bpmnElement="Flow_13qdon8"><di:waypoint x="4250" y="1360" /><di:waypoint x="4302" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1q4ka4b_di" bpmnElement="Flow_1q4ka4b"><di:waypoint x="3570" y="1360" /><di:waypoint x="3655" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vu22kt_di" bpmnElement="Flow_0vu22kt"><di:waypoint x="3965" y="1130" /><di:waypoint x="4102" y="1130" /><bpmndi:BPMNLabel><dc:Bounds x="3992" y="1112" width="66" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n38kkj_di" bpmnElement="Flow_0n38kkj"><di:waypoint x="4138" y="1130" /><di:waypoint x="4220" y="1130" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0krgmln_di" bpmnElement="Flow_0krgmln"><di:waypoint x="3860" y="1130" /><di:waypoint x="3915" y="1130" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h3vwxt_di" bpmnElement="Flow_0h3vwxt"><di:waypoint x="3680" y="1335" /><di:waypoint x="3680" y="1130" /><di:waypoint x="3760" y="1130" /><bpmndi:BPMNLabel><dc:Bounds x="3588" y="1240" width="83" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vke1zr_di" bpmnElement="Flow_0vke1zr"><di:waypoint x="3705" y="1360" /><di:waypoint x="3840" y="1360" /><bpmndi:BPMNLabel><dc:Bounds x="3717" y="1320" width="85" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nd77bz_di" bpmnElement="Flow_0nd77bz"><di:waypoint x="3560" y="2200" /><di:waypoint x="3650" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iklg7y_di" bpmnElement="Flow_0iklg7y"><di:waypoint x="3360" y="2200" /><di:waypoint x="3460" y="2200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0yfb2pi_di" bpmnElement="Flow_0yfb2pi"><di:waypoint x="2940" y="240" /><di:waypoint x="2980" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aj5b1q_di" bpmnElement="Flow_0aj5b1q"><di:waypoint x="3318" y="1373" /><di:waypoint x="3310" y="1390" /><di:waypoint x="3310" y="2040" /><bpmndi:BPMNLabel><dc:Bounds x="3261" y="1870" width="37" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1843poh_di" bpmnElement="Flow_1843poh"><di:waypoint x="3220" y="1360" /><di:waypoint x="3305" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ar176b_di" bpmnElement="Flow_1ar176b"><di:waypoint x="2810" y="240" /><di:waypoint x="2840" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06qmhow_di" bpmnElement="Flow_06qmhow"><di:waypoint x="2670" y="240" /><di:waypoint x="2710" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bl8vrx_di" bpmnElement="Flow_1bl8vrx"><di:waypoint x="2060" y="240" /><di:waypoint x="2125" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mehuam_di" bpmnElement="Flow_1mehuam"><di:waypoint x="1895" y="240" /><di:waypoint x="1960" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07r63ok_di" bpmnElement="Flow_07r63ok"><di:waypoint x="1870" y="265" /><di:waypoint x="1870" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="1848" y="276" width="84" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rvqcbv_di" bpmnElement="Flow_1rvqcbv"><di:waypoint x="1870" y="650" /><di:waypoint x="1870" y="702" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19pb7bt_di" bpmnElement="Flow_19pb7bt"><di:waypoint x="1870" y="530" /><di:waypoint x="1870" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_003a9cz_di" bpmnElement="Flow_003a9cz"><di:waypoint x="1870" y="400" /><di:waypoint x="1870" y="450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0587rl1_di" bpmnElement="Flow_0587rl1"><di:waypoint x="1730" y="240" /><di:waypoint x="1845" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k1kq5q_di" bpmnElement="Flow_1k1kq5q"><di:waypoint x="1515" y="240" /><di:waypoint x="1630" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_088bb8k_di" bpmnElement="Flow_088bb8k"><di:waypoint x="850" y="265" /><di:waypoint x="850" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="854" y="278" width="72" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u506p1_di" bpmnElement="Flow_1u506p1"><di:waypoint x="850" y="650" /><di:waypoint x="850" y="702" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1m629ig_di" bpmnElement="Flow_1m629ig"><di:waypoint x="850" y="530" /><di:waypoint x="850" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f9neqn_di" bpmnElement="Flow_0f9neqn"><di:waypoint x="850" y="400" /><di:waypoint x="850" y="450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1igdt9v_di" bpmnElement="Flow_1igdt9v"><di:waypoint x="875" y="240" /><di:waypoint x="980" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a8lms1_di" bpmnElement="Flow_0a8lms1"><di:waypoint x="780" y="240" /><di:waypoint x="825" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ytwwz0_di" bpmnElement="Flow_0ytwwz0"><di:waypoint x="1160" y="650" /><di:waypoint x="1160" y="702" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13ulutu_di" bpmnElement="Flow_13ulutu"><di:waypoint x="1160" y="530" /><di:waypoint x="1160" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pzm1nn_di" bpmnElement="Flow_1pzm1nn"><di:waypoint x="1160" y="400" /><di:waypoint x="1160" y="450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15tu2x0_di" bpmnElement="Flow_15tu2x0"><di:waypoint x="1160" y="265" /><di:waypoint x="1160" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="1162" y="284" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1doz1ka_di" bpmnElement="Flow_1doz1ka"><di:waypoint x="1490" y="650" /><di:waypoint x="1490" y="702" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ighaoa_di" bpmnElement="Flow_1ighaoa"><di:waypoint x="1490" y="530" /><di:waypoint x="1490" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tzy0u5_di" bpmnElement="Flow_1tzy0u5"><di:waypoint x="1490" y="400" /><di:waypoint x="1490" y="450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tewhug_di" bpmnElement="Flow_1tewhug"><di:waypoint x="1490" y="265" /><di:waypoint x="1490" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="1502" y="284" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yvqn30_di" bpmnElement="Flow_1yvqn30"><di:waypoint x="1360" y="240" /><di:waypoint x="1465" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w1cvxl_di" bpmnElement="Flow_0w1cvxl"><di:waypoint x="1185" y="240" /><di:waypoint x="1260" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ikemw3_di" bpmnElement="Flow_0ikemw3"><di:waypoint x="1080" y="240" /><di:waypoint x="1135" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or7jn6_di" bpmnElement="SequenceFlow_0or7jn6"><di:waypoint x="188" y="240" /><di:waypoint x="250" y="240" /><bpmndi:BPMNLabel><dc:Bounds x="228" y="114" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="222" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1kad5f3_di" bpmnElement="Activity_1kad5f3"><dc:Bounds x="680" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0o0t86y_di" bpmnElement="Activity_0o0t86y"><dc:Bounds x="980" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_123zxue_di" bpmnElement="Activity_123zxue"><dc:Bounds x="1260" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ya57u0_di" bpmnElement="Gateway_0ya57u0" isMarkerVisible="true"><dc:Bounds x="1465" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1tvuv8m_di" bpmnElement="Activity_1tvuv8m"><dc:Bounds x="1440" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_07ssjse_di" bpmnElement="Event_07ssjse"><dc:Bounds x="1472" y="702" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16e1xgk_di" bpmnElement="Activity_16e1xgk"><dc:Bounds x="1440" y="320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1fv0oiz_di" bpmnElement="Activity_1fv0oiz"><dc:Bounds x="1440" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0sigsff_di" bpmnElement="Gateway_0sigsff" isMarkerVisible="true"><dc:Bounds x="1135" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dwmtv8_di" bpmnElement="Activity_1dwmtv8"><dc:Bounds x="1110" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_00jojk9_di" bpmnElement="Event_00jojk9"><dc:Bounds x="1142" y="702" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04p28xg_di" bpmnElement="Activity_04p28xg"><dc:Bounds x="1110" y="320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13gsv4q_di" bpmnElement="Activity_13gsv4q"><dc:Bounds x="1110" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1omyhy3_di" bpmnElement="Gateway_1omyhy3" isMarkerVisible="true"><dc:Bounds x="825" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xzk0xq_di" bpmnElement="Activity_1xzk0xq"><dc:Bounds x="800" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_138gtiq_di" bpmnElement="Event_138gtiq"><dc:Bounds x="832" y="702" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03s7023_di" bpmnElement="Activity_03s7023"><dc:Bounds x="800" y="320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1d0cnq7_di" bpmnElement="Activity_1d0cnq7"><dc:Bounds x="800" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1g9miya_di" bpmnElement="Activity_1g9miya"><dc:Bounds x="1630" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1urwl7w_di" bpmnElement="Gateway_1urwl7w" isMarkerVisible="true"><dc:Bounds x="1845" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0lt6usw_di" bpmnElement="Activity_0lt6usw"><dc:Bounds x="1820" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_03mv7q4_di" bpmnElement="Event_03mv7q4"><dc:Bounds x="1852" y="702" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vrh6ri_di" bpmnElement="Activity_1vrh6ri"><dc:Bounds x="1820" y="320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1db6h3t_di" bpmnElement="Activity_1db6h3t"><dc:Bounds x="1820" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mv4ug6_di" bpmnElement="Activity_0mv4ug6"><dc:Bounds x="1960" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ppqnq2_di" bpmnElement="Activity_0ppqnq2"><dc:Bounds x="2570" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1tse3xi_di" bpmnElement="Activity_1tse3xi" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2710" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09nf5qf_di" bpmnElement="Activity_09nf5qf" isExpanded="true"><dc:Bounds x="2090" y="1090" width="1130" height="1150" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_09x5rni_di" bpmnElement="Flow_09x5rni"><di:waypoint x="2388" y="1150" /><di:waypoint x="2600" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uwndw2_di" bpmnElement="Flow_0uwndw2"><di:waypoint x="2500" y="1920" /><di:waypoint x="2310" y="1920" /><di:waypoint x="2310" y="1378" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03nkpa6_di" bpmnElement="Flow_03nkpa6"><di:waypoint x="2666" y="1381" /><di:waypoint x="2640" y="1500" /><di:waypoint x="2567" y="1582" /><bpmndi:BPMNLabel><dc:Bounds x="2540" y="1500" width="80" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qs0ofu_di" bpmnElement="Flow_1qs0ofu"><di:waypoint x="2550" y="1840" /><di:waypoint x="2550" y="1880" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rjienb_di" bpmnElement="Flow_1rjienb"><di:waypoint x="2670" y="1720" /><di:waypoint x="2670" y="1800" /><di:waypoint x="2600" y="1800" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zrzohu_di" bpmnElement="Flow_0zrzohu"><di:waypoint x="2430" y="1710" /><di:waypoint x="2430" y="1800" /><di:waypoint x="2500" y="1800" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dlo2zt_di" bpmnElement="Flow_0dlo2zt"><di:waypoint x="2525" y="1590" /><di:waypoint x="2430" y="1590" /><di:waypoint x="2430" y="1630" /><bpmndi:BPMNLabel><dc:Bounds x="2428" y="1563" width="84" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0576a8q_di" bpmnElement="Flow_0576a8q"><di:waypoint x="2575" y="1590" /><di:waypoint x="2670" y="1590" /><di:waypoint x="2670" y="1640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0s578jj_di" bpmnElement="Flow_0s578jj"><di:waypoint x="2870" y="1230" /><di:waypoint x="2942" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e02xcs_di" bpmnElement="Flow_0e02xcs"><di:waypoint x="2670" y="1335" /><di:waypoint x="2670" y="1230" /><di:waypoint x="2770" y="1230" /><bpmndi:BPMNLabel><dc:Bounds x="2666" y="1203" width="87" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dfwy8x_di" bpmnElement="Flow_1dfwy8x"><di:waypoint x="2870" y="1360" /><di:waypoint x="2922" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18ujyju_di" bpmnElement="Flow_18ujyju"><di:waypoint x="2695" y="1360" /><di:waypoint x="2770" y="1360" /><bpmndi:BPMNLabel><dc:Bounds x="2704" y="1342" width="58" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pjq9iq_di" bpmnElement="Flow_1pjq9iq"><di:waypoint x="2670" y="1385" /><di:waypoint x="2670" y="1510" /><di:waypoint x="2770" y="1510" /><bpmndi:BPMNLabel><dc:Bounds x="2679" y="1483" width="81" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11chwlk_di" bpmnElement="Flow_11chwlk"><di:waypoint x="2870" y="1510" /><di:waypoint x="2922" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cun3sk_di" bpmnElement="Flow_1cun3sk"><di:waypoint x="2658" y="1373" /><di:waypoint x="2640" y="1460" /><di:waypoint x="2310" y="1460" /><di:waypoint x="2310" y="1378" /><bpmndi:BPMNLabel><dc:Bounds x="2414" y="1410" width="72" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10atpz4_di" bpmnElement="Flow_10atpz4"><di:waypoint x="2328" y="1360" /><di:waypoint x="2480" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15o8r7c_di" bpmnElement="Flow_15o8r7c"><di:waypoint x="2580" y="1360" /><di:waypoint x="2645" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00sq808_di" bpmnElement="Flow_00sq808"><di:waypoint x="2148" y="1360" /><di:waypoint x="2205" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04z5ecz_di" bpmnElement="Flow_04z5ecz"><di:waypoint x="2255" y="1360" /><di:waypoint x="2292" y="1360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1t60ry5_di" bpmnElement="Flow_1t60ry5"><di:waypoint x="2230" y="1335" /><di:waypoint x="2230" y="1150" /><di:waypoint x="2350" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_085itcj_di" bpmnElement="Flow_085itcj"><di:waypoint x="2700" y="1150" /><di:waypoint x="2752" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_1c5lw0l_di" bpmnElement="Event_1c5lw0l"><dc:Bounds x="2112" y="1342" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_00angqi_di" bpmnElement="Gateway_00angqi"><dc:Bounds x="2205" y="1335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0yjp3ns_di" bpmnElement="Event_0yjp3ns"><dc:Bounds x="2292" y="1342" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0n67zmv_di" bpmnElement="Event_0n67zmv" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2352" y="1132" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0isv8n8_di" bpmnElement="Activity_0isv8n8"><dc:Bounds x="2600" y="1110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0lbfvno_di" bpmnElement="Event_0lbfvno"><dc:Bounds x="2752" y="1132" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0is8nm4_di" bpmnElement="Activity_0is8nm4" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2480" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_16sp82s_di" bpmnElement="Gateway_16sp82s" isMarkerVisible="true"><dc:Bounds x="2645" y="1335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0od3oa4_di" bpmnElement="Activity_0od3oa4"><dc:Bounds x="2770" y="1470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0upmnc3_di" bpmnElement="Event_1iamo3z"><dc:Bounds x="2922" y="1492" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1akglmc_di" bpmnElement="Activity_1akglmc"><dc:Bounds x="2770" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vzlu61_di" bpmnElement="Activity_0vzlu61"><dc:Bounds x="2770" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0ewymzs_di" bpmnElement="Event_1kmlv10"><dc:Bounds x="2922" y="1342" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_09jtu7v_di" bpmnElement="Event_12gl0az"><dc:Bounds x="2942" y="1212" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_07quxyi_di" bpmnElement="Gateway_07quxyi" isMarkerVisible="true"><dc:Bounds x="2525" y="1565" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0igfdtr_di" bpmnElement="Activity_0igfdtr"><dc:Bounds x="2380" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13pfylz_di" bpmnElement="Activity_13pfylz"><dc:Bounds x="2620" y="1640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_079a9su_di" bpmnElement="Activity_079a9su"><dc:Bounds x="2500" y="1760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08e503k_di" bpmnElement="Activity_08e503k" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="2500" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_19jtdjl_di" bpmnElement="TextAnnotation_19jtdjl"><dc:Bounds x="2300" y="1250" width="149.98911149825784" height="67.36353077816493" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_17n62i5_di" bpmnElement="Association_17n62i5"><di:waypoint x="2317" y="1344" /><di:waypoint x="2328" y="1317" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Gateway_0oo0nqf_di" bpmnElement="Gateway_0oo0nqf" isMarkerVisible="true"><dc:Bounds x="3305" y="1335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0t1q12z_di" bpmnElement="Activity_0t1q12z"><dc:Bounds x="2840" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0s8822s_di" bpmnElement="Activity_0s8822s" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3460" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09799bn_di" bpmnElement="Activity_09799bn"><dc:Bounds x="3260" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0b3n25h_di" bpmnElement="Gateway_0b3n25h" isMarkerVisible="true"><dc:Bounds x="3655" y="1335" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jcogxu_di" bpmnElement="Activity_1jcogxu" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3760" y="1090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_165b8nt_di" bpmnElement="Event_0hugrro"><dc:Bounds x="4102" y="1112" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ix0xmi_di" bpmnElement="Activity_0ix0xmi" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="4220" y="1090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0idnlqi_di" bpmnElement="Gateway_0idnlqi" isMarkerVisible="true"><dc:Bounds x="3915" y="1105" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10r6yi1_di" bpmnElement="Activity_10r6yi1" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3470" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1c1rf9f_di" bpmnElement="Activity_1c1rf9f"><dc:Bounds x="4150" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1powdci_di" bpmnElement="Event_1powdci"><dc:Bounds x="4302" y="1342" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jz9t1d_di" bpmnElement="Activity_1jz9t1d"><dc:Bounds x="4130" y="950" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1h8dchl_di" bpmnElement="Event_1h8dchl"><dc:Bounds x="4252" y="972" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j5mtzp_di" bpmnElement="Activity_0j5mtzp" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2970" y="630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_12xuv0e_di" bpmnElement="Gateway_1d5oxwl" isMarkerVisible="true"><dc:Bounds x="2995" y="465" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03qae7l_di" bpmnElement="Activity_03qae7l" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2820" y="630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1u6zp4r_di" bpmnElement="Activity_1u6zp4r" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="3120" y="630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_003orlp_di" bpmnElement="Activity_003orlp"><dc:Bounds x="2980" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1i7i9t6_di" bpmnElement="Activity_1i7i9t6"><dc:Bounds x="3650" y="2160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1glyxqc_di" bpmnElement="Activity_1glyxqc"><dc:Bounds x="3260" y="2040" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_049v39g_di" bpmnElement="Activity_049v39g" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3100" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ejoe0m_di" bpmnElement="Activity_0ejoe0m"><dc:Bounds x="3240" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1f8asw6_di" bpmnElement="Activity_1f8asw6"><dc:Bounds x="3990" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13sd32i_di" bpmnElement="Activity_13sd32i" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3630" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ad1rss_di" bpmnElement="Activity_0ad1rss"><dc:Bounds x="3470" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1y02ppl_di" bpmnElement="Gateway_1y02ppl" isMarkerVisible="true"><dc:Bounds x="3925" y="1905" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0qy2853_di" bpmnElement="Gateway_0qy2853" isMarkerVisible="true"><dc:Bounds x="4125" y="1905" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1u15909_di" bpmnElement="Activity_1u15909" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4280" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_14kybui_di" bpmnElement="Event_14kybui"><dc:Bounds x="5182" y="1912" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12xcnci_di" bpmnElement="Activity_12xcnci" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4580" y="2000" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0kzu5ks_di" bpmnElement="Gateway_0kzu5ks" isMarkerVisible="true"><dc:Bounds x="4495" y="1905" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mxbo8t_di" bpmnElement="Activity_1mxbo8t" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4640" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19uw74s_di" bpmnElement="Activity_19uw74s" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4570" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1osh6kt_di" bpmnElement="Event_1osh6kt" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4812" y="1912" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04q2ji2_di" bpmnElement="Activity_04q2ji2"><dc:Bounds x="3780" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ty8lsf_di" bpmnElement="Activity_0ty8lsf"><dc:Bounds x="3470" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1px29bs_di" bpmnElement="Activity_1px29bs"><dc:Bounds x="3420" y="970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1qncm8e_di" bpmnElement="Event_1qncm8e"><dc:Bounds x="3582" y="992" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0a1rl5i_di" bpmnElement="Activity_0a1rl5i"><dc:Bounds x="5020" y="1890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1frzfv3_di" bpmnElement="Activity_1frzfv3" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="250" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bfvoaf_di" bpmnElement="Activity_0bfvoaf" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="3380" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1olwe5o_di" bpmnElement="Gateway_1olwe5o" isMarkerVisible="true"><dc:Bounds x="3525" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wk2gyh_di" bpmnElement="Activity_0wk2gyh"><dc:Bounds x="3660" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_051ebq5_di" bpmnElement="Activity_051ebq5"><dc:Bounds x="3820" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0m7f7os_di" bpmnElement="Activity_0m7f7os"><dc:Bounds x="3660" y="340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1uq8swe_di" bpmnElement="Activity_1uq8swe" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3280" y="1210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0cv9w6i_di" bpmnElement="Gateway_0cv9w6i" isMarkerVisible="true"><dc:Bounds x="3305" y="1115" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ld4w00_di" bpmnElement="Activity_1ld4w00" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3280" y="970" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_091w281_di" bpmnElement="Activity_091w281" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="430" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0gx6m0u_di" bpmnElement="Gateway_0gx6m0u" isMarkerVisible="true"><dc:Bounds x="2125" y="215" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08m1ehr_di" bpmnElement="Activity_08m1ehr" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2230" y="100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_092rp73_di" bpmnElement="Activity_092rp73" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2230" y="310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nknczw_di" bpmnElement="Activity_1nknczw" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2230" y="200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qdkljc_di" bpmnElement="Activity_0qdkljc" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3510" y="340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00fp0k4_di" bpmnElement="Activity_00fp0k4"><dc:Bounds x="3840" y="1320" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1ea5lgq_di" bpmnElement="TextAnnotation_1ea5lgq"><dc:Bounds x="4100" y="1040" width="114" height="51" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_02u1d9g_di" bpmnElement="TextAnnotation_02u1d9g"><dc:Bounds x="3750" y="1020" width="100" height="39" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_0qoxzy3_di" bpmnElement="TextAnnotation_0qoxzy3"><dc:Bounds x="4840" y="1820" width="100" height="53" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_0dtr1oz_di" bpmnElement="TextAnnotation_0dtr1oz"><dc:Bounds x="3310" y="890" width="100" height="39" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_1ry39ro_di" bpmnElement="Association_1ry39ro"><di:waypoint x="4125" y="1113" /><di:waypoint x="4132" y="1091" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_152l6km_di" bpmnElement="Association_152l6km"><di:waypoint x="3806" y="1090" /><di:waypoint x="3802" y="1059" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_1p9uhcm_di" bpmnElement="Association_1p9uhcm"><di:waypoint x="4840" y="1915" /><di:waypoint x="4865" y="1873" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_0m9xnfp_di" bpmnElement="Association_0m9xnfp"><di:waypoint x="3342" y="970" /><di:waypoint x="3353" y="929" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>