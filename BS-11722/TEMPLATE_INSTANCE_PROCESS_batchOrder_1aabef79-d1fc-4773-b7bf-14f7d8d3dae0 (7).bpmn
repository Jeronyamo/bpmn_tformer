<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_batchOrder_1aabef79-d1fc-4773-b7bf-14f7d8d3dae0" name="Пакетная заявка" isExecutable="true"><bpmn:documentation /><bpmn:exclusiveGateway id="Gateway_07gq1o0" name="Окончательный расчет?" default="Flow_09o3n7c"><bpmn:incoming>Flow_0n45qzz</bpmn:incoming><bpmn:outgoing>Flow_1qsfirc</bpmn:outgoing><bpmn:outgoing>Flow_09o3n7c</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1qsfirc" name="Да" sourceRef="Gateway_07gq1o0" targetRef="Activity_0yfbjbe"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsRefined == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:subProcess id="Activity_0o1s0zi" name="ПОДТВЕРЖЕНИЕ"><bpmn:serviceTask id="Activity_14mxlzj" name="Таймаут = false" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0gkidv6</bpmn:incoming><bpmn:outgoing>Flow_085f690</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_103snab" name="Таймаут = true" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0hqtlyt</bpmn:incoming><bpmn:outgoing>Flow_0dl7ir0</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0s37nzg"><bpmn:incoming>Flow_085f690</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0a31616" /></bpmn:endEvent><bpmn:endEvent id="Event_1bhejhr"><bpmn:incoming>Flow_0dl7ir0</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_00ht4xj" /></bpmn:endEvent><bpmn:intermediateCatchEvent id="Event_1t8d6fj"><bpmn:incoming>Flow_0isovah</bpmn:incoming><bpmn:outgoing>Flow_0hqtlyt</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_00upvlt"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT600S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:parallelGateway id="Gateway_1ibv98w"><bpmn:incoming>Flow_0w2o0ys</bpmn:incoming><bpmn:outgoing>Flow_0isovah</bpmn:outgoing><bpmn:outgoing>Flow_19jrf7l</bpmn:outgoing></bpmn:parallelGateway><bpmn:startEvent id="Event_1tmt9lp"><bpmn:outgoing>Flow_0w2o0ys</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_085f690" sourceRef="Activity_14mxlzj" targetRef="Event_0s37nzg" /><bpmn:sequenceFlow id="Flow_0dl7ir0" sourceRef="Activity_103snab" targetRef="Event_1bhejhr" /><bpmn:sequenceFlow id="Flow_0hqtlyt" sourceRef="Event_1t8d6fj" targetRef="Activity_103snab" /><bpmn:sequenceFlow id="Flow_0isovah" sourceRef="Gateway_1ibv98w" targetRef="Event_1t8d6fj" /><bpmn:sequenceFlow id="Flow_0w2o0ys" sourceRef="Event_1tmt9lp" targetRef="Gateway_1ibv98w" /><bpmn:userTask id="Activity_0zdtwlm" name="Кнопка подтверждение" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Prodol&#34;, &#34;label&#34;: &#34;Подтвердить&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements></bpmn:userTask><bpmn:intermediateCatchEvent id="Event_0ob2d2w"><bpmn:incoming>Flow_19jrf7l</bpmn:incoming><bpmn:incoming>Flow_1kvxs4w</bpmn:incoming><bpmn:outgoing>Flow_1vld1ps</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0y1gasf" signalRef="Signal_0zie4l6" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_19jrf7l" sourceRef="Gateway_1ibv98w" targetRef="Event_0ob2d2w" /><bpmn:sequenceFlow id="Flow_1vld1ps" sourceRef="Event_0ob2d2w" targetRef="Activity_11y0t52" /><bpmn:serviceTask id="Activity_11y0t52" name="Получаем признак окончательного расчета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=IsRefined</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1vld1ps</bpmn:incoming><bpmn:outgoing>Flow_1tflz32</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1tflz32" sourceRef="Activity_11y0t52" targetRef="Gateway_1rcsfk8" /><bpmn:exclusiveGateway id="Gateway_1rcsfk8" default="Flow_1kvxs4w"><bpmn:incoming>Flow_1tflz32</bpmn:incoming><bpmn:outgoing>Flow_0gkidv6</bpmn:outgoing><bpmn:outgoing>Flow_1kvxs4w</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0gkidv6" sourceRef="Gateway_1rcsfk8" targetRef="Activity_14mxlzj"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsRefined == 'true'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1kvxs4w" sourceRef="Gateway_1rcsfk8" targetRef="Event_0ob2d2w" /><bpmn:textAnnotation id="TextAnnotation_1a2s2zo"><bpmn:text>Здесь устанавливается время ответа клиента</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1xz3r9m" sourceRef="Event_1t8d6fj" targetRef="TextAnnotation_1a2s2zo" /></bpmn:subProcess><bpmn:scriptTask id="Activity_0tc0v2t" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:incoming>Flow_03r2hqz</bpmn:incoming><bpmn:outgoing>Flow_1w20ega</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1e8txjf" name="Устанавливаем значение параметров дата и время"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("orderDateTime", ResultDateTime)
.prop("orderStatus", "Завершен")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1w20ega</bpmn:incoming><bpmn:outgoing>Flow_1kw6aoi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1w20ega" sourceRef="Activity_0tc0v2t" targetRef="Activity_1e8txjf" /><bpmn:serviceTask id="Activity_0te2aqw" name="Статус: Завершено по таймеру&#10;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Время+подтверждения+истекло</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1fyve9t</bpmn:incoming><bpmn:outgoing>Flow_0u17m0v</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1b0ewlq" default="Flow_1byv9ce"><bpmn:incoming>Flow_1joi52c</bpmn:incoming><bpmn:outgoing>Flow_12e3xxl</bpmn:outgoing><bpmn:outgoing>Flow_1byv9ce</bpmn:outgoing><bpmn:outgoing>Flow_15uoh06</bpmn:outgoing><bpmn:outgoing>Flow_0ps53yb</bpmn:outgoing><bpmn:outgoing>Flow_10y24or</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_12e3xxl" name="Отказ от исполнения" sourceRef="Gateway_1b0ewlq" targetRef="Activity_11yi9es"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "REJECTED" || status == "Не исполняется" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_0kn8ylv"><bpmn:incoming>Flow_1l8sl3a</bpmn:incoming></bpmn:endEvent><bpmn:endEvent id="Event_0w12yz2"><bpmn:incoming>Flow_042mou9</bpmn:incoming></bpmn:endEvent><bpmn:scriptTask id="Activity_0qrzbiz" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1eh9n4g" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка на исполнении")
.prop("executionResult", "PROCESSING")
.prop("executionResultRus", "Исполняется")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10y24or</bpmn:incoming><bpmn:outgoing>Flow_124a033</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_018mgv8" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0q7atos" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка исполнена полностью")
.prop("executionResult", "FULLY_COMPLETED")
.prop("executionResultRus", "Исполнена")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07avqhe</bpmn:incoming><bpmn:outgoing>Flow_173f9v8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1doxnyi" name="Статус: Пакетная заявка исполнена полностью"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Пакетная+заявка+исполнена+полностью</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_173f9v8</bpmn:incoming><bpmn:outgoing>Flow_0cn2ov7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1wi3yww" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cn2ov7</bpmn:incoming><bpmn:outgoing>Flow_1l8sl3a</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0cn2ov7" sourceRef="Activity_1doxnyi" targetRef="Activity_1wi3yww" /><bpmn:sequenceFlow id="Flow_1l8sl3a" sourceRef="Activity_1wi3yww" targetRef="Event_0kn8ylv" /><bpmn:serviceTask id="Activity_03xz79c" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ydpejv</bpmn:incoming><bpmn:outgoing>Flow_042mou9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_042mou9" sourceRef="Activity_03xz79c" targetRef="Event_0w12yz2" /><bpmn:serviceTask id="Activity_0wkd20f" name="Получаем признак окончательного расчета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=IsRefined&amp;systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0lumuu2</bpmn:incoming><bpmn:outgoing>Flow_0n45qzz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0n45qzz" sourceRef="Activity_0wkd20f" targetRef="Gateway_07gq1o0" /><bpmn:serviceTask id="Activity_1pdd598" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0la6fve</bpmn:incoming><bpmn:outgoing>Flow_1joi52c</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1joi52c" sourceRef="Activity_1pdd598" targetRef="Gateway_1b0ewlq" /><bpmn:serviceTask id="Activity_11yi9es" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка отклонена клиентом")
.prop("executionResult", "REJECTED")
.prop("executionResultRus", "Не исполняется")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12e3xxl</bpmn:incoming><bpmn:outgoing>Flow_0gql42j</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0gql42j" sourceRef="Activity_11yi9es" targetRef="Activity_1mc7we6" /><bpmn:sequenceFlow id="Flow_10y24or" name="Исполняпется" sourceRef="Gateway_1b0ewlq" targetRef="Activity_1eh9n4g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "PROCESSING" || status == "Исполняется"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_0t1z2mz"><bpmn:incoming>Flow_1g8oqlq</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0u17m0v" sourceRef="Activity_0te2aqw" targetRef="Activity_1qd6qk1" /><bpmn:serviceTask id="Activity_1qd6qk1" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0u17m0v</bpmn:incoming><bpmn:outgoing>Flow_1g8oqlq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1g8oqlq" sourceRef="Activity_1qd6qk1" targetRef="Event_0t1z2mz" /><bpmn:scriptTask id="Activity_1730e7u" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_0mstqyg" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:outgoing>Flow_12g82lt</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_12g82lt" sourceRef="Activity_0mstqyg" targetRef="Activity_1jr4cs3" /><bpmn:serviceTask id="Activity_1yhr9yh" name="Устанавливаем значения дата и время и статус пакетной заявки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("cancelDateTime", ResultDateTime)
.prop("executionResult", "REJECTED")
.prop("Message", "Время подтверждения исполнения пакетной заявки истекло. Пакетная заявка неисполняется. Услуга Инвест-советник неотключена")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0q957hs</bpmn:incoming><bpmn:outgoing>Flow_0tum27c</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0y0ppp0" name="Возможно отключение услуги?"><bpmn:incoming>Flow_0v1pxlf</bpmn:incoming><bpmn:outgoing>Flow_0q957hs</bpmn:outgoing><bpmn:outgoing>Flow_0r77ire</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0q957hs" name="Нет" sourceRef="Gateway_0y0ppp0" targetRef="Activity_1yhr9yh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${serviceDisabling == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0r77ire" name="Да" sourceRef="Gateway_0y0ppp0" targetRef="Activity_14a999x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${serviceDisabling == 'true'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0fpbyv9" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rcop6d</bpmn:incoming><bpmn:outgoing>Flow_1xu5r6j</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0fwx0di"><bpmn:incoming>Flow_1xu5r6j</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1xu5r6j" sourceRef="Activity_0fpbyv9" targetRef="Event_0fwx0di" /><bpmn:sequenceFlow id="Flow_0tum27c" sourceRef="Activity_1yhr9yh" targetRef="Activity_0f7308l" /><bpmn:serviceTask id="Activity_1x2m68d" name="Устанавливаем значения дата и время и статус пакетной заявки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("cancelDateTime", ResultDateTime)
.prop("executionResult", "REJECTED")
.prop("Message", "Время подтверждения исполнения пакетной заявки истекло. Пакетная заявка отменена и неисполняется. Услуга Инвест-советник отключена")
.prop("disablingAccountOrderId", disablingAccount_objectId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rpha3h</bpmn:incoming><bpmn:outgoing>Flow_1fyve9t</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1fyve9t" sourceRef="Activity_1x2m68d" targetRef="Activity_0te2aqw" /><bpmn:serviceTask id="Activity_1mc7we6" name="Статус: Заявка отклонена клиентом"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+отклонена+клиентом</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0gql42j</bpmn:incoming><bpmn:outgoing>Flow_1ydpejv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ydpejv" sourceRef="Activity_1mc7we6" targetRef="Activity_03xz79c" /><bpmn:sequenceFlow id="Flow_07avqhe" name="Полностью исполнена" sourceRef="Gateway_0nyg4rw" targetRef="Activity_0q7atos"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "FULLY_COMPLETED" || status == "Исполнена"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_0idjaw4"><bpmn:incoming>Flow_09d9j2o</bpmn:incoming></bpmn:endEvent><bpmn:scriptTask id="Activity_1609sdi" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_02svajp" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пактная заявка исполнена частично")
.prop("executionResult", "PARTIALLY_COMPLETED")
.prop("executionResultRus", "Исполнена частично")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1k54olx</bpmn:incoming><bpmn:outgoing>Flow_0y7qm55</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_11ncihc" name="Статус: Частичное исполнение пакетной заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Исполнена+частично</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0y7qm55</bpmn:incoming><bpmn:outgoing>Flow_1suyxrp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0krr31q" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1suyxrp</bpmn:incoming><bpmn:outgoing>Flow_09d9j2o</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_09d9j2o" sourceRef="Activity_0krr31q" targetRef="Event_0idjaw4" /><bpmn:sequenceFlow id="Flow_1suyxrp" sourceRef="Activity_11ncihc" targetRef="Activity_0krr31q" /><bpmn:sequenceFlow id="Flow_1k54olx" name="Частично исполнена" sourceRef="Gateway_0nyg4rw" targetRef="Activity_02svajp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "PARTIALLY_COMPLETED" || status == "Исполнена частично"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_1tke2gx"><bpmn:incoming>Flow_04x176a</bpmn:incoming></bpmn:endEvent><bpmn:scriptTask id="Activity_0iskmu1" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:incoming>Flow_0575gmz</bpmn:incoming><bpmn:outgoing>Flow_05veyns</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0j55be8" name="Устанавливаем значения дата и время и статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("endExecutionDateTime", ResultDateTime)
.prop("cancelDateTime", ResultDateTime)
.prop("Message", "Исполнение прервано клиентом")
.prop("executionResult", "REJECTED")
.prop("executionResultRus", "Исполнена частично")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05veyns</bpmn:incoming><bpmn:outgoing>Flow_0utjnua</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1gjyii6" name="Статус: Исполнение прервано клиентом"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Исполнена+частично</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0utjnua</bpmn:incoming><bpmn:outgoing>Flow_0i5k5al</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0i7o8ni" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0i5k5al</bpmn:incoming><bpmn:outgoing>Flow_04x176a</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_04x176a" sourceRef="Activity_0i7o8ni" targetRef="Event_1tke2gx" /><bpmn:sequenceFlow id="Flow_0i5k5al" sourceRef="Activity_1gjyii6" targetRef="Activity_0i7o8ni" /><bpmn:sequenceFlow id="Flow_0575gmz" name="Прервать исполнение" sourceRef="Gateway_0nyg4rw" targetRef="Activity_0iskmu1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "REJECTED" || status == "Прервать исполнение" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0f7308l" name="Статус: Завершено по таймеру&#10;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Время+подтверждения+истекло</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0tum27c</bpmn:incoming><bpmn:outgoing>Flow_1rcop6d</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1rcop6d" sourceRef="Activity_0f7308l" targetRef="Activity_0fpbyv9" /><bpmn:serviceTask id="Activity_1jr4cs3" name="Апдейт Рекомендации" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{

        "QuestionnairesType": "Rebalance",
        "cifID": "${CIF}",
        "brokerageAccountID": "${brokerageAccountID}",
        "RecomendationId": "${RecomendationId}",
        "executionResult": "REJECTED"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12g82lt</bpmn:incoming><bpmn:outgoing>Flow_0v1pxlf</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_14a999x" name="Отключение услуги &#34;Инвест-советник&#34;" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "622ede023fcee44cc523bc39", 
	"attributes":{
             "cifID": "${CIF}",
             "QuestionnairesType": "disablingAccount",
             "brokerageAccountID": "${brokerageAccountID}"
                           }
}</camunda:inputParameter><camunda:outputParameter name="disablingAccount_objectId"><camunda:script scriptFormat="javascript">JSON.parse(response).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0r77ire</bpmn:incoming><bpmn:outgoing>Flow_1rpha3h</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="Event_1707guk"><bpmn:incoming>Flow_1byv9ce</bpmn:incoming><bpmn:incoming>Flow_059sw08</bpmn:incoming><bpmn:outgoing>Flow_0la6fve</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1ukhrwv" signalRef="Signal_1nbnepi" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_09o3n7c" sourceRef="Gateway_07gq1o0" targetRef="Gateway_0dl29zp" /><bpmn:sequenceFlow id="Flow_1kw6aoi" sourceRef="Activity_1e8txjf" targetRef="Activity_0pt9qvp" /><bpmn:userTask id="Activity_08bdigd" name="Кнопка Продолжить1" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Prodol&#34;, &#34;label&#34;: &#34;Продолжить1&#34;, &#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData></bpmn:extensionElements></bpmn:userTask><bpmn:serviceTask id="Activity_0pt9qvp" name="Статус: Ожидание подтверждения пакетной заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидание+подтверждения+пакетной+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1kw6aoi</bpmn:incoming><bpmn:outgoing>Flow_059sw08</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_059sw08" sourceRef="Activity_0pt9qvp" targetRef="Event_1707guk" /><bpmn:startEvent id="Event_0uw1iki"><bpmn:outgoing>Flow_1ab9c31</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Activity_13o5w12" name="Ищем клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1	}
}</camunda:inputParameter><camunda:outputParameter name="ClientId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_008ean1</bpmn:incoming><bpmn:outgoing>Flow_0h0zp1l</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0lnz0bj" name="Ищем клиентский портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6167d4df7ef9df0776685460", 
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1, "attributes.rp_RiskCategoria": 1 , "attributes.TotalNumberUnfulfilledRecommendations": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Portfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="CP_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.rp_RiskCategoria
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TotalNumberUnfulfilledRecommendations"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.TotalNumberUnfulfilledRecommendations
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rwnz8l</bpmn:incoming><bpmn:outgoing>Flow_0imv0l4</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0ic31bx" default="Flow_0vqy225"><bpmn:incoming>Flow_0imv0l4</bpmn:incoming><bpmn:outgoing>Flow_0n6pcyv</bpmn:outgoing><bpmn:outgoing>Flow_0vqy225</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_157srto" name="Статус: Не найден клиентский портфель"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиентский+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12ss019</bpmn:incoming><bpmn:outgoing>Flow_0sz3sxm</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0aqoiv8"><bpmn:incoming>Flow_1gb4ds3</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_00f73kj" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиентский портфель")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0n6pcyv</bpmn:incoming><bpmn:outgoing>Flow_12ss019</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0jfjqw1" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0sz3sxm</bpmn:incoming><bpmn:outgoing>Flow_1gb4ds3</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1faxck3" default="Flow_1rwnz8l"><bpmn:incoming>Flow_0h0zp1l</bpmn:incoming><bpmn:outgoing>Flow_1rwnz8l</bpmn:outgoing><bpmn:outgoing>Flow_010vwxr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0doj1bh" name="Статус: Не найден клиент"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиент</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0b0hwwt</bpmn:incoming><bpmn:outgoing>Flow_0wdma0f</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0lp0n76"><bpmn:incoming>Flow_1q2ko09</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_12ejrhl" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиент")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_010vwxr</bpmn:incoming><bpmn:outgoing>Flow_0b0hwwt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_011po29" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0wdma0f</bpmn:incoming><bpmn:outgoing>Flow_1q2ko09</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1mskcb3" default="Flow_008ean1"><bpmn:incoming>Flow_142uee1</bpmn:incoming><bpmn:outgoing>Flow_008ean1</bpmn:outgoing><bpmn:outgoing>Flow_0zvhiyo</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1mh8gyj" name="Статус: Не заданы обязательные параметры"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+заданы+обязательные+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dbh989</bpmn:incoming><bpmn:outgoing>Flow_1khnq2k</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1ha6s41"><bpmn:incoming>Flow_04qianz</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1hl0zaa" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не заданы обязательные атрибуты")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zvhiyo</bpmn:incoming><bpmn:outgoing>Flow_0dbh989</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0k0423e" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1khnq2k</bpmn:incoming><bpmn:outgoing>Flow_04qianz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1hv602i" name="Ищем тип ребалансировки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6246c872e6afeb45a496738d", 
"attributes.typeRebalancing": "${rebalancingType}"
},
"projection": { 		"_id": 1, "attributes.serviceDisabling": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="RebalancType_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyType"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="serviceDisabling"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.serviceDisabling
}
catch (e)
{
false
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ryo1qj</bpmn:incoming><bpmn:outgoing>Flow_0gggq38</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1ry3ryd" default="Flow_0o087et"><bpmn:incoming>Flow_0gggq38</bpmn:incoming><bpmn:outgoing>Flow_1hm0m0v</bpmn:outgoing><bpmn:outgoing>Flow_0o087et</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1bd9pcy" name="Статус: Не найден тип ребалансировки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+тип+ребалансировки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0z9no27</bpmn:incoming><bpmn:outgoing>Flow_0um96rd</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1onwzci"><bpmn:incoming>Flow_0i1oapt</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1gpzl6b" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден тип ребалансировки")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1hm0m0v</bpmn:incoming><bpmn:outgoing>Flow_0z9no27</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1kdjnbt" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0um96rd</bpmn:incoming><bpmn:outgoing>Flow_0i1oapt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ab9c31" sourceRef="Event_0uw1iki" targetRef="Activity_04tyjn8" /><bpmn:sequenceFlow id="Flow_142uee1" sourceRef="Activity_0dx5a3l" targetRef="Gateway_1mskcb3" /><bpmn:sequenceFlow id="Flow_008ean1" sourceRef="Gateway_1mskcb3" targetRef="Activity_13o5w12" /><bpmn:sequenceFlow id="Flow_0h0zp1l" sourceRef="Activity_13o5w12" targetRef="Gateway_1faxck3" /><bpmn:sequenceFlow id="Flow_1rwnz8l" sourceRef="Gateway_1faxck3" targetRef="Activity_0lnz0bj" /><bpmn:sequenceFlow id="Flow_0imv0l4" sourceRef="Activity_0lnz0bj" targetRef="Gateway_0ic31bx" /><bpmn:sequenceFlow id="Flow_0n6pcyv" name="Не найден портфель" sourceRef="Gateway_0ic31bx" targetRef="Activity_00f73kj"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0vqy225" sourceRef="Gateway_0ic31bx" targetRef="Gateway_09i8bx2" /><bpmn:sequenceFlow id="Flow_12ss019" sourceRef="Activity_00f73kj" targetRef="Activity_157srto" /><bpmn:sequenceFlow id="Flow_0sz3sxm" sourceRef="Activity_157srto" targetRef="Activity_0jfjqw1" /><bpmn:sequenceFlow id="Flow_1gb4ds3" sourceRef="Activity_0jfjqw1" targetRef="Event_0aqoiv8" /><bpmn:sequenceFlow id="Flow_010vwxr" name="Не найден клиент" sourceRef="Gateway_1faxck3" targetRef="Activity_12ejrhl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0b0hwwt" sourceRef="Activity_12ejrhl" targetRef="Activity_0doj1bh" /><bpmn:sequenceFlow id="Flow_0wdma0f" sourceRef="Activity_0doj1bh" targetRef="Activity_011po29" /><bpmn:sequenceFlow id="Flow_1q2ko09" sourceRef="Activity_011po29" targetRef="Event_0lp0n76" /><bpmn:sequenceFlow id="Flow_0zvhiyo" name="Не найдены обязательные параметры" sourceRef="Gateway_1mskcb3" targetRef="Activity_1hl0zaa"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${CIF == null || brokerageAccountID == null || TypeProcessFormationRequest == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0dbh989" sourceRef="Activity_1hl0zaa" targetRef="Activity_1mh8gyj" /><bpmn:sequenceFlow id="Flow_1khnq2k" sourceRef="Activity_1mh8gyj" targetRef="Activity_0k0423e" /><bpmn:sequenceFlow id="Flow_04qianz" sourceRef="Activity_0k0423e" targetRef="Event_1ha6s41" /><bpmn:sequenceFlow id="Flow_0gggq38" sourceRef="Activity_1hv602i" targetRef="Gateway_1ry3ryd" /><bpmn:sequenceFlow id="Flow_1hm0m0v" name="Не найден тип ребалансировки" sourceRef="Gateway_1ry3ryd" targetRef="Activity_1gpzl6b"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyType == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0z9no27" sourceRef="Activity_1gpzl6b" targetRef="Activity_1bd9pcy" /><bpmn:sequenceFlow id="Flow_0um96rd" sourceRef="Activity_1bd9pcy" targetRef="Activity_1kdjnbt" /><bpmn:sequenceFlow id="Flow_0i1oapt" sourceRef="Activity_1kdjnbt" targetRef="Event_1onwzci" /><bpmn:sequenceFlow id="Flow_0o087et" sourceRef="Gateway_1ry3ryd" targetRef="Activity_1bgqdk1" /><bpmn:serviceTask id="Activity_09v7ogi" name="Устанавливаем параметры"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("orderStatus", "Предварительный расчет")
.prop("orderID", instanceId)
.prop("rebalancingType", "Календарная")
.prop("RecomendationId", "627e66ae78ace704a0d41b15")
.prop("cifID", "0001")
.prop("brokerageAccountID", "0001_133")
.prop("TotalCommissionAmount", "20")
.prop("executionResult", "REJECTED")
.prop("idSelectionModelPortfolio", "627d1a9c78ace704a0d3f605")
.prop("TypeSelectionModelPortfolio", "Смена модельного портфеля")
.prop("TypeProcessFormationRequest", "Рекомендация")
.prop("Currency", "RUB")
.prop("CashAmount", "2000")

.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0v1pxlf" sourceRef="Activity_1jr4cs3" targetRef="Gateway_0y0ppp0" /><bpmn:userTask id="Activity_1r37rly" name="Ввод ответа" camunda:formKey="FILL" camunda:candidateGroups="WWW_SVC, Compliance-Managers, FW_VPN_EXT_EGAR, cb_compliance, jira-users, EzDoc_users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="Message" label="Сообщение" type="string" /><camunda:formField id="executionResult" label="Результат исполнения" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements></bpmn:userTask><bpmn:sequenceFlow id="Flow_0la6fve" sourceRef="Event_1707guk" targetRef="Activity_1pdd598" /><bpmn:intermediateCatchEvent id="Event_1pb11so"><bpmn:incoming>Flow_1lsn35v</bpmn:incoming><bpmn:incoming>Flow_1t3psh6</bpmn:incoming><bpmn:outgoing>Flow_0lumuu2</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_144n58c" signalRef="Signal_1nbnepi" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_0lumuu2" sourceRef="Event_1pb11so" targetRef="Activity_0wkd20f" /><bpmn:serviceTask id="Activity_0dx5a3l" name="Получаем значение входных параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=cifID&amp;systemName=brokerageAccountID&amp;systemName=rebalancingType&amp;systemName=RecomendationId&amp;systemName=idSelectionModelPortfolio&amp;systemName=IsRefined&amp;systemName=TypeSelectionModelPortfolio&amp;systemName=TypeProcessFormationRequest</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="TypeProcessFormationRequest"><camunda:script scriptFormat="javascript">JSON.parse(response).TypeProcessFormationRequest</camunda:script></camunda:outputParameter><camunda:outputParameter name="TypeSelectionModelPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).TypeSelectionModelPortfolio</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter><camunda:outputParameter name="rebalancingType"><camunda:script scriptFormat="javascript">JSON.parse(response).rebalancingType</camunda:script></camunda:outputParameter><camunda:outputParameter name="idSelectionModelPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).idModelPortfolio</camunda:script></camunda:outputParameter><camunda:outputParameter name="RecomendationId"><camunda:script scriptFormat="javascript">JSON.parse(response).RecomendationId</camunda:script></camunda:outputParameter><camunda:outputParameter name="CIF"><camunda:script scriptFormat="javascript">JSON.parse(response).cifID</camunda:script></camunda:outputParameter><camunda:outputParameter name="brokerageAccountID"><camunda:script scriptFormat="javascript">JSON.parse(response).brokerageAccountID</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dl357w</bpmn:incoming><bpmn:outgoing>Flow_142uee1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_00hctmi" name="Статус: Окончательный расчет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Окончательный+расчет</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0p1tz08</bpmn:incoming><bpmn:outgoing>Flow_03r2hqz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_03r2hqz" sourceRef="Activity_00hctmi" targetRef="Activity_0tc0v2t" /><bpmn:sequenceFlow id="Flow_1rpha3h" sourceRef="Activity_14a999x" targetRef="Activity_1x2m68d" /><bpmn:serviceTask id="Activity_1uu9v6e" name="Устанавливаем параметры"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes?esWaitUntil=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("orderStatus", "Предварительный расчет")
.prop("requestDateTime", ResultDateTime)
.prop("orderID", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0xtsbbe</bpmn:incoming><bpmn:outgoing>Flow_0dl357w</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_04tyjn8" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:incoming>Flow_1ab9c31</bpmn:incoming><bpmn:outgoing>Flow_1oua9c4</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_13rn8gm" name="Статус: Предварительный расчет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Предварительный+расчет</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1oua9c4</bpmn:incoming><bpmn:outgoing>Flow_0xtsbbe</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0dl357w" sourceRef="Activity_1uu9v6e" targetRef="Activity_0dx5a3l" /><bpmn:sequenceFlow id="Flow_1oua9c4" sourceRef="Activity_04tyjn8" targetRef="Activity_13rn8gm" /><bpmn:sequenceFlow id="Flow_0xtsbbe" sourceRef="Activity_13rn8gm" targetRef="Activity_1uu9v6e" /><bpmn:exclusiveGateway id="Gateway_09i8bx2" default="Flow_0os6o3x"><bpmn:incoming>Flow_0vqy225</bpmn:incoming><bpmn:outgoing>Flow_0ryo1qj</bpmn:outgoing><bpmn:outgoing>Flow_0os6o3x</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0ryo1qj" name="Если Тип процесса формирования пакетной заявки = Рекомендация" sourceRef="Gateway_09i8bx2" targetRef="Activity_1hv602i"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TypeProcessFormationRequest == 'Рекомендация'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0os6o3x" sourceRef="Gateway_09i8bx2" targetRef="Activity_1bgqdk1" /><bpmn:serviceTask id="Activity_1w5wwxl" name="Статус: Исполнение пакетной заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Исполнение+пакетной+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_124a033</bpmn:incoming><bpmn:outgoing>Flow_0f0q0ks</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1byv9ce" sourceRef="Gateway_1b0ewlq" targetRef="Event_1707guk" /><bpmn:sequenceFlow id="Flow_0utjnua" sourceRef="Activity_0j55be8" targetRef="Activity_1gjyii6" /><bpmn:sequenceFlow id="Flow_0y7qm55" sourceRef="Activity_02svajp" targetRef="Activity_11ncihc" /><bpmn:sequenceFlow id="Flow_173f9v8" sourceRef="Activity_0q7atos" targetRef="Activity_1doxnyi" /><bpmn:sequenceFlow id="Flow_124a033" sourceRef="Activity_1eh9n4g" targetRef="Activity_1w5wwxl" /><bpmn:endEvent id="Event_0yfkw9k"><bpmn:incoming>Flow_1xea1lq</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_120gu8y" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1mshyh8</bpmn:incoming><bpmn:outgoing>Flow_1xea1lq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ng6h11" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Ошибка исполнения")
.prop("executionResult", "EXECUTION_FAILUR")
.prop("executionResultRus", "Ошибка исполнения")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0z3g9zf</bpmn:incoming><bpmn:outgoing>Flow_115stbw</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_087nyjj" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1luo9s9" name="Статус: Ошибка исполнения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+исполнения</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_115stbw</bpmn:incoming><bpmn:outgoing>Flow_1mshyh8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1xea1lq" sourceRef="Activity_120gu8y" targetRef="Event_0yfkw9k" /><bpmn:sequenceFlow id="Flow_1mshyh8" sourceRef="Activity_1luo9s9" targetRef="Activity_120gu8y" /><bpmn:sequenceFlow id="Flow_115stbw" sourceRef="Activity_0ng6h11" targetRef="Activity_1luo9s9" /><bpmn:endEvent id="Event_0y4gcci"><bpmn:incoming>Flow_0glckvb</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0rew1ke" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0u462k7</bpmn:incoming><bpmn:outgoing>Flow_0glckvb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1jgp92l" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Завершено без исполнения")
.prop("executionResult", "ZERO_COMPLETED")
.prop("executionResultRus", "Завершено без исполнения")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1lvszaz</bpmn:incoming><bpmn:outgoing>Flow_16pur0t</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1rf0juh" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1vskft7" name="Статус: Завершено без исполнения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Завершено+без+исполнения</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_16pur0t</bpmn:incoming><bpmn:outgoing>Flow_0u462k7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0glckvb" sourceRef="Activity_0rew1ke" targetRef="Event_0y4gcci" /><bpmn:sequenceFlow id="Flow_0u462k7" sourceRef="Activity_1vskft7" targetRef="Activity_0rew1ke" /><bpmn:sequenceFlow id="Flow_16pur0t" sourceRef="Activity_1jgp92l" targetRef="Activity_1vskft7" /><bpmn:sequenceFlow id="Flow_0z3g9zf" name="Ошибка исполнения" sourceRef="Gateway_0nyg4rw" targetRef="Activity_0ng6h11"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "EXECUTION_FAILURE" || status == "Ошибка исполнения"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1lvszaz" name="Завершено без исполнения" sourceRef="Gateway_0nyg4rw" targetRef="Activity_1jgp92l"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ZERO_COMPLETED" || status == "Завершено без исполнения"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_18m2h1a"><bpmn:incoming>Flow_1k7hggx</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0rsrezy" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ogbofb</bpmn:incoming><bpmn:outgoing>Flow_1k7hggx</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_16b3scu" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка заменена")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ps53yb</bpmn:incoming><bpmn:outgoing>Flow_178ux5w</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1avhdid" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1yz9h1l" name="Статус: Заявка заменена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+заменена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_178ux5w</bpmn:incoming><bpmn:outgoing>Flow_1ogbofb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1k7hggx" sourceRef="Activity_0rsrezy" targetRef="Event_18m2h1a" /><bpmn:sequenceFlow id="Flow_1ogbofb" sourceRef="Activity_1yz9h1l" targetRef="Activity_0rsrezy" /><bpmn:sequenceFlow id="Flow_178ux5w" sourceRef="Activity_16b3scu" targetRef="Activity_1yz9h1l" /><bpmn:endEvent id="Event_02mb8mp"><bpmn:incoming>Flow_08ghkz3</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1vy5t0r" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_15wsku0</bpmn:incoming><bpmn:outgoing>Flow_08ghkz3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0bdbwri" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка аннулирована")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_15uoh06</bpmn:incoming><bpmn:outgoing>Flow_1nv8kyy</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0egehrz" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0gicfe4" name="Статус: Заявка аннулирована"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+аннулирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nv8kyy</bpmn:incoming><bpmn:outgoing>Flow_15wsku0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_08ghkz3" sourceRef="Activity_1vy5t0r" targetRef="Event_02mb8mp" /><bpmn:sequenceFlow id="Flow_15wsku0" sourceRef="Activity_0gicfe4" targetRef="Activity_1vy5t0r" /><bpmn:sequenceFlow id="Flow_1nv8kyy" sourceRef="Activity_0bdbwri" targetRef="Activity_0gicfe4" /><bpmn:sequenceFlow id="Flow_15uoh06" name="Аннулирована" sourceRef="Gateway_1b0ewlq" targetRef="Activity_0bdbwri"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ANNULLED" || status == "Аннулирована" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ps53yb" name="Заменена" sourceRef="Gateway_1b0ewlq" targetRef="Activity_16b3scu"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "REPLACED" || status == "Заменена" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0dl29zp" default="Flow_1lsn35v"><bpmn:incoming>Flow_09o3n7c</bpmn:incoming><bpmn:outgoing>Flow_07skols</bpmn:outgoing><bpmn:outgoing>Flow_1ihgyis</bpmn:outgoing><bpmn:outgoing>Flow_1lsn35v</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:endEvent id="Event_115xcgp"><bpmn:incoming>Flow_04nicw4</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0brv5vn" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0foo6cq</bpmn:incoming><bpmn:outgoing>Flow_04nicw4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1duldk3" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка заменена")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ihgyis</bpmn:incoming><bpmn:outgoing>Flow_13qfjk0</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0942xre" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0zzubi4" name="Статус: Заявка заменена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+заменена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13qfjk0</bpmn:incoming><bpmn:outgoing>Flow_0foo6cq</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1kd0qv6"><bpmn:incoming>Flow_0vvdp4q</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_145p3ga" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0e61i58</bpmn:incoming><bpmn:outgoing>Flow_0vvdp4q</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0v3a779" name="Устанавливаем статус заявки и сообщение"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Пакетная заявка аннулирована")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07skols</bpmn:incoming><bpmn:outgoing>Flow_0lexlro</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_067uss0" name="Получаем текущую дату и время" scriptFormat="JavaScript" camunda:resultVariable="ResultDateTime"><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1mr3ifx" name="Статус: Заявка аннулирована"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+аннулирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0lexlro</bpmn:incoming><bpmn:outgoing>Flow_0e61i58</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_07skols" name="Аннулирована" sourceRef="Gateway_0dl29zp" targetRef="Activity_0v3a779"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ANNULLED" || status == "Аннулирована" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1ihgyis" name="Заменена" sourceRef="Gateway_0dl29zp" targetRef="Activity_1duldk3"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "REPLACED" || status == "Заменена" }</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_04nicw4" sourceRef="Activity_0brv5vn" targetRef="Event_115xcgp" /><bpmn:sequenceFlow id="Flow_0foo6cq" sourceRef="Activity_0zzubi4" targetRef="Activity_0brv5vn" /><bpmn:sequenceFlow id="Flow_13qfjk0" sourceRef="Activity_1duldk3" targetRef="Activity_0zzubi4" /><bpmn:sequenceFlow id="Flow_0vvdp4q" sourceRef="Activity_145p3ga" targetRef="Event_1kd0qv6" /><bpmn:sequenceFlow id="Flow_0e61i58" sourceRef="Activity_1mr3ifx" targetRef="Activity_145p3ga" /><bpmn:sequenceFlow id="Flow_0lexlro" sourceRef="Activity_0v3a779" targetRef="Activity_1mr3ifx" /><bpmn:sequenceFlow id="Flow_1lsn35v" sourceRef="Gateway_0dl29zp" targetRef="Event_1pb11so" /><bpmn:serviceTask id="Activity_1bgqdk1" name="Получаем признак окончательного расчета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=IsRefined&amp;systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0os6o3x</bpmn:incoming><bpmn:incoming>Flow_0o087et</bpmn:incoming><bpmn:outgoing>Flow_0028sfd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0028sfd" sourceRef="Activity_1bgqdk1" targetRef="Gateway_1uux1c2" /><bpmn:exclusiveGateway id="Gateway_1uux1c2" default="Flow_1t3psh6"><bpmn:incoming>Flow_0028sfd</bpmn:incoming><bpmn:outgoing>Flow_1t3psh6</bpmn:outgoing><bpmn:outgoing>Flow_0w2hhvs</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1t3psh6" sourceRef="Gateway_1uux1c2" targetRef="Event_1pb11so" /><bpmn:sequenceFlow id="Flow_0w2hhvs" name="Окончательный расчет" sourceRef="Gateway_1uux1c2" targetRef="Activity_0yfbjbe"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsRefined == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0yfbjbe" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("orderStatus", "Окончательный расчет")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qsfirc</bpmn:incoming><bpmn:incoming>Flow_0w2hhvs</bpmn:incoming><bpmn:outgoing>Flow_0p1tz08</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0p1tz08" sourceRef="Activity_0yfbjbe" targetRef="Activity_00hctmi" /><bpmn:exclusiveGateway id="Gateway_0nyg4rw" default="Flow_0obb3ni"><bpmn:incoming>Flow_1qrcb2o</bpmn:incoming><bpmn:outgoing>Flow_0z3g9zf</bpmn:outgoing><bpmn:outgoing>Flow_07avqhe</bpmn:outgoing><bpmn:outgoing>Flow_1k54olx</bpmn:outgoing><bpmn:outgoing>Flow_1lvszaz</bpmn:outgoing><bpmn:outgoing>Flow_0obb3ni</bpmn:outgoing><bpmn:outgoing>Flow_0575gmz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:intermediateCatchEvent id="Event_1383tqy"><bpmn:incoming>Flow_0obb3ni</bpmn:incoming><bpmn:incoming>Flow_0f0q0ks</bpmn:incoming><bpmn:outgoing>Flow_038169i</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0pjk7vq" signalRef="Signal_1nbnepi" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_06ybs1f" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=executionResult</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).executionResult</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_038169i</bpmn:incoming><bpmn:outgoing>Flow_1qrcb2o</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0obb3ni" sourceRef="Gateway_0nyg4rw" targetRef="Event_1383tqy" /><bpmn:sequenceFlow id="Flow_0f0q0ks" sourceRef="Activity_1w5wwxl" targetRef="Event_1383tqy" /><bpmn:sequenceFlow id="Flow_038169i" sourceRef="Event_1383tqy" targetRef="Activity_06ybs1f" /><bpmn:sequenceFlow id="Flow_1qrcb2o" sourceRef="Activity_06ybs1f" targetRef="Gateway_0nyg4rw" /><bpmn:serviceTask id="Activity_1ckeqgt" name="Устанавливаем значения дата и время и статус пакетной заявки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("rejectionDateTime", ResultDateTime)
.prop("Message", "Пакетная заявка аннулирована")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_05veyns" sourceRef="Activity_0iskmu1" targetRef="Activity_0j55be8" /><bpmn:textAnnotation id="TextAnnotation_16kepl0"><bpmn:text>получение апдейта (уточненный расчет)</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1p4icgo" sourceRef="Event_1pb11so" targetRef="TextAnnotation_16kepl0" /><bpmn:textAnnotation id="TextAnnotation_1hzeyz9"><bpmn:text>Получение апдейта (статус исполнения)</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_1w5bhzq" sourceRef="Event_1707guk" targetRef="TextAnnotation_1hzeyz9" /><bpmn:textAnnotation id="TextAnnotation_1fikdfu"><bpmn:text>Получение апдейта (статус исполнения)</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_0m51aec" sourceRef="Event_1383tqy" targetRef="TextAnnotation_1fikdfu" /></bpmn:process><bpmn:signal id="Signal_1m5b97e" name="BookEditTerm${instanceId}" /><bpmn:signal id="Signal_0sx1rng" name="bookUpdateReceive${instanceId}" /><bpmn:signal id="Signal_0zie4l6" name="batchOrderUpdate${instanceId}" /><bpmn:signal id="Signal_1nbnepi" name="POUpdate${instanceId}" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_batchOrder_1aabef79-d1fc-4773-b7bf-14f7d8d3dae0"><bpmndi:BPMNEdge id="Flow_05veyns_di" bpmnElement="Flow_05veyns"><di:waypoint x="3542" y="2310" /><di:waypoint x="3492" y="2310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qrcb2o_di" bpmnElement="Flow_1qrcb2o"><di:waypoint x="3970" y="1900" /><di:waypoint x="3970" y="1935" /><di:waypoint x="3787" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_038169i_di" bpmnElement="Flow_038169i"><di:waypoint x="3970" y="1798" /><di:waypoint x="3970" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f0q0ks_di" bpmnElement="Flow_0f0q0ks"><di:waypoint x="3970" y="1700" /><di:waypoint x="3970" y="1762" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0obb3ni_di" bpmnElement="Flow_0obb3ni"><di:waypoint x="3762" y="1910" /><di:waypoint x="3762" y="1780" /><di:waypoint x="3952" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p1tz08_di" bpmnElement="Flow_0p1tz08"><di:waypoint x="2750" y="660" /><di:waypoint x="2790" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w2hhvs_di" bpmnElement="Flow_0w2hhvs"><di:waypoint x="2090" y="635" /><di:waypoint x="2090" y="480" /><di:waypoint x="2700" y="480" /><di:waypoint x="2700" y="620" /><bpmndi:BPMNLabel><dc:Bounds x="2450" y="446" width="81" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1t3psh6_di" bpmnElement="Flow_1t3psh6"><di:waypoint x="2115" y="660" /><di:waypoint x="2172" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0028sfd_di" bpmnElement="Flow_0028sfd"><di:waypoint x="2030" y="660" /><di:waypoint x="2065" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lsn35v_di" bpmnElement="Flow_1lsn35v"><di:waypoint x="2190" y="1075" /><di:waypoint x="2190" y="678" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lexlro_di" bpmnElement="Flow_0lexlro"><di:waypoint x="2660" y="1260" /><di:waypoint x="2710" y="1260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e61i58_di" bpmnElement="Flow_0e61i58"><di:waypoint x="2810" y="1260" /><di:waypoint x="2860" y="1260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vvdp4q_di" bpmnElement="Flow_0vvdp4q"><di:waypoint x="2960" y="1260" /><di:waypoint x="3012" y="1260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13qfjk0_di" bpmnElement="Flow_13qfjk0"><di:waypoint x="2660" y="1400" /><di:waypoint x="2710" y="1400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0foo6cq_di" bpmnElement="Flow_0foo6cq"><di:waypoint x="2810" y="1400" /><di:waypoint x="2860" y="1400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04nicw4_di" bpmnElement="Flow_04nicw4"><di:waypoint x="2960" y="1400" /><di:waypoint x="3012" y="1400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ihgyis_di" bpmnElement="Flow_1ihgyis"><di:waypoint x="2190" y="1125" /><di:waypoint x="2190" y="1400" /><di:waypoint x="2560" y="1400" /><bpmndi:BPMNLabel><dc:Bounds x="2254" y="1373" width="51" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07skols_di" bpmnElement="Flow_07skols"><di:waypoint x="2190" y="1125" /><di:waypoint x="2190" y="1260" /><di:waypoint x="2560" y="1260" /><bpmndi:BPMNLabel><dc:Bounds x="2243" y="1233" width="73" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ps53yb_di" bpmnElement="Flow_0ps53yb"><di:waypoint x="3460" y="1505" /><di:waypoint x="3460" y="1380" /><di:waypoint x="3770" y="1380" /><bpmndi:BPMNLabel><dc:Bounds x="3492" y="1353" width="51" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15uoh06_di" bpmnElement="Flow_15uoh06"><di:waypoint x="3460" y="1505" /><di:waypoint x="3460" y="1240" /><di:waypoint x="3770" y="1240" /><bpmndi:BPMNLabel><dc:Bounds x="3481" y="1213" width="73" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nv8kyy_di" bpmnElement="Flow_1nv8kyy"><di:waypoint x="3870" y="1240" /><di:waypoint x="3920" y="1240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15wsku0_di" bpmnElement="Flow_15wsku0"><di:waypoint x="4020" y="1240" /><di:waypoint x="4070" y="1240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08ghkz3_di" bpmnElement="Flow_08ghkz3"><di:waypoint x="4170" y="1240" /><di:waypoint x="4222" y="1240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_178ux5w_di" bpmnElement="Flow_178ux5w"><di:waypoint x="3870" y="1380" /><di:waypoint x="3920" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ogbofb_di" bpmnElement="Flow_1ogbofb"><di:waypoint x="4020" y="1380" /><di:waypoint x="4070" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k7hggx_di" bpmnElement="Flow_1k7hggx"><di:waypoint x="4170" y="1380" /><di:waypoint x="4222" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lvszaz_di" bpmnElement="Flow_1lvszaz"><di:waypoint x="3762" y="1960" /><di:waypoint x="3762" y="2125" /><di:waypoint x="4100" y="2125" /><bpmndi:BPMNLabel><dc:Bounds x="3810" y="2086" width="79" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z3g9zf_di" bpmnElement="Flow_0z3g9zf"><di:waypoint x="3762" y="1960" /><di:waypoint x="3762" y="2020" /><di:waypoint x="4100" y="2020" /><bpmndi:BPMNLabel><dc:Bounds x="3819" y="1986" width="61" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16pur0t_di" bpmnElement="Flow_16pur0t"><di:waypoint x="4200" y="2125" /><di:waypoint x="4250" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u462k7_di" bpmnElement="Flow_0u462k7"><di:waypoint x="4350" y="2125" /><di:waypoint x="4390" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0glckvb_di" bpmnElement="Flow_0glckvb"><di:waypoint x="4490" y="2125" /><di:waypoint x="4552" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_115stbw_di" bpmnElement="Flow_115stbw"><di:waypoint x="4200" y="2020" /><di:waypoint x="4250" y="2020" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mshyh8_di" bpmnElement="Flow_1mshyh8"><di:waypoint x="4350" y="2020" /><di:waypoint x="4390" y="2020" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xea1lq_di" bpmnElement="Flow_1xea1lq"><di:waypoint x="4490" y="2020" /><di:waypoint x="4552" y="2020" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_124a033_di" bpmnElement="Flow_124a033"><di:waypoint x="3870" y="1660" /><di:waypoint x="3920" y="1660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_173f9v8_di" bpmnElement="Flow_173f9v8"><di:waypoint x="3392" y="1935" /><di:waypoint x="3312" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0y7qm55_di" bpmnElement="Flow_0y7qm55"><di:waypoint x="3392" y="2125" /><di:waypoint x="3312" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0utjnua_di" bpmnElement="Flow_0utjnua"><di:waypoint x="3392" y="2310" /><di:waypoint x="3312" y="2310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1byv9ce_di" bpmnElement="Flow_1byv9ce"><di:waypoint x="3435" y="1530" /><di:waypoint x="3140" y="1530" /><di:waypoint x="3140" y="1418" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0os6o3x_di" bpmnElement="Flow_0os6o3x"><di:waypoint x="1855" y="660" /><di:waypoint x="1930" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ryo1qj_di" bpmnElement="Flow_0ryo1qj"><di:waypoint x="1830" y="685" /><di:waypoint x="1830" y="790" /><bpmndi:BPMNLabel><dc:Bounds x="1847" y="707" width="85" height="66" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xtsbbe_di" bpmnElement="Flow_0xtsbbe"><di:waypoint x="620" y="660" /><di:waypoint x="670" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oua9c4_di" bpmnElement="Flow_1oua9c4"><di:waypoint x="470" y="660" /><di:waypoint x="520" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dl357w_di" bpmnElement="Flow_0dl357w"><di:waypoint x="770" y="660" /><di:waypoint x="820" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rpha3h_di" bpmnElement="Flow_1rpha3h"><di:waypoint x="4080" y="810" /><di:waypoint x="4150" y="810" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03r2hqz_di" bpmnElement="Flow_03r2hqz"><di:waypoint x="2890" y="660" /><di:waypoint x="2930" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lumuu2_di" bpmnElement="Flow_0lumuu2"><di:waypoint x="2208" y="660" /><di:waypoint x="2290" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0la6fve_di" bpmnElement="Flow_0la6fve"><di:waypoint x="3158" y="1400" /><di:waypoint x="3310" y="1400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0v1pxlf_di" bpmnElement="Flow_0v1pxlf"><di:waypoint x="3940" y="960" /><di:waypoint x="4005" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0o087et_di" bpmnElement="Flow_0o087et"><di:waypoint x="1980" y="805" /><di:waypoint x="1980" y="700" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i1oapt_di" bpmnElement="Flow_0i1oapt"><di:waypoint x="1980" y="1240" /><di:waypoint x="1980" y="1292" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0um96rd_di" bpmnElement="Flow_0um96rd"><di:waypoint x="1980" y="1120" /><di:waypoint x="1980" y="1160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z9no27_di" bpmnElement="Flow_0z9no27"><di:waypoint x="1980" y="990" /><di:waypoint x="1980" y="1040" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hm0m0v_di" bpmnElement="Flow_1hm0m0v"><di:waypoint x="1980" y="855" /><di:waypoint x="1980" y="910" /><bpmndi:BPMNLabel><dc:Bounds x="1988" y="867" width="84" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gggq38_di" bpmnElement="Flow_0gggq38"><di:waypoint x="1880" y="830" /><di:waypoint x="1955" y="830" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04qianz_di" bpmnElement="Flow_04qianz"><di:waypoint x="990" y="1070" /><di:waypoint x="990" y="1122" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1khnq2k_di" bpmnElement="Flow_1khnq2k"><di:waypoint x="990" y="950" /><di:waypoint x="990" y="990" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dbh989_di" bpmnElement="Flow_0dbh989"><di:waypoint x="990" y="820" /><di:waypoint x="990" y="870" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zvhiyo_di" bpmnElement="Flow_0zvhiyo"><di:waypoint x="990" y="685" /><di:waypoint x="990" y="740" /><bpmndi:BPMNLabel><dc:Bounds x="994" y="691" width="72" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1q2ko09_di" bpmnElement="Flow_1q2ko09"><di:waypoint x="1300" y="1070" /><di:waypoint x="1300" y="1122" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wdma0f_di" bpmnElement="Flow_0wdma0f"><di:waypoint x="1300" y="950" /><di:waypoint x="1300" y="990" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b0hwwt_di" bpmnElement="Flow_0b0hwwt"><di:waypoint x="1300" y="820" /><di:waypoint x="1300" y="870" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_010vwxr_di" bpmnElement="Flow_010vwxr"><di:waypoint x="1300" y="685" /><di:waypoint x="1300" y="740" /><bpmndi:BPMNLabel><dc:Bounds x="1302" y="704" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gb4ds3_di" bpmnElement="Flow_1gb4ds3"><di:waypoint x="1630" y="1070" /><di:waypoint x="1630" y="1122" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0sz3sxm_di" bpmnElement="Flow_0sz3sxm"><di:waypoint x="1630" y="950" /><di:waypoint x="1630" y="990" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12ss019_di" bpmnElement="Flow_12ss019"><di:waypoint x="1630" y="820" /><di:waypoint x="1630" y="870" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vqy225_di" bpmnElement="Flow_0vqy225"><di:waypoint x="1655" y="660" /><di:waypoint x="1805" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n6pcyv_di" bpmnElement="Flow_0n6pcyv"><di:waypoint x="1630" y="685" /><di:waypoint x="1630" y="740" /><bpmndi:BPMNLabel><dc:Bounds x="1642" y="704" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0imv0l4_di" bpmnElement="Flow_0imv0l4"><di:waypoint x="1500" y="660" /><di:waypoint x="1605" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rwnz8l_di" bpmnElement="Flow_1rwnz8l"><di:waypoint x="1325" y="660" /><di:waypoint x="1400" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h0zp1l_di" bpmnElement="Flow_0h0zp1l"><di:waypoint x="1220" y="660" /><di:waypoint x="1275" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_008ean1_di" bpmnElement="Flow_008ean1"><di:waypoint x="1015" y="660" /><di:waypoint x="1120" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_142uee1_di" bpmnElement="Flow_142uee1"><di:waypoint x="920" y="660" /><di:waypoint x="965" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ab9c31_di" bpmnElement="Flow_1ab9c31"><di:waypoint x="178" y="660" /><di:waypoint x="370" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_059sw08_di" bpmnElement="Flow_059sw08"><di:waypoint x="3140" y="860" /><di:waypoint x="3140" y="1382" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kw6aoi_di" bpmnElement="Flow_1kw6aoi"><di:waypoint x="3140" y="700" /><di:waypoint x="3140" y="780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09o3n7c_di" bpmnElement="Flow_09o3n7c"><di:waypoint x="2560" y="685" /><di:waypoint x="2560" y="1100" /><di:waypoint x="2215" y="1100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rcop6d_di" bpmnElement="Flow_1rcop6d"><di:waypoint x="4390" y="960" /><di:waypoint x="4430" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0575gmz_di" bpmnElement="Flow_0575gmz"><di:waypoint x="3762" y="1960" /><di:waypoint x="3762" y="2310" /><di:waypoint x="3642" y="2310" /><bpmndi:BPMNLabel><dc:Bounds x="3673" y="2276" width="61" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i5k5al_di" bpmnElement="Flow_0i5k5al"><di:waypoint x="3212" y="2310" /><di:waypoint x="3132" y="2310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04x176a_di" bpmnElement="Flow_04x176a"><di:waypoint x="3032" y="2310" /><di:waypoint x="2970" y="2310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k54olx_di" bpmnElement="Flow_1k54olx"><di:waypoint x="3762" y="1960" /><di:waypoint x="3762" y="2125" /><di:waypoint x="3492" y="2125" /><bpmndi:BPMNLabel><dc:Bounds x="3652" y="2086" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1suyxrp_di" bpmnElement="Flow_1suyxrp"><di:waypoint x="3212" y="2125" /><di:waypoint x="3132" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09d9j2o_di" bpmnElement="Flow_09d9j2o"><di:waypoint x="3032" y="2125" /><di:waypoint x="2970" y="2125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07avqhe_di" bpmnElement="Flow_07avqhe"><di:waypoint x="3737" y="1935" /><di:waypoint x="3492" y="1935" /><bpmndi:BPMNLabel><dc:Bounds x="3651" y="1906" width="58" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ydpejv_di" bpmnElement="Flow_1ydpejv"><di:waypoint x="4020" y="1530" /><di:waypoint x="4070" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fyve9t_di" bpmnElement="Flow_1fyve9t"><di:waypoint x="4250" y="810" /><di:waypoint x="4290" y="810" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tum27c_di" bpmnElement="Flow_0tum27c"><di:waypoint x="4250" y="960" /><di:waypoint x="4290" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xu5r6j_di" bpmnElement="Flow_1xu5r6j"><di:waypoint x="4530" y="960" /><di:waypoint x="4602" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0r77ire_di" bpmnElement="Flow_0r77ire"><di:waypoint x="4030" y="935" /><di:waypoint x="4030" y="850" /><bpmndi:BPMNLabel><dc:Bounds x="4043" y="904" width="13" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q957hs_di" bpmnElement="Flow_0q957hs"><di:waypoint x="4055" y="960" /><di:waypoint x="4150" y="960" /><bpmndi:BPMNLabel><dc:Bounds x="4069" y="933" width="20" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12g82lt_di" bpmnElement="Flow_12g82lt"><di:waypoint x="3740" y="960" /><di:waypoint x="3840" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g8oqlq_di" bpmnElement="Flow_1g8oqlq"><di:waypoint x="4530" y="810" /><di:waypoint x="4582" y="810" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u17m0v_di" bpmnElement="Flow_0u17m0v"><di:waypoint x="4390" y="810" /><di:waypoint x="4430" y="810" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10y24or_di" bpmnElement="Flow_10y24or"><di:waypoint x="3460" y="1555" /><di:waypoint x="3460" y="1660" /><di:waypoint x="3770" y="1660" /><bpmndi:BPMNLabel><dc:Bounds x="3494" y="1633" width="72" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gql42j_di" bpmnElement="Flow_0gql42j"><di:waypoint x="3870" y="1530" /><di:waypoint x="3920" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1joi52c_di" bpmnElement="Flow_1joi52c"><di:waypoint x="3410" y="1400" /><di:waypoint x="3460" y="1400" /><di:waypoint x="3460" y="1505" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n45qzz_di" bpmnElement="Flow_0n45qzz"><di:waypoint x="2390" y="660" /><di:waypoint x="2535" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_042mou9_di" bpmnElement="Flow_042mou9"><di:waypoint x="4170" y="1530" /><di:waypoint x="4222" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1l8sl3a_di" bpmnElement="Flow_1l8sl3a"><di:waypoint x="3032" y="1935" /><di:waypoint x="2970" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cn2ov7_di" bpmnElement="Flow_0cn2ov7"><di:waypoint x="3212" y="1935" /><di:waypoint x="3132" y="1935" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12e3xxl_di" bpmnElement="Flow_12e3xxl"><di:waypoint x="3485" y="1530" /><di:waypoint x="3770" y="1530" /><bpmndi:BPMNLabel><dc:Bounds x="3499" y="1496" width="61" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1w20ega_di" bpmnElement="Flow_1w20ega"><di:waypoint x="3030" y="660" /><di:waypoint x="3090" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qsfirc_di" bpmnElement="Flow_1qsfirc"><di:waypoint x="2585" y="660" /><di:waypoint x="2650" y="660" /><bpmndi:BPMNLabel><dc:Bounds x="2595" y="624" width="13" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Gateway_07gq1o0_di" bpmnElement="Gateway_07gq1o0" isMarkerVisible="true"><dc:Bounds x="2535" y="635" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="2520" y="576" width="80" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0o1s0zi_di" bpmnElement="Activity_0o1s0zi" isExpanded="true"><dc:Bounds x="3470" y="80" width="780" height="515" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1kvxs4w_di" bpmnElement="Flow_1kvxs4w"><di:waypoint x="3950" y="450" /><di:waypoint x="3950" y="515" /><di:waypoint x="3720" y="515" /><di:waypoint x="3720" y="443" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gkidv6_di" bpmnElement="Flow_0gkidv6"><di:waypoint x="3975" y="425" /><di:waypoint x="4020" y="425" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tflz32_di" bpmnElement="Flow_1tflz32"><di:waypoint x="3880" y="425" /><di:waypoint x="3925" y="425" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vld1ps_di" bpmnElement="Flow_1vld1ps"><di:waypoint x="3738" y="425" /><di:waypoint x="3780" y="425" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19jrf7l_di" bpmnElement="Flow_19jrf7l"><di:waypoint x="3650" y="350" /><di:waypoint x="3650" y="425" /><di:waypoint x="3702" y="425" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w2o0ys_di" bpmnElement="Flow_0w2o0ys"><di:waypoint x="3558" y="325" /><di:waypoint x="3625" y="325" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0isovah_di" bpmnElement="Flow_0isovah"><di:waypoint x="3650" y="300" /><di:waypoint x="3650" y="225" /><di:waypoint x="3702" y="225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hqtlyt_di" bpmnElement="Flow_0hqtlyt"><di:waypoint x="3738" y="225" /><di:waypoint x="3800" y="225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dl7ir0_di" bpmnElement="Flow_0dl7ir0"><di:waypoint x="3900" y="225" /><di:waypoint x="4172" y="225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_085f690_di" bpmnElement="Flow_085f690"><di:waypoint x="4120" y="425" /><di:waypoint x="4172" y="425" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_14mxlzj_di" bpmnElement="Activity_14mxlzj"><dc:Bounds x="4020" y="385" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_103snab_di" bpmnElement="Activity_103snab"><dc:Bounds x="3800" y="185" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0s37nzg_di" bpmnElement="Event_0s37nzg"><dc:Bounds x="4172" y="407" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1bhejhr_di" bpmnElement="Event_1bhejhr"><dc:Bounds x="4172" y="207" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1t8d6fj_di" bpmnElement="Event_1t8d6fj" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="3702" y="207" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ibv98w_di" bpmnElement="Gateway_1ibv98w"><dc:Bounds x="3625" y="300" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1tmt9lp_di" bpmnElement="Event_1tmt9lp"><dc:Bounds x="3522" y="307" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zdtwlm_di" bpmnElement="Activity_0zdtwlm" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="3980" y="265" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0ob2d2w_di" bpmnElement="Event_0ob2d2w"><dc:Bounds x="3702" y="407" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11y0t52_di" bpmnElement="Activity_11y0t52"><dc:Bounds x="3780" y="385" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1rcsfk8_di" bpmnElement="Gateway_1rcsfk8" isMarkerVisible="true"><dc:Bounds x="3925" y="400" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1a2s2zo_di" bpmnElement="TextAnnotation_1a2s2zo"><dc:Bounds x="3595" y="125" width="110" height="66" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_1xz3r9m_di" bpmnElement="Association_1xz3r9m"><di:waypoint x="3707" y="213" /><di:waypoint x="3683" y="191" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_0tc0v2t_di" bpmnElement="Activity_0tc0v2t"><dc:Bounds x="2930" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1e8txjf_di" bpmnElement="Activity_1e8txjf"><dc:Bounds x="3090" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0te2aqw_di" bpmnElement="Activity_0te2aqw"><dc:Bounds x="4290" y="770" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1b0ewlq_di" bpmnElement="Gateway_1b0ewlq" isMarkerVisible="true"><dc:Bounds x="3435" y="1505" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0kn8ylv_di" bpmnElement="Event_0kn8ylv"><dc:Bounds x="2934" y="1917" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0w12yz2_di" bpmnElement="Event_0w12yz2"><dc:Bounds x="4222" y="1512" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qrzbiz_di" bpmnElement="Activity_0qrzbiz"><dc:Bounds x="3600" y="1550" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1eh9n4g_di" bpmnElement="Activity_1eh9n4g"><dc:Bounds x="3770" y="1620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_018mgv8_di" bpmnElement="Activity_018mgv8"><dc:Bounds x="3542" y="1820" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0q7atos_di" bpmnElement="Activity_0q7atos"><dc:Bounds x="3392" y="1895" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1doxnyi_di" bpmnElement="Activity_1doxnyi"><dc:Bounds x="3212" y="1895" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wi3yww_di" bpmnElement="Activity_1wi3yww"><dc:Bounds x="3032" y="1895" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03xz79c_di" bpmnElement="Activity_03xz79c"><dc:Bounds x="4070" y="1490" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wkd20f_di" bpmnElement="Activity_0wkd20f"><dc:Bounds x="2290" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1pdd598_di" bpmnElement="Activity_1pdd598"><dc:Bounds x="3310" y="1360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11yi9es_di" bpmnElement="Activity_11yi9es"><dc:Bounds x="3770" y="1490" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0t1z2mz_di" bpmnElement="Event_0t1z2mz"><dc:Bounds x="4582" y="792" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qd6qk1_di" bpmnElement="Activity_1qd6qk1"><dc:Bounds x="4430" y="770" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1730e7u_di" bpmnElement="Activity_1730e7u"><dc:Bounds x="3600" y="1400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mstqyg_di" bpmnElement="Activity_0mstqyg"><dc:Bounds x="3640" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yhr9yh_di" bpmnElement="Activity_1yhr9yh"><dc:Bounds x="4150" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0y0ppp0_di" bpmnElement="Gateway_0y0ppp0" isMarkerVisible="true"><dc:Bounds x="4005" y="935" width="50" height="50" /><bpmndi:BPMNLabel><dc:Bounds x="4000" y="1000" width="61" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fpbyv9_di" bpmnElement="Activity_0fpbyv9"><dc:Bounds x="4430" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0fwx0di_di" bpmnElement="Event_0fwx0di"><dc:Bounds x="4602" y="942" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1x2m68d_di" bpmnElement="Activity_1x2m68d"><dc:Bounds x="4150" y="770" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mc7we6_di" bpmnElement="Activity_1mc7we6"><dc:Bounds x="3920" y="1490" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0idjaw4_di" bpmnElement="Event_0idjaw4"><dc:Bounds x="2934" y="2107" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1609sdi_di" bpmnElement="Activity_1609sdi"><dc:Bounds x="3542" y="2010" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02svajp_di" bpmnElement="Activity_02svajp"><dc:Bounds x="3392" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11ncihc_di" bpmnElement="Activity_11ncihc"><dc:Bounds x="3212" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0krr31q_di" bpmnElement="Activity_0krr31q"><dc:Bounds x="3032" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1tke2gx_di" bpmnElement="Event_1tke2gx"><dc:Bounds x="2934" y="2292" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0iskmu1_di" bpmnElement="Activity_0iskmu1"><dc:Bounds x="3542" y="2270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j55be8_di" bpmnElement="Activity_0j55be8"><dc:Bounds x="3392" y="2270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gjyii6_di" bpmnElement="Activity_1gjyii6"><dc:Bounds x="3212" y="2270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0i7o8ni_di" bpmnElement="Activity_0i7o8ni"><dc:Bounds x="3032" y="2270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0f7308l_di" bpmnElement="Activity_0f7308l"><dc:Bounds x="4290" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jr4cs3_di" bpmnElement="Activity_1jr4cs3" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3840" y="920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14a999x_di" bpmnElement="Activity_14a999x" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3980" y="770" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1707guk_di" bpmnElement="Event_1707guk"><dc:Bounds x="3122" y="1382" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08bdigd_di" bpmnElement="Activity_08bdigd" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="2250" y="380" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0pt9qvp_di" bpmnElement="Activity_0pt9qvp"><dc:Bounds x="3090" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0uw1iki_di" bpmnElement="Event_0uw1iki"><dc:Bounds x="142" y="642" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13o5w12_di" bpmnElement="Activity_13o5w12"><dc:Bounds x="1120" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0lnz0bj_di" bpmnElement="Activity_0lnz0bj"><dc:Bounds x="1400" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ic31bx_di" bpmnElement="Gateway_0ic31bx" isMarkerVisible="true"><dc:Bounds x="1605" y="635" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_157srto_di" bpmnElement="Activity_157srto"><dc:Bounds x="1580" y="870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0aqoiv8_di" bpmnElement="Event_0aqoiv8"><dc:Bounds x="1612" y="1122" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00f73kj_di" bpmnElement="Activity_00f73kj"><dc:Bounds x="1580" y="740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jfjqw1_di" bpmnElement="Activity_0jfjqw1"><dc:Bounds x="1580" y="990" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1faxck3_di" bpmnElement="Gateway_1faxck3" isMarkerVisible="true"><dc:Bounds x="1275" y="635" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0doj1bh_di" bpmnElement="Activity_0doj1bh"><dc:Bounds x="1250" y="870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0lp0n76_di" bpmnElement="Event_0lp0n76"><dc:Bounds x="1282" y="1122" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12ejrhl_di" bpmnElement="Activity_12ejrhl"><dc:Bounds x="1250" y="740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_011po29_di" bpmnElement="Activity_011po29"><dc:Bounds x="1250" y="990" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1mskcb3_di" bpmnElement="Gateway_1mskcb3" isMarkerVisible="true"><dc:Bounds x="965" y="635" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mh8gyj_di" bpmnElement="Activity_1mh8gyj"><dc:Bounds x="940" y="870" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1ha6s41_di" bpmnElement="Event_1ha6s41"><dc:Bounds x="972" y="1122" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hl0zaa_di" bpmnElement="Activity_1hl0zaa"><dc:Bounds x="940" y="740" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0k0423e_di" bpmnElement="Activity_0k0423e"><dc:Bounds x="940" y="990" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hv602i_di" bpmnElement="Activity_1hv602i"><dc:Bounds x="1780" y="790" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ry3ryd_di" bpmnElement="Gateway_1ry3ryd" isMarkerVisible="true"><dc:Bounds x="1955" y="805" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bd9pcy_di" bpmnElement="Activity_1bd9pcy"><dc:Bounds x="1930" y="1040" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1onwzci_di" bpmnElement="Event_1onwzci"><dc:Bounds x="1962" y="1292" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gpzl6b_di" bpmnElement="Activity_1gpzl6b"><dc:Bounds x="1930" y="910" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1kdjnbt_di" bpmnElement="Activity_1kdjnbt"><dc:Bounds x="1930" y="1160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09v7ogi_di" bpmnElement="Activity_09v7ogi"><dc:Bounds x="210" y="480" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1r37rly_di" bpmnElement="Activity_1r37rly"><dc:Bounds x="3380" y="980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1pb11so_di" bpmnElement="Event_1pb11so"><dc:Bounds x="2172" y="642" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dx5a3l_di" bpmnElement="Activity_0dx5a3l"><dc:Bounds x="820" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00hctmi_di" bpmnElement="Activity_00hctmi"><dc:Bounds x="2790" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1uu9v6e_di" bpmnElement="Activity_1uu9v6e"><dc:Bounds x="670" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04tyjn8_di" bpmnElement="Activity_04tyjn8"><dc:Bounds x="370" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13rn8gm_di" bpmnElement="Activity_13rn8gm"><dc:Bounds x="520" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_09i8bx2_di" bpmnElement="Gateway_09i8bx2" isMarkerVisible="true"><dc:Bounds x="1805" y="635" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1w5wwxl_di" bpmnElement="Activity_1w5wwxl"><dc:Bounds x="3920" y="1620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0yfkw9k_di" bpmnElement="Event_0yfkw9k"><dc:Bounds x="4552" y="2002" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_120gu8y_di" bpmnElement="Activity_120gu8y"><dc:Bounds x="4390" y="1980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ng6h11_di" bpmnElement="Activity_0ng6h11"><dc:Bounds x="4100" y="1980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_087nyjj_di" bpmnElement="Activity_087nyjj"><dc:Bounds x="3970" y="2030" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1luo9s9_di" bpmnElement="Activity_1luo9s9"><dc:Bounds x="4250" y="1980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0y4gcci_di" bpmnElement="Event_0y4gcci"><dc:Bounds x="4552" y="2107" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rew1ke_di" bpmnElement="Activity_0rew1ke"><dc:Bounds x="4390" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jgp92l_di" bpmnElement="Activity_1jgp92l"><dc:Bounds x="4100" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rf0juh_di" bpmnElement="Activity_1rf0juh"><dc:Bounds x="3970" y="2170" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vskft7_di" bpmnElement="Activity_1vskft7"><dc:Bounds x="4250" y="2085" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_18m2h1a_di" bpmnElement="Event_18m2h1a"><dc:Bounds x="4222" y="1362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rsrezy_di" bpmnElement="Activity_0rsrezy"><dc:Bounds x="4070" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16b3scu_di" bpmnElement="Activity_16b3scu"><dc:Bounds x="3770" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1avhdid_di" bpmnElement="Activity_1avhdid"><dc:Bounds x="3590" y="1270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yz9h1l_di" bpmnElement="Activity_1yz9h1l"><dc:Bounds x="3920" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_02mb8mp_di" bpmnElement="Event_02mb8mp"><dc:Bounds x="4222" y="1222" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vy5t0r_di" bpmnElement="Activity_1vy5t0r"><dc:Bounds x="4070" y="1200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bdbwri_di" bpmnElement="Activity_0bdbwri"><dc:Bounds x="3770" y="1200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0egehrz_di" bpmnElement="Activity_0egehrz"><dc:Bounds x="3590" y="1110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gicfe4_di" bpmnElement="Activity_0gicfe4"><dc:Bounds x="3920" y="1200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dl29zp_di" bpmnElement="Gateway_0dl29zp" isMarkerVisible="true"><dc:Bounds x="2165" y="1075" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_115xcgp_di" bpmnElement="Event_115xcgp"><dc:Bounds x="3012" y="1382" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0brv5vn_di" bpmnElement="Activity_0brv5vn"><dc:Bounds x="2860" y="1360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1duldk3_di" bpmnElement="Activity_1duldk3"><dc:Bounds x="2560" y="1360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0942xre_di" bpmnElement="Activity_0942xre"><dc:Bounds x="2380" y="1295" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zzubi4_di" bpmnElement="Activity_0zzubi4"><dc:Bounds x="2710" y="1360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1kd0qv6_di" bpmnElement="Event_1kd0qv6"><dc:Bounds x="3012" y="1242" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_145p3ga_di" bpmnElement="Activity_145p3ga"><dc:Bounds x="2860" y="1220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0v3a779_di" bpmnElement="Activity_0v3a779"><dc:Bounds x="2560" y="1220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_067uss0_di" bpmnElement="Activity_067uss0"><dc:Bounds x="2380" y="1140" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mr3ifx_di" bpmnElement="Activity_1mr3ifx"><dc:Bounds x="2710" y="1220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bgqdk1_di" bpmnElement="Activity_1bgqdk1"><dc:Bounds x="1930" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1uux1c2_di" bpmnElement="Gateway_1uux1c2" isMarkerVisible="true"><dc:Bounds x="2065" y="635" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0yfbjbe_di" bpmnElement="Activity_0yfbjbe"><dc:Bounds x="2650" y="620" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0nyg4rw_di" bpmnElement="Gateway_0nyg4rw" isMarkerVisible="true"><dc:Bounds x="3737" y="1910" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1383tqy_di" bpmnElement="Event_1383tqy"><dc:Bounds x="3952" y="1762" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06ybs1f_di" bpmnElement="Activity_06ybs1f"><dc:Bounds x="3920" y="1820" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ckeqgt_di" bpmnElement="Activity_1ckeqgt"><dc:Bounds x="3770" y="1080" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_16kepl0_di" bpmnElement="TextAnnotation_16kepl0"><dc:Bounds x="2140" y="540" width="99.99156545209178" height="66.12685560053981" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1hzeyz9_di" bpmnElement="TextAnnotation_1hzeyz9"><dc:Bounds x="3160" y="1300" width="99.97131820389818" height="69.70740103270225" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1fikdfu_di" bpmnElement="TextAnnotation_1fikdfu"><dc:Bounds x="4070" y="1710" width="99.98924268502583" height="67.12564543889845" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_1p4icgo_di" bpmnElement="Association_1p4icgo"><di:waypoint x="2190" y="642" /><di:waypoint x="2190" y="606" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_1w5bhzq_di" bpmnElement="Association_1w5bhzq"><di:waypoint x="3151" y="1386" /><di:waypoint x="3165" y="1370" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Association_0m51aec_di" bpmnElement="Association_0m51aec"><di:waypoint x="3987" y="1774" /><di:waypoint x="4070" y="1743" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>