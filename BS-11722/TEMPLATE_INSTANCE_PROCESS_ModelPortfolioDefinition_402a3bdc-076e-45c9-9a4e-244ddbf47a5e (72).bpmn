<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_ModelPortfolioDefinition_402a3bdc-076e-45c9-9a4e-244ddbf47a5e" name="Выбор модельного портфеля" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1"><bpmn:outgoing>SequenceFlow_0or7jn6</bpmn:outgoing></bpmn:startEvent><bpmn:endEvent id="EndEvent_0djl7a3"><bpmn:incoming>Flow_0dzvonl</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_0or7jn6" sourceRef="StartEvent_1" targetRef="Activity_0lrzoz2" /><bpmn:serviceTask id="Activity_0lrzoz2" name="Статус: Выбор модельного портфеля"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Выбор+модельного+портфеля</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0or7jn6</bpmn:incoming><bpmn:outgoing>Flow_14d6i5d</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_14d6i5d" sourceRef="Activity_0lrzoz2" targetRef="Activity_1l1z9c4" /><bpmn:serviceTask id="Activity_1l1z9c4" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=cifID&amp;systemName=brokerageAccountID&amp;systemName=idModelPortfolio</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="CIF"><camunda:script scriptFormat="javascript">JSON.parse(response).cifID</camunda:script></camunda:outputParameter><camunda:outputParameter name="brokerageAccountID"><camunda:script scriptFormat="javascript">JSON.parse(response).brokerageAccountID</camunda:script></camunda:outputParameter><camunda:outputParameter name="idModelPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).idModelPortfolio</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_14d6i5d</bpmn:incoming><bpmn:outgoing>Flow_0xlaosm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1suv55l" name="Ищем клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1, "attributes.RiskProfileNumber": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="ClientId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="Cl_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.RiskProfileNumber
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0va9l1e</bpmn:incoming><bpmn:outgoing>Flow_0t4hw68</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0xlaosm" sourceRef="Activity_1l1z9c4" targetRef="Activity_1dw9bgw" /><bpmn:serviceTask id="Activity_15k5gxt" name="Ищем клиентский портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "6167d4df7ef9df0776685460", 
"attributes.brokerageAccountID": "${brokerageAccountID}",
"attributes.cifID": "${CIF}"
},
"projection": { 		"_id": 1, "attributes.rp_RiskCategoria": 1,"primaryId": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="CP_primaryId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].primaryId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="ClPortfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyClPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="CP_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.rp_RiskCategoria
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18ucu2p</bpmn:incoming><bpmn:outgoing>Flow_14vlpaz</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1h90nxo" default="Flow_0imskkr"><bpmn:incoming>Flow_14vlpaz</bpmn:incoming><bpmn:outgoing>Flow_0imskkr</bpmn:outgoing><bpmn:outgoing>Flow_00h25wn</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0f7x9aj" name="Получаем  параметры клиентского портфеля"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${ClPortfolio_refid}/getAttributes?systemName=GuideSteps&amp;systemName=ModelPersPortfolio&amp;systemName=clientCode&amp;systemName=mp_portfolioCurrency</camunda:inputParameter><camunda:outputParameter name="GuideSteps"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps")
} catch(e) {
throw new org.camunda.bpm.engine.delegate.BpmnError("IT_EXCEPTION",e);
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TestLength"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps").elements().size()
} catch(e) {
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="OldModelPersPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).ModelPersPortfolio</camunda:script></camunda:outputParameter><camunda:outputParameter name="clientCode"><camunda:script scriptFormat="javascript">JSON.parse(response).clientCode</camunda:script></camunda:outputParameter><camunda:outputParameter name="cp_portfolioCurrency"><camunda:script scriptFormat="javascript">JSON.parse(response).mp_portfolioCurrency</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0imskkr</bpmn:incoming><bpmn:outgoing>Flow_0aqx0be</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1ex1nte" name="Статус: Не найден клиентский портфель"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиентский+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1mqti8e</bpmn:incoming><bpmn:outgoing>Flow_1gujyk3</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0ir2u7z"><bpmn:incoming>Flow_0z1otb8</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0b8squy" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиентский портфель")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00h25wn</bpmn:incoming><bpmn:outgoing>Flow_1mqti8e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0aq88c0" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0gh0avp</bpmn:incoming><bpmn:outgoing>Flow_0z1otb8</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0dkne1p" default="Flow_0hsva92"><bpmn:incoming>Flow_0on7yau</bpmn:incoming><bpmn:outgoing>Flow_0hsva92</bpmn:outgoing><bpmn:outgoing>Flow_14nvzij</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0tcfilz" name="Статус: Не найден список этапов в клиентском портфеле"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+список+этапов+в+клиентском+портфеле</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0d7s5jj</bpmn:incoming><bpmn:outgoing>Flow_0yodx6k</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1ltq2ep"><bpmn:incoming>Flow_1g2k4n0</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0lhjy7g" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден список этапов в клиентском портфеле")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_14nvzij</bpmn:incoming><bpmn:outgoing>Flow_0d7s5jj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1q1dd8v" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_073euxm</bpmn:incoming><bpmn:outgoing>Flow_1g2k4n0</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0x18bea" name="Получаем  прохождение этапов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${ClPortfolio_refid}/getAttributes?systemName=GuideSteps</camunda:inputParameter><camunda:outputParameter name="StatusStep1"><camunda:script scriptFormat="javascript">JSON.parse(response).GuideSteps[0].StatusStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="StatusStep2"><camunda:script scriptFormat="javascript">JSON.parse(response).GuideSteps[1].StatusStep</camunda:script></camunda:outputParameter><camunda:outputParameter name="TestLength"><camunda:script scriptFormat="javascript">try{
S(response).prop("GuideSteps").elements().size()
} catch(e) {
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="StatusStep3"><camunda:script scriptFormat="javascript">JSON.parse(response).GuideSteps[2].StatusStep</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hsva92</bpmn:incoming><bpmn:outgoing>Flow_0nyiu44</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0mnw43j" default="Flow_18ucu2p"><bpmn:incoming>Flow_0t4hw68</bpmn:incoming><bpmn:outgoing>Flow_18ucu2p</bpmn:outgoing><bpmn:outgoing>Flow_01iv2cl</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0enway5" name="Статус: Не найден клиент"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+клиент</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0sxp2lz</bpmn:incoming><bpmn:outgoing>Flow_0zswsmo</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0qlz2kp"><bpmn:incoming>Flow_1fb4pr9</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_12pgnsb" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден клиент")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_01iv2cl</bpmn:incoming><bpmn:outgoing>Flow_0sxp2lz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0f9xre0" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1b7e4y8</bpmn:incoming><bpmn:outgoing>Flow_1fb4pr9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_18ucu2p" sourceRef="Gateway_0mnw43j" targetRef="Activity_15k5gxt" /><bpmn:sequenceFlow id="Flow_14vlpaz" sourceRef="Activity_15k5gxt" targetRef="Gateway_1h90nxo" /><bpmn:sequenceFlow id="Flow_0imskkr" sourceRef="Gateway_1h90nxo" targetRef="Activity_0f7x9aj" /><bpmn:sequenceFlow id="Flow_00h25wn" name="Не найден портфель" sourceRef="Gateway_1h90nxo" targetRef="Activity_0b8squy"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyClPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0aqx0be" sourceRef="Activity_0f7x9aj" targetRef="Activity_02f6qgs" /><bpmn:sequenceFlow id="Flow_1mqti8e" sourceRef="Activity_0b8squy" targetRef="Activity_1ex1nte" /><bpmn:sequenceFlow id="Flow_1gujyk3" sourceRef="Activity_1ex1nte" targetRef="Activity_1rc8xmv" /><bpmn:sequenceFlow id="Flow_0z1otb8" sourceRef="Activity_0aq88c0" targetRef="Event_0ir2u7z" /><bpmn:sequenceFlow id="Flow_0hsva92" sourceRef="Gateway_0dkne1p" targetRef="Activity_0x18bea" /><bpmn:sequenceFlow id="Flow_14nvzij" name="Не найден список этапов" sourceRef="Gateway_0dkne1p" targetRef="Activity_0lhjy7g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${GuideSteps == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0d7s5jj" sourceRef="Activity_0lhjy7g" targetRef="Activity_0tcfilz" /><bpmn:sequenceFlow id="Flow_0yodx6k" sourceRef="Activity_0tcfilz" targetRef="Activity_0uq4mr1" /><bpmn:sequenceFlow id="Flow_1g2k4n0" sourceRef="Activity_1q1dd8v" targetRef="Event_1ltq2ep" /><bpmn:sequenceFlow id="Flow_01iv2cl" name="Не найден клиент" sourceRef="Gateway_0mnw43j" targetRef="Activity_12pgnsb"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0sxp2lz" sourceRef="Activity_12pgnsb" targetRef="Activity_0enway5" /><bpmn:sequenceFlow id="Flow_0zswsmo" sourceRef="Activity_0enway5" targetRef="Activity_1jc39r8" /><bpmn:sequenceFlow id="Flow_1fb4pr9" sourceRef="Activity_0f9xre0" targetRef="Event_0qlz2kp" /><bpmn:sequenceFlow id="Flow_0t4hw68" sourceRef="Activity_1suv55l" targetRef="Gateway_0mnw43j" /><bpmn:sequenceFlow id="Flow_0nyiu44" sourceRef="Activity_0x18bea" targetRef="Gateway_130xqku" /><bpmn:exclusiveGateway id="Gateway_1bn1fw9" default="Flow_050bwah"><bpmn:incoming>Flow_128lzkq</bpmn:incoming><bpmn:outgoing>Flow_03k57e2</bpmn:outgoing><bpmn:outgoing>Flow_050bwah</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1wgtwf9" name="Не пройдено подключение услуги"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не пройдено подключение услуги")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_03k57e2</bpmn:incoming><bpmn:outgoing>Flow_0uyndi8</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_130xqku" default="Flow_128lzkq"><bpmn:incoming>Flow_0nyiu44</bpmn:incoming><bpmn:outgoing>Flow_128lzkq</bpmn:outgoing><bpmn:outgoing>Flow_0kaj37m</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1weq9m7" name="Не пройдено риск-профилирование"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не пройдено риск-профилирование")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kaj37m</bpmn:incoming><bpmn:outgoing>Flow_0xho3cv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1o20uv7" name="Статус: Ошибка исполнения процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+исполнения+процесса</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1iz1v0t</bpmn:incoming><bpmn:incoming>Flow_0dbm6gs</bpmn:incoming><bpmn:incoming>Flow_1i3c7qm</bpmn:incoming><bpmn:outgoing>Flow_0r0zmjm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1nbbh37" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0r0zmjm</bpmn:incoming><bpmn:outgoing>Flow_1wtrsht</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0rehsc5"><bpmn:incoming>Flow_1wtrsht</bpmn:incoming></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_0bpkq1y" default="Flow_199se8v"><bpmn:incoming>Flow_050bwah</bpmn:incoming><bpmn:outgoing>Flow_1h46eaq</bpmn:outgoing><bpmn:outgoing>Flow_199se8v</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1j1x2fo" name="Не пройдено определение финансовых целей"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не пройдено определение финансовых целей")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1h46eaq</bpmn:incoming><bpmn:outgoing>Flow_0nuhzqt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_089kur9" name="Ищем модельный портфель"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": 
{
"activityStatus": "ACTIVE", 
"templatePrimaryId": "613ef0ac687006695cd4a397", 
"attributes.idModelPortfolio": "${idModelPortfolio}"
},
"projection": { 		"_id": 1, "attributes.mp_riskMetric": 1, "attributes.Currency": 1, "attributes.mp_name": 1 ,"attributes.mp_portfolioCurrency.primaryId": 1	}
}</camunda:inputParameter><camunda:outputParameter name="Portfolio_refid"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyModPortf"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter><camunda:outputParameter name="MP_RiskProfileNumber"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_riskMetric
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="Currency"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.Currency
}
catch (e)
{
""
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_name"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_name
}
catch (e)
{
""
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_portfolioCurrency"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_portfolioCurrency.primaryId
}
catch (e)
{
""
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_199se8v</bpmn:incoming><bpmn:outgoing>Flow_1vnuf6j</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_128lzkq" sourceRef="Gateway_130xqku" targetRef="Gateway_1bn1fw9" /><bpmn:sequenceFlow id="Flow_03k57e2" name="Этап 2 = false" sourceRef="Gateway_1bn1fw9" targetRef="Activity_1wgtwf9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${StatusStep2 == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_050bwah" sourceRef="Gateway_1bn1fw9" targetRef="Gateway_0bpkq1y" /><bpmn:sequenceFlow id="Flow_0uyndi8" sourceRef="Activity_1wgtwf9" targetRef="Activity_1mymt8d" /><bpmn:sequenceFlow id="Flow_0kaj37m" name="Этап 1 = false" sourceRef="Gateway_130xqku" targetRef="Activity_1weq9m7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${StatusStep1 == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0xho3cv" sourceRef="Activity_1weq9m7" targetRef="Activity_1yxhjcn" /><bpmn:sequenceFlow id="Flow_0nuhzqt" sourceRef="Activity_1j1x2fo" targetRef="Activity_156ujjx" /><bpmn:sequenceFlow id="Flow_0r0zmjm" sourceRef="Activity_1o20uv7" targetRef="Activity_1nbbh37" /><bpmn:sequenceFlow id="Flow_1wtrsht" sourceRef="Activity_1nbbh37" targetRef="Event_0rehsc5" /><bpmn:sequenceFlow id="Flow_1h46eaq" name="Этап 3 = false" sourceRef="Gateway_0bpkq1y" targetRef="Activity_1j1x2fo"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${StatusStep3 == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_199se8v" sourceRef="Gateway_0bpkq1y" targetRef="Activity_089kur9" /><bpmn:serviceTask id="Activity_1y1ceb5" name="Статус: Изменить профиль"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Изменить+профиль</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0pwgt4x</bpmn:incoming><bpmn:outgoing>Flow_07iwwbz</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0jqhszk"><bpmn:incoming>Flow_1ilq9le</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_1ez2pwn" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Изменить профиль")
.prop("PortfolioStatus", "EDIT_RISK_PROFILE")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04nib0u</bpmn:incoming><bpmn:outgoing>Flow_0pwgt4x</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0z24as7" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zgjgd5</bpmn:incoming><bpmn:outgoing>Flow_1ilq9le</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0roeuz4" name="Статус: Изменить цели"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Изменить+цели</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cvvk06</bpmn:incoming><bpmn:outgoing>Flow_0rj8sml</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0izsrk6"><bpmn:incoming>Flow_04owvxf</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0fnwlaw" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Изменить цели")
.prop("PortfolioStatus", "СHANGE_GOALS")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0e0txyi</bpmn:incoming><bpmn:outgoing>Flow_0cvvk06</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_05fra27" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11wpxdi</bpmn:incoming><bpmn:outgoing>Flow_04owvxf</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_08wnqix" name="Статус: Недоступно"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Недоступно</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0cerfbt</bpmn:incoming><bpmn:outgoing>Flow_0acolhu</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1pk99aq"><bpmn:incoming>Flow_1oxhg55</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_06yuavg" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Модельный портфель недоступен")
.prop("PortfolioStatus", "UNAVAILABLE")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0yp2221</bpmn:incoming><bpmn:outgoing>Flow_0cerfbt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0qdal0b" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_176fnya</bpmn:incoming><bpmn:outgoing>Flow_1oxhg55</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0p7hddl" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("PortfolioStatus", "AVAILABLE")
.prop("objectId", instanceId)
.prop("mp_name", mp_name)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0h8c8np</bpmn:incoming><bpmn:outgoing>Flow_1u7851w</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1repj0r" name="Статус: Не найден модельный портфель"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+найден+модельный+портфель</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0m3mqjt</bpmn:incoming><bpmn:outgoing>Flow_1kac9wf</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1tv9m4i"><bpmn:incoming>Flow_0cbneiz</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_09vxioh" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Не найден модельный портфель")
.prop("objectId", instanceId)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ca3ek9</bpmn:incoming><bpmn:outgoing>Flow_0m3mqjt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0zub4zv" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11800p2</bpmn:incoming><bpmn:outgoing>Flow_0cbneiz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0pwgt4x" sourceRef="Activity_1ez2pwn" targetRef="Activity_1y1ceb5" /><bpmn:sequenceFlow id="Flow_07iwwbz" sourceRef="Activity_1y1ceb5" targetRef="Activity_0wsn4e0" /><bpmn:sequenceFlow id="Flow_1ilq9le" sourceRef="Activity_0z24as7" targetRef="Event_0jqhszk" /><bpmn:sequenceFlow id="Flow_0cvvk06" sourceRef="Activity_0fnwlaw" targetRef="Activity_0roeuz4" /><bpmn:sequenceFlow id="Flow_0rj8sml" sourceRef="Activity_0roeuz4" targetRef="Activity_1aqf7bk" /><bpmn:sequenceFlow id="Flow_04owvxf" sourceRef="Activity_05fra27" targetRef="Event_0izsrk6" /><bpmn:sequenceFlow id="Flow_0cerfbt" sourceRef="Activity_06yuavg" targetRef="Activity_08wnqix" /><bpmn:sequenceFlow id="Flow_0acolhu" sourceRef="Activity_08wnqix" targetRef="Activity_184fwjc" /><bpmn:sequenceFlow id="Flow_1oxhg55" sourceRef="Activity_0qdal0b" targetRef="Event_1pk99aq" /><bpmn:sequenceFlow id="Flow_0m3mqjt" sourceRef="Activity_09vxioh" targetRef="Activity_1repj0r" /><bpmn:sequenceFlow id="Flow_1kac9wf" sourceRef="Activity_1repj0r" targetRef="Activity_0nuhmcm" /><bpmn:sequenceFlow id="Flow_0cbneiz" sourceRef="Activity_0zub4zv" targetRef="Event_1tv9m4i" /><bpmn:sequenceFlow id="Flow_1vnuf6j" sourceRef="Activity_089kur9" targetRef="Gateway_0j8i74f" /><bpmn:exclusiveGateway id="Gateway_0j8i74f" default="Flow_134rpak"><bpmn:incoming>Flow_1vnuf6j</bpmn:incoming><bpmn:outgoing>Flow_1ca3ek9</bpmn:outgoing><bpmn:outgoing>Flow_134rpak</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1ca3ek9" name="Не найден модельный портфель" sourceRef="Gateway_0j8i74f" targetRef="Activity_09vxioh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyModPortf == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_134rpak" sourceRef="Gateway_0j8i74f" targetRef="Gateway_1xnoqtf" /><bpmn:exclusiveGateway id="Gateway_1xnoqtf" default="Flow_18v4tq8"><bpmn:incoming>Flow_134rpak</bpmn:incoming><bpmn:outgoing>Flow_04nib0u</bpmn:outgoing><bpmn:outgoing>Flow_18v4tq8</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_04nib0u" name="Изменить профиль" sourceRef="Gateway_1xnoqtf" targetRef="Activity_1ez2pwn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Cl_RiskProfileNumber &lt; MP_RiskProfileNumber}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_18v4tq8" sourceRef="Gateway_1xnoqtf" targetRef="Gateway_0cu19i2" /><bpmn:sequenceFlow id="Flow_1mwcjv1" sourceRef="Gateway_0cu19i2" targetRef="Gateway_0dzsz65"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${CP_RiskProfileNumber == MP_RiskProfileNumber &amp;&amp; mp_portfolioCurrency == cp_portfolioCurrency}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0cu19i2" default="Flow_0e0txyi"><bpmn:incoming>Flow_18v4tq8</bpmn:incoming><bpmn:outgoing>Flow_1mwcjv1</bpmn:outgoing><bpmn:outgoing>Flow_0e0txyi</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0e0txyi" name="Изменить цели" sourceRef="Gateway_0cu19i2" targetRef="Activity_0fnwlaw" /><bpmn:sequenceFlow id="Flow_0h8c8np" sourceRef="Gateway_0dzsz65" targetRef="Activity_0p7hddl" /><bpmn:exclusiveGateway id="Gateway_0dzsz65" default="Flow_0h8c8np"><bpmn:incoming>Flow_1mwcjv1</bpmn:incoming><bpmn:outgoing>Flow_0h8c8np</bpmn:outgoing><bpmn:outgoing>Flow_0yp2221</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0yp2221" name="Недоступен" sourceRef="Gateway_0dzsz65" targetRef="Activity_06yuavg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == idModelPortfolio}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_03apjjf" name="Статус: Первоначальный расчет портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Первоначальный+расчет+портфеля</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1vwx2jo</bpmn:incoming><bpmn:incoming>Flow_0ac8ch4</bpmn:incoming><bpmn:outgoing>Flow_192c47z</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0shcux7" name="Статус: Ожидание уточненного расчета портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидание+уточненного+расчета+портфеля</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1oknqc8</bpmn:incoming><bpmn:outgoing>Flow_0w0vap0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_192c47z" sourceRef="Activity_03apjjf" targetRef="Activity_1tuc2rn" /><bpmn:sequenceFlow id="Flow_1u7851w" sourceRef="Activity_0p7hddl" targetRef="Activity_0ew9u4v" /><bpmn:serviceTask id="Activity_1tuc2rn" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=idModelPortfolio&amp;systemName=CashAmount&amp;systemName=TotalCommissionAmount&amp;systemName=IsRefined</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="idModelPortfolio"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).idModelPortfolio
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="CashAmount"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).CashAmount
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TotalCommissionAmount"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).TotalCommissionAmount
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_192c47z</bpmn:incoming><bpmn:outgoing>Flow_0cceyx2</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1a67doq" name="Апдейт клиентского портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
 "templatePrimaryId" : "6167d4df7ef9df0776685460", 
	"attributes":{
        "TemplateType": "BrokeragePortfolio",
        "brokerageAccountID": "${brokerageAccountID}",
        "mp_mp": true,
        "DateModelPortfOn": "${ResultDateTime}",
        "idSelectionModelPortfolio": "${instanceId}",
        "RiskProfileNumber": ${CP_RiskProfileNumber},
        "mp_name": "${mp_name}",
        "idModelPortfolio": "${idModelPortfolio}",
        "GuideSteps": ${GuideSteps12},
      "DateModelPortfOff": null,
"TotalNumberUnfulfilledRecommendations": 0,
        "ModelPersPortfolio" : {
            "primaryId" : "${idModelPortfolio}", 
            "source" : "book", 
            "_class" : "egar.ezdoc.model.entity.attribute.DictionaryValue"
        }
}
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ylgo27</bpmn:incoming><bpmn:outgoing>Flow_0dzvonl</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1b25yob" name="Меняем в табличном блоке строку по заданному номеру" scriptFormat="javascript" camunda:resultVariable="GSA_modified"><bpmn:incoming>Flow_0xrjxav</bpmn:incoming><bpmn:incoming>Flow_14p5jy0</bpmn:incoming><bpmn:outgoing>Flow_1atm4ql</bpmn:outgoing><bpmn:script>var GuideSteps_modified = JSON.parse(GuideSteps);



GuideSteps_modified[3]['NumStep'] = 4;

GuideSteps_modified[3]['NameProcessBar'] = StepName4;

GuideSteps_modified[3]['StatusStep'] = true;

GuideSteps_modified[3]['AnketaId'] = instanceId;

GuideSteps_modified[3]['ResultDateTime'] = ResultDateTime;



result = new Object();

result.GuideSteps = GuideSteps_modified;

JSON.stringify(result);</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_18nriwm" name="json" scriptFormat="JavaScript" camunda:resultVariable="GuideSteps12"><bpmn:incoming>Flow_1atm4ql</bpmn:incoming><bpmn:outgoing>Flow_0ylgo27</bpmn:outgoing><bpmn:script>S(GSA_modified).prop("GuideSteps")</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0gejljm" name="Ищем этап 4 в списке этапов"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	

"filter": 

{

"activityStatus": "ACTIVE", 

"templatePrimaryId": "61cd56f319807c2315dfed7d", 

"attributes.NumStep" : 4

},

"projection": { 		"attributes.NameProcessBar": 1	}

}</camunda:inputParameter><camunda:outputParameter name="StepName4"><camunda:script scriptFormat="javascript">try {
var result_json = 
JSON.parse(response).cursor.firstBatch[0].attributes.NameProcessBar;
JSON.stringify(result_json).replaceAll("\"", "")
}
catch (e)
{
" "
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmpty4"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_06v4g2w</bpmn:incoming><bpmn:outgoing>Flow_00uba6o</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1ob9x1c" default="Flow_0xrjxav"><bpmn:incoming>Flow_00uba6o</bpmn:incoming><bpmn:outgoing>Flow_0zccj18</bpmn:outgoing><bpmn:outgoing>Flow_0xrjxav</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_03hfnw2" name="Название этапа" camunda:resultVariable="StepName4"><bpmn:incoming>Flow_0zccj18</bpmn:incoming><bpmn:outgoing>Flow_14p5jy0</bpmn:outgoing><bpmn:script>String('')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_00uba6o" sourceRef="Activity_0gejljm" targetRef="Gateway_1ob9x1c" /><bpmn:sequenceFlow id="Flow_0zccj18" sourceRef="Gateway_1ob9x1c" targetRef="Activity_03hfnw2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmpty4 == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0xrjxav" sourceRef="Gateway_1ob9x1c" targetRef="Activity_1b25yob" /><bpmn:sequenceFlow id="Flow_0ylgo27" sourceRef="Activity_18nriwm" targetRef="Activity_1a67doq" /><bpmn:sequenceFlow id="Flow_1atm4ql" sourceRef="Activity_1b25yob" targetRef="Activity_18nriwm" /><bpmn:sequenceFlow id="Flow_14p5jy0" sourceRef="Activity_03hfnw2" targetRef="Activity_1b25yob" /><bpmn:sequenceFlow id="Flow_0dzvonl" sourceRef="Activity_1a67doq" targetRef="EndEvent_0djl7a3" /><bpmn:subProcess id="Activity_0ffvnu0" name="Уточненный расчет пакетной заявки"><bpmn:incoming>Flow_0w0vap0</bpmn:incoming><bpmn:outgoing>Flow_10h3hfa</bpmn:outgoing><bpmn:startEvent id="Event_0h7m4ea"><bpmn:outgoing>Flow_147hnca</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_147hnca" sourceRef="Event_0h7m4ea" targetRef="Gateway_1qbojfa" /><bpmn:parallelGateway id="Gateway_1qbojfa"><bpmn:incoming>Flow_147hnca</bpmn:incoming><bpmn:outgoing>Flow_1v4efnh</bpmn:outgoing><bpmn:outgoing>Flow_010xtsr</bpmn:outgoing></bpmn:parallelGateway><bpmn:sequenceFlow id="Flow_1v4efnh" sourceRef="Gateway_1qbojfa" targetRef="Event_1u28s4q" /><bpmn:intermediateCatchEvent id="Event_1u28s4q"><bpmn:incoming>Flow_1v4efnh</bpmn:incoming><bpmn:incoming>Flow_1d6xnib</bpmn:incoming><bpmn:outgoing>Flow_1wzztzz</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0wu5wwl" signalRef="Signal_1sbiakw" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_010xtsr" sourceRef="Gateway_1qbojfa" targetRef="Event_1xtxfz1" /><bpmn:intermediateCatchEvent id="Event_1xtxfz1"><bpmn:incoming>Flow_010xtsr</bpmn:incoming><bpmn:outgoing>Flow_10w6yrd</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1p63xne"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT6000S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0x6hdc0" name="Установка статуса Незавершенная анкета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_10w6yrd</bpmn:incoming><bpmn:outgoing>Flow_1b92yij</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_10w6yrd" sourceRef="Event_1xtxfz1" targetRef="Activity_0x6hdc0" /><bpmn:sequenceFlow id="Flow_1b92yij" sourceRef="Activity_0x6hdc0" targetRef="Activity_10ie14y" /><bpmn:serviceTask id="Activity_10ie14y" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1b92yij</bpmn:incoming><bpmn:outgoing>Flow_0ya5udp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ya5udp" sourceRef="Activity_10ie14y" targetRef="Event_1o5aswp" /><bpmn:serviceTask id="Activity_1f2xb97" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1lxg0au</bpmn:incoming><bpmn:outgoing>Flow_0qmy01l</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1wzztzz" sourceRef="Event_1u28s4q" targetRef="Activity_11xqjqj" /><bpmn:serviceTask id="Activity_11xqjqj" name="Статус: Уточненный расчет портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Уточненный+расчет+портфеля</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wzztzz</bpmn:incoming><bpmn:outgoing>Flow_08ax8pi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_08ax8pi" sourceRef="Activity_11xqjqj" targetRef="Activity_1grgg4h" /><bpmn:endEvent id="Event_1o5aswp"><bpmn:incoming>Flow_0ya5udp</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0y1xyez" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0qmy01l" sourceRef="Activity_1f2xb97" targetRef="Event_0kfr1hz" /><bpmn:endEvent id="Event_0kfr1hz"><bpmn:incoming>Flow_0qmy01l</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_09lhf1f" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1grgg4h" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=idModelPortfolio&amp;systemName=TotalCommissionAmount&amp;systemName=IsRefined</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="idModelPortfolio"><camunda:script scriptFormat="javascript">JSON.parse(response).idModelPortfolio</camunda:script></camunda:outputParameter><camunda:outputParameter name="TotalCommissionAmount"><camunda:script scriptFormat="javascript">JSON.parse(response).TotalCommissionAmount</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_08ax8pi</bpmn:incoming><bpmn:outgoing>Flow_030s3f7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_030s3f7" sourceRef="Activity_1grgg4h" targetRef="Gateway_00n2ifi" /><bpmn:exclusiveGateway id="Gateway_00n2ifi" default="Flow_1lxg0au"><bpmn:incoming>Flow_030s3f7</bpmn:incoming><bpmn:outgoing>Flow_1lxg0au</bpmn:outgoing><bpmn:outgoing>Flow_1d6xnib</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1lxg0au" sourceRef="Gateway_00n2ifi" targetRef="Activity_1f2xb97" /><bpmn:sequenceFlow id="Flow_1d6xnib" sourceRef="Gateway_00n2ifi" targetRef="Event_1u28s4q"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TotalCommissionAmount == null}</bpmn:conditionExpression></bpmn:sequenceFlow></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_012xc29" default="Flow_1pni619"><bpmn:incoming>Flow_10h3hfa</bpmn:incoming><bpmn:outgoing>Flow_196e9f2</bpmn:outgoing><bpmn:outgoing>Flow_1pni619</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_10h3hfa" sourceRef="Activity_0ffvnu0" targetRef="Gateway_012xc29" /><bpmn:serviceTask id="Activity_0thrtol" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_196e9f2</bpmn:incoming><bpmn:outgoing>Flow_15qfpc9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_196e9f2" sourceRef="Gateway_012xc29" targetRef="Activity_0thrtol"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == 'true' || timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="Event_0m9oqe3"><bpmn:incoming>Flow_15qfpc9</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_15qfpc9" sourceRef="Activity_0thrtol" targetRef="Event_0m9oqe3" /><bpmn:sequenceFlow id="Flow_0w0vap0" sourceRef="Activity_0shcux7" targetRef="Activity_0ffvnu0" /><bpmn:sequenceFlow id="Flow_1pni619" sourceRef="Gateway_012xc29" targetRef="Activity_163m5yn" /><bpmn:subProcess id="Activity_1sdl6qi" name="Подписание ПЭП"><bpmn:incoming>Flow_117ujf1</bpmn:incoming><bpmn:outgoing>Flow_1tz5r8j</bpmn:outgoing><bpmn:startEvent id="Event_16cbhe1"><bpmn:outgoing>Flow_0smd7wa</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_0c3c5ef"><bpmn:incoming>Flow_0smd7wa</bpmn:incoming><bpmn:outgoing>Flow_0pw621l</bpmn:outgoing><bpmn:outgoing>Flow_10nip1o</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_1jctc40"><bpmn:incoming>Flow_10nip1o</bpmn:incoming><bpmn:outgoing>Flow_13efhez</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_02vrle3"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT6000S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0n6hp2x" name="Установка статуса Незавершенная анкета"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Незавершенная+анкета</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13efhez</bpmn:incoming><bpmn:outgoing>Flow_1828b4u</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="Event_1fwv3n5"><bpmn:incoming>Flow_0pw621l</bpmn:incoming><bpmn:incoming>Flow_0pkoh8p</bpmn:incoming><bpmn:outgoing>Flow_0g9qt4e</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_0ijb4f0" signalRef="Signal_1sbiakw" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0r43ue0" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1828b4u</bpmn:incoming><bpmn:outgoing>Flow_0e8daac</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_13v6k8q"><bpmn:incoming>Flow_0e8daac</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1j2f1bk" /></bpmn:endEvent><bpmn:serviceTask id="Activity_07m7bze" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1sq2xaj</bpmn:incoming><bpmn:outgoing>Flow_1nmfmbv</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_15wgo1s"><bpmn:incoming>Flow_1nmfmbv</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_16xo9d3" /></bpmn:endEvent><bpmn:exclusiveGateway id="Gateway_089xzw9" default="Flow_1sq2xaj"><bpmn:incoming>Flow_0q3fb65</bpmn:incoming><bpmn:outgoing>Flow_1sq2xaj</bpmn:outgoing><bpmn:outgoing>Flow_0pkoh8p</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0smd7wa" sourceRef="Event_16cbhe1" targetRef="Gateway_0c3c5ef" /><bpmn:sequenceFlow id="Flow_0pw621l" sourceRef="Gateway_0c3c5ef" targetRef="Event_1fwv3n5" /><bpmn:sequenceFlow id="Flow_10nip1o" sourceRef="Gateway_0c3c5ef" targetRef="Event_1jctc40" /><bpmn:sequenceFlow id="Flow_13efhez" sourceRef="Event_1jctc40" targetRef="Activity_0n6hp2x" /><bpmn:sequenceFlow id="Flow_1828b4u" sourceRef="Activity_0n6hp2x" targetRef="Activity_0r43ue0" /><bpmn:sequenceFlow id="Flow_0e8daac" sourceRef="Activity_0r43ue0" targetRef="Event_13v6k8q" /><bpmn:sequenceFlow id="Flow_0g9qt4e" sourceRef="Event_1fwv3n5" targetRef="Activity_1op2xwg" /><bpmn:sequenceFlow id="Flow_1nmfmbv" sourceRef="Activity_07m7bze" targetRef="Event_15wgo1s" /><bpmn:sequenceFlow id="Flow_1sq2xaj" sourceRef="Gateway_089xzw9" targetRef="Activity_07m7bze" /><bpmn:sequenceFlow id="Flow_0pkoh8p" sourceRef="Gateway_089xzw9" targetRef="Event_1fwv3n5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Signed == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1op2xwg" name="Получаем значение  флага подписания ПЭП"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=Signed</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Signed"><camunda:script scriptFormat="javascript">JSON.parse(response).Signed</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0g9qt4e</bpmn:incoming><bpmn:outgoing>Flow_0q3fb65</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0q3fb65" sourceRef="Activity_1op2xwg" targetRef="Gateway_089xzw9" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_1cbpuw5" default="Flow_0ij8stz"><bpmn:incoming>Flow_1tz5r8j</bpmn:incoming><bpmn:outgoing>Flow_00u1f46</bpmn:outgoing><bpmn:outgoing>Flow_0ij8stz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1tz5r8j" sourceRef="Activity_1sdl6qi" targetRef="Gateway_1cbpuw5" /><bpmn:serviceTask id="Activity_0npxbv4" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00u1f46</bpmn:incoming><bpmn:outgoing>Flow_1wc5k4l</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1n9tjrj"><bpmn:incoming>Flow_1wc5k4l</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1wc5k4l" sourceRef="Activity_0npxbv4" targetRef="Event_1n9tjrj" /><bpmn:sequenceFlow id="Flow_00u1f46" sourceRef="Gateway_1cbpuw5" targetRef="Activity_0npxbv4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == 'true' || timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0ij8stz" sourceRef="Gateway_1cbpuw5" targetRef="Activity_0wxbgds" /><bpmn:serviceTask id="Activity_11g47ao" name="Создание пакетной заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK?esWaitUntil=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"templatePrimaryId" : "623844b53fcee44cc5242c56", 
"attributes": {
"QuestionnairesType": "batchRequest",
"cifID" : "${CIF}",
"brokerageAccountID": "${brokerageAccountID}",
"TotalCommissionAmount": 0,
"Currency": "${Currency}",
"IsRefined": false,
"requestDateTime": "${requestDateTime}",
"TypeProcessFormationRequest": "Выбор модельного портфеля",
"idSelectionModelPortfolio": "${instanceId}",
"TypeSelectionModelPortfolio": "${TypeSelectionModelPortfolio}",
"idModelPortfolio": "${idModelPortfolio}",
"batchRequests": ${batchRequests12}
}
}</camunda:inputParameter><camunda:outputParameter name="PO_orderID"><camunda:script scriptFormat="javascript">JSON.parse(response).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1d7jp8q</bpmn:incoming><bpmn:outgoing>Flow_0x4oq56</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0x4oq56" sourceRef="Activity_11g47ao" targetRef="Activity_1gcho1e" /><bpmn:scriptTask id="Activity_1hm34er" name="Получаем текущую дату и время - расчета" scriptFormat="JavaScript" camunda:resultVariable="requestDateTime"><bpmn:incoming>Flow_1jreefj</bpmn:incoming><bpmn:outgoing>Flow_1coic0x</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 19).replace('T', ' ')</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1coic0x" sourceRef="Activity_1hm34er" targetRef="Gateway_1hxdabx" /><bpmn:scriptTask id="Activity_0sph9pc" name="логи" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="ForLogs"><bpmn:script>print("curl request POST");
print("  url: " + extServiceUrl + "/robo_operations/v1/batch_order_calculation_result");
print("  header Accept: ");
print("  header Content-Type: application/json");
print("  header x-ibm-client-id: " + "eb0f0cdb-0f10-4aee-a2c3-4467788d65ff");
print("  header x-ibm-client-secret: " + "B8iK4uI4yY6vW6tO6xT5bE6rT6dK4bV6sU7dU8pF7pB6jF8qB7");
print("  data objectId: " + instanceId);
print("  data batchRequests: " + batchRequests22);
print("  data orderID: " + PO_orderID);
print("  data objectId: " + instanceId);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1gcho1e" name="Устанавливаем значение параметров" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("AnketaDateTime", requestDateTime)
.prop("orderID", PO_orderID)
.prop("ProcessStep", "1")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0x4oq56</bpmn:incoming><bpmn:outgoing>Flow_0q2qrs7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0q2qrs7" sourceRef="Activity_1gcho1e" targetRef="Activity_0meg4o7" /><bpmn:scriptTask id="Activity_0337fpp" name="json - ПЗ" camunda:asyncAfter="true" scriptFormat="JavaScript" camunda:resultVariable="batchRequests12"><bpmn:incoming>Flow_0daow5n</bpmn:incoming><bpmn:outgoing>Flow_0iu07ad</bpmn:outgoing><bpmn:script>S(batchRequests_modified).prop("batchRequests")</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1hxdabx" default="Flow_1ctr7mk"><bpmn:incoming>Flow_1coic0x</bpmn:incoming><bpmn:outgoing>Flow_1ctr7mk</bpmn:outgoing><bpmn:outgoing>Flow_04wzukd</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1ctr7mk" sourceRef="Gateway_1hxdabx" targetRef="Activity_19in12a" /><bpmn:scriptTask id="Activity_0pa8g0k" name="Тип выбора модельного портфеля = Первичная покупка" scriptFormat="javascript" camunda:resultVariable="TypeSelectionModelPortfolio"><bpmn:incoming>Flow_04wzukd</bpmn:incoming><bpmn:outgoing>Flow_1vwx2jo</bpmn:outgoing><bpmn:script>"Первичная покупка"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_04wzukd" sourceRef="Gateway_1hxdabx" targetRef="Activity_0pa8g0k"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1vwx2jo" sourceRef="Activity_0pa8g0k" targetRef="Activity_03apjjf" /><bpmn:scriptTask id="Activity_19in12a" name="Тип выбора модельного портфеля = Смена модельного портфеля" scriptFormat="javascript" camunda:resultVariable="TypeSelectionModelPortfolio"><bpmn:incoming>Flow_1ctr7mk</bpmn:incoming><bpmn:outgoing>Flow_0ac8ch4</bpmn:outgoing><bpmn:script>"Смена модельного портфеля"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0ac8ch4" sourceRef="Activity_19in12a" targetRef="Activity_03apjjf" /><bpmn:sequenceFlow id="Flow_0cceyx2" sourceRef="Activity_1tuc2rn" targetRef="Activity_0cs3woj" /><bpmn:scriptTask id="Activity_1jc39r8" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0zswsmo</bpmn:incoming><bpmn:outgoing>Flow_1b7e4y8</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не найден клиент";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1b7e4y8" sourceRef="Activity_1jc39r8" targetRef="Activity_0f9xre0" /><bpmn:scriptTask id="Activity_1rc8xmv" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_1gujyk3</bpmn:incoming><bpmn:outgoing>Flow_0gh0avp</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не найден клиентский портфель";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0gh0avp" sourceRef="Activity_1rc8xmv" targetRef="Activity_0aq88c0" /><bpmn:scriptTask id="Activity_0uq4mr1" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0yodx6k</bpmn:incoming><bpmn:outgoing>Flow_073euxm</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не найден список этапов в клиентском портфеле";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_073euxm" sourceRef="Activity_0uq4mr1" targetRef="Activity_1q1dd8v" /><bpmn:scriptTask id="Activity_1yxhjcn" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0xho3cv</bpmn:incoming><bpmn:outgoing>Flow_1iz1v0t</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не пройдено риск-профилирование";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1iz1v0t" sourceRef="Activity_1yxhjcn" targetRef="Activity_1o20uv7" /><bpmn:scriptTask id="Activity_1mymt8d" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0uyndi8</bpmn:incoming><bpmn:outgoing>Flow_0dbm6gs</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не пройдено подключение услуги";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0dbm6gs" sourceRef="Activity_1mymt8d" targetRef="Activity_1o20uv7" /><bpmn:scriptTask id="Activity_156ujjx" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0nuhzqt</bpmn:incoming><bpmn:outgoing>Flow_1i3c7qm</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не пройдено определение финансовых целей";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1i3c7qm" sourceRef="Activity_156ujjx" targetRef="Activity_1o20uv7" /><bpmn:scriptTask id="Activity_0nuhmcm" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_1kac9wf</bpmn:incoming><bpmn:outgoing>Flow_11800p2</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Не найден модельный портфель";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_11800p2" sourceRef="Activity_0nuhmcm" targetRef="Activity_0zub4zv" /><bpmn:scriptTask id="Activity_0wsn4e0" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_07iwwbz</bpmn:incoming><bpmn:outgoing>Flow_0zgjgd5</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Изменить профиль";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0zgjgd5" sourceRef="Activity_0wsn4e0" targetRef="Activity_0z24as7" /><bpmn:scriptTask id="Activity_1aqf7bk" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0rj8sml</bpmn:incoming><bpmn:outgoing>Flow_11wpxdi</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Изменить цели";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_11wpxdi" sourceRef="Activity_1aqf7bk" targetRef="Activity_05fra27" /><bpmn:scriptTask id="Activity_184fwjc" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0acolhu</bpmn:incoming><bpmn:outgoing>Flow_176fnya</bpmn:outgoing><bpmn:script>var q = new Object();
q.message = "Недоступно";
q.status = "ERROR";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_176fnya" sourceRef="Activity_184fwjc" targetRef="Activity_0qdal0b" /><bpmn:scriptTask id="Activity_02f6qgs" name="переменная адрес коннекта" scriptFormat="javascript"><bpmn:incoming>Flow_0aqx0be</bpmn:incoming><bpmn:outgoing>Flow_0u9es2o</bpmn:outgoing><bpmn:script>execution.setVariable("connectUrl", (java.lang.System).getenv("connectUrl"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0u9es2o" sourceRef="Activity_02f6qgs" targetRef="Activity_1colb2p" /><bpmn:serviceTask id="Activity_0nxi1bw" name="Загрузка остатков из коннекта по clientCode"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/ImportQuikBalances/command-executor?cmd=loadBalancesNow</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"clientCodes": ["${clientCode}"]
}</camunda:inputParameter><camunda:outputParameter name="r_response">${response}</camunda:outputParameter><camunda:outputParameter name="IsSuccess"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).success
}
catch (e)
{
false
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0nkmc8b</bpmn:incoming><bpmn:outgoing>Flow_17ube34</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_17ube34" sourceRef="Activity_0nxi1bw" targetRef="Gateway_0hg1nj6" /><bpmn:sequenceFlow id="Flow_05rishb" sourceRef="Gateway_0hg1nj6" targetRef="Activity_0rvhowg"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsSuccess == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_0hg1nj6" default="Flow_11vz7z1"><bpmn:incoming>Flow_17ube34</bpmn:incoming><bpmn:outgoing>Flow_05rishb</bpmn:outgoing><bpmn:outgoing>Flow_11vz7z1</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_13801np" name="Статус: Ошибка получения остатков по клиентскому портфелю"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+получения+остатков+по+клиентскому+портфелю</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qwpf8o</bpmn:incoming><bpmn:outgoing>Flow_1wtrvqp</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_15ydqe6"><bpmn:incoming>Flow_01j16ff</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_0ys8tve" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Ошибка получения остатков по клиентскому портфелю")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_11vz7z1</bpmn:incoming><bpmn:outgoing>Flow_1qwpf8o</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0wtlij2" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12obkos</bpmn:incoming><bpmn:incoming>Flow_0px2d2l</bpmn:incoming><bpmn:outgoing>Flow_01j16ff</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1qwpf8o" sourceRef="Activity_0ys8tve" targetRef="Activity_13801np" /><bpmn:sequenceFlow id="Flow_1wtrvqp" sourceRef="Activity_13801np" targetRef="Activity_1t94qtg" /><bpmn:sequenceFlow id="Flow_01j16ff" sourceRef="Activity_0wtlij2" targetRef="Event_15ydqe6" /><bpmn:sequenceFlow id="Flow_11vz7z1" sourceRef="Gateway_0hg1nj6" targetRef="Activity_0ys8tve"><bpmn:extensionElements><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_163m5yn" name="Статус: Подтверждение модельного портфеля"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Подтверждение+модельного+портфеля</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1pni619</bpmn:incoming><bpmn:incoming>Flow_1itwr9f</bpmn:incoming><bpmn:outgoing>Flow_117ujf1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_117ujf1" sourceRef="Activity_163m5yn" targetRef="Activity_1sdl6qi" /><bpmn:serviceTask id="Activity_0ew9u4v" name="Статус: Модельный портфель выбран"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Модельный+портфель+выбран</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1u7851w</bpmn:incoming><bpmn:outgoing>Flow_1jreefj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1jreefj" sourceRef="Activity_0ew9u4v" targetRef="Activity_1hm34er" /><bpmn:serviceTask id="Activity_0rvhowg" name="Запрос расчета портфеля в CalcService"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${focusUrl}/api/Tasks/ExecuteSync?task=FormationRebalancingTask&amp;InputEventType=DefiningModelPortfolio&amp;PortfolioId=${idModelPortfolio}&amp;CalculationType=Primary&amp;book=${CP_primaryId}</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="batchQty"><camunda:script scriptFormat="javascript">try {
S(response).prop("Result").prop("Requests").elements().size()
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="response_r">${response}</camunda:outputParameter><camunda:outputParameter name="TaskStatus"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).TaskStatus
}
catch (e)
{
-2
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsNeedRebalance"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).Result.IsNeedRebalance
}
catch (e)
{
false
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="Message"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).Message
}
catch (e)
{
""
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05rishb</bpmn:incoming><bpmn:outgoing>Flow_123dgo8</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_0dapb0h" name="Заявки из фокуса" scriptFormat="JavaScript" camunda:resultVariable="RequestsFromFocus"><bpmn:incoming>Flow_18jf4lt</bpmn:incoming><bpmn:outgoing>Flow_0t8buj3</bpmn:outgoing><bpmn:script>S(response_r).prop("Result").prop("Requests")</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1r2dlj3" default="Flow_1jq9ux3"><bpmn:incoming>Flow_123dgo8</bpmn:incoming><bpmn:outgoing>Flow_1pefc7u</bpmn:outgoing><bpmn:outgoing>Flow_1jq9ux3</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1pefc7u" sourceRef="Gateway_1r2dlj3" targetRef="Gateway_02tb8k9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${TaskStatus == 1}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0yz7b5c" name="Статус: Ошибка расчета заявок по клиентскому портфелю"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+расчета+заявок+по+клиентскому+портфелю</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1mjsiyp</bpmn:incoming><bpmn:outgoing>Flow_1i3s3dn</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1y3oewm"><bpmn:incoming>Flow_049xo1u</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="Activity_02v9tdm" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", Message)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1jq9ux3</bpmn:incoming><bpmn:outgoing>Flow_1mjsiyp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_17wkgox" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1bsjl8y</bpmn:incoming><bpmn:incoming>Flow_14cdvyr</bpmn:incoming><bpmn:incoming>Flow_1lrc6q4</bpmn:incoming><bpmn:incoming>Flow_0th1umz</bpmn:incoming><bpmn:incoming>Flow_08nkwag</bpmn:incoming><bpmn:incoming>Flow_18b4dgk</bpmn:incoming><bpmn:incoming>Flow_0pxqo6v</bpmn:incoming><bpmn:outgoing>Flow_049xo1u</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1mjsiyp" sourceRef="Activity_02v9tdm" targetRef="Activity_0yz7b5c" /><bpmn:sequenceFlow id="Flow_1i3s3dn" sourceRef="Activity_0yz7b5c" targetRef="Gateway_1xhyy5e" /><bpmn:sequenceFlow id="Flow_049xo1u" sourceRef="Activity_17wkgox" targetRef="Event_1y3oewm" /><bpmn:sequenceFlow id="Flow_1jq9ux3" sourceRef="Gateway_1r2dlj3" targetRef="Activity_02v9tdm" /><bpmn:sequenceFlow id="Flow_0t8buj3" sourceRef="Activity_0dapb0h" targetRef="Activity_12ps8sr" /><bpmn:scriptTask id="Activity_0cs3woj" name="Формирование ответа" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="Q_Result"><bpmn:incoming>Flow_0cceyx2</bpmn:incoming><bpmn:outgoing>Flow_0nkmc8b</bpmn:outgoing><bpmn:script>var q = new Object();
q.status = "SUCCESS";
JSON.stringify(q);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_123dgo8" sourceRef="Activity_0rvhowg" targetRef="Gateway_1r2dlj3" /><bpmn:sequenceFlow id="Flow_0iu07ad" sourceRef="Activity_0337fpp" targetRef="Activity_0n9e15c" /><bpmn:scriptTask id="Activity_118d607" name="переменная адрес фокус" scriptFormat="javascript"><bpmn:incoming>Flow_0q28403</bpmn:incoming><bpmn:outgoing>Flow_0on7yau</bpmn:outgoing><bpmn:script>execution.setVariable("focusUrl", (java.lang.System).getenv("focusUrl"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0on7yau" sourceRef="Activity_118d607" targetRef="Gateway_0dkne1p" /><bpmn:exclusiveGateway id="Gateway_02tb8k9" default="Flow_1pl2wyc"><bpmn:incoming>Flow_1pefc7u</bpmn:incoming><bpmn:outgoing>Flow_18jf4lt</bpmn:outgoing><bpmn:outgoing>Flow_1pl2wyc</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_18jf4lt" sourceRef="Gateway_02tb8k9" targetRef="Activity_0dapb0h"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${IsNeedRebalance == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0kbouvd" name="Устанавливаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", "Формрирование заявок не требуется")
.prop("ProcessStep", "2")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1pl2wyc</bpmn:incoming><bpmn:outgoing>Flow_1gqdqxx</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1pl2wyc" sourceRef="Gateway_02tb8k9" targetRef="Activity_0kbouvd" /><bpmn:serviceTask id="Activity_06951im" name="Статус: Не требуется"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+требуется</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1gqdqxx</bpmn:incoming><bpmn:outgoing>Flow_0o6lv88</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1gqdqxx" sourceRef="Activity_0kbouvd" targetRef="Activity_06951im" /><bpmn:sequenceFlow id="Flow_0o6lv88" sourceRef="Activity_06951im" targetRef="Activity_0du6w43" /><bpmn:sequenceFlow id="Flow_0nkmc8b" sourceRef="Activity_0cs3woj" targetRef="Activity_0nxi1bw" /><bpmn:serviceTask id="Activity_0wxbgds" name="Получаем значение параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=ResultDateTime</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ResultDateTime"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).ResultDateTime
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="CashAmount"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).CashAmount
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="TotalCommissionAmount"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).TotalCommissionAmount
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="IsRefined"><camunda:script scriptFormat="javascript">JSON.parse(response).IsRefined</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ij8stz</bpmn:incoming><bpmn:outgoing>Flow_06v4g2w</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_06v4g2w" sourceRef="Activity_0wxbgds" targetRef="Activity_0gejljm" /><bpmn:scriptTask id="Activity_182255k" name="json - внеш.метод" camunda:asyncAfter="true" scriptFormat="JavaScript" camunda:resultVariable="batchRequests22"><bpmn:incoming>Flow_0fguekw</bpmn:incoming><bpmn:outgoing>Flow_1d7jp8q</bpmn:outgoing><bpmn:script>S(batchRequests2_modified).prop("batchRequests")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1d7jp8q" sourceRef="Activity_182255k" targetRef="Activity_11g47ao" /><bpmn:scriptTask id="Activity_1dw9bgw" name="переменная адрес внешнего сервиса" scriptFormat="javascript"><bpmn:incoming>Flow_0xlaosm</bpmn:incoming><bpmn:outgoing>Flow_0va9l1e</bpmn:outgoing><bpmn:script>execution.setVariable("extServiceUrl", (java.lang.System).getenv("extServiceUrl"))</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0meg4o7" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"batchRequests": ${batchRequests22},
"orderID": "${PO_orderID}"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0q2qrs7</bpmn:incoming><bpmn:outgoing>Flow_1oknqc8</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1xhyy5e" default="Flow_1u9aqhd"><bpmn:incoming>Flow_1i3s3dn</bpmn:incoming><bpmn:outgoing>Flow_1u9aqhd</bpmn:outgoing><bpmn:outgoing>Flow_1tfchpe</bpmn:outgoing><bpmn:outgoing>Flow_09y7opj</bpmn:outgoing><bpmn:outgoing>Flow_1e0z475</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1u9aqhd" name="0004" sourceRef="Gateway_1xhyy5e" targetRef="Activity_1ejof1l" /><bpmn:sequenceFlow id="Flow_1tfchpe" name="0003" sourceRef="Gateway_1xhyy5e" targetRef="Activity_00ve71x"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Message == 'It is impossible to bring the portfolio to the target structure.'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_09y7opj" name="0001" sourceRef="Gateway_1xhyy5e" targetRef="Activity_0w4ui7l"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Message == 'A formed portfolio with a violation of the structure.'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1e0z475" name="0002" sourceRef="Gateway_1xhyy5e" targetRef="Activity_14qb669"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Message == 'Not enough cash to buy the portfolio.'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1colb2p" name="переменная для авторизации" scriptFormat="javascript"><bpmn:incoming>Flow_0u9es2o</bpmn:incoming><bpmn:outgoing>Flow_0q28403</bpmn:outgoing><bpmn:script>execution.setVariable("Authorization", (java.lang.System).getenv("Authorization"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0q28403" sourceRef="Activity_1colb2p" targetRef="Activity_118d607" /><bpmn:sequenceFlow id="Flow_0va9l1e" sourceRef="Activity_1dw9bgw" targetRef="Activity_1suv55l" /><bpmn:sequenceFlow id="Flow_1oknqc8" sourceRef="Activity_0meg4o7" targetRef="Activity_0shcux7" /><bpmn:serviceTask id="Activity_0du6w43" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0001"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0o6lv88</bpmn:incoming><bpmn:outgoing>Flow_1itwr9f</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1itwr9f" sourceRef="Activity_0du6w43" targetRef="Activity_163m5yn" /><bpmn:serviceTask id="Activity_1ejof1l" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0004"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1u9aqhd</bpmn:incoming><bpmn:outgoing>Flow_07aije6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_07aije6" sourceRef="Activity_1ejof1l" targetRef="Gateway_0o9rjhy" /><bpmn:serviceTask id="Activity_00ve71x" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0003"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tfchpe</bpmn:incoming><bpmn:outgoing>Flow_1bsjl8y</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1bsjl8y" sourceRef="Activity_00ve71x" targetRef="Activity_17wkgox" /><bpmn:serviceTask id="Activity_14qb669" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0002"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1e0z475</bpmn:incoming><bpmn:outgoing>Flow_037r8wg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_037r8wg" sourceRef="Activity_14qb669" targetRef="Gateway_0z094fc" /><bpmn:serviceTask id="Activity_0w4ui7l" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0001"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09y7opj</bpmn:incoming><bpmn:outgoing>Flow_18nuxu0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_18nuxu0" sourceRef="Activity_0w4ui7l" targetRef="Gateway_17c6yo9" /><bpmn:serviceTask id="Activity_1t94qtg" name="Вызов внешнего сервиса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/v1/tasks/CallExternalApi/command-executor?cmd=CallApi&amp;result=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"objectId": "${instanceId}",
"rebalancingMessage": "0004"
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wtrvqp</bpmn:incoming><bpmn:outgoing>Flow_1ocu2vp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ocu2vp" name="0004" sourceRef="Activity_1t94qtg" targetRef="Gateway_0oye2fx" /><bpmn:scriptTask id="Activity_12ps8sr" name="Преобразование пакетных заявок из фокуса - ПЗ" scriptFormat="javascript" camunda:resultVariable="batchRequests_modified"><bpmn:incoming>Flow_0t8buj3</bpmn:incoming><bpmn:outgoing>Flow_0daow5n</bpmn:outgoing><bpmn:script>var batchRequestsEzD = [];
var batchRequestsFocus =JSON.parse(RequestsFromFocus);
for (var i = 0; i &lt; batchQty; i++) 
{
   var q = new Object();
   q.instrumentName = batchRequestsFocus[i].InstrumentName;
   q.ISIN = batchRequestsFocus[i].ISIN;
   q.ClassInstrumentName = batchRequestsFocus[i].CBType;
   q.SecCode = batchRequestsFocus[i].Ticker;
   q.instrumentQuantity = batchRequestsFocus[i].Count;
   q.instrumentPrice = batchRequestsFocus[i].CleanPrice;
   q.Accrued = batchRequestsFocus[i].NKD;
   q.factAmountBefore = batchRequestsFocus[i].BeforeAmount;
   q.factWeightBefore = batchRequestsFocus[i].BeforeProportion;
   q.factClassWeightBefore = batchRequestsFocus[i].BeforeClassProportion;
   q.afterAmountBefore = batchRequestsFocus[i].AfterAmount;
   q.afterWeightBefore = batchRequestsFocus[i].AfterProportion;
   q.afterClassWeightBefore = batchRequestsFocus[i].AfterClassProportion;
   q.Bid = batchRequestsFocus[i].Bid;
   q.Ask = batchRequestsFocus[i].Ask;
   q.PriceAdjustment = batchRequestsFocus[i].PriceAdjustment;
   q.Currency = batchRequestsFocus[i].Currency;
   q.orderAmount = batchRequestsFocus[i].Sum;
   q.AfterBalance = batchRequestsFocus[i].AfterBalance;
   q.LotSize = batchRequestsFocus[i].LotSize;
   if (batchRequestsFocus[i].Side == 1)
     {q.orderDirection = "BUY";
     }
   else
     {q.orderDirection = "SELL";
      }
   batchRequestsEzD.push(q);
}
result = new Object();
result.batchRequests = batchRequestsEzD;
JSON.stringify(result);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0daow5n" sourceRef="Activity_12ps8sr" targetRef="Activity_0337fpp" /><bpmn:scriptTask id="Activity_0n9e15c" name="Преобразование пакетных заявок из фокуса - внеш.метод" scriptFormat="javascript" camunda:resultVariable="batchRequests2_modified"><bpmn:incoming>Flow_0iu07ad</bpmn:incoming><bpmn:outgoing>Flow_0fguekw</bpmn:outgoing><bpmn:script>var batchRequestsEzD = [];
var batchRequestsFocus =JSON.parse(RequestsFromFocus);
for (var i = 0; i &lt; batchQty; i++) 
{
   var q = new Object();
   q.instrumentName = batchRequestsFocus[i].InstrumentName;
   q.ISIN = batchRequestsFocus[i].ISIN;
   q.SecCode = batchRequestsFocus[i].Ticker;
   q.instrumentQuantity = batchRequestsFocus[i].Count;
   q.instrumentPrice = batchRequestsFocus[i].CleanPrice;
   q.Accrued = batchRequestsFocus[i].NKD;
   q.Bid = batchRequestsFocus[i].Bid;
   q.Ask = batchRequestsFocus[i].Ask;
   q.PriceAdjustment = batchRequestsFocus[i].PriceAdjustment;
   q.Currency = batchRequestsFocus[i].Currency;
   if (batchRequestsFocus[i].Side == 1)
     {q.orderDirection = "BUY";
     }
   else
     {q.orderDirection = "SELL";
      }
   batchRequestsEzD.push(q);
}
result = new Object();
result.batchRequests = batchRequestsEzD;
JSON.stringify(result);</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0fguekw" sourceRef="Activity_0n9e15c" targetRef="Activity_182255k" /><bpmn:exclusiveGateway id="Gateway_17c6yo9" default="Flow_1lrc6q4"><bpmn:incoming>Flow_18nuxu0</bpmn:incoming><bpmn:outgoing>Flow_14cdvyr</bpmn:outgoing><bpmn:outgoing>Flow_1lrc6q4</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_14cdvyr" name="Первичная покупка" sourceRef="Gateway_17c6yo9" targetRef="Activity_17wkgox"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1lrc6q4" name="Смена МП" sourceRef="Gateway_17c6yo9" targetRef="Activity_17wkgox" /><bpmn:serviceTask id="Activity_0as7qym" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Покупка МП. Отказ информационных систем. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="Activity_1lq9b29" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Смена МП. Веса в портфеле соответствуют МП. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0oye2fx" default="Flow_12obkos"><bpmn:incoming>Flow_1ocu2vp</bpmn:incoming><bpmn:outgoing>Flow_12obkos</bpmn:outgoing><bpmn:outgoing>Flow_0px2d2l</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_12obkos" name="Смена МП" sourceRef="Gateway_0oye2fx" targetRef="Activity_0wtlij2" /><bpmn:sequenceFlow id="Flow_0px2d2l" name="Первичная покупка" sourceRef="Gateway_0oye2fx" targetRef="Activity_0wtlij2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_13codrg" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Покупка МП. Отказ информационных систем. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0z094fc" default="Flow_08nkwag"><bpmn:incoming>Flow_037r8wg</bpmn:incoming><bpmn:outgoing>Flow_0th1umz</bpmn:outgoing><bpmn:outgoing>Flow_08nkwag</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0th1umz" name="Первичная покупка" sourceRef="Gateway_0z094fc" targetRef="Activity_17wkgox"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0so54cy" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Смена МП. Отказ информационных систем. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_08nkwag" name="Смена МП" sourceRef="Gateway_0z094fc" targetRef="Activity_17wkgox" /><bpmn:exclusiveGateway id="Gateway_0o9rjhy" default="Flow_0pxqo6v"><bpmn:incoming>Flow_07aije6</bpmn:incoming><bpmn:outgoing>Flow_0pxqo6v</bpmn:outgoing><bpmn:outgoing>Flow_18b4dgk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1317kvy" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Смена МП. Отказ информационных систем. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0pxqo6v" name="Смена МП" sourceRef="Gateway_0o9rjhy" targetRef="Activity_17wkgox" /><bpmn:sequenceFlow id="Flow_18b4dgk" name="Первичная покупка" sourceRef="Gateway_0o9rjhy" targetRef="Activity_17wkgox"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${OldModelPersPortfolio == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1ieeisn" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Покупка МП. Недостаточно денежных средств. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="Activity_0h4ff3x" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Смена МП. Недостаточно денежных средств. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="Activity_0mtx3pi" name="Отправка Email сообщения"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${connectUrl}/api/</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"subject": "Тест нотификации",
"body": "Смена МП. Веса в портфеле соответствуют МП. Идентификатор портфеля " + brokerageAccountID
}</camunda:inputParameter><camunda:outputParameter name="extResponse">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:textAnnotation id="TextAnnotation_1pzr73q"><bpmn:text>Сумма комиссии = 0</bpmn:text></bpmn:textAnnotation><bpmn:association id="Association_0txxgqu" sourceRef="Activity_11g47ao" targetRef="TextAnnotation_1pzr73q" /></bpmn:process><bpmn:signal id="Signal_1sbiakw" name="ModelPortfolioUpdateReceive${instanceId}" /><bpmn:signal id="Signal_044d8bd" name="tt" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_ModelPortfolioDefinition_402a3bdc-076e-45c9-9a4e-244ddbf47a5e"><bpmndi:BPMNEdge id="Flow_18b4dgk_di" bpmnElement="Flow_18b4dgk"><di:waypoint x="1570" y="2045" /><di:waypoint x="1570" y="2240" /><di:waypoint x="1110" y="2240" /><bpmndi:BPMNLabel><dc:Bounds x="1501" y="2046" width="57" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pxqo6v_di" bpmnElement="Flow_0pxqo6v"><di:waypoint x="1595" y="2020" /><di:waypoint x="1750" y="2020" /><di:waypoint x="1750" y="2260" /><di:waypoint x="1110" y="2260" /><bpmndi:BPMNLabel><dc:Bounds x="1622" y="1993" width="55" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08nkwag_di" bpmnElement="Flow_08nkwag"><di:waypoint x="1085" y="2020" /><di:waypoint x="1150" y="2020" /><di:waypoint x="1150" y="2220" /><di:waypoint x="1110" y="2220" /><bpmndi:BPMNLabel><dc:Bounds x="1092" y="1993" width="55" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0th1umz_di" bpmnElement="Flow_0th1umz"><di:waypoint x="1035" y="2020" /><di:waypoint x="950" y="2020" /><di:waypoint x="950" y="2220" /><di:waypoint x="1010" y="2220" /><bpmndi:BPMNLabel><dc:Bounds x="961" y="1986" width="57" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0px2d2l_di" bpmnElement="Flow_0px2d2l"><di:waypoint x="375" y="1950" /><di:waypoint x="300" y="1950" /><di:waypoint x="300" y="2170" /><di:waypoint x="350" y="2170" /><bpmndi:BPMNLabel><dc:Bounds x="289" y="1916" width="57" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12obkos_di" bpmnElement="Flow_12obkos"><di:waypoint x="400" y="1975" /><di:waypoint x="400" y="2130" /><bpmndi:BPMNLabel><dc:Bounds x="412" y="1993" width="55" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lrc6q4_di" bpmnElement="Flow_1lrc6q4"><di:waypoint x="700" y="2045" /><di:waypoint x="700" y="2240" /><di:waypoint x="1010" y="2240" /><bpmndi:BPMNLabel><dc:Bounds x="713" y="2063" width="55" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14cdvyr_di" bpmnElement="Flow_14cdvyr"><di:waypoint x="675" y="2020" /><di:waypoint x="620" y="2020" /><di:waypoint x="620" y="2260" /><di:waypoint x="1010" y="2260" /><bpmndi:BPMNLabel><dc:Bounds x="611" y="1986" width="57" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fguekw_di" bpmnElement="Flow_0fguekw"><di:waypoint x="2220" y="1435" /><di:waypoint x="2260" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0daow5n_di" bpmnElement="Flow_0daow5n"><di:waypoint x="1960" y="1435" /><di:waypoint x="2000" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ocu2vp_di" bpmnElement="Flow_1ocu2vp"><di:waypoint x="400" y="1860" /><di:waypoint x="400" y="1925" /><bpmndi:BPMNLabel><dc:Bounds x="417" y="1890" width="26" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18nuxu0_di" bpmnElement="Flow_18nuxu0"><di:waypoint x="700" y="1960" /><di:waypoint x="700" y="1995" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_037r8wg_di" bpmnElement="Flow_037r8wg"><di:waypoint x="1060" y="1960" /><di:waypoint x="1060" y="1995" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bsjl8y_di" bpmnElement="Flow_1bsjl8y"><di:waypoint x="1310" y="1960" /><di:waypoint x="1310" y="2220" /><di:waypoint x="1110" y="2220" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07aije6_di" bpmnElement="Flow_07aije6"><di:waypoint x="1570" y="1960" /><di:waypoint x="1570" y="1995" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1itwr9f_di" bpmnElement="Flow_1itwr9f"><di:waypoint x="1930" y="1670" /><di:waypoint x="4145" y="1670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oknqc8_di" bpmnElement="Flow_1oknqc8"><di:waypoint x="2855" y="1435" /><di:waypoint x="2925" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0va9l1e_di" bpmnElement="Flow_0va9l1e"><di:waypoint x="970" y="190" /><di:waypoint x="1120" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q28403_di" bpmnElement="Flow_0q28403"><di:waypoint x="2080" y="120" /><di:waypoint x="2080" y="150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1e0z475_di" bpmnElement="Flow_1e0z475"><di:waypoint x="1060" y="1845" /><di:waypoint x="1060" y="1880" /><bpmndi:BPMNLabel><dc:Bounds x="1067" y="1860" width="25" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09y7opj_di" bpmnElement="Flow_09y7opj"><di:waypoint x="1035" y="1820" /><di:waypoint x="700" y="1820" /><di:waypoint x="700" y="1880" /><bpmndi:BPMNLabel><dc:Bounds x="987" y="1793" width="25" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tfchpe_di" bpmnElement="Flow_1tfchpe"><di:waypoint x="1085" y="1820" /><di:waypoint x="1310" y="1820" /><di:waypoint x="1310" y="1880" /><bpmndi:BPMNLabel><dc:Bounds x="1203" y="1823" width="25" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u9aqhd_di" bpmnElement="Flow_1u9aqhd"><di:waypoint x="1065" y="1800" /><di:waypoint x="1570" y="1800" /><di:waypoint x="1570" y="1880" /><bpmndi:BPMNLabel><dc:Bounds x="1381" y="1803" width="26" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1d7jp8q_di" bpmnElement="Flow_1d7jp8q"><di:waypoint x="2360" y="1435" /><di:waypoint x="2475" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06v4g2w_di" bpmnElement="Flow_06v4g2w"><di:waypoint x="3930" y="2055" /><di:waypoint x="3980" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nkmc8b_di" bpmnElement="Flow_0nkmc8b"><di:waypoint x="370" y="1270" /><di:waypoint x="240" y="1270" /><di:waypoint x="240" y="1395" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0o6lv88_di" bpmnElement="Flow_0o6lv88"><di:waypoint x="1700" y="1670" /><di:waypoint x="1830" y="1670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gqdqxx_di" bpmnElement="Flow_1gqdqxx"><di:waypoint x="1650" y="1590" /><di:waypoint x="1650" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pl2wyc_di" bpmnElement="Flow_1pl2wyc"><di:waypoint x="1650" y="1460" /><di:waypoint x="1650" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18jf4lt_di" bpmnElement="Flow_18jf4lt"><di:waypoint x="1675" y="1435" /><di:waypoint x="1730" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0on7yau_di" bpmnElement="Flow_0on7yau"><di:waypoint x="2130" y="190" /><di:waypoint x="2195" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iu07ad_di" bpmnElement="Flow_0iu07ad"><di:waypoint x="2100" y="1435" /><di:waypoint x="2120" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_123dgo8_di" bpmnElement="Flow_123dgo8"><di:waypoint x="690" y="1435" /><di:waypoint x="1035" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t8buj3_di" bpmnElement="Flow_0t8buj3"><di:waypoint x="1830" y="1435" /><di:waypoint x="1860" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jq9ux3_di" bpmnElement="Flow_1jq9ux3"><di:waypoint x="1060" y="1460" /><di:waypoint x="1060" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_049xo1u_di" bpmnElement="Flow_049xo1u"><di:waypoint x="1060" y="2280" /><di:waypoint x="1060" y="2352" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1i3s3dn_di" bpmnElement="Flow_1i3s3dn"><di:waypoint x="1060" y="1710" /><di:waypoint x="1060" y="1795" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mjsiyp_di" bpmnElement="Flow_1mjsiyp"><di:waypoint x="1060" y="1590" /><di:waypoint x="1060" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pefc7u_di" bpmnElement="Flow_1pefc7u"><di:waypoint x="1085" y="1435" /><di:waypoint x="1625" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jreefj_di" bpmnElement="Flow_1jreefj"><di:waypoint x="4150" y="470" /><di:waypoint x="4150" y="940" /><di:waypoint x="830" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_117ujf1_di" bpmnElement="Flow_117ujf1"><di:waypoint x="4195" y="1710" /><di:waypoint x="4195" y="1920" /><di:waypoint x="3600" y="1920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11vz7z1_di" bpmnElement="Flow_11vz7z1"><di:waypoint x="400" y="1460" /><di:waypoint x="400" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01j16ff_di" bpmnElement="Flow_01j16ff"><di:waypoint x="400" y="2210" /><di:waypoint x="400" y="2272" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wtrvqp_di" bpmnElement="Flow_1wtrvqp"><di:waypoint x="400" y="1710" /><di:waypoint x="400" y="1780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qwpf8o_di" bpmnElement="Flow_1qwpf8o"><di:waypoint x="400" y="1590" /><di:waypoint x="400" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05rishb_di" bpmnElement="Flow_05rishb"><di:waypoint x="425" y="1435" /><di:waypoint x="590" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17ube34_di" bpmnElement="Flow_17ube34"><di:waypoint x="290" y="1435" /><di:waypoint x="375" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u9es2o_di" bpmnElement="Flow_0u9es2o"><di:waypoint x="1990" y="190" /><di:waypoint x="2010" y="190" /><di:waypoint x="2010" y="80" /><di:waypoint x="2030" y="80" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_176fnya_di" bpmnElement="Flow_176fnya"><di:waypoint x="3980" y="600" /><di:waypoint x="3980" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11wpxdi_di" bpmnElement="Flow_11wpxdi"><di:waypoint x="3780" y="600" /><di:waypoint x="3780" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zgjgd5_di" bpmnElement="Flow_0zgjgd5"><di:waypoint x="3580" y="600" /><di:waypoint x="3580" y="650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11800p2_di" bpmnElement="Flow_11800p2"><di:waypoint x="3370" y="590" /><di:waypoint x="3370" y="650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1i3c7qm_di" bpmnElement="Flow_1i3c7qm"><di:waypoint x="2930" y="480" /><di:waypoint x="2930" y="560" /><di:waypoint x="2580" y="560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dbm6gs_di" bpmnElement="Flow_0dbm6gs"><di:waypoint x="2730" y="470" /><di:waypoint x="2730" y="560" /><di:waypoint x="2580" y="560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1iz1v0t_di" bpmnElement="Flow_1iz1v0t"><di:waypoint x="2530" y="460" /><di:waypoint x="2530" y="520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_073euxm_di" bpmnElement="Flow_073euxm"><di:waypoint x="2220" y="590" /><di:waypoint x="2220" y="650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gh0avp_di" bpmnElement="Flow_0gh0avp"><di:waypoint x="1630" y="590" /><di:waypoint x="1630" y="640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b7e4y8_di" bpmnElement="Flow_1b7e4y8"><di:waypoint x="1300" y="570" /><di:waypoint x="1300" y="650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cceyx2_di" bpmnElement="Flow_0cceyx2"><di:waypoint x="600" y="1270" /><di:waypoint x="470" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ac8ch4_di" bpmnElement="Flow_0ac8ch4"><di:waypoint x="930" y="1090" /><di:waypoint x="930" y="1150" /><di:waypoint x="830" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vwx2jo_di" bpmnElement="Flow_1vwx2jo"><di:waypoint x="630" y="1090" /><di:waypoint x="630" y="1150" /><di:waypoint x="730" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04wzukd_di" bpmnElement="Flow_04wzukd"><di:waypoint x="755" y="1050" /><di:waypoint x="690" y="1050" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ctr7mk_di" bpmnElement="Flow_1ctr7mk"><di:waypoint x="805" y="1050" /><di:waypoint x="880" y="1050" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q2qrs7_di" bpmnElement="Flow_0q2qrs7"><di:waypoint x="2705" y="1435" /><di:waypoint x="2755" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1coic0x_di" bpmnElement="Flow_1coic0x"><di:waypoint x="780" y="980" /><di:waypoint x="780" y="1025" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0x4oq56_di" bpmnElement="Flow_0x4oq56"><di:waypoint x="2575" y="1435" /><di:waypoint x="2605" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ij8stz_di" bpmnElement="Flow_0ij8stz"><di:waypoint x="3775" y="2055" /><di:waypoint x="3830" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00u1f46_di" bpmnElement="Flow_00u1f46"><di:waypoint x="3750" y="2080" /><di:waypoint x="3750" y="2130" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wc5k4l_di" bpmnElement="Flow_1wc5k4l"><di:waypoint x="3750" y="2210" /><di:waypoint x="3750" y="2272" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tz5r8j_di" bpmnElement="Flow_1tz5r8j"><di:waypoint x="3600" y="2055" /><di:waypoint x="3725" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pni619_di" bpmnElement="Flow_1pni619"><di:waypoint x="4195" y="1375" /><di:waypoint x="4195" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w0vap0_di" bpmnElement="Flow_0w0vap0"><di:waypoint x="3025" y="1435" /><di:waypoint x="3090" y="1435" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15qfpc9_di" bpmnElement="Flow_15qfpc9"><di:waypoint x="4385" y="1350" /><di:waypoint x="4447" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_196e9f2_di" bpmnElement="Flow_196e9f2"><di:waypoint x="4220" y="1350" /><di:waypoint x="4285" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10h3hfa_di" bpmnElement="Flow_10h3hfa"><di:waypoint x="4120" y="1350" /><di:waypoint x="4170" y="1350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dzvonl_di" bpmnElement="Flow_0dzvonl"><di:waypoint x="4670" y="2055" /><di:waypoint x="4732" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14p5jy0_di" bpmnElement="Flow_14p5jy0"><di:waypoint x="4190" y="2190" /><di:waypoint x="4290" y="2190" /><di:waypoint x="4290" y="2095" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1atm4ql_di" bpmnElement="Flow_1atm4ql"><di:waypoint x="4340" y="2055" /><di:waypoint x="4400" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ylgo27_di" bpmnElement="Flow_0ylgo27"><di:waypoint x="4500" y="2055" /><di:waypoint x="4570" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xrjxav_di" bpmnElement="Flow_0xrjxav"><di:waypoint x="4165" y="2055" /><di:waypoint x="4240" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zccj18_di" bpmnElement="Flow_0zccj18"><di:waypoint x="4140" y="2080" /><di:waypoint x="4140" y="2150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00uba6o_di" bpmnElement="Flow_00uba6o"><di:waypoint x="4080" y="2055" /><di:waypoint x="4115" y="2055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u7851w_di" bpmnElement="Flow_1u7851w"><di:waypoint x="4150" y="230" /><di:waypoint x="4150" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_192c47z_di" bpmnElement="Flow_192c47z"><di:waypoint x="780" y="1190" /><di:waypoint x="780" y="1270" /><di:waypoint x="700" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0yp2221_di" bpmnElement="Flow_0yp2221"><di:waypoint x="3980" y="215" /><di:waypoint x="3980" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="3965" y="240" width="61" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h8c8np_di" bpmnElement="Flow_0h8c8np"><di:waypoint x="4005" y="190" /><di:waypoint x="4100" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e0txyi_di" bpmnElement="Flow_0e0txyi"><di:waypoint x="3780" y="215" /><di:waypoint x="3780" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="3757" y="240" width="78" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mwcjv1_di" bpmnElement="Flow_1mwcjv1"><di:waypoint x="3805" y="190" /><di:waypoint x="3955" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18v4tq8_di" bpmnElement="Flow_18v4tq8"><di:waypoint x="3605" y="190" /><di:waypoint x="3755" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04nib0u_di" bpmnElement="Flow_04nib0u"><di:waypoint x="3580" y="215" /><di:waypoint x="3580" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="3585" y="226" width="50" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_134rpak_di" bpmnElement="Flow_134rpak"><di:waypoint x="3395" y="190" /><di:waypoint x="3555" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ca3ek9_di" bpmnElement="Flow_1ca3ek9"><di:waypoint x="3370" y="215" /><di:waypoint x="3370" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="3371" y="220" width="58" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vnuf6j_di" bpmnElement="Flow_1vnuf6j"><di:waypoint x="3130" y="190" /><di:waypoint x="3345" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cbneiz_di" bpmnElement="Flow_0cbneiz"><di:waypoint x="3370" y="730" /><di:waypoint x="3370" y="782" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kac9wf_di" bpmnElement="Flow_1kac9wf"><di:waypoint x="3370" y="470" /><di:waypoint x="3370" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0m3mqjt_di" bpmnElement="Flow_0m3mqjt"><di:waypoint x="3370" y="350" /><di:waypoint x="3370" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oxhg55_di" bpmnElement="Flow_1oxhg55"><di:waypoint x="3980" y="740" /><di:waypoint x="3980" y="782" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0acolhu_di" bpmnElement="Flow_0acolhu"><di:waypoint x="3980" y="470" /><di:waypoint x="3980" y="520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cerfbt_di" bpmnElement="Flow_0cerfbt"><di:waypoint x="3980" y="350" /><di:waypoint x="3980" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04owvxf_di" bpmnElement="Flow_04owvxf"><di:waypoint x="3780" y="850" /><di:waypoint x="3780" y="872" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rj8sml_di" bpmnElement="Flow_0rj8sml"><di:waypoint x="3780" y="470" /><di:waypoint x="3780" y="520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cvvk06_di" bpmnElement="Flow_0cvvk06"><di:waypoint x="3780" y="350" /><di:waypoint x="3780" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ilq9le_di" bpmnElement="Flow_1ilq9le"><di:waypoint x="3580" y="730" /><di:waypoint x="3580" y="772" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07iwwbz_di" bpmnElement="Flow_07iwwbz"><di:waypoint x="3580" y="470" /><di:waypoint x="3580" y="520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pwgt4x_di" bpmnElement="Flow_0pwgt4x"><di:waypoint x="3580" y="350" /><di:waypoint x="3580" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_199se8v_di" bpmnElement="Flow_199se8v"><di:waypoint x="2955" y="190" /><di:waypoint x="3030" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1h46eaq_di" bpmnElement="Flow_1h46eaq"><di:waypoint x="2930" y="215" /><di:waypoint x="2930" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="2910" y="240" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wtrsht_di" bpmnElement="Flow_1wtrsht"><di:waypoint x="2530" y="720" /><di:waypoint x="2530" y="772" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0r0zmjm_di" bpmnElement="Flow_0r0zmjm"><di:waypoint x="2530" y="600" /><di:waypoint x="2530" y="640" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nuhzqt_di" bpmnElement="Flow_0nuhzqt"><di:waypoint x="2930" y="350" /><di:waypoint x="2930" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xho3cv_di" bpmnElement="Flow_0xho3cv"><di:waypoint x="2530" y="350" /><di:waypoint x="2530" y="380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kaj37m_di" bpmnElement="Flow_0kaj37m"><di:waypoint x="2530" y="215" /><di:waypoint x="2530" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="2545" y="240" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uyndi8_di" bpmnElement="Flow_0uyndi8"><di:waypoint x="2730" y="350" /><di:waypoint x="2730" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_050bwah_di" bpmnElement="Flow_050bwah"><di:waypoint x="2755" y="190" /><di:waypoint x="2905" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03k57e2_di" bpmnElement="Flow_03k57e2"><di:waypoint x="2730" y="215" /><di:waypoint x="2730" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="2745" y="240" width="70" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_128lzkq_di" bpmnElement="Flow_128lzkq"><di:waypoint x="2555" y="190" /><di:waypoint x="2705" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0nyiu44_di" bpmnElement="Flow_0nyiu44"><di:waypoint x="2410" y="190" /><di:waypoint x="2505" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t4hw68_di" bpmnElement="Flow_0t4hw68"><di:waypoint x="1220" y="190" /><di:waypoint x="1275" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fb4pr9_di" bpmnElement="Flow_1fb4pr9"><di:waypoint x="1300" y="730" /><di:waypoint x="1300" y="762" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zswsmo_di" bpmnElement="Flow_0zswsmo"><di:waypoint x="1300" y="470" /><di:waypoint x="1300" y="490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0sxp2lz_di" bpmnElement="Flow_0sxp2lz"><di:waypoint x="1300" y="350" /><di:waypoint x="1300" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01iv2cl_di" bpmnElement="Flow_01iv2cl"><di:waypoint x="1300" y="215" /><di:waypoint x="1300" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="1288" y="240" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g2k4n0_di" bpmnElement="Flow_1g2k4n0"><di:waypoint x="2220" y="730" /><di:waypoint x="2220" y="762" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0yodx6k_di" bpmnElement="Flow_0yodx6k"><di:waypoint x="2220" y="470" /><di:waypoint x="2220" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d7s5jj_di" bpmnElement="Flow_0d7s5jj"><di:waypoint x="2220" y="350" /><di:waypoint x="2220" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14nvzij_di" bpmnElement="Flow_14nvzij"><di:waypoint x="2220" y="215" /><di:waypoint x="2220" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="2224" y="233" width="72" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hsva92_di" bpmnElement="Flow_0hsva92"><di:waypoint x="2245" y="190" /><di:waypoint x="2310" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z1otb8_di" bpmnElement="Flow_0z1otb8"><di:waypoint x="1630" y="720" /><di:waypoint x="1630" y="762" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gujyk3_di" bpmnElement="Flow_1gujyk3"><di:waypoint x="1630" y="480" /><di:waypoint x="1630" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mqti8e_di" bpmnElement="Flow_1mqti8e"><di:waypoint x="1630" y="350" /><di:waypoint x="1630" y="400" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aqx0be_di" bpmnElement="Flow_0aqx0be"><di:waypoint x="1840" y="190" /><di:waypoint x="1890" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00h25wn_di" bpmnElement="Flow_00h25wn"><di:waypoint x="1630" y="215" /><di:waypoint x="1630" y="270" /><bpmndi:BPMNLabel><dc:Bounds x="1626" y="234" width="55" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0imskkr_di" bpmnElement="Flow_0imskkr"><di:waypoint x="1655" y="190" /><di:waypoint x="1740" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14vlpaz_di" bpmnElement="Flow_14vlpaz"><di:waypoint x="1500" y="190" /><di:waypoint x="1605" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18ucu2p_di" bpmnElement="Flow_18ucu2p"><di:waypoint x="1325" y="190" /><di:waypoint x="1400" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xlaosm_di" bpmnElement="Flow_0xlaosm"><di:waypoint x="780" y="190" /><di:waypoint x="870" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14d6i5d_di" bpmnElement="Flow_14d6i5d"><di:waypoint x="630" y="190" /><di:waypoint x="680" y="190" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or7jn6_di" bpmnElement="SequenceFlow_0or7jn6"><di:waypoint x="468" y="190" /><di:waypoint x="530" y="190" /><bpmndi:BPMNLabel><dc:Bounds x="228" y="114" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="432" y="172" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0djl7a3_di" bpmnElement="EndEvent_0djl7a3"><dc:Bounds x="4732" y="2037" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1064" y="142" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0lrzoz2_di" bpmnElement="Activity_0lrzoz2"><dc:Bounds x="530" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1l1z9c4_di" bpmnElement="Activity_1l1z9c4"><dc:Bounds x="680" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1suv55l_di" bpmnElement="Activity_1suv55l"><dc:Bounds x="1120" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15k5gxt_di" bpmnElement="Activity_15k5gxt"><dc:Bounds x="1400" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1h90nxo_di" bpmnElement="Gateway_1h90nxo" isMarkerVisible="true"><dc:Bounds x="1605" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0f7x9aj_di" bpmnElement="Activity_0f7x9aj"><dc:Bounds x="1740" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ex1nte_di" bpmnElement="Activity_1ex1nte"><dc:Bounds x="1580" y="400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0ir2u7z_di" bpmnElement="Event_0ir2u7z"><dc:Bounds x="1612" y="762" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0b8squy_di" bpmnElement="Activity_0b8squy"><dc:Bounds x="1580" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0aq88c0_di" bpmnElement="Activity_0aq88c0"><dc:Bounds x="1580" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dkne1p_di" bpmnElement="Gateway_0dkne1p" isMarkerVisible="true"><dc:Bounds x="2195" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tcfilz_di" bpmnElement="Activity_0tcfilz"><dc:Bounds x="2170" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1ltq2ep_di" bpmnElement="Event_1ltq2ep"><dc:Bounds x="2202" y="762" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0lhjy7g_di" bpmnElement="Activity_0lhjy7g"><dc:Bounds x="2170" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1q1dd8v_di" bpmnElement="Activity_1q1dd8v"><dc:Bounds x="2170" y="650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0x18bea_di" bpmnElement="Activity_0x18bea"><dc:Bounds x="2310" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0mnw43j_di" bpmnElement="Gateway_0mnw43j" isMarkerVisible="true"><dc:Bounds x="1275" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0enway5_di" bpmnElement="Activity_0enway5"><dc:Bounds x="1250" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0qlz2kp_di" bpmnElement="Event_0qlz2kp"><dc:Bounds x="1282" y="762" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12pgnsb_di" bpmnElement="Activity_12pgnsb"><dc:Bounds x="1250" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0f9xre0_di" bpmnElement="Activity_0f9xre0"><dc:Bounds x="1250" y="650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1bn1fw9_di" bpmnElement="Gateway_1bn1fw9" isMarkerVisible="true"><dc:Bounds x="2705" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wgtwf9_di" bpmnElement="Activity_1wgtwf9"><dc:Bounds x="2680" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_130xqku_di" bpmnElement="Gateway_130xqku" isMarkerVisible="true"><dc:Bounds x="2505" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1weq9m7_di" bpmnElement="Activity_1weq9m7"><dc:Bounds x="2480" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1o20uv7_di" bpmnElement="Activity_1o20uv7"><dc:Bounds x="2480" y="520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nbbh37_di" bpmnElement="Activity_1nbbh37"><dc:Bounds x="2480" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0rehsc5_di" bpmnElement="Event_0rehsc5"><dc:Bounds x="2512" y="772" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0bpkq1y_di" bpmnElement="Gateway_0bpkq1y" isMarkerVisible="true"><dc:Bounds x="2905" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1j1x2fo_di" bpmnElement="Activity_1j1x2fo"><dc:Bounds x="2880" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_089kur9_di" bpmnElement="Activity_089kur9"><dc:Bounds x="3030" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1y1ceb5_di" bpmnElement="Activity_1y1ceb5"><dc:Bounds x="3530" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0jqhszk_di" bpmnElement="Event_0jqhszk"><dc:Bounds x="3562" y="772" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ez2pwn_di" bpmnElement="Activity_1ez2pwn"><dc:Bounds x="3530" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0z24as7_di" bpmnElement="Activity_0z24as7"><dc:Bounds x="3530" y="650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0roeuz4_di" bpmnElement="Activity_0roeuz4"><dc:Bounds x="3730" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0izsrk6_di" bpmnElement="Event_0izsrk6"><dc:Bounds x="3762" y="872" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fnwlaw_di" bpmnElement="Activity_0fnwlaw"><dc:Bounds x="3730" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05fra27_di" bpmnElement="Activity_05fra27"><dc:Bounds x="3730" y="770" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08wnqix_di" bpmnElement="Activity_08wnqix"><dc:Bounds x="3930" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1pk99aq_di" bpmnElement="Event_1pk99aq"><dc:Bounds x="3962" y="782" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06yuavg_di" bpmnElement="Activity_06yuavg"><dc:Bounds x="3930" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qdal0b_di" bpmnElement="Activity_0qdal0b"><dc:Bounds x="3930" y="660" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0p7hddl_di" bpmnElement="Activity_0p7hddl"><dc:Bounds x="4100" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1repj0r_di" bpmnElement="Activity_1repj0r"><dc:Bounds x="3320" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1tv9m4i_di" bpmnElement="Event_1tv9m4i"><dc:Bounds x="3352" y="782" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09vxioh_di" bpmnElement="Activity_09vxioh"><dc:Bounds x="3320" y="270" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zub4zv_di" bpmnElement="Activity_0zub4zv"><dc:Bounds x="3320" y="650" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0j8i74f_di" bpmnElement="Gateway_0j8i74f" isMarkerVisible="true"><dc:Bounds x="3345" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1okly9m_di" bpmnElement="Gateway_1xnoqtf" isMarkerVisible="true"><dc:Bounds x="3555" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0v73z3m_di" bpmnElement="Gateway_0cu19i2" isMarkerVisible="true"><dc:Bounds x="3755" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0aghyfw_di" bpmnElement="Gateway_0dzsz65" isMarkerVisible="true"><dc:Bounds x="3955" y="165" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03apjjf_di" bpmnElement="Activity_03apjjf"><dc:Bounds x="730" y="1110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0shcux7_di" bpmnElement="Activity_0shcux7"><dc:Bounds x="2925" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1tuc2rn_di" bpmnElement="Activity_1tuc2rn" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="600" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1a67doq_di" bpmnElement="Activity_1a67doq" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="4570" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1b25yob_di" bpmnElement="Activity_1b25yob"><dc:Bounds x="4240" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_18nriwm_di" bpmnElement="Activity_18nriwm"><dc:Bounds x="4400" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gejljm_di" bpmnElement="Activity_0gejljm"><dc:Bounds x="3980" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ob9x1c_di" bpmnElement="Gateway_1ob9x1c" isMarkerVisible="true"><dc:Bounds x="4115" y="2030" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03hfnw2_di" bpmnElement="Activity_03hfnw2"><dc:Bounds x="4090" y="2150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ffvnu0_di" bpmnElement="Activity_0ffvnu0" isExpanded="true"><dc:Bounds x="3090" y="1110" width="1030" height="430" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1d6xnib_di" bpmnElement="Flow_1d6xnib"><di:waypoint x="3750" y="1405" /><di:waypoint x="3750" y="1480" /><di:waypoint x="3320" y="1480" /><di:waypoint x="3320" y="1398" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lxg0au_di" bpmnElement="Flow_1lxg0au"><di:waypoint x="3775" y="1380" /><di:waypoint x="3850" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_030s3f7_di" bpmnElement="Flow_030s3f7"><di:waypoint x="3650" y="1380" /><di:waypoint x="3725" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qmy01l_di" bpmnElement="Flow_0qmy01l"><di:waypoint x="3950" y="1380" /><di:waypoint x="4002" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08ax8pi_di" bpmnElement="Flow_08ax8pi"><di:waypoint x="3510" y="1380" /><di:waypoint x="3550" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wzztzz_di" bpmnElement="Flow_1wzztzz"><di:waypoint x="3338" y="1380" /><di:waypoint x="3410" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ya5udp_di" bpmnElement="Flow_0ya5udp"><di:waypoint x="3830" y="1230" /><di:waypoint x="4012" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b92yij_di" bpmnElement="Flow_1b92yij"><di:waypoint x="3570" y="1230" /><di:waypoint x="3730" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10w6yrd_di" bpmnElement="Flow_10w6yrd"><di:waypoint x="3368" y="1230" /><di:waypoint x="3470" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_010xtsr_di" bpmnElement="Flow_010xtsr"><di:waypoint x="3240" y="1355" /><di:waypoint x="3240" y="1230" /><di:waypoint x="3332" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1v4efnh_di" bpmnElement="Flow_1v4efnh"><di:waypoint x="3265" y="1380" /><di:waypoint x="3302" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_147hnca_di" bpmnElement="Flow_147hnca"><di:waypoint x="3158" y="1380" /><di:waypoint x="3215" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0h7m4ea_di" bpmnElement="Event_0h7m4ea"><dc:Bounds x="3122" y="1362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0oczhbo_di" bpmnElement="Gateway_1qbojfa"><dc:Bounds x="3215" y="1355" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1021vem_di" bpmnElement="Event_1u28s4q"><dc:Bounds x="3302" y="1362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1nmqfy8_di" bpmnElement="Event_1xtxfz1"><dc:Bounds x="3332" y="1212" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0x6hdc0_di" bpmnElement="Activity_0x6hdc0"><dc:Bounds x="3470" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10ie14y_di" bpmnElement="Activity_10ie14y"><dc:Bounds x="3730" y="1190" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1f2xb97_di" bpmnElement="Activity_1f2xb97"><dc:Bounds x="3850" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11xqjqj_di" bpmnElement="Activity_11xqjqj"><dc:Bounds x="3410" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0fkelx9_di" bpmnElement="Event_1o5aswp"><dc:Bounds x="4012" y="1212" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1uex9yd_di" bpmnElement="Event_0kfr1hz"><dc:Bounds x="4002" y="1362" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1grgg4h_di" bpmnElement="Activity_1grgg4h" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3550" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_00n2ifi_di" bpmnElement="Gateway_00n2ifi" isMarkerVisible="true"><dc:Bounds x="3725" y="1355" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_012xc29_di" bpmnElement="Gateway_012xc29" isMarkerVisible="true"><dc:Bounds x="4170" y="1325" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0thrtol_di" bpmnElement="Activity_0thrtol"><dc:Bounds x="4285" y="1310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0m9oqe3_di" bpmnElement="Event_0m9oqe3"><dc:Bounds x="4447" y="1332" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1sdl6qi_di" bpmnElement="Activity_1sdl6qi" isExpanded="true"><dc:Bounds x="2570" y="1840" width="1030" height="430" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0q3fb65_di" bpmnElement="Flow_0q3fb65"><di:waypoint x="3045" y="2110" /><di:waypoint x="3205" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pkoh8p_di" bpmnElement="Flow_0pkoh8p"><di:waypoint x="3230" y="2135" /><di:waypoint x="3230" y="2210" /><di:waypoint x="2800" y="2210" /><di:waypoint x="2800" y="2128" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1sq2xaj_di" bpmnElement="Flow_1sq2xaj"><di:waypoint x="3255" y="2110" /><di:waypoint x="3330" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nmfmbv_di" bpmnElement="Flow_1nmfmbv"><di:waypoint x="3430" y="2110" /><di:waypoint x="3482" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g9qt4e_di" bpmnElement="Flow_0g9qt4e"><di:waypoint x="2818" y="2110" /><di:waypoint x="2945" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e8daac_di" bpmnElement="Flow_0e8daac"><di:waypoint x="3310" y="1960" /><di:waypoint x="3492" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1828b4u_di" bpmnElement="Flow_1828b4u"><di:waypoint x="3050" y="1960" /><di:waypoint x="3210" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13efhez_di" bpmnElement="Flow_13efhez"><di:waypoint x="2848" y="1960" /><di:waypoint x="2950" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10nip1o_di" bpmnElement="Flow_10nip1o"><di:waypoint x="2720" y="2085" /><di:waypoint x="2720" y="1960" /><di:waypoint x="2812" y="1960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pw621l_di" bpmnElement="Flow_0pw621l"><di:waypoint x="2745" y="2110" /><di:waypoint x="2782" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0smd7wa_di" bpmnElement="Flow_0smd7wa"><di:waypoint x="2638" y="2110" /><di:waypoint x="2695" y="2110" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_16cbhe1_di" bpmnElement="Event_16cbhe1"><dc:Bounds x="2602" y="2092" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0c3c5ef_di" bpmnElement="Gateway_0c3c5ef"><dc:Bounds x="2695" y="2085" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1jctc40_di" bpmnElement="Event_1jctc40"><dc:Bounds x="2812" y="1942" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n6hp2x_di" bpmnElement="Activity_0n6hp2x"><dc:Bounds x="2950" y="1920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1fwv3n5_di" bpmnElement="Event_1fwv3n5"><dc:Bounds x="2782" y="2092" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0r43ue0_di" bpmnElement="Activity_0r43ue0"><dc:Bounds x="3210" y="1920" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_13v6k8q_di" bpmnElement="Event_13v6k8q"><dc:Bounds x="3492" y="1942" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_07m7bze_di" bpmnElement="Activity_07m7bze"><dc:Bounds x="3330" y="2070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_15wgo1s_di" bpmnElement="Event_15wgo1s"><dc:Bounds x="3482" y="2092" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_089xzw9_di" bpmnElement="Gateway_089xzw9" isMarkerVisible="true"><dc:Bounds x="3205" y="2085" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1op2xwg_di" bpmnElement="Activity_1op2xwg"><dc:Bounds x="2945" y="2070" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1cbpuw5_di" bpmnElement="Gateway_1cbpuw5" isMarkerVisible="true"><dc:Bounds x="3725" y="2030" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0npxbv4_di" bpmnElement="Activity_0npxbv4"><dc:Bounds x="3700" y="2130" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1n9tjrj_di" bpmnElement="Event_1n9tjrj"><dc:Bounds x="3732" y="2272" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11g47ao_di" bpmnElement="Activity_11g47ao" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="2475" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hm34er_di" bpmnElement="Activity_1hm34er"><dc:Bounds x="730" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0sph9pc_di" bpmnElement="Activity_0sph9pc"><dc:Bounds x="2755" y="1110" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gcho1e_di" bpmnElement="Activity_1gcho1e"><dc:Bounds x="2605" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0337fpp_di" bpmnElement="Activity_0337fpp"><dc:Bounds x="2000" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1hxdabx_di" bpmnElement="Gateway_1hxdabx" isMarkerVisible="true"><dc:Bounds x="755" y="1025" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0pa8g0k_di" bpmnElement="Activity_0pa8g0k"><dc:Bounds x="590" y="1010" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19in12a_di" bpmnElement="Activity_19in12a"><dc:Bounds x="880" y="1010" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jc39r8_di" bpmnElement="Activity_1jc39r8"><dc:Bounds x="1250" y="490" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rc8xmv_di" bpmnElement="Activity_1rc8xmv"><dc:Bounds x="1580" y="510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0uq4mr1_di" bpmnElement="Activity_0uq4mr1"><dc:Bounds x="2170" y="510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yxhjcn_di" bpmnElement="Activity_1yxhjcn"><dc:Bounds x="2480" y="380" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mymt8d_di" bpmnElement="Activity_1mymt8d"><dc:Bounds x="2680" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_156ujjx_di" bpmnElement="Activity_156ujjx"><dc:Bounds x="2880" y="400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0nuhmcm_di" bpmnElement="Activity_0nuhmcm"><dc:Bounds x="3320" y="510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wsn4e0_di" bpmnElement="Activity_0wsn4e0"><dc:Bounds x="3530" y="520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1aqf7bk_di" bpmnElement="Activity_1aqf7bk"><dc:Bounds x="3730" y="520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_184fwjc_di" bpmnElement="Activity_184fwjc"><dc:Bounds x="3930" y="520" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02f6qgs_di" bpmnElement="Activity_02f6qgs" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="1890" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0nxi1bw_di" bpmnElement="Activity_0nxi1bw" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="190" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dmk19v_di" bpmnElement="Gateway_0hg1nj6" isMarkerVisible="true"><dc:Bounds x="375" y="1410" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13801np_di" bpmnElement="Activity_13801np"><dc:Bounds x="350" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_15ydqe6_di" bpmnElement="Event_15ydqe6"><dc:Bounds x="382" y="2272" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ys8tve_di" bpmnElement="Activity_0ys8tve"><dc:Bounds x="350" y="1510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wtlij2_di" bpmnElement="Activity_0wtlij2"><dc:Bounds x="350" y="2130" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_163m5yn_di" bpmnElement="Activity_163m5yn"><dc:Bounds x="4145" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ew9u4v_di" bpmnElement="Activity_0ew9u4v"><dc:Bounds x="4100" y="390" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rvhowg_di" bpmnElement="Activity_0rvhowg" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="590" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dapb0h_di" bpmnElement="Activity_0dapb0h" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="1730" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1r2dlj3_di" bpmnElement="Gateway_1r2dlj3" isMarkerVisible="true"><dc:Bounds x="1035" y="1410" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0yz7b5c_di" bpmnElement="Activity_0yz7b5c"><dc:Bounds x="1010" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1y3oewm_di" bpmnElement="Event_1y3oewm"><dc:Bounds x="1042" y="2352" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02v9tdm_di" bpmnElement="Activity_02v9tdm"><dc:Bounds x="1010" y="1510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17wkgox_di" bpmnElement="Activity_17wkgox"><dc:Bounds x="1010" y="2200" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0cs3woj_di" bpmnElement="Activity_0cs3woj"><dc:Bounds x="370" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_118d607_di" bpmnElement="Activity_118d607" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2030" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_02tb8k9_di" bpmnElement="Gateway_02tb8k9" isMarkerVisible="true"><dc:Bounds x="1625" y="1410" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0kbouvd_di" bpmnElement="Activity_0kbouvd"><dc:Bounds x="1600" y="1510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_06951im_di" bpmnElement="Activity_06951im"><dc:Bounds x="1600" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wxbgds_di" bpmnElement="Activity_0wxbgds" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="3830" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_182255k_di" bpmnElement="Activity_182255k"><dc:Bounds x="2260" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dw9bgw_di" bpmnElement="Activity_1dw9bgw" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="870" y="150" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0meg4o7_di" bpmnElement="Activity_0meg4o7" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="2755" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1xhyy5e_di" bpmnElement="Gateway_1xhyy5e" isMarkerVisible="true"><dc:Bounds x="1035" y="1795" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1colb2p_di" bpmnElement="Activity_1colb2p" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2030" y="40" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0du6w43_di" bpmnElement="Activity_0du6w43" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1830" y="1630" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ejof1l_di" bpmnElement="Activity_1ejof1l" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1520" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00ve71x_di" bpmnElement="Activity_00ve71x" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1260" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14qb669_di" bpmnElement="Activity_14qb669" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1010" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0w4ui7l_di" bpmnElement="Activity_0w4ui7l" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="650" y="1880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1t94qtg_di" bpmnElement="Activity_1t94qtg" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="350" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_12ps8sr_di" bpmnElement="Activity_12ps8sr"><dc:Bounds x="1860" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n9e15c_di" bpmnElement="Activity_0n9e15c"><dc:Bounds x="2120" y="1395" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_17c6yo9_di" bpmnElement="Gateway_17c6yo9" isMarkerVisible="true"><dc:Bounds x="675" y="1995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0as7qym_di" bpmnElement="Activity_0as7qym" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="160" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lq9b29_di" bpmnElement="Activity_1lq9b29" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="710" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0oye2fx_di" bpmnElement="Gateway_0oye2fx" isMarkerVisible="true"><dc:Bounds x="375" y="1925" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13codrg_di" bpmnElement="Activity_13codrg" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="1450" y="2090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0z094fc_di" bpmnElement="Gateway_0z094fc" isMarkerVisible="true"><dc:Bounds x="1035" y="1995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0so54cy_di" bpmnElement="Activity_0so54cy" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="410" y="2015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0o9rjhy_di" bpmnElement="Gateway_0o9rjhy" isMarkerVisible="true"><dc:Bounds x="1545" y="1995" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1317kvy_di" bpmnElement="Activity_1317kvy" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="1640" y="2090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ieeisn_di" bpmnElement="Activity_1ieeisn" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="840" y="2100" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0h4ff3x_di" bpmnElement="Activity_0h4ff3x" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="1040" y="2090" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mtx3pi_di" bpmnElement="Activity_0mtx3pi" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2000" y="1700" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="TextAnnotation_1pzr73q_di" bpmnElement="TextAnnotation_1pzr73q"><dc:Bounds x="2465" y="1329" width="100" height="41" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Association_0txxgqu_di" bpmnElement="Association_0txxgqu"><di:waypoint x="2521" y="1395" /><di:waypoint x="2518" y="1370" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>