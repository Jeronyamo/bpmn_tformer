<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_hlk_RegApp_IP_c11ec1e5-421c-4f5a-b20e-3567b6bf36fe" name="Заявка на регистрацию клиента/участника ИП" isExecutable="true"><bpmn:documentation /><bpmn:userTask id="UserTask_1q5u97k" name="Блок заполнения" camunda:formKey="FILL" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="F_BirthDay" label="Дата рождения" type="string" /><camunda:formField id="F_BirthPlace" label="Место рождения" type="string" /><camunda:formField id="hlk_customer" label="Клиент*" type="string" /><camunda:formField id="hlk_counterparty" label="Контрагент*" type="string" /><camunda:formField id="hlk_shareholder" label="Пайщик" type="string" /><camunda:formField id="hlk_related_person" label="Связанное лицо" type="string" /><camunda:formField id="hlk_confidant" label="Доверенное лицо" type="string" /><camunda:formField id="hlk_typesdoc" label="Вид документа" type="string" /><camunda:formField id="hlk_serialdocument" label="Серия документа*" type="string" /><camunda:formField id="hlk_dateissue" label="Дата выдачи" type="string" /><camunda:formField id="hlk_document_expiration_date" label="Дата истечения срока действия документа" type="string" /><camunda:formField id="hlk_issueddocument" label="Кем выдан документ" type="string" /><camunda:formField id="hlk_Placeofissue" label="Место выдачи документа" type="string" /><camunda:formField id="hlk_numberdocument" label="Номер документа*" type="string" /><camunda:formField id="hlk_address_residence_country" label="Адрес проживания: Страна" type="string" /><camunda:formField id="hlk_bikbank" label="БИК Банка" type="string" /><camunda:formField id="hlk_codebank" label="Код банка" type="string" /><camunda:formField id="hlk_namebank" label="Наименование Банка" type="string" /><camunda:formField id="hlk_iikbank" label="ИИК клиента в указанном Банке" type="string" /><camunda:formField id="hlk_registratorholder" label="Наименование регистратора/номинального держателя" type="string" /><camunda:formField id="hlk_typeholder" label="Вид держателя" type="string" /><camunda:formField id="hlk_PersonalAccount" label="Лицевой счет" type="string" /><camunda:formField id="hlk_ApplicationAccessionAgreement" label="Заявление о присоединении к Договору " type="string" /><camunda:formField id="hlk_OrderOpeningAccount" label="Приказ на открытие лицевого счета для ФЛ/ИП " type="string" /><camunda:formField id="hlk_IdentityDocumentScan" label="Документ, удостоверяющий личность" type="string" /><camunda:formField id="hlk_SpouseConsentScan" label="Согласие супруга/супруги" type="string" /><camunda:formField id="hlk_SignatureSealCard" label="Карточка с образцом подписи/печати" type="string" /><camunda:formField id="hlk_PowerAttorney" label="Доверенность" type="string" /><camunda:formField id="hlk_phone" label="Телефон" type="string" /><camunda:formField id="hlk_email" label="Адрес эл. почты" type="string" /><camunda:formField id="hlk_NotificationMethod" label="Способ получения уведомления" type="string" /><camunda:formField id="hlk_RiskLevelAML" label="Уровень риска AML" type="string" /><camunda:formField id="hlk_AMLCommentRiskLevel" label="Комментарий к уровню риска" type="string" /><camunda:formField id="hlk_AMLReviewComment" label="Комментарий по результатам проверки AML" type="string" /><camunda:formField id="hlk_AML_MatchFound" label="Обнаружено совпадение по спискам AML" type="string" /><camunda:formField id="hlk_signfatcaul" label="Признак FATCA" type="string" /><camunda:formField id="hlk_gintinul" label="Номер участника GIIN/TIN" type="string" /><camunda:formField id="hlk_ipdlUL" label="ИПДЛ" type="string" /><camunda:formField id="hlk_date_ipdl" label="Дата определения / изменения признака ИПДЛ" type="string" /><camunda:formField id="hlk_residentusaul" label="Резидент США" type="string" /><camunda:formField id="hlk_comment_ipdl" label="Комментарий к параметру ИПДЛ" type="string" /><camunda:formField id="hlk_OffshoreZone" label="Офшорная зона" type="string" /><camunda:formField id="hlk_SIGN_FATCA_DATE" label="Дата определения / изменения Признак FATCA" type="string" /><camunda:formField id="hlk_adressmatch" label="Адрес проживания совпадает с адресом регистрации" type="string" /><camunda:formField id="hlk_postcode_fact" label="Адрес проживания: Почтовый индекс" type="string" /><camunda:formField id="hlk_residence_address_type_settlement_fl" label="Адрес проживания: Вид населенного пункта" type="string" /><camunda:formField id="hlk_residence_address_street_fl" label="Адрес проживания: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_residence_address_house" label="Адрес проживания: Номер дома" type="string" /><camunda:formField id="hlk_residence_address_flat_fl" label="Адрес проживания: Номер квартиры" type="string" /><camunda:formField id="hlk_kato_residence_region_id" label="ID КАТО Адрес проживания: Область" type="string" /><camunda:formField id="hlk_kato_residence_area_id" label="ID КАТО Адрес проживания: Район" type="string" /><camunda:formField id="hlk_kato_residence_locality_id" label="ID КАТО Адрес проживания: Населенный пункт" type="string" /><camunda:formField id="hlk_region_residence_address_fl" label="Адрес проживания: Область КАТО" type="string" /><camunda:formField id="hlk_address_residence_district_fl" label="Адрес проживания: Район КАТО" type="string" /><camunda:formField id="hlk_address_residence_settlement_fl" label="Адрес проживания: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_HabAdress_Area" label="Адрес факт/проживания: Область" type="string" /><camunda:formField id="hlk_HabAdress_District" label="Адрес факт/проживания: Район" type="string" /><camunda:formField id="hlk_HabAdress_Locality" label="Адрес факт/проживания: Населенный пункт" type="string" /><camunda:formField id="hlk_id" label="ID участника" type="string" /><camunda:formField id="F_external_id" label="Внешний номер" type="string" /><camunda:formField id="hlk_AppType" label="Вид заявки" type="string" /><camunda:formField id="hlk_BankDetails" label="Банковские реквизиты для перевода ДС" type="string" /><camunda:formField id="hlk_lastname" label="Фамилия" type="string" /><camunda:formField id="hlk_firstname" label="Имя" type="string" /><camunda:formField id="hlk_patronomic" label="Отчество" type="string" /><camunda:formField id="hlk_gender" label="Пол" type="string" /><camunda:formField id="hlk_spouse" label="ФИО супруга/супруги" type="string" /><camunda:formField id="hlk_residentFL" label="Резидент" type="string" /><camunda:formField id="hlk_presence_related_person" label="Наличие связанного лица" type="string" /><camunda:formField id="hlk_spouseconsentreceived" label="Согласие супруга/супруги получено" type="string" /><camunda:formField id="hlk_regcountry" label="Страна резидентства" type="string" /><camunda:formField id="hlk_taxprivileges" label="Налоговые льготы" type="string" /><camunda:formField id="hlk_economicsector" label="Сектор экономики" type="string" /><camunda:formField id="hlk_country_citizenship" label="Страна гражданства" type="string" /><camunda:formField id="hlk_Familystatus" label="Семейное положение" type="string" /><camunda:formField id="hlk_other_information" label="Прочая информация" type="string" /><camunda:formField id="hlk_Conterparty_Level" label="Уровень учета" type="string" /><camunda:formField id="hlk_isIP" label="Индивидуальный предприниматель" type="string" /><camunda:formField id="hlk_QualInvestor" label="Квалифицированный инвестор" type="string" /><camunda:formField id="hlk_counterparty_type" label="HF_Тип контрагента" type="string" /><camunda:formField id="hlk_iin_bin" label="ИИН/БИН" type="string" /><camunda:formField id="hlk_costtt_center" label="Профит центр*" type="string" /><camunda:formField id="hlk_postcode" label="Адрес регистрации: Почтовый индекс" type="string" /><camunda:formField id="hlk_typelocality" label="Адрес регистрации: Вид населенного пункта" type="string" /><camunda:formField id="hlk_street" label="Адрес регистрации: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_house" label="Адрес регистрации: Номер дома" type="string" /><camunda:formField id="hlk_officeflat" label="Адрес регистрации: Номер квартиры" type="string" /><camunda:formField id="hlk_kato_adress_locality_id" label="ID КАТО Адрес регистрации: Населенный пункт" type="string" /><camunda:formField id="hlk_kato_region_id" label="ID КАТО Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_kato_area_idid" label="ID КАТО Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_RegAdress_Area" label="Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_RegAdress_District" label="Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_regionul" label="Адрес регистрации: Область КАТО" type="string" /><camunda:formField id="hlk_areaa" label="Адрес регистрации: Район КАТО" type="string" /><camunda:formField id="hlk_RegAdress_Locality" label="Адрес регистрации: Населенный Пункт" type="string" /><camunda:formField id="hlk_locality" label="Адрес регистрации: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_registrcountry" label="Страна регистрации*" type="string" /><camunda:formField id="hlk_BankTransferDetails" label="Реквизиты для перевода ЦБ" type="string" /><camunda:formField id="hlk_se_id" label="ID Сектора Экономики" type="string" /><camunda:formField id="hlk_HabAdress_Full" label="Адрес факт/проживания: Дополнительные данные по адресу" type="string" /><camunda:formField id="hlk_tau_kato_region" label="ID ТАУ КАТО Адрес проживания/фактический: Область" type="string" /><camunda:formField id="hlk_tau_kato_district" label="ID ТАУ КАТО Адрес проживания/фактический: Район" type="string" /><camunda:formField id="hlk_tau_kato_locality" label="ID ТАУ КАТО Адрес проживания/фактический: Населенный пункт" type="string" /><camunda:formField id="hlk_RegAdress_Full" label="Адрес регистрации: Дополнительные данные по адресу" type="string" /><camunda:formField id="hlk_reg_tau_kato_district" label="ID ТАУ КАТО Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_reg_tau_kato_region" label="ID ТАУ КАТО Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_reg_tau_kato_locality" label="ID ТАУ КАТО Адрес регистрации: Населенный пункт" type="string" /><camunda:formField id="hlk_detailsforsecurities" label="Реквизиты для перевода ЦБ" type="string" /><camunda:formField id="hlk_profit_id" label="ID Профит-центра" type="string" /><camunda:formField id="hlk_source_doc" label="Источник документа" type="string" /><camunda:formField id="hlk_cp_tariff_plan" label="Тарифный план участника" type="string" /><camunda:formField id="hlk_PlaceOfBirth" label="Место рождения" type="string" /><camunda:formField id="hlk_account_type_holder" label="Вид держателя" type="string" /><camunda:formField id="hlk_mobile_phone" label="Мобильный телефон" type="string" /><camunda:formField id="hlk_shorttitle" label="Кратк. наименование " type="string" /><camunda:formField id="hlk_fulltitle" label="Полн. наименование" type="string" /><camunda:formField id="hlk_legalform" label="Организац.-правовая форма" type="string" /><camunda:formField id="hlk_oked" label="ОКЭД" type="string" /><camunda:formField id="hlk_ip_type" label="Вид предпринимательской деятельности ИП" type="string" /><camunda:formField id="hlk_ip_license_number" label="Номер лицензии ИП" type="string" /><camunda:formField id="hlk_ip_issuing_date" label="Дата выдачи лицензии ИП" type="string" /><camunda:formField id="hlk_ip_expiration_date" label="Дата истечения лицензии ИП" type="string" /><camunda:formField id="hlk_FATCA_participation" label="Участие FATCA" type="string" /><camunda:formField id="hlk_type_organization_fatca" label="Тип организации (FATCA)" type="string" /><camunda:formField id="hlk_regdate" label="Дата регистрации*" type="string" /><camunda:formField id="hlk_AMLStatus" label="Код статуса проверки АМЛ" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1uvqdxq</bpmn:incoming><bpmn:incoming>SequenceFlow_008xhfb</bpmn:incoming><bpmn:incoming>SequenceFlow_1w20noy</bpmn:incoming><bpmn:incoming>Flow_0lmxga1</bpmn:incoming><bpmn:incoming>Flow_1te6f5h</bpmn:incoming><bpmn:incoming>Flow_10d95qi</bpmn:incoming><bpmn:incoming>Flow_0tzrk83</bpmn:incoming><bpmn:incoming>Flow_05he591</bpmn:incoming><bpmn:incoming>Flow_0gmjn17</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mlg3e8</bpmn:outgoing></bpmn:userTask><bpmn:startEvent id="StartEvent_0auet61"><bpmn:outgoing>SequenceFlow_0qn473g</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="ServiceTask_0rd0afv" name="определяем источник"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_source_doc</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="source">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02d2fmh</bpmn:incoming><bpmn:outgoing>Flow_16fsa4s</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1sz2gn0" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_16fsa4s</bpmn:incoming><bpmn:outgoing>Flow_1volwfg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1k00tww" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_127z9we</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ndfqkx</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_0j7w428" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="regDate"><bpmn:incoming>Flow_07tsv7i</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mjml9b</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_13xfkh1" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=100</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1d6lk72</bpmn:incoming><bpmn:outgoing>Flow_1yjv0yc</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1wddw0j" name="Устанавливаем признак вернувшейся заявки" camunda:expression="false" camunda:resultVariable="cdRejected"><bpmn:incoming>Flow_1volwfg</bpmn:incoming><bpmn:outgoing>SequenceFlow_127z9we</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_1fke5rw" name="Технический блок: Создаем буфер" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_1ndfqkx</bpmn:incoming><bpmn:outgoing>Flow_1d6lk72</bpmn:outgoing><bpmn:script>execution.setVariable('instanceIdCopy', instanceId);
execution.setVariable('templateIdCopy', templateId)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0qn473g" sourceRef="StartEvent_0auet61" targetRef="ServiceTask_0w015wm" /><bpmn:sequenceFlow id="SequenceFlow_127z9we" sourceRef="ServiceTask_1wddw0j" targetRef="ServiceTask_1k00tww" /><bpmn:sequenceFlow id="SequenceFlow_1ndfqkx" sourceRef="ServiceTask_1k00tww" targetRef="ScriptTask_1fke5rw" /><bpmn:sequenceFlow id="SequenceFlow_1cvycwo" sourceRef="Activity_03sochr" targetRef="Activity_0gjb4hh" /><bpmn:sequenceFlow id="SequenceFlow_0mjml9b" sourceRef="ScriptTask_0j7w428" targetRef="Activity_008l2jy" /><bpmn:callActivity id="CallActivity_1eegr8a" name="Генерируем форму 2" calledElement="Form2GenerationIP"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${instanceId}" target="instanceId" /></bpmn:extensionElements><bpmn:incoming>Flow_1kbarw9</bpmn:incoming><bpmn:outgoing>Flow_05epzrt</bpmn:outgoing></bpmn:callActivity><bpmn:callActivity id="CallActivity_0iobytb" name="Генерируем форму 13" calledElement="Form13GenerationIP"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${instanceId}" target="instanceId" /></bpmn:extensionElements><bpmn:incoming>Flow_05epzrt</bpmn:incoming><bpmn:outgoing>Flow_1xa1ma3</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1h8wlq9" name="Статус заявки: Заполнение: Подтверждение заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Подтверждение+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1qkux8i</bpmn:incoming><bpmn:incoming>Flow_1xa1ma3</bpmn:incoming><bpmn:outgoing>Flow_182pm57</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1yha8ut" name="Получаем аттрибуты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_gintinul&amp;systemName=hlk_signfatcaul&amp;systemName=hlk_residentusaul&amp;systemName=hlk_iin_bin&amp;systemName=hlk_residentFL&amp;systemName=hlk_typesdoc&amp;systemName=hlk_mobile_phone</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="attributes">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1tikbqj</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nazcgz</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_1739afc" name="Проверяем правильность заполнения" scriptFormat="javascript" camunda:resultVariable="validationErrors"><bpmn:incoming>SequenceFlow_0nazcgz</bpmn:incoming><bpmn:outgoing>SequenceFlow_16p966p</bpmn:outgoing><bpmn:script>// первые проверки
var attrs = JSON.parse(attributes);
var errors = {};


// проверки 1
if (!attrs.hlk_gintinul &amp;&amp; attrs.hlk_signfatcaul === 'FATCA' &amp;&amp; attrs.hlk_residentusaul) {
    errors.hlk_gintinul = {
        verified: false,
        decision: 'Параметр является обязательным, если выставлены Признак FATCA и Резидент США'
    };
} else {
    errors.hlk_gintinul = {
        verified: true
    }
}

if (!attrs.hlk_iin_bin &amp;&amp; (attrs.hlk_residentFL || attrs.hlk_typesdoc === 'Вид на жительство иностранца в Республике Казахстан')) {
    errors.hlk_iin_bin = {
        verified: false,
        decision: 'Обязательно к заполнению'
    };
} else {
    errors.hlk_iin_bin = {
        verified: true
    }
}
var mobile_phone_prefix = [700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 747, 750, 751, 760, 761, 762, 763, 764, 771, 775, 776, 777, 778];

//проверки маски телефона

var flag = 0; 
for (var i = 0; i &lt; mobile_phone_prefix.length; i++) {
  if ( mobile_phone_prefix[i] == attrs.hlk_mobile_phone.substring(1,4)) {
	flag=1;
	continue;
  }
} 

if (attrs.hlk_mobile_phone &amp;&amp; attrs.hlk_mobile_phone.length &gt; 1 &amp;&amp; !flag) {
    errors.hlk_mobile_phone = {
        verified: false,
        decision: 'Код мобильного телефона не соответствует справочнику допустимых кодов'
    };
} else {
    errors.hlk_mobile_phone = {
        verified: true
    }
}

JSON.stringify(errors);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_1y1aens" name="Записываем результат валидации"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/verification/${instanceId}</camunda:inputParameter><camunda:inputParameter name="payload">${validationErrors}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16p966p</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hso837</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1epkeu8" default="SequenceFlow_1u10zqw"><bpmn:incoming>SequenceFlow_1hso837</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ewyd5w</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1u10zqw</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:callActivity id="CallActivity_116qky6" name="Подпроцесс проверки" calledElement="ControlSaveIndividual"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1979ol1</bpmn:incoming><bpmn:outgoing>SequenceFlow_079v0yi</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_18d95qg" default="SequenceFlow_1tikbqj"><bpmn:incoming>SequenceFlow_079v0yi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tikbqj</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1uvqdxq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1h07oau" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dv8a5f</bpmn:incoming><bpmn:outgoing>SequenceFlow_0nu20nz</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0av6k5m" default="SequenceFlow_1qkux8i"><bpmn:incoming>SequenceFlow_0nu20nz</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qkux8i</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0sj93g0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0enj3sl" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_costtt_center" : {"value" : "БДД", "primaryId":"5e4e38f8634459000776c2e8" ,"source" : "profitCenter"} }</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0sj93g0</bpmn:incoming><bpmn:outgoing>Flow_1kbarw9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ewyd5w" sourceRef="ExclusiveGateway_1epkeu8" targetRef="CallActivity_10ybcn6"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="javascript">var verified =true;
var v = JSON.parse(validationErrors);
for (key in v) {
    verified = verified &amp;&amp; v[key].verified; 
}
verified;</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1qkux8i" sourceRef="ExclusiveGateway_0av6k5m" targetRef="ServiceTask_1h8wlq9" /><bpmn:sequenceFlow id="SequenceFlow_1tikbqj" sourceRef="ExclusiveGateway_18d95qg" targetRef="ServiceTask_1yha8ut" /><bpmn:sequenceFlow id="SequenceFlow_0nazcgz" sourceRef="ServiceTask_1yha8ut" targetRef="ScriptTask_1739afc" /><bpmn:sequenceFlow id="SequenceFlow_16p966p" sourceRef="ScriptTask_1739afc" targetRef="ServiceTask_1y1aens" /><bpmn:sequenceFlow id="SequenceFlow_1hso837" sourceRef="ServiceTask_1y1aens" targetRef="ExclusiveGateway_1epkeu8" /><bpmn:sequenceFlow id="SequenceFlow_079v0yi" sourceRef="CallActivity_116qky6" targetRef="ExclusiveGateway_18d95qg" /><bpmn:sequenceFlow id="SequenceFlow_0nu20nz" sourceRef="ServiceTask_1h07oau" targetRef="ExclusiveGateway_0av6k5m" /><bpmn:sequenceFlow id="SequenceFlow_0sj93g0" sourceRef="ExclusiveGateway_0av6k5m" targetRef="ServiceTask_0enj3sl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0mlg3e8" sourceRef="UserTask_1q5u97k" targetRef="ServiceTask_0rwx9y6" /><bpmn:sequenceFlow id="SequenceFlow_1uvqdxq" sourceRef="ExclusiveGateway_18d95qg" targetRef="UserTask_1q5u97k"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1u10zqw" sourceRef="ExclusiveGateway_1epkeu8" targetRef="ServiceTask_1e21hlv" /><bpmn:serviceTask id="ServiceTask_1jhtdbp" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Не+назначен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1tbd337</bpmn:incoming><bpmn:outgoing>SequenceFlow_008xhfb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_01274nc" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_remake_reason?incrementVersion=true&amp;value=${hlk_reason_return.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07bbty4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1tbd337</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1r9w3s6" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"uao@halykfinance.kz",
"subject":"Возврат заявки на регистрацию клиента на доработку исполнителю",
"text":"Заявка ${ezdocObjectUrl} возвращена исполнителю на доработку ",
"attachments" : []
}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1390337</bpmn:incoming><bpmn:outgoing>SequenceFlow_1l39ack</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_08f7j4d" name="Подтверждение заявки" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Cancel&#34;, &#34;label&#34;: &#34;Отклонить&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_close&#34;, &#34;label&#34;: &#34;Причина отклонения&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1pyhfs6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1390337</bpmn:outgoing><bpmn:outgoing>SequenceFlow_08gktam</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1tz6fak</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_1p03u53" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09fmqdi</bpmn:incoming><bpmn:incoming>Flow_1yv9xcl</bpmn:incoming><bpmn:incoming>Flow_1kfyyny</bpmn:incoming><bpmn:outgoing>Flow_1a6z5ir</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_12j6s3j" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_cancelation_reason?incrementVersion=true&amp;value=${hlk_reason_close.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0hikcpl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0y31u3k</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0fsxjve" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+отклонена+сотрудником+СП</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0y31u3k</bpmn:incoming><bpmn:outgoing>SequenceFlow_1obu50b</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_097wk6s" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1obu50b</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cuwcmu</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1kv6hrk"><bpmn:incoming>SequenceFlow_0cuwcmu</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_011z1yf" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Выявлено+совпадение.+Ожидайте+решение+Compliance</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06nw081</bpmn:incoming><bpmn:outgoing>Flow_1g7v1rr</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_027pmko" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"uao@halykfinance.kz",
"subject":"Проверка клиента ${ShortName} в AML",
"text":"Клиент  ${ShortName} не прошел проверку по спискам AML. Все заявки на имя клиента и операции будут заблокированы.",
"attachments" : []
}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1drfdz6</bpmn:incoming><bpmn:incoming>SequenceFlow_0iyzrce</bpmn:incoming><bpmn:outgoing>SequenceFlow_0igaob8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ly7417" name="Статус заявки отклонена, найдено совпадение по спискам амл"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Клиент+не+прошел+проверку+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0igaob8</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zcn28l</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1bsodb7" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zcn28l</bpmn:incoming><bpmn:outgoing>SequenceFlow_0d8ruhx</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1o0gw13"><bpmn:incoming>SequenceFlow_0d8ruhx</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_11sryi9" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"uao@halykfinance.kz",
"subject":"Ошибка! Проверка клиента ${ShortName} в AML",
"text":"Внимание! Ошибка при проверке клиента ${ShortName}  по спискам AML. Проверка клиента в АМL не доступна"
}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1y0y1p7</bpmn:incoming><bpmn:outgoing>SequenceFlow_18133uy</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0nd4k9s" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Системная+ошибка+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_18133uy</bpmn:incoming><bpmn:outgoing>SequenceFlow_1omvve1</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_1jt0eya" name="Ручная проверка" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;Cancel&#34;,&#34;label&#34;:&#34;Отклонить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1omvve1</bpmn:incoming><bpmn:outgoing>SequenceFlow_0iyzrce</bpmn:outgoing><bpmn:outgoing>SequenceFlow_06f8l3h</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_0kxht5d" name="Записываем в объект ID клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_ID_Client?incrementVersion=true&amp;value=${clientPrimaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ga7ges</bpmn:incoming><bpmn:outgoing>Flow_0o2kglv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1wdq4sn" name="Создаем клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/INDIVIDUAL/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type", "1")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16hj01l</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zwzjyl</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pc3hsw" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=AML.Совпадений+не+найдено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06f8l3h</bpmn:incoming><bpmn:incoming>Flow_0w7hauf</bpmn:incoming><bpmn:outgoing>SequenceFlow_16hj01l</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0n5jdtr" default="Flow_02l1iim"><bpmn:incoming>SequenceFlow_0zwzjyl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0luyg5v</bpmn:outgoing><bpmn:outgoing>Flow_02l1iim</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="ExclusiveGateway_1925x4x"><bpmn:incoming>Flow_0caj1a6</bpmn:incoming><bpmn:incoming>Flow_02l1iim</bpmn:incoming><bpmn:outgoing>SequenceFlow_0j98ep6</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1vx78c0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_12w6kyn" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vx78c0</bpmn:incoming><bpmn:outgoing>SequenceFlow_0fp96om</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1e65lbe" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0fp96om</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bi9l3o</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0w727ay"><bpmn:incoming>SequenceFlow_0bi9l3o</bpmn:incoming></bpmn:endEvent><bpmn:exclusiveGateway id="ExclusiveGateway_0cif1uk" default="SequenceFlow_1b2jwha"><bpmn:incoming>SequenceFlow_0j98ep6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1b2jwha</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0k4v3v0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_166mr30" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028111137</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tfotgq</bpmn:incoming><bpmn:outgoing>SequenceFlow_1j12v13</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_075ca4u"><bpmn:incoming>SequenceFlow_0k4v3v0</bpmn:incoming><bpmn:incoming>Flow_08ez9ta</bpmn:incoming><bpmn:incoming>Flow_1qp1tbr</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bumqpg</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="ScriptTask_0f73znb" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>Flow_13app3q</bpmn:incoming><bpmn:outgoing>SequenceFlow_0y51fil</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_06q2u4v" name="Достаем праймари айди заявки на счет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${accountId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0y51fil</bpmn:incoming><bpmn:outgoing>SequenceFlow_02oy4ul</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0e183oc" name="Записываем ссылку на заявку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_accountApp_id",S("{}")
.prop("value" , ShortName)
.prop("primaryId" , accountPrimaryId)
.prop("source","book"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_02oy4ul</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hu0fl0</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1md4rzy" name="Достаем праймари айди заявки на договор"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${agreementId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="agreementPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1hu0fl0</bpmn:incoming><bpmn:outgoing>SequenceFlow_1415jse</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1h9ynfb" name="Записываем ссылку на заявку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_agreementApp_id",S("{}")
.prop("value" , ShortName)
.prop("primaryId" , agreementPrimaryId)
.prop("source","book"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1415jse</bpmn:incoming><bpmn:outgoing>SequenceFlow_0e7hadp</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0wtz7ei"><bpmn:incoming>Flow_00csoeu</bpmn:incoming><bpmn:outgoing>SequenceFlow_06nw081</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1drfdz6</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1y0y1p7</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0pmra6r</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1tbd337" sourceRef="ServiceTask_01274nc" targetRef="ServiceTask_1jhtdbp" /><bpmn:sequenceFlow id="SequenceFlow_1l39ack" sourceRef="ServiceTask_1r9w3s6" targetRef="ScriptTask_0mze5e7" /><bpmn:sequenceFlow id="SequenceFlow_1390337" sourceRef="UserTask_08f7j4d" targetRef="ServiceTask_1r9w3s6"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Reject'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_08gktam" sourceRef="UserTask_08f7j4d" targetRef="ServiceTask_18bozwu"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1tz6fak" sourceRef="UserTask_08f7j4d" targetRef="ScriptTask_049okat"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0y31u3k" sourceRef="ServiceTask_12j6s3j" targetRef="ServiceTask_0fsxjve" /><bpmn:sequenceFlow id="SequenceFlow_1obu50b" sourceRef="ServiceTask_0fsxjve" targetRef="ServiceTask_097wk6s" /><bpmn:sequenceFlow id="SequenceFlow_0cuwcmu" sourceRef="ServiceTask_097wk6s" targetRef="EndEvent_1kv6hrk" /><bpmn:sequenceFlow id="SequenceFlow_06nw081" sourceRef="ExclusiveGateway_0wtz7ei" targetRef="ServiceTask_011z1yf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1drfdz6" sourceRef="ExclusiveGateway_0wtz7ei" targetRef="ServiceTask_027pmko"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '2'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0iyzrce" sourceRef="UserTask_1jt0eya" targetRef="ServiceTask_027pmko"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0igaob8" sourceRef="ServiceTask_027pmko" targetRef="ServiceTask_0ly7417" /><bpmn:sequenceFlow id="SequenceFlow_0zcn28l" sourceRef="ServiceTask_0ly7417" targetRef="ServiceTask_1bsodb7" /><bpmn:sequenceFlow id="SequenceFlow_0d8ruhx" sourceRef="ServiceTask_1bsodb7" targetRef="EndEvent_1o0gw13" /><bpmn:sequenceFlow id="SequenceFlow_1y0y1p7" sourceRef="ExclusiveGateway_0wtz7ei" targetRef="ServiceTask_11sryi9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '3'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_18133uy" sourceRef="ServiceTask_11sryi9" targetRef="ServiceTask_0nd4k9s" /><bpmn:sequenceFlow id="SequenceFlow_1omvve1" sourceRef="ServiceTask_0nd4k9s" targetRef="UserTask_1jt0eya" /><bpmn:sequenceFlow id="SequenceFlow_06f8l3h" sourceRef="UserTask_1jt0eya" targetRef="ServiceTask_1pc3hsw"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0luyg5v" sourceRef="ExclusiveGateway_0n5jdtr" targetRef="Activity_0nhqxqz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_16hj01l" sourceRef="ServiceTask_1pc3hsw" targetRef="ServiceTask_1wdq4sn" /><bpmn:sequenceFlow id="SequenceFlow_0zwzjyl" sourceRef="ServiceTask_1wdq4sn" targetRef="ExclusiveGateway_0n5jdtr" /><bpmn:sequenceFlow id="SequenceFlow_0pmra6r" sourceRef="ExclusiveGateway_0wtz7ei" targetRef="Activity_0t9q2qw"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '0'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0j98ep6" sourceRef="ExclusiveGateway_1925x4x" targetRef="ExclusiveGateway_0cif1uk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1vx78c0" sourceRef="ExclusiveGateway_1925x4x" targetRef="ServiceTask_12w6kyn"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0fp96om" sourceRef="ServiceTask_12w6kyn" targetRef="ServiceTask_1e65lbe" /><bpmn:sequenceFlow id="SequenceFlow_0bi9l3o" sourceRef="ServiceTask_1e65lbe" targetRef="EndEvent_0w727ay" /><bpmn:sequenceFlow id="SequenceFlow_1b2jwha" sourceRef="ExclusiveGateway_0cif1uk" targetRef="Gateway_0tks027" /><bpmn:sequenceFlow id="SequenceFlow_0k4v3v0" sourceRef="ExclusiveGateway_0cif1uk" targetRef="ExclusiveGateway_075ca4u"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1j12v13" sourceRef="ServiceTask_166mr30" targetRef="Activity_1ixkeyg" /><bpmn:sequenceFlow id="SequenceFlow_1bumqpg" sourceRef="ExclusiveGateway_075ca4u" targetRef="Activity_0394qg9" /><bpmn:sequenceFlow id="SequenceFlow_0y51fil" sourceRef="ScriptTask_0f73znb" targetRef="ServiceTask_06q2u4v" /><bpmn:sequenceFlow id="SequenceFlow_02oy4ul" sourceRef="ServiceTask_06q2u4v" targetRef="ServiceTask_0e183oc" /><bpmn:sequenceFlow id="SequenceFlow_1hu0fl0" sourceRef="ServiceTask_0e183oc" targetRef="ServiceTask_1md4rzy" /><bpmn:sequenceFlow id="SequenceFlow_1415jse" sourceRef="ServiceTask_1md4rzy" targetRef="ServiceTask_1h9ynfb" /><bpmn:sequenceFlow id="SequenceFlow_008xhfb" sourceRef="ServiceTask_1jhtdbp" targetRef="UserTask_1q5u97k" /><bpmn:parallelGateway id="ParallelGateway_0v9azav"><bpmn:incoming>SequenceFlow_0e7hadp</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ftffu7</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1kb0tcp</bpmn:outgoing></bpmn:parallelGateway><bpmn:parallelGateway id="ParallelGateway_1l0v7hw"><bpmn:incoming>SequenceFlow_0jelg1l</bpmn:incoming><bpmn:incoming>SequenceFlow_0it4nlf</bpmn:incoming><bpmn:outgoing>SequenceFlow_055l0ei</bpmn:outgoing></bpmn:parallelGateway><bpmn:callActivity id="CallActivity_0p31t0z" name="Запускаем процесс регистрации счета" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_securities_account_6e551763-f964-457e-89bc-9a53378b5d7c"><bpmn:extensionElements><camunda:in sourceExpression="${accountId}" target="instanceId" /><camunda:in sourceExpression="${accountTemplateId}" target="templateId" /><camunda:in sourceExpression="${accountType}" target="type" /><camunda:in sourceExpression="${accountEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${accountEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${accountType}_${accountId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ftffu7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jelg1l</bpmn:outgoing></bpmn:callActivity><bpmn:callActivity id="CallActivity_1b38dfd" name="Запускаем процесс регистрации договора" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_AppRegContracts_41524162-fa02-47df-9197-2338660d72f4"><bpmn:extensionElements><camunda:in sourceExpression="${agreementId}" target="instanceId" /><camunda:in sourceExpression="${agreementTemplateId}" target="templateId" /><camunda:in sourceExpression="${agreementType}" target="type" /><camunda:in sourceExpression="${agreementEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${agreementEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${agreementType.toLowerCase()}_${agreementId}" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kb0tcp</bpmn:incoming><bpmn:outgoing>SequenceFlow_0it4nlf</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_05dii2t" name="Сообщаем об окончании процесса" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0uj3ort</bpmn:incoming><bpmn:outgoing>SequenceFlow_0fc28dk</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1o8vq5r"><bpmn:incoming>SequenceFlow_0fc28dk</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_08jyk0p" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0vfycrh</bpmn:incoming><bpmn:outgoing>Flow_0uj3ort</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0mf7gdb" name="Создаем счет" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${instanceId}/to/INVOICE</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_type_account_int" , "ценнобумажный")
.prop("hlk_account_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.prop("hlk_Account_Number" , accountNumber)
.prop("AccountNumber" , accountNumber)
.prop("hlk_personal_account" , true)
.prop("hlk_DefaultAccount" , true)
.prop("hlk_account_external" , false)
.prop("hlk_blocked_account" , false)
.prop("hlk_account_type","Ценнобумажный")
.prop("hlk_account_status" , "Открыт")
.prop("hlk_clearing_system" , "АО ЦЕНТРАЛЬНЫЙ ДЕПОЗИТАРИЙ ЦЕННЫХ БУМАГ")
.prop("hlk_account_bin" , "970740000154")
.prop("hlk_accont_name_registrar_holder" ,"Halyk Finance")
.prop("hlk_account_opening_date" , acceptDate)
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ob8kb3</bpmn:incoming><bpmn:incoming>Flow_1df83ji</bpmn:incoming><bpmn:outgoing>Flow_0lg0rn4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0lbops9" name="Создаем договор" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"EXCEL_NAME" : "CONTRACT",
"hlk_account" : "${accountNumber}"
}</camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ypzew5</bpmn:incoming><bpmn:incoming>Flow_0c9je19</bpmn:incoming><bpmn:outgoing>Flow_0w6zbg1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0usxmwk" name="Сообщаем об окончании подпроцесса" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1jhu0tx</bpmn:incoming><bpmn:outgoing>Flow_0381xze</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pt0hpr" name="Сообщаем об окончании подпроцесса" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0381xze</bpmn:incoming><bpmn:outgoing>Flow_05w4ce7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0bhskka" name="Копируем instanceId" camunda:asyncBefore="true" camunda:expression="${instanceIdCopy}" camunda:resultVariable="instanceId"><bpmn:incoming>SequenceFlow_055l0ei</bpmn:incoming><bpmn:outgoing>SequenceFlow_0a208kg</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_1n7m39k" name="Отправляем SWIFT" calledElement="MT501Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0a208kg</bpmn:incoming><bpmn:outgoing>SequenceFlow_1pvr0o0</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1nmdgu6" name="Получаем референс"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "swiftMessageEntity",
         "filter": { 
		"instanceId": "${accountId}",
		"instanceType": "BOOK"
	},
	"projection": { 
		"refId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="SWIFT_MSG_REF"><camunda:script scriptFormat="JavaScript">JSON.parse(response).cursor.firstBatch[0].refId;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kq1bx9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1jggnpm</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0h40654" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/SWIFT_MSG_REF?incrementVersion=true&amp;value=${SWIFT_MSG_REF}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1jggnpm</bpmn:incoming><bpmn:outgoing>SequenceFlow_1w3u7qp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0ppdg19" name="Меняем статус заявки на регистрацию счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+исполнена.+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1z0g3yj</bpmn:incoming><bpmn:incoming>SequenceFlow_06gkhty</bpmn:incoming><bpmn:outgoing>Flow_0btrysn</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1f5kee3" name="Меняем статус заявки на регистрацию договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+исполнена.+Договор+зарегистрирован</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0btrysn</bpmn:incoming><bpmn:outgoing>Flow_1jhu0tx</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_1wp4mc8" name="Генерируем печатные формы" calledElement="AccountOrderGeneration"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_19zlk7g</bpmn:incoming><bpmn:incoming>SequenceFlow_0xigtll</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ca1oec</bpmn:outgoing></bpmn:callActivity><bpmn:scriptTask id="ScriptTask_1tsofa8" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="acceptDate"><bpmn:incoming>SequenceFlow_07nerxu</bpmn:incoming><bpmn:outgoing>Flow_0hi0n7r</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_1h65r5f" name="Считаем разницу между датами" scriptFormat="javascript" camunda:resultVariable="difference"><bpmn:incoming>Flow_0hi0n7r</bpmn:incoming><bpmn:outgoing>SequenceFlow_1c6igvg</bpmn:outgoing><bpmn:script>Math.floor(Math.abs(new Date(acceptDate) - new Date(regDate))/(1000 * 60 * 60 * 24));</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="ExclusiveGateway_1uulpna" default="SequenceFlow_17u4qbs"><bpmn:incoming>SequenceFlow_1c6igvg</bpmn:incoming><bpmn:outgoing>SequenceFlow_19zlk7g</bpmn:outgoing><bpmn:outgoing>SequenceFlow_17u4qbs</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0kc3072" name="Меняем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/setAttribute/hlk_Contract_Start_Date?incrementVersion=true&amp;value=${acceptDate}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">**</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_17u4qbs</bpmn:incoming><bpmn:outgoing>SequenceFlow_0xigtll</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0p8ylqv" name="Создаем запись о ранжировании" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Range")
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_range_AssignedRiskGroup1" , "Сбалансированная")
.prop("hlk_range_date" , acceptDate)
.prop("hlk_range_InvoiceNumber" , accountNumber)
.prop("hlk_range_IDAssignedRiskGroup1" , "1")
.prop("hlk_range_BasisAssignment1" , "По результатам анкетирования")
.prop("hlk_counterparty_type","0") 
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00531d5</bpmn:incoming><bpmn:incoming>Flow_177iq7s</bpmn:incoming><bpmn:outgoing>Flow_1xtyz4z</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0u0ea7s" name="Меняем статус заявки SWIFT исполнен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0l75rbc</bpmn:incoming><bpmn:outgoing>SequenceFlow_07nerxu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_01ownn0" name="Меняем статус заявки SWIFT отправлен для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1pvr0o0</bpmn:incoming><bpmn:outgoing>SequenceFlow_0eaqocu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ax5k1k" name="Меняем статус заявки SWIFT отправлен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0eaqocu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kq1bx9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1whnh6a" name="Достаем ссылку на клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="iin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05w4ce7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ob8kb3</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1jsjir9" name="Отправляем уведомление в СП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Открытие БС " + ShortName)
.prop("text","Внимание! БС № " + accountNumber + " на имя " + ShortName + "успешно открыт в ЦД, Договор № " + agreementNumber + " от " + regDate + "успешно зарегистрирован")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1e4fd6h</bpmn:incoming><bpmn:outgoing>SequenceFlow_1fxish9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0kol6s7" name="Отправляем уведомление клиенту" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email",mail ? mail : S('{"x":null}').prop("x"))
.prop("subject","Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("text","Уважаемый клиент, настоящим АО «Halyk Finance» информирует об открытии на Ваше имя брокерского счета № " + accountNumber + " в рамках Договора брокерского обслуживания № " + agreementNumber + " от  regDate. Условия Договора и контактные данные доступны на сайте AO «Halyk Finance» https://halykfinance.kz/brokerskoe-obsluzhivanie/?lang=ru")
.prop("attachments", [generated])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1fxish9</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bqz93f</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ovc5kv" name="Достаем номер договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_account_number_contract</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="agreementNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ca1oec</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kkknk2</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0fcxuy3" name="Достаем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/getAttribute/hlk_Contract_Start_Date</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="registrationDate">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kkknk2</bpmn:incoming><bpmn:outgoing>SequenceFlow_1e4fd6h</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1tk4n9g" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Отправка уведомления об открытии БС" + accountNumber + " " + "на имя" + " " + ShortName)
.prop("text","Внимание! Уведомление об открытии БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + " " + "на e-mail:" + mail + " " + "успешно отправлено.")
.prop("attachments", [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1daqwq2</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wftucm</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0ad0jvz" default="SequenceFlow_1dlu33d"><bpmn:incoming>SequenceFlow_0bqz93f</bpmn:incoming><bpmn:outgoing>SequenceFlow_1daqwq2</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1dlu33d</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1elau1c" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Отправка уведомления об открытии БС № " + accountNumber + " " + "на имя ShortName")
.prop("text","Внимание! Ошибка при отправке уведомления об открытии № " + accountNumber + " на имя ShortName на e-mail:" + mail + ". Уведомление не отправлено по причине errorCode")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dlu33d</bpmn:incoming><bpmn:outgoing>SequenceFlow_12wgkv7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_15qej4w" name="Создаем запись в журнале почтовых уведомлений"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType", "Notification")
.prop("hlk_email", mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Успешно отправлено")
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wftucm</bpmn:incoming><bpmn:outgoing>SequenceFlow_1z0g3yj</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1lfbwvr" name="Создаем запись в журнале почтовых уведомлений" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Notification")
.prop("hlk_email" , mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Ошибка отправки." + " " + errorCode)
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12wgkv7</bpmn:incoming><bpmn:outgoing>SequenceFlow_06gkhty</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_0p22m6y" name="Открываем пакет счетов" calledElement="AccountPoolCreate"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in businessKey="#{execution.processBusinessKey}" /></bpmn:extensionElements><bpmn:incoming>Flow_0emwpeo</bpmn:incoming><bpmn:outgoing>Flow_1drwx39</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_01tpdnc" name="Определяем инстанс айди клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "individualPerson",
	"filter": {
		"primaryId": "${clientPrimaryId}",
	},
	"projection": {
		"_id": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="clientInstanceId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1drwx39</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cmzdop</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_14m9ll7" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/individual/${clientInstanceId}/setAttribute/hlk_asset_account_open?incrementVersion=false&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0cmzdop</bpmn:incoming><bpmn:outgoing>SequenceFlow_0jof35z</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_01crkik" name="Создаем книгу" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "book")
.prop("hlk_full_name" , ShortNameCurrentCtpt)
.prop("ShortName" , ShortNameCurrentCtpt)
.prop("hlk_book_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "individualPerson"))
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0jof35z</bpmn:incoming><bpmn:incoming>Flow_05go7oa</bpmn:incoming><bpmn:outgoing>Flow_195f7s2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ftffu7" sourceRef="ParallelGateway_0v9azav" targetRef="CallActivity_0p31t0z" /><bpmn:sequenceFlow id="SequenceFlow_1kb0tcp" sourceRef="ParallelGateway_0v9azav" targetRef="CallActivity_1b38dfd" /><bpmn:sequenceFlow id="SequenceFlow_0jelg1l" sourceRef="CallActivity_0p31t0z" targetRef="ParallelGateway_1l0v7hw" /><bpmn:sequenceFlow id="SequenceFlow_0it4nlf" sourceRef="CallActivity_1b38dfd" targetRef="ParallelGateway_1l0v7hw" /><bpmn:sequenceFlow id="SequenceFlow_055l0ei" sourceRef="ParallelGateway_1l0v7hw" targetRef="ServiceTask_0bhskka" /><bpmn:sequenceFlow id="SequenceFlow_0fc28dk" sourceRef="ServiceTask_05dii2t" targetRef="EndEvent_1o8vq5r" /><bpmn:sequenceFlow id="SequenceFlow_0ob8kb3" sourceRef="ServiceTask_1whnh6a" targetRef="ServiceTask_0mf7gdb" /><bpmn:sequenceFlow id="SequenceFlow_0a208kg" sourceRef="ServiceTask_0bhskka" targetRef="CallActivity_1n7m39k" /><bpmn:sequenceFlow id="SequenceFlow_1pvr0o0" sourceRef="CallActivity_1n7m39k" targetRef="ServiceTask_01ownn0" /><bpmn:sequenceFlow id="SequenceFlow_1kq1bx9" sourceRef="ServiceTask_1ax5k1k" targetRef="ServiceTask_1nmdgu6" /><bpmn:sequenceFlow id="SequenceFlow_1jggnpm" sourceRef="ServiceTask_1nmdgu6" targetRef="ServiceTask_0h40654" /><bpmn:sequenceFlow id="SequenceFlow_1w3u7qp" sourceRef="ServiceTask_0h40654" targetRef="Activity_0u1es19" /><bpmn:sequenceFlow id="SequenceFlow_1z0g3yj" sourceRef="ServiceTask_15qej4w" targetRef="ServiceTask_0ppdg19" /><bpmn:sequenceFlow id="SequenceFlow_06gkhty" sourceRef="ServiceTask_1lfbwvr" targetRef="ServiceTask_0ppdg19" /><bpmn:sequenceFlow id="SequenceFlow_19zlk7g" sourceRef="ExclusiveGateway_1uulpna" targetRef="CallActivity_1wp4mc8"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${difference &lt;= 3}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0xigtll" sourceRef="ServiceTask_0kc3072" targetRef="CallActivity_1wp4mc8" /><bpmn:sequenceFlow id="SequenceFlow_0ca1oec" sourceRef="CallActivity_1wp4mc8" targetRef="ServiceTask_1ovc5kv" /><bpmn:sequenceFlow id="SequenceFlow_07nerxu" sourceRef="ServiceTask_0u0ea7s" targetRef="ScriptTask_1tsofa8" /><bpmn:sequenceFlow id="SequenceFlow_1c6igvg" sourceRef="ScriptTask_1h65r5f" targetRef="ExclusiveGateway_1uulpna" /><bpmn:sequenceFlow id="SequenceFlow_17u4qbs" sourceRef="ExclusiveGateway_1uulpna" targetRef="ServiceTask_0kc3072" /><bpmn:sequenceFlow id="SequenceFlow_0eaqocu" sourceRef="ServiceTask_01ownn0" targetRef="ServiceTask_1ax5k1k" /><bpmn:sequenceFlow id="SequenceFlow_1e4fd6h" sourceRef="ServiceTask_0fcxuy3" targetRef="ServiceTask_1jsjir9" /><bpmn:sequenceFlow id="SequenceFlow_1fxish9" sourceRef="ServiceTask_1jsjir9" targetRef="ServiceTask_0kol6s7" /><bpmn:sequenceFlow id="SequenceFlow_0bqz93f" sourceRef="ServiceTask_0kol6s7" targetRef="ExclusiveGateway_0ad0jvz" /><bpmn:sequenceFlow id="SequenceFlow_1kkknk2" sourceRef="ServiceTask_1ovc5kv" targetRef="ServiceTask_0fcxuy3" /><bpmn:sequenceFlow id="SequenceFlow_1daqwq2" sourceRef="ExclusiveGateway_0ad0jvz" targetRef="ServiceTask_1tk4n9g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${errorCode == ""}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0wftucm" sourceRef="ServiceTask_1tk4n9g" targetRef="ServiceTask_15qej4w" /><bpmn:sequenceFlow id="SequenceFlow_1dlu33d" sourceRef="ExclusiveGateway_0ad0jvz" targetRef="ServiceTask_1elau1c" /><bpmn:sequenceFlow id="SequenceFlow_12wgkv7" sourceRef="ServiceTask_1elau1c" targetRef="ServiceTask_1lfbwvr" /><bpmn:sequenceFlow id="SequenceFlow_0cmzdop" sourceRef="ServiceTask_01tpdnc" targetRef="ServiceTask_14m9ll7" /><bpmn:sequenceFlow id="SequenceFlow_0jof35z" sourceRef="ServiceTask_14m9ll7" targetRef="ServiceTask_01crkik" /><bpmn:sequenceFlow id="SequenceFlow_0e7hadp" sourceRef="ServiceTask_1h9ynfb" targetRef="ParallelGateway_0v9azav" /><bpmn:serviceTask id="ServiceTask_1ofibqq" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortName)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1lu7dfh</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dv8a5f</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_08boynk" name="определяем ShortName"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_fulltitle</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ShortName">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1uj2iuk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1lu7dfh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1lu7dfh" sourceRef="ServiceTask_08boynk" targetRef="ServiceTask_1ofibqq" /><bpmn:sequenceFlow id="SequenceFlow_1dv8a5f" sourceRef="ServiceTask_1ofibqq" targetRef="ServiceTask_1h07oau" /><bpmn:serviceTask id="ServiceTask_1e21hlv" name="Статус заявки &#34;Заполнение: Некорректно заполнены параметры&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Некорректно+заполнены+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1u10zqw</bpmn:incoming><bpmn:outgoing>SequenceFlow_1w20noy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1w20noy" sourceRef="ServiceTask_1e21hlv" targetRef="UserTask_1q5u97k" /><bpmn:serviceTask id="ServiceTask_11nfmym" name="clientType=ИП" camunda:expression="ИП" camunda:resultVariable="clientType"><bpmn:incoming>Flow_1yjv0yc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0hacp16</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0hacp16" sourceRef="ServiceTask_11nfmym" targetRef="Activity_03sochr" /><bpmn:serviceTask id="ServiceTask_0rwx9y6" name="Статус заявки &#34;В Обработке: Параметры заполнены&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=В+Обработке:+Параметры+заполнены</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0mlg3e8</bpmn:incoming><bpmn:outgoing>SequenceFlow_1979ol1</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_10ybcn6" name="Подпроцесс проверки ИИН" calledElement="IIN_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ewyd5w</bpmn:incoming><bpmn:outgoing>SequenceFlow_1rtq52q</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="SequenceFlow_1979ol1" sourceRef="ServiceTask_0rwx9y6" targetRef="CallActivity_116qky6" /><bpmn:exclusiveGateway id="ExclusiveGateway_0uficj4" default="SequenceFlow_0bsq02m"><bpmn:incoming>SequenceFlow_1rtq52q</bpmn:incoming><bpmn:outgoing>SequenceFlow_0bsq02m</bpmn:outgoing><bpmn:outgoing>SequenceFlow_00y6zui</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:callActivity id="CallActivity_1c2znbj" name="Подпроцесс проверки Номер документа" calledElement="NumberDocument_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0bsq02m</bpmn:incoming><bpmn:outgoing>SequenceFlow_0j53ehs</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_147qa4c" default="SequenceFlow_1uj2iuk"><bpmn:incoming>SequenceFlow_0j53ehs</bpmn:incoming><bpmn:outgoing>SequenceFlow_068xn7p</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1uj2iuk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0bsq02m" sourceRef="ExclusiveGateway_0uficj4" targetRef="CallActivity_1c2znbj" /><bpmn:sequenceFlow id="SequenceFlow_0j53ehs" sourceRef="CallActivity_1c2znbj" targetRef="ExclusiveGateway_147qa4c" /><bpmn:sequenceFlow id="SequenceFlow_1rtq52q" sourceRef="CallActivity_10ybcn6" targetRef="ExclusiveGateway_0uficj4" /><bpmn:sequenceFlow id="SequenceFlow_00y6zui" sourceRef="ExclusiveGateway_0uficj4" targetRef="Activity_0db480k"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_068xn7p" sourceRef="ExclusiveGateway_147qa4c" targetRef="Activity_0db480k"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1uj2iuk" sourceRef="ExclusiveGateway_147qa4c" targetRef="ServiceTask_08boynk" /><bpmn:serviceTask id="ServiceTask_18bozwu" name="Статус заявки &#34;Обработка: Заявка зарегистрирована&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+зарегистрирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08gktam</bpmn:incoming><bpmn:outgoing>Flow_0c5snek</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_008l2jy" name="Статус заявки &#34;На заполнении&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=На+заполнении</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0mjml9b</bpmn:incoming><bpmn:outgoing>Flow_0lmxga1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0lmxga1" sourceRef="Activity_008l2jy" targetRef="UserTask_1q5u97k" /><bpmn:serviceTask id="Activity_0n9n00q" name="Статус заявки &#34;В Обработке&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=В+Обработке</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0wzq9px</bpmn:incoming><bpmn:outgoing>Flow_02d2fmh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0db480k" name="Статус заявки &#34;Заполнение: Некорректно заполнены параметры&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Некорректно+заполнены+параметры</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_068xn7p</bpmn:incoming><bpmn:incoming>SequenceFlow_00y6zui</bpmn:incoming><bpmn:outgoing>Flow_1te6f5h</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1te6f5h" sourceRef="Activity_0db480k" targetRef="UserTask_1q5u97k" /><bpmn:sequenceFlow id="Flow_1t7vnmn" sourceRef="Activity_0t9q2qw" targetRef="Gateway_00i6wbj" /><bpmn:callActivity id="Activity_0t9q2qw" name="Проверка ИПДЛ" calledElement="IPDLCheck"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pmra6r</bpmn:incoming><bpmn:outgoing>Flow_1t7vnmn</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="Gateway_00i6wbj"><bpmn:incoming>Flow_1t7vnmn</bpmn:incoming><bpmn:outgoing>Flow_0w7hauf</bpmn:outgoing><bpmn:outgoing>Flow_0kmjsnr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0w7hauf" sourceRef="Gateway_00i6wbj" targetRef="ServiceTask_1pc3hsw"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${condition == "Ok" || condition == "Skip"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1joxbj0" name="Статус заявки отклонена, Договорные отношения с ИПДЛ запрещены"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Договорные+отношения+с+клиентом+запрещены</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kmjsnr</bpmn:incoming><bpmn:outgoing>Flow_0pu4nnh</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0kmjsnr" sourceRef="Gateway_00i6wbj" targetRef="Activity_1joxbj0"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${condition == "Declined"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_04vsg7c" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0pu4nnh</bpmn:incoming><bpmn:outgoing>Flow_0lik675</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0pu4nnh" sourceRef="Activity_1joxbj0" targetRef="Activity_04vsg7c" /><bpmn:endEvent id="Event_01xjt61"><bpmn:incoming>Flow_0lik675</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0lik675" sourceRef="Activity_04vsg7c" targetRef="Event_01xjt61" /><bpmn:serviceTask id="Activity_1pz6v5w" name="Получаем мобильный и емейл клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_mobile_phone&amp;systemName=hlk_email</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="phone"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_mobile_phone</camunda:script></camunda:outputParameter><camunda:outputParameter name="mail"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_email</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_182pm57</bpmn:incoming><bpmn:outgoing>Flow_1pyhfs6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_182pm57" sourceRef="ServiceTask_1h8wlq9" targetRef="Activity_1pz6v5w" /><bpmn:sequenceFlow id="Flow_1pyhfs6" sourceRef="Activity_1pz6v5w" targetRef="UserTask_08f7j4d" /><bpmn:sequenceFlow id="Flow_0btrysn" sourceRef="ServiceTask_0ppdg19" targetRef="ServiceTask_1f5kee3" /><bpmn:serviceTask id="Activity_0gmou2z" name="Записываем в объект ид клиента и ид партнера"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_ID_Client" : "${clientPrimaryId}",
"hlk_partner_id" : "${clientPrimaryId}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0o2kglv</bpmn:incoming><bpmn:outgoing>Flow_05bczvb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_05bczvb" sourceRef="Activity_0gmou2z" targetRef="Activity_01miiud" /><bpmn:scriptTask id="ScriptTask_0mze5e7" name="Декодируем url для отправки причины отмены" scriptFormat="groovy" camunda:resultVariable="hlk_reason_return"><bpmn:incoming>SequenceFlow_1l39ack</bpmn:incoming><bpmn:outgoing>SequenceFlow_07bbty4</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_return = execution.getVariable("hlk_reason_return")

hlk_reason_return = java.net.URLEncoder.encode(hlk_reason_return, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_07bbty4" sourceRef="ScriptTask_0mze5e7" targetRef="ServiceTask_01274nc" /><bpmn:scriptTask id="ScriptTask_049okat" name="Декодируем url для отправки причины отклонения" scriptFormat="groovy" camunda:resultVariable="hlk_reason_close"><bpmn:incoming>SequenceFlow_1tz6fak</bpmn:incoming><bpmn:outgoing>SequenceFlow_0hikcpl</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_close = execution.getVariable("hlk_reason_close")

hlk_reason_return = java.net.URLEncoder.encode(hlk_reason_close, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0hikcpl" sourceRef="ScriptTask_049okat" targetRef="ServiceTask_12j6s3j" /><bpmn:serviceTask id="ServiceTask_0w015wm" name="definition of &#34;key&#34;" camunda:expression="individual" camunda:resultVariable="key"><bpmn:incoming>SequenceFlow_0qn473g</bpmn:incoming><bpmn:outgoing>Flow_0wzq9px</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_03sochr" name="clientPrimaryId =-1" camunda:expression="${execution.setVariable(&#39;clientPrimaryId&#39;, &#39;-1&#39;)}"><bpmn:incoming>SequenceFlow_0hacp16</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cvycwo</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1kbarw9" sourceRef="ServiceTask_0enj3sl" targetRef="CallActivity_1eegr8a" /><bpmn:sequenceFlow id="Flow_05epzrt" sourceRef="CallActivity_1eegr8a" targetRef="CallActivity_0iobytb" /><bpmn:sequenceFlow id="Flow_1xa1ma3" sourceRef="CallActivity_0iobytb" targetRef="ServiceTask_1h8wlq9" /><bpmn:serviceTask id="Activity_1clfxap" name="Ожидаем ответ"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_AMLStatus</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0hn9lx3</bpmn:incoming><bpmn:incoming>Flow_0vlhu6u</bpmn:incoming><bpmn:outgoing>Flow_00csoeu</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0gcsk6o" default="Flow_1u2pcet"><bpmn:incoming>Flow_0t7bove</bpmn:incoming><bpmn:outgoing>Flow_0hn9lx3</bpmn:outgoing><bpmn:outgoing>Flow_1u2pcet</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0w4sjke" name="Формируем сообщение об ошибке" camunda:expression="Таймаут+ожидания+ответа+от+АМЛ" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_1u2pcet</bpmn:incoming><bpmn:outgoing>Flow_04ek24a</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0hn9lx3" sourceRef="Gateway_0gcsk6o" targetRef="Activity_1clfxap"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1u2pcet" sourceRef="Gateway_0gcsk6o" targetRef="Activity_0w4sjke" /><bpmn:sequenceFlow id="Flow_0c5snek" sourceRef="ServiceTask_18bozwu" targetRef="Activity_1jl81yl" /><bpmn:sequenceFlow id="Flow_00csoeu" sourceRef="Activity_1clfxap" targetRef="ExclusiveGateway_0wtz7ei" /><bpmn:serviceTask id="Activity_1ssbw75" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04ek24a</bpmn:incoming><bpmn:outgoing>Flow_10d95qi</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_04ek24a" sourceRef="Activity_0w4sjke" targetRef="Activity_1ssbw75" /><bpmn:sequenceFlow id="Flow_10d95qi" sourceRef="Activity_1ssbw75" targetRef="UserTask_1q5u97k" /><bpmn:subProcess id="Activity_0nhqxqz"><bpmn:incoming>SequenceFlow_0luyg5v</bpmn:incoming><bpmn:outgoing>Flow_1diznj4</bpmn:outgoing><bpmn:startEvent id="Event_1l9xqvp"><bpmn:outgoing>Flow_1vyaky0</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_16x620r"><bpmn:incoming>Flow_1vyaky0</bpmn:incoming><bpmn:outgoing>Flow_1lug6ep</bpmn:outgoing><bpmn:outgoing>Flow_06y5q23</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_0rayl59" camunda:asyncAfter="true"><bpmn:incoming>Flow_1lug6ep</bpmn:incoming><bpmn:outgoing>Flow_0rs2eeo</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1n0948r"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT360S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="Event_0wrhc2q"><bpmn:incoming>Flow_1la6sfz</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1fg1ltg" /></bpmn:endEvent><bpmn:endEvent id="Event_1jmaoqm"><bpmn:incoming>Flow_025ee95</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_161um2u" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1fkyki1" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0rs2eeo</bpmn:incoming><bpmn:outgoing>Flow_1la6sfz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_04o0fmp" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1lcg5xs</bpmn:incoming><bpmn:outgoing>Flow_025ee95</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_025ee95" sourceRef="Activity_04o0fmp" targetRef="Event_1jmaoqm" /><bpmn:sequenceFlow id="Flow_1la6sfz" sourceRef="Activity_1fkyki1" targetRef="Event_0wrhc2q" /><bpmn:sequenceFlow id="Flow_0rs2eeo" sourceRef="Event_0rayl59" targetRef="Activity_1fkyki1" /><bpmn:sequenceFlow id="Flow_1lug6ep" sourceRef="Gateway_16x620r" targetRef="Event_0rayl59" /><bpmn:sequenceFlow id="Flow_1vyaky0" sourceRef="Event_1l9xqvp" targetRef="Gateway_16x620r" /><bpmn:intermediateCatchEvent id="Event_033wrgd" camunda:asyncAfter="true"><bpmn:incoming>Flow_06y5q23</bpmn:incoming><bpmn:outgoing>Flow_1lcg5xs</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0v70rmt" messageRef="Message_1viecjo" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_1lcg5xs" sourceRef="Event_033wrgd" targetRef="Activity_04o0fmp" /><bpmn:sequenceFlow id="Flow_06y5q23" sourceRef="Gateway_16x620r" targetRef="Event_033wrgd" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_141vx4r"><bpmn:incoming>Flow_1diznj4</bpmn:incoming><bpmn:outgoing>Flow_1ga7ges</bpmn:outgoing><bpmn:outgoing>Flow_1mymg19</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1diznj4" sourceRef="Activity_0nhqxqz" targetRef="Gateway_141vx4r" /><bpmn:sequenceFlow id="Flow_1ga7ges" sourceRef="Gateway_141vx4r" targetRef="ServiceTask_0kxht5d"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0o2kglv" sourceRef="ServiceTask_0kxht5d" targetRef="Activity_0gmou2z" /><bpmn:serviceTask id="Activity_0opkbbc" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+клиента.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_1mymg19</bpmn:incoming><bpmn:outgoing>Flow_0mldx96</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1mymg19" sourceRef="Gateway_141vx4r" targetRef="Activity_0opkbbc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_19i1q6u" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0mldx96</bpmn:incoming><bpmn:outgoing>Flow_0tzrk83</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0mldx96" sourceRef="Activity_0opkbbc" targetRef="Activity_19i1q6u" /><bpmn:sequenceFlow id="Flow_0tzrk83" sourceRef="Activity_19i1q6u" targetRef="UserTask_1q5u97k" /><bpmn:serviceTask id="Activity_01miiud" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=AML.Совпадений+не+найдено.+Клиент+создан</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_05bczvb</bpmn:incoming><bpmn:outgoing>Flow_0caj1a6</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0caj1a6" sourceRef="Activity_01miiud" targetRef="ExclusiveGateway_1925x4x" /><bpmn:serviceTask id="Activity_1ixkeyg" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1j12v13</bpmn:incoming><bpmn:outgoing>Flow_1rlvfeo</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1946ouf" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rlvfeo</bpmn:incoming><bpmn:outgoing>Flow_08ez9ta</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1rlvfeo" sourceRef="Activity_1ixkeyg" targetRef="Activity_1946ouf" /><bpmn:sequenceFlow id="Flow_08ez9ta" sourceRef="Activity_1946ouf" targetRef="ExclusiveGateway_075ca4u" /><bpmn:subProcess id="Activity_0394qg9"><bpmn:incoming>SequenceFlow_1bumqpg</bpmn:incoming><bpmn:outgoing>Flow_11z3nog</bpmn:outgoing><bpmn:startEvent id="Event_0p4f10g"><bpmn:outgoing>Flow_0vjdxl3</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Activity_0guxz4y" name="Создаем заявку на регистрацию счета" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "account")
.prop("hlk_Account_Number" , accountNumber)
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("hlk_app_date" , regDate)
.prop("hlk_invoice_subaccount_type" , "Субсчет держателя")
.prop("hlk_account_type_holder" , "Физическое лицо")
.prop("hlk_InContract_ID_Client" , clientPrimaryId)
.prop("hlk_client_app", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_00m1d09</bpmn:incoming><bpmn:outgoing>Flow_0idyar4</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="Gateway_03a3z5h" camunda:asyncAfter="true"><bpmn:incoming>Flow_16rilx1</bpmn:incoming><bpmn:outgoing>Flow_07o2bp1</bpmn:outgoing><bpmn:outgoing>Flow_00m1d09</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="Activity_1j58qvk" name="Ожидаем сообщения о готовности к старту от подпроцесса" camunda:asyncAfter="true" messageRef="Message_1yppaj6"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">accountCreated</camunda:outputParameter><camunda:outputParameter name="accountProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="accountId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="accountTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="accountType">${type}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_07o2bp1</bpmn:incoming><bpmn:outgoing>Flow_0qno87u</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="Gateway_0gbzh6b"><bpmn:incoming>Flow_0qno87u</bpmn:incoming><bpmn:incoming>Flow_0idyar4</bpmn:incoming><bpmn:outgoing>Flow_1h4sn8k</bpmn:outgoing></bpmn:parallelGateway><bpmn:endEvent id="Event_1fl4z7d"><bpmn:incoming>Flow_02fmmu5</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_05qn0zq" /></bpmn:endEvent><bpmn:parallelGateway id="Gateway_1uj3794"><bpmn:incoming>Flow_0vjdxl3</bpmn:incoming><bpmn:outgoing>Flow_11awxv8</bpmn:outgoing><bpmn:outgoing>Flow_16rilx1</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_1joc6ud"><bpmn:incoming>Flow_11awxv8</bpmn:incoming><bpmn:outgoing>Flow_04if2ad</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_12et5w6"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT300S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_05mwhh1" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1h4sn8k</bpmn:incoming><bpmn:outgoing>Flow_02fmmu5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_08vbrbo" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_04if2ad</bpmn:incoming><bpmn:outgoing>Flow_0rn39qa</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0g5bn3v"><bpmn:incoming>Flow_0rn39qa</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1b6wczd" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_0rn39qa" sourceRef="Activity_08vbrbo" targetRef="Event_0g5bn3v" /><bpmn:sequenceFlow id="Flow_04if2ad" sourceRef="Event_1joc6ud" targetRef="Activity_08vbrbo" /><bpmn:sequenceFlow id="Flow_02fmmu5" sourceRef="Activity_05mwhh1" targetRef="Event_1fl4z7d" /><bpmn:sequenceFlow id="Flow_11awxv8" sourceRef="Gateway_1uj3794" targetRef="Event_1joc6ud" /><bpmn:sequenceFlow id="Flow_16rilx1" sourceRef="Gateway_1uj3794" targetRef="Gateway_03a3z5h" /><bpmn:sequenceFlow id="Flow_0vjdxl3" sourceRef="Event_0p4f10g" targetRef="Gateway_1uj3794" /><bpmn:sequenceFlow id="Flow_1h4sn8k" sourceRef="Gateway_0gbzh6b" targetRef="Activity_05mwhh1" /><bpmn:sequenceFlow id="Flow_0qno87u" sourceRef="Activity_1j58qvk" targetRef="Gateway_0gbzh6b" /><bpmn:sequenceFlow id="Flow_07o2bp1" sourceRef="Gateway_03a3z5h" targetRef="Activity_1j58qvk" /><bpmn:sequenceFlow id="Flow_0idyar4" sourceRef="Activity_0guxz4y" targetRef="Gateway_0gbzh6b" /><bpmn:sequenceFlow id="Flow_00m1d09" sourceRef="Gateway_03a3z5h" targetRef="Activity_0guxz4y" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_09o5jm6" default="Flow_080bdgh"><bpmn:incoming>Flow_11z3nog</bpmn:incoming><bpmn:outgoing>Flow_1o642mh</bpmn:outgoing><bpmn:outgoing>Flow_080bdgh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_11z3nog" sourceRef="Activity_0394qg9" targetRef="Gateway_09o5jm6" /><bpmn:serviceTask id="Activity_16od7to" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+заявки+на+регистрацию+счета.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_1o642mh</bpmn:incoming><bpmn:outgoing>Flow_02yaw60</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1o642mh" sourceRef="Gateway_09o5jm6" targetRef="Activity_16od7to"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1lidbqz" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_02yaw60</bpmn:incoming><bpmn:incoming>Flow_01eun2b</bpmn:incoming><bpmn:outgoing>Flow_05he591</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_02yaw60" sourceRef="Activity_16od7to" targetRef="Activity_1lidbqz" /><bpmn:sequenceFlow id="Flow_05he591" sourceRef="Activity_1lidbqz" targetRef="UserTask_1q5u97k" /><bpmn:scriptTask id="Activity_1jpu3x4" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>Flow_080bdgh</bpmn:incoming><bpmn:outgoing>Flow_0dw8iex</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_080bdgh" sourceRef="Gateway_09o5jm6" targetRef="Activity_1jpu3x4" /><bpmn:subProcess id="Activity_0qeooqt"><bpmn:incoming>Flow_0dw8iex</bpmn:incoming><bpmn:outgoing>Flow_0mzc01m</bpmn:outgoing><bpmn:startEvent id="Event_0ci2lxa"><bpmn:outgoing>Flow_025ds0v</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_05dwc30" camunda:asyncAfter="true"><bpmn:incoming>Flow_01a1itb</bpmn:incoming><bpmn:outgoing>Flow_1uuwf6q</bpmn:outgoing><bpmn:outgoing>Flow_1xcsxy4</bpmn:outgoing></bpmn:parallelGateway><bpmn:parallelGateway id="Gateway_18qtimc"><bpmn:incoming>Flow_025ds0v</bpmn:incoming><bpmn:outgoing>Flow_0cqfr8a</bpmn:outgoing><bpmn:outgoing>Flow_01a1itb</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_00ndil4"><bpmn:incoming>Flow_0cqfr8a</bpmn:incoming><bpmn:outgoing>Flow_1d9y3ve</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0fqxk65"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT300S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_1wcjpz5" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1d9y3ve</bpmn:incoming><bpmn:outgoing>Flow_16ocby4</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1m6nw6s"><bpmn:incoming>Flow_16ocby4</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_135ysdp" /></bpmn:endEvent><bpmn:parallelGateway id="Gateway_0c4no00"><bpmn:incoming>Flow_0g6egx9</bpmn:incoming><bpmn:incoming>Flow_1hxtctr</bpmn:incoming><bpmn:outgoing>Flow_1i2baxp</bpmn:outgoing></bpmn:parallelGateway><bpmn:serviceTask id="Activity_01q9e24" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1i2baxp</bpmn:incoming><bpmn:outgoing>Flow_1bt8eqq</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_072gxjc"><bpmn:incoming>Flow_1bt8eqq</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_01npt8f" /></bpmn:endEvent><bpmn:serviceTask id="Activity_0iqtofh" name="Создаем заявку на регистрацию договора" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_EDS_Confirmation" , false)
.prop("hlk_executor" , initiator)
.prop("hlk_contract_status" , "Открыт")
.prop("hlk_account_type_contract" , "Брокерское обслуживание ФЛ")
.prop("hlk_source_doc" , "Вручную")
.prop("ObjectType" , "agreement")
.prop("hlk_app_date" , regDate)
.prop("hlk_Contract_Start_Date" , regDate)
.prop("hlk_InContract_ID_Client" , clientPrimaryId)
.prop("hlk_client_FL", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type","0")
.prop("hlk_Tariff_Plan" , "Стандартный")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xcsxy4</bpmn:incoming><bpmn:outgoing>Flow_1hxtctr</bpmn:outgoing></bpmn:serviceTask><bpmn:receiveTask id="Activity_1r110na" name="Ожидаем сообщения о готовности к старту от подпроцесса" camunda:asyncAfter="true" messageRef="Message_1i3ygvb"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">agreementCreated</camunda:outputParameter><camunda:outputParameter name="agreementProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="agreementId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="agreementTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="agreementType">${type}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_1uuwf6q</bpmn:incoming><bpmn:outgoing>Flow_0g6egx9</bpmn:outgoing></bpmn:receiveTask><bpmn:sequenceFlow id="Flow_0g6egx9" sourceRef="Activity_1r110na" targetRef="Gateway_0c4no00" /><bpmn:sequenceFlow id="Flow_1hxtctr" sourceRef="Activity_0iqtofh" targetRef="Gateway_0c4no00" /><bpmn:sequenceFlow id="Flow_16ocby4" sourceRef="Activity_1wcjpz5" targetRef="Event_1m6nw6s" /><bpmn:sequenceFlow id="Flow_1bt8eqq" sourceRef="Activity_01q9e24" targetRef="Event_072gxjc" /><bpmn:sequenceFlow id="Flow_1i2baxp" sourceRef="Gateway_0c4no00" targetRef="Activity_01q9e24" /><bpmn:sequenceFlow id="Flow_1d9y3ve" sourceRef="Event_00ndil4" targetRef="Activity_1wcjpz5" /><bpmn:sequenceFlow id="Flow_0cqfr8a" sourceRef="Gateway_18qtimc" targetRef="Event_00ndil4" /><bpmn:sequenceFlow id="Flow_01a1itb" sourceRef="Gateway_18qtimc" targetRef="Gateway_05dwc30" /><bpmn:sequenceFlow id="Flow_025ds0v" sourceRef="Event_0ci2lxa" targetRef="Gateway_18qtimc" /><bpmn:sequenceFlow id="Flow_1uuwf6q" sourceRef="Gateway_05dwc30" targetRef="Activity_1r110na" /><bpmn:sequenceFlow id="Flow_1xcsxy4" sourceRef="Gateway_05dwc30" targetRef="Activity_0iqtofh" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_0dw8iex" sourceRef="Activity_1jpu3x4" targetRef="Activity_0qeooqt" /><bpmn:exclusiveGateway id="Gateway_0hb2xbe" default="Flow_13app3q"><bpmn:incoming>Flow_0mzc01m</bpmn:incoming><bpmn:outgoing>Flow_0p9jwye</bpmn:outgoing><bpmn:outgoing>Flow_13app3q</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0mzc01m" sourceRef="Activity_0qeooqt" targetRef="Gateway_0hb2xbe" /><bpmn:serviceTask id="Activity_1jogccz" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+заявки+на+регистрацию+договора.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_0p9jwye</bpmn:incoming><bpmn:outgoing>Flow_01eun2b</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0p9jwye" sourceRef="Gateway_0hb2xbe" targetRef="Activity_1jogccz"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_01eun2b" sourceRef="Activity_1jogccz" targetRef="Activity_1lidbqz" /><bpmn:sequenceFlow id="Flow_13app3q" sourceRef="Gateway_0hb2xbe" targetRef="ScriptTask_0f73znb" /><bpmn:subProcess id="Activity_0u1es19"><bpmn:incoming>SequenceFlow_1w3u7qp</bpmn:incoming><bpmn:outgoing>Flow_0be1knj</bpmn:outgoing><bpmn:startEvent id="Event_16opw7z"><bpmn:outgoing>Flow_0ljmj2o</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_182ldi3"><bpmn:incoming>Flow_0ljmj2o</bpmn:incoming><bpmn:outgoing>Flow_1kdd8n8</bpmn:outgoing><bpmn:outgoing>Flow_1cfa4kr</bpmn:outgoing><bpmn:outgoing>Flow_1pcrtvs</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="Activity_18l764g" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_01xo896"><bpmn:incoming>Flow_1cfa4kr</bpmn:incoming><bpmn:outgoing>Flow_0uxssif</bpmn:outgoing></bpmn:receiveTask><bpmn:userTask id="Activity_1ycnc51" name="Возврат к заполнению" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1kdd8n8</bpmn:incoming><bpmn:outgoing>Flow_19ekouu</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="Activity_0c3pg3u" name="Устанавливаем признак" camunda:expression="true" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_19ekouu</bpmn:incoming><bpmn:outgoing>Flow_1ps74ao</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1gcic4n"><bpmn:incoming>Flow_1ps74ao</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0xu8fkd" /></bpmn:endEvent><bpmn:endEvent id="Event_14tm593"><bpmn:incoming>Flow_0omx8z0</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_013q3kz" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1xm84e8" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_0uxssif</bpmn:incoming><bpmn:outgoing>Flow_0omx8z0</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0omx8z0" sourceRef="Activity_1xm84e8" targetRef="Event_14tm593" /><bpmn:sequenceFlow id="Flow_0uxssif" sourceRef="Activity_18l764g" targetRef="Activity_1xm84e8" /><bpmn:sequenceFlow id="Flow_1ps74ao" sourceRef="Activity_0c3pg3u" targetRef="Event_1gcic4n" /><bpmn:sequenceFlow id="Flow_19ekouu" sourceRef="Activity_1ycnc51" targetRef="Activity_0c3pg3u" /><bpmn:sequenceFlow id="Flow_1kdd8n8" sourceRef="Gateway_182ldi3" targetRef="Activity_1ycnc51" /><bpmn:sequenceFlow id="Flow_1cfa4kr" sourceRef="Gateway_182ldi3" targetRef="Activity_18l764g" /><bpmn:sequenceFlow id="Flow_0ljmj2o" sourceRef="Event_16opw7z" targetRef="Gateway_182ldi3" /><bpmn:userTask id="Activity_08klsdw" name="Ручная привязка МТ 539" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Otbor539&#34;,&#34;label&#34;:&#34;Ручной отбор MT539&#34;,&#34;type&#34;:&#34;swift&#34;}" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>Flow_1pcrtvs</bpmn:incoming><bpmn:incoming>Flow_0ojzpwt</bpmn:incoming><bpmn:outgoing>Flow_1p89qul</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="Flow_1pcrtvs" sourceRef="Gateway_182ldi3" targetRef="Activity_08klsdw" /><bpmn:serviceTask id="Activity_1j1cy2y" name="Устанавливаем признак isRejected = false" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_1oe6xc0</bpmn:incoming><bpmn:outgoing>Flow_1rjzfcv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1p89qul" sourceRef="Activity_08klsdw" targetRef="Activity_0dg02ru" /><bpmn:endEvent id="Event_1ddyzmr"><bpmn:incoming>Flow_1rjzfcv</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1qmy5v8" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1rjzfcv" sourceRef="Activity_1j1cy2y" targetRef="Event_1ddyzmr" /><bpmn:serviceTask id="Activity_0dg02ru" name="Проводим метчинг"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/condition/evaluate/539FindPair?leftType=SWIFT&amp;leftId=${swiftId}&amp;rightType=BOOK&amp;rightId=${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="matchingResult">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1p89qul</bpmn:incoming><bpmn:outgoing>Flow_0xsfut0</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0enmayj" default="Flow_1oe6xc0"><bpmn:incoming>Flow_0xsfut0</bpmn:incoming><bpmn:outgoing>Flow_1oe6xc0</bpmn:outgoing><bpmn:outgoing>Flow_0i59ji4</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0xsfut0" sourceRef="Activity_0dg02ru" targetRef="Gateway_0enmayj" /><bpmn:sequenceFlow id="Flow_1oe6xc0" sourceRef="Gateway_0enmayj" targetRef="Activity_1j1cy2y" /><bpmn:sequenceFlow id="Flow_0i59ji4" sourceRef="Gateway_0enmayj" targetRef="Activity_0oa3skf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${matchingResult == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0oa3skf" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+прикрепленного+SWIFT</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0i59ji4</bpmn:incoming><bpmn:outgoing>Flow_0ojzpwt</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ojzpwt" sourceRef="Activity_0oa3skf" targetRef="Activity_08klsdw" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_1wj9fbt" default="Flow_0vdug0c"><bpmn:incoming>Flow_0be1knj</bpmn:incoming><bpmn:outgoing>Flow_04qz97r</bpmn:outgoing><bpmn:outgoing>Flow_0vdug0c</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0be1knj" sourceRef="Activity_0u1es19" targetRef="Gateway_1wj9fbt" /><bpmn:serviceTask id="Activity_1mpdox6" name="Устанавливаем признак вернувшейся заявки" camunda:expression="true" camunda:resultVariable="cdRejected"><bpmn:incoming>Flow_0w69v86</bpmn:incoming><bpmn:incoming>Flow_1yybsfh</bpmn:incoming><bpmn:outgoing>Flow_0gmjn17</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1obymz8" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+FASTI.+Требует+доработки+исполнителем</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04qz97r</bpmn:incoming><bpmn:outgoing>Flow_18385j8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1atruar" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12l5ldp</bpmn:incoming><bpmn:outgoing>Flow_1m7ttk1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1evv9ui" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1m7ttk1</bpmn:incoming><bpmn:outgoing>Flow_1md00no</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1xebqw4" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_18385j8</bpmn:incoming><bpmn:outgoing>Flow_077j0ke</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_00hkb3z" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_077j0ke</bpmn:incoming><bpmn:outgoing>Flow_12l5ldp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1nuzh8c" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_1md00no</bpmn:incoming><bpmn:outgoing>Flow_0w69v86</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0w69v86" sourceRef="Activity_1nuzh8c" targetRef="Activity_1mpdox6" /><bpmn:sequenceFlow id="Flow_18385j8" sourceRef="Activity_1obymz8" targetRef="Activity_1xebqw4" /><bpmn:sequenceFlow id="Flow_12l5ldp" sourceRef="Activity_00hkb3z" targetRef="Activity_1atruar" /><bpmn:sequenceFlow id="Flow_1m7ttk1" sourceRef="Activity_1atruar" targetRef="Activity_1evv9ui" /><bpmn:sequenceFlow id="Flow_1md00no" sourceRef="Activity_1evv9ui" targetRef="Activity_1nuzh8c" /><bpmn:sequenceFlow id="Flow_077j0ke" sourceRef="Activity_1xebqw4" targetRef="Activity_00hkb3z" /><bpmn:sequenceFlow id="Flow_04qz97r" sourceRef="Gateway_1wj9fbt" targetRef="Activity_1obymz8"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:receiveTask id="Activity_0mvt89u" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_18yqsfm"><bpmn:incoming>Flow_1ob0wkg</bpmn:incoming><bpmn:outgoing>Flow_0kqlvuo</bpmn:outgoing></bpmn:receiveTask><bpmn:serviceTask id="Activity_05fy1vq" name="Сохраняем 539"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/attach/${swiftId}?type=BOOK&amp;instanceId=${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wqfpru</bpmn:incoming><bpmn:outgoing>Flow_0zs7hoo</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1qg8umg" name="Смотрим статус"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_OPERATION_STATUS</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0kqlvuo</bpmn:incoming><bpmn:incoming>Flow_0vdug0c</bpmn:incoming><bpmn:outgoing>Flow_1crvwxw</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ukky3y" name="Меняем статус заявки SWIFT принят"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_19ixmke</bpmn:incoming><bpmn:outgoing>Flow_13gwajb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0y5io8y" name="Меняем статус заявки SWIFT принят для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13gwajb</bpmn:incoming><bpmn:outgoing>Flow_1ob0wkg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ob0wkg" sourceRef="Activity_0y5io8y" targetRef="Activity_0mvt89u" /><bpmn:sequenceFlow id="Flow_0kqlvuo" sourceRef="Activity_0mvt89u" targetRef="Activity_1qg8umg" /><bpmn:sequenceFlow id="Flow_1crvwxw" sourceRef="Activity_1qg8umg" targetRef="Activity_15cbpct" /><bpmn:sequenceFlow id="Flow_13gwajb" sourceRef="Activity_0ukky3y" targetRef="Activity_0y5io8y" /><bpmn:sequenceFlow id="Flow_0vdug0c" sourceRef="Gateway_1wj9fbt" targetRef="Activity_1qg8umg" /><bpmn:exclusiveGateway id="Gateway_0l97h3s" default="Flow_0u5brxk"><bpmn:incoming>Flow_0zs7hoo</bpmn:incoming><bpmn:outgoing>Flow_19ixmke</bpmn:outgoing><bpmn:outgoing>Flow_0l75rbc</bpmn:outgoing><bpmn:outgoing>Flow_0u5brxk</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0zs7hoo" sourceRef="Activity_05fy1vq" targetRef="Gateway_0l97h3s" /><bpmn:sequenceFlow id="Flow_19ixmke" sourceRef="Gateway_0l97h3s" targetRef="Activity_0ukky3y"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "30"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0l75rbc" sourceRef="Gateway_0l97h3s" targetRef="ServiceTask_0u0ea7s"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "00"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0hi0n7r" sourceRef="ScriptTask_1tsofa8" targetRef="ScriptTask_1h65r5f" /><bpmn:serviceTask id="Activity_1z1016v" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0u5brxk</bpmn:incoming><bpmn:outgoing>Flow_1nr6453</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_05udk42" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0no0erz</bpmn:incoming><bpmn:outgoing>Flow_139o48d</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1h2y1ne" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Открытие БС " +  ShortName)
.prop("text","Внимание! Ошибка при открытии БС № " + accountNumber + "на имя " + ShortName + ". Счет не открыт в ЦД по причине: ошибка SWIFT.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1alvp20</bpmn:incoming><bpmn:outgoing>Flow_1yybsfh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0lcl85u" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nr6453</bpmn:incoming><bpmn:outgoing>Flow_0no0erz</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1uayj6a" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_139o48d</bpmn:incoming><bpmn:outgoing>Flow_09j5lrt</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1snynxj" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_09j5lrt</bpmn:incoming><bpmn:outgoing>Flow_1alvp20</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1nr6453" sourceRef="Activity_1z1016v" targetRef="Activity_0lcl85u" /><bpmn:sequenceFlow id="Flow_0no0erz" sourceRef="Activity_0lcl85u" targetRef="Activity_05udk42" /><bpmn:sequenceFlow id="Flow_139o48d" sourceRef="Activity_05udk42" targetRef="Activity_1uayj6a" /><bpmn:sequenceFlow id="Flow_1alvp20" sourceRef="Activity_1snynxj" targetRef="Activity_1h2y1ne" /><bpmn:sequenceFlow id="Flow_09j5lrt" sourceRef="Activity_1uayj6a" targetRef="Activity_1snynxj" /><bpmn:sequenceFlow id="Flow_0u5brxk" sourceRef="Gateway_0l97h3s" targetRef="Activity_1z1016v" /><bpmn:sequenceFlow id="Flow_1yybsfh" sourceRef="Activity_1h2y1ne" targetRef="Activity_1mpdox6" /><bpmn:sequenceFlow id="Flow_0gmjn17" sourceRef="Activity_1mpdox6" targetRef="UserTask_1q5u97k" /><bpmn:sequenceFlow id="Flow_1jhu0tx" sourceRef="ServiceTask_1f5kee3" targetRef="ServiceTask_0usxmwk" /><bpmn:sequenceFlow id="Flow_0381xze" sourceRef="ServiceTask_0usxmwk" targetRef="ServiceTask_1pt0hpr" /><bpmn:sequenceFlow id="Flow_05w4ce7" sourceRef="ServiceTask_1pt0hpr" targetRef="ServiceTask_1whnh6a" /><bpmn:exclusiveGateway id="Gateway_0j75jxb" default="Flow_1ypzew5"><bpmn:incoming>Flow_0lg0rn4</bpmn:incoming><bpmn:outgoing>Flow_0i2mexo</bpmn:outgoing><bpmn:outgoing>Flow_1ypzew5</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0lg0rn4" sourceRef="ServiceTask_0mf7gdb" targetRef="Gateway_0j75jxb" /><bpmn:userTask id="Activity_0n88gti" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0023usd</bpmn:incoming><bpmn:outgoing>Flow_1lc8h7w</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_133v1bi" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_0i2mexo</bpmn:incoming><bpmn:outgoing>Flow_12om2z9</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_19wst2s" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1lc8h7w</bpmn:incoming><bpmn:outgoing>Flow_1df83ji</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1lc8h7w" sourceRef="Activity_0n88gti" targetRef="Activity_19wst2s"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0fjnajp" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_12om2z9</bpmn:incoming><bpmn:outgoing>Flow_0023usd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0i2mexo" sourceRef="Gateway_0j75jxb" targetRef="Activity_133v1bi"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_12om2z9" sourceRef="Activity_133v1bi" targetRef="Activity_0fjnajp" /><bpmn:sequenceFlow id="Flow_0023usd" sourceRef="Activity_0fjnajp" targetRef="Activity_0n88gti" /><bpmn:sequenceFlow id="Flow_1df83ji" sourceRef="Activity_19wst2s" targetRef="ServiceTask_0mf7gdb" /><bpmn:sequenceFlow id="Flow_1ypzew5" sourceRef="Gateway_0j75jxb" targetRef="ServiceTask_0lbops9" /><bpmn:exclusiveGateway id="Gateway_0xyusdr" default="Flow_00531d5"><bpmn:incoming>Flow_0w6zbg1</bpmn:incoming><bpmn:outgoing>Flow_1vvu3ha</bpmn:outgoing><bpmn:outgoing>Flow_00531d5</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_026ae5p" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_049ebkx</bpmn:incoming><bpmn:outgoing>Flow_09e3mzf</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_1hqu0n3" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_09e3mzf</bpmn:incoming><bpmn:outgoing>Flow_1ipiwmw</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_1t0d62e" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_1vvu3ha</bpmn:incoming><bpmn:outgoing>Flow_049ebkx</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0or7muh" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ipiwmw</bpmn:incoming><bpmn:outgoing>Flow_0c9je19</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1vvu3ha" sourceRef="Gateway_0xyusdr" targetRef="Activity_1t0d62e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_049ebkx" sourceRef="Activity_1t0d62e" targetRef="Activity_026ae5p" /><bpmn:sequenceFlow id="Flow_09e3mzf" sourceRef="Activity_026ae5p" targetRef="Activity_1hqu0n3" /><bpmn:sequenceFlow id="Flow_1ipiwmw" sourceRef="Activity_1hqu0n3" targetRef="Activity_0or7muh"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0w6zbg1" sourceRef="ServiceTask_0lbops9" targetRef="Gateway_0xyusdr" /><bpmn:sequenceFlow id="Flow_0c9je19" sourceRef="Activity_0or7muh" targetRef="ServiceTask_0lbops9" /><bpmn:sequenceFlow id="Flow_00531d5" sourceRef="Gateway_0xyusdr" targetRef="ServiceTask_0p8ylqv" /><bpmn:exclusiveGateway id="Gateway_04yhvu8" default="Flow_0emwpeo"><bpmn:incoming>Flow_1xtyz4z</bpmn:incoming><bpmn:outgoing>Flow_0ytq5p5</bpmn:outgoing><bpmn:outgoing>Flow_0emwpeo</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_08y6tn8" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dqpwjl</bpmn:incoming><bpmn:outgoing>Flow_0e7i6jp</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_0gzkrit" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0e7i6jp</bpmn:incoming><bpmn:outgoing>Flow_1rpggxk</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_0s69wv4" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_0ytq5p5</bpmn:incoming><bpmn:outgoing>Flow_0dqpwjl</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1rpq7q1" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rpggxk</bpmn:incoming><bpmn:outgoing>Flow_177iq7s</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_177iq7s" sourceRef="Activity_1rpq7q1" targetRef="ServiceTask_0p8ylqv" /><bpmn:sequenceFlow id="Flow_0ytq5p5" sourceRef="Gateway_04yhvu8" targetRef="Activity_0s69wv4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0e7i6jp" sourceRef="Activity_08y6tn8" targetRef="Activity_0gzkrit" /><bpmn:sequenceFlow id="Flow_1xtyz4z" sourceRef="ServiceTask_0p8ylqv" targetRef="Gateway_04yhvu8" /><bpmn:sequenceFlow id="Flow_1rpggxk" sourceRef="Activity_0gzkrit" targetRef="Activity_1rpq7q1"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0dqpwjl" sourceRef="Activity_0s69wv4" targetRef="Activity_08y6tn8" /><bpmn:sequenceFlow id="Flow_0emwpeo" sourceRef="Gateway_04yhvu8" targetRef="CallActivity_0p22m6y" /><bpmn:sequenceFlow id="Flow_1drwx39" sourceRef="CallActivity_0p22m6y" targetRef="ServiceTask_01tpdnc" /><bpmn:exclusiveGateway id="Gateway_0nrevn5" default="Flow_0vfycrh"><bpmn:incoming>Flow_195f7s2</bpmn:incoming><bpmn:outgoing>Flow_0u62svs</bpmn:outgoing><bpmn:outgoing>Flow_0vfycrh</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_02tibuy" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1b5wtix</bpmn:incoming><bpmn:outgoing>Flow_03ufxwq</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_1x4g4nr" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_03ufxwq</bpmn:incoming><bpmn:outgoing>Flow_1rgapov</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_0ilj5dl" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_0u62svs</bpmn:incoming><bpmn:outgoing>Flow_1b5wtix</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1ozxz0u" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rgapov</bpmn:incoming><bpmn:outgoing>Flow_05go7oa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0u62svs" sourceRef="Gateway_0nrevn5" targetRef="Activity_0ilj5dl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1b5wtix" sourceRef="Activity_0ilj5dl" targetRef="Activity_02tibuy" /><bpmn:sequenceFlow id="Flow_03ufxwq" sourceRef="Activity_02tibuy" targetRef="Activity_1x4g4nr" /><bpmn:sequenceFlow id="Flow_1rgapov" sourceRef="Activity_1x4g4nr" targetRef="Activity_1ozxz0u"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_05go7oa" sourceRef="Activity_1ozxz0u" targetRef="ServiceTask_01crkik" /><bpmn:sequenceFlow id="Flow_195f7s2" sourceRef="ServiceTask_01crkik" targetRef="Gateway_0nrevn5" /><bpmn:sequenceFlow id="Flow_0vfycrh" sourceRef="Gateway_0nrevn5" targetRef="ServiceTask_08jyk0p" /><bpmn:sequenceFlow id="Flow_0uj3ort" sourceRef="ServiceTask_08jyk0p" targetRef="ServiceTask_05dii2t" /><bpmn:sequenceFlow id="Flow_0wzq9px" sourceRef="ServiceTask_0w015wm" targetRef="Activity_0n9n00q" /><bpmn:sequenceFlow id="Flow_02d2fmh" sourceRef="Activity_0n9n00q" targetRef="ServiceTask_0rd0afv" /><bpmn:sequenceFlow id="Flow_16fsa4s" sourceRef="ServiceTask_0rd0afv" targetRef="ServiceTask_1sz2gn0" /><bpmn:sequenceFlow id="Flow_1volwfg" sourceRef="ServiceTask_1sz2gn0" targetRef="ServiceTask_1wddw0j" /><bpmn:sequenceFlow id="Flow_1d6lk72" sourceRef="ScriptTask_1fke5rw" targetRef="ServiceTask_13xfkh1" /><bpmn:sequenceFlow id="Flow_1yjv0yc" sourceRef="ServiceTask_13xfkh1" targetRef="ServiceTask_11nfmym" /><bpmn:sequenceFlow id="Flow_02l1iim" sourceRef="ExclusiveGateway_0n5jdtr" targetRef="ExclusiveGateway_1925x4x" /><bpmn:serviceTask id="Activity_0gjb4hh" name="amlRecieved= -1" camunda:expression="${execution.setVariable(&#39;amlRecieved&#39;, &#39;-1&#39;)}"><bpmn:incoming>SequenceFlow_1cvycwo</bpmn:incoming><bpmn:outgoing>Flow_0c9a5hz</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0c9a5hz" sourceRef="Activity_0gjb4hh" targetRef="Activity_1vdhrbz" /><bpmn:serviceTask id="Activity_1vdhrbz" name="STATUS = U" camunda:expression="${execution.setVariable(&#39;status&#39;, &#39;u&#39;)}"><bpmn:incoming>Flow_0c9a5hz</bpmn:incoming><bpmn:outgoing>Flow_01n093e</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_01n093e" sourceRef="Activity_1vdhrbz" targetRef="Activity_0pxt9fb" /><bpmn:subProcess id="Activity_17z9vef"><bpmn:incoming>Flow_066xl5i</bpmn:incoming><bpmn:outgoing>Flow_0t7bove</bpmn:outgoing><bpmn:scriptTask id="Activity_00ztrtq" name="waiting for signal" scriptFormat="javascript"><bpmn:incoming>Flow_04vmzpl</bpmn:incoming><bpmn:outgoing>Flow_0t1b43x</bpmn:outgoing><bpmn:script>print(new Date() + " waiting for signal " + instanceId)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1hp27xt" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0efj982</bpmn:incoming><bpmn:outgoing>Flow_102gqwg</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="Event_13p1jr9" camunda:asyncAfter="true"><bpmn:incoming>Flow_0t1b43x</bpmn:incoming><bpmn:outgoing>Flow_0efj982</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_13q4dax" signalRef="Signal_071v5yx" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_1799bzq" name="Отправка в AML"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидает+ответа+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1j3zkhe</bpmn:incoming><bpmn:outgoing>Flow_169x1tp</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0k74p9c" name="Отправка в AML" camunda:asyncBefore="true" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отправлено+в+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0zin39j</bpmn:incoming><bpmn:outgoing>Flow_1j3zkhe</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0a7uslc"><bpmn:incoming>Flow_102gqwg</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0r9zyct" /></bpmn:endEvent><bpmn:intermediateCatchEvent id="Event_18nfkrz"><bpmn:incoming>Flow_169x1tp</bpmn:incoming><bpmn:outgoing>Flow_1g4429x</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1d8k2ly"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT900S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="Event_0lhww0o"><bpmn:incoming>Flow_1lh59sc</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1apnajj" /></bpmn:endEvent><bpmn:serviceTask id="Activity_093gucv" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1g4429x</bpmn:incoming><bpmn:outgoing>Flow_1lh59sc</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="Gateway_0o2sqam"><bpmn:incoming>Flow_0gsbjmg</bpmn:incoming><bpmn:outgoing>Flow_04vmzpl</bpmn:outgoing><bpmn:outgoing>Flow_0zin39j</bpmn:outgoing></bpmn:parallelGateway><bpmn:startEvent id="Event_184o5yv"><bpmn:outgoing>Flow_0gsbjmg</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_1g4429x" sourceRef="Event_18nfkrz" targetRef="Activity_093gucv" /><bpmn:sequenceFlow id="Flow_1lh59sc" sourceRef="Activity_093gucv" targetRef="Event_0lhww0o" /><bpmn:sequenceFlow id="Flow_169x1tp" sourceRef="Activity_1799bzq" targetRef="Event_18nfkrz" /><bpmn:sequenceFlow id="Flow_102gqwg" sourceRef="Activity_1hp27xt" targetRef="Event_0a7uslc" /><bpmn:sequenceFlow id="Flow_04vmzpl" sourceRef="Gateway_0o2sqam" targetRef="Activity_00ztrtq" /><bpmn:sequenceFlow id="Flow_0efj982" sourceRef="Event_13p1jr9" targetRef="Activity_1hp27xt" /><bpmn:sequenceFlow id="Flow_0t1b43x" sourceRef="Activity_00ztrtq" targetRef="Event_13p1jr9" /><bpmn:sequenceFlow id="Flow_0zin39j" sourceRef="Gateway_0o2sqam" targetRef="Activity_0k74p9c" /><bpmn:sequenceFlow id="Flow_1j3zkhe" sourceRef="Activity_0k74p9c" targetRef="Activity_1799bzq" /><bpmn:sequenceFlow id="Flow_0gsbjmg" sourceRef="Event_184o5yv" targetRef="Gateway_0o2sqam" /></bpmn:subProcess><bpmn:serviceTask id="Activity_1e5to57" name="answer" camunda:expression="${execution.setVariable(&#39;answer&#39;, &#39;-1&#39;)}"><bpmn:incoming>Flow_1a6z5ir</bpmn:incoming><bpmn:outgoing>Flow_066xl5i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1a6z5ir" sourceRef="ServiceTask_1p03u53" targetRef="Activity_1e5to57" /><bpmn:sequenceFlow id="Flow_066xl5i" sourceRef="Activity_1e5to57" targetRef="Activity_17z9vef" /><bpmn:sequenceFlow id="Flow_0t7bove" sourceRef="Activity_17z9vef" targetRef="Gateway_0gcsk6o" /><bpmn:intermediateCatchEvent id="Event_003b3q7" camunda:asyncAfter="true"><bpmn:incoming>Flow_1g7v1rr</bpmn:incoming><bpmn:outgoing>Flow_0vlhu6u</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_041otjp" signalRef="Signal_071v5yx" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_1g7v1rr" sourceRef="ServiceTask_011z1yf" targetRef="Event_003b3q7" /><bpmn:sequenceFlow id="Flow_0vlhu6u" sourceRef="Event_003b3q7" targetRef="Activity_1clfxap" /><bpmn:serviceTask id="Activity_15cbpct" name="Смотрим Дату"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_DOCREG_DATE</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="SWIFT_DOCREG_DATE"><camunda:script scriptFormat="javascript">response.replace(/"/g, '').substring(0, 10)</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1crvwxw</bpmn:incoming><bpmn:outgoing>Flow_1wqfpru</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1wqfpru" sourceRef="Activity_15cbpct" targetRef="Activity_05fy1vq" /><bpmn:serviceTask id="Activity_0qpj4ft" name="Определяем, есть ли клиент с тем же именем"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "individualPerson", 	"filter": 
{
 "$or": 
[		
{
"templatePrimaryId": "5d7a7f9d24aa9a00085186bf",
"attributes.ShortName": "${ShortName}", 
"activityStatus" : "ACTIVE"
}, 	
{
"templatePrimaryId": "5e9d80918a09a911b7f273f9",
"attributes.ShortName": "${ShortName}", 
"activityStatus" : "ACTIVE"
}
]
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundTeska"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="TeskaId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyTeska"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1rxmfxm</bpmn:incoming><bpmn:outgoing>Flow_1fgknmb</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_0jit00r" default="Flow_0esvllm"><bpmn:incoming>Flow_1fgknmb</bpmn:incoming><bpmn:outgoing>Flow_0esvllm</bpmn:outgoing><bpmn:outgoing>Flow_0kacjj6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1jl81yl" name="Устанавливаем признак foundTeska = false" camunda:asyncAfter="true" camunda:expression="false" camunda:resultVariable="foundTeska"><bpmn:incoming>Flow_0c5snek</bpmn:incoming><bpmn:outgoing>Flow_1rxmfxm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0esvllm" sourceRef="Gateway_0jit00r" targetRef="Activity_1v07j04" /><bpmn:exclusiveGateway id="Gateway_0d0m2l5" default="Flow_06x7glz"><bpmn:incoming>Flow_0kacjj6</bpmn:incoming><bpmn:outgoing>Flow_1guaxmr</bpmn:outgoing><bpmn:outgoing>Flow_06x7glz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_0xzo7xe" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_03emr79</bpmn:incoming><bpmn:outgoing>Flow_1kfyyny</bpmn:outgoing><bpmn:script>ShortName + " " + accountNumber.substring(accountNumber.length()-6)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_10tpley" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nz8i6v</bpmn:incoming><bpmn:outgoing>Flow_1xpedds</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_17p4rlo" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xpedds</bpmn:incoming><bpmn:outgoing>Flow_03emr79</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0gyewhy" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028111137</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1guaxmr</bpmn:incoming><bpmn:outgoing>Flow_1jdwkt5</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_17qs7wp" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_06x7glz</bpmn:incoming><bpmn:outgoing>Flow_1yv9xcl</bpmn:outgoing><bpmn:script>ShortName + " 00"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1guaxmr" sourceRef="Gateway_0d0m2l5" targetRef="Activity_0gyewhy"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true" &amp;&amp; cdRejected == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_06x7glz" sourceRef="Gateway_0d0m2l5" targetRef="Activity_17qs7wp" /><bpmn:sequenceFlow id="Flow_03emr79" sourceRef="Activity_17p4rlo" targetRef="Activity_0xzo7xe" /><bpmn:sequenceFlow id="Flow_1xpedds" sourceRef="Activity_10tpley" targetRef="Activity_17p4rlo" /><bpmn:sequenceFlow id="Flow_1fgknmb" sourceRef="Activity_0qpj4ft" targetRef="Gateway_0jit00r" /><bpmn:sequenceFlow id="Flow_1rxmfxm" sourceRef="Activity_1jl81yl" targetRef="Activity_0qpj4ft" /><bpmn:sequenceFlow id="Flow_0kacjj6" sourceRef="Gateway_0jit00r" targetRef="Gateway_0d0m2l5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyTeska == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_1v07j04" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_0esvllm</bpmn:incoming><bpmn:outgoing>Flow_09fmqdi</bpmn:outgoing><bpmn:script>ShortName</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_09fmqdi" sourceRef="Activity_1v07j04" targetRef="ServiceTask_1p03u53" /><bpmn:sequenceFlow id="Flow_1yv9xcl" sourceRef="Activity_17qs7wp" targetRef="ServiceTask_1p03u53" /><bpmn:sequenceFlow id="Flow_1kfyyny" sourceRef="Activity_0xzo7xe" targetRef="ServiceTask_1p03u53" /><bpmn:exclusiveGateway id="Gateway_0tks027" default="Flow_1tfotgq"><bpmn:incoming>SequenceFlow_1b2jwha</bpmn:incoming><bpmn:outgoing>Flow_1tfotgq</bpmn:outgoing><bpmn:outgoing>Flow_1qp1tbr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1tfotgq" sourceRef="Gateway_0tks027" targetRef="ServiceTask_166mr30" /><bpmn:sequenceFlow id="Flow_1qp1tbr" sourceRef="Gateway_0tks027" targetRef="ExclusiveGateway_075ca4u"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isTeska == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_07tsv7i" sourceRef="Activity_0pxt9fb" targetRef="ScriptTask_0j7w428" /><bpmn:serviceTask id="Activity_0pxt9fb" name="Устанавливаем признак isTeska = false" camunda:expression="false" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_01n093e</bpmn:incoming><bpmn:outgoing>Flow_07tsv7i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_098dj3x" name="Устанавливаем признак isTeska = true" camunda:expression="true" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_1jdwkt5</bpmn:incoming><bpmn:outgoing>Flow_1nz8i6v</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1jdwkt5" sourceRef="Activity_0gyewhy" targetRef="Activity_098dj3x" /><bpmn:sequenceFlow id="Flow_1nz8i6v" sourceRef="Activity_098dj3x" targetRef="Activity_10tpley" /></bpmn:process><bpmn:message id="Message_1wic0uw" name="bookReady" /><bpmn:message id="Message_08759ib" name="539Receive" /><bpmn:message id="Message_069fe00" name="clientCreated" /><bpmn:signal id="Signal_1mcidwa" name="uy" /><bpmn:signal id="Signal_0296dkd" name="yy" /><bpmn:message id="Message_1yppaj6" name="bookReady" /><bpmn:message id="Message_1i3ygvb" name="bookReady" /><bpmn:message id="Message_01xo896" name="539Receive" /><bpmn:message id="Message_18yqsfm" name="539Receive" /><bpmn:signal id="Signal_071v5yx" name="bookUpdateReceive${instanceId}" /><bpmn:signal id="Signal_0y3f6aj" name="ww" /><bpmn:message id="Message_1viecjo" name="parentProcess" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_hlk_RegApp_IP_c11ec1e5-421c-4f5a-b20e-3567b6bf36fe"><bpmndi:BPMNEdge id="Flow_1nz8i6v_di" bpmnElement="Flow_1nz8i6v"><di:waypoint x="3372" y="400" /><di:waypoint x="3464" y="400" /><di:waypoint x="3464" y="310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jdwkt5_di" bpmnElement="Flow_1jdwkt5"><di:waypoint x="3322" y="310" /><di:waypoint x="3322" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07tsv7i_di" bpmnElement="Flow_07tsv7i"><di:waypoint x="1790" y="1520" /><di:waypoint x="1790" y="1546" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qp1tbr_di" bpmnElement="Flow_1qp1tbr"><di:waypoint x="4325" y="1192" /><di:waypoint x="4515" y="1192" /><di:waypoint x="4515" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tfotgq_di" bpmnElement="Flow_1tfotgq"><di:waypoint x="4300" y="1167" /><di:waypoint x="4300" y="1125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kfyyny_di" bpmnElement="Flow_1kfyyny"><di:waypoint x="3731" y="310" /><di:waypoint x="3731" y="500" /><di:waypoint x="3070" y="500" /><di:waypoint x="3070" y="1200" /><di:waypoint x="3020" y="1200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yv9xcl_di" bpmnElement="Flow_1yv9xcl"><di:waypoint x="3150" y="400" /><di:waypoint x="3040" y="400" /><di:waypoint x="3040" y="1176" /><di:waypoint x="3020" y="1176" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09fmqdi_di" bpmnElement="Flow_09fmqdi"><di:waypoint x="2970" y="1278" /><di:waypoint x="2970" y="1216" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kacjj6_di" bpmnElement="Flow_0kacjj6"><di:waypoint x="2870" y="1545" /><di:waypoint x="2870" y="270" /><di:waypoint x="3175" y="270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rxmfxm_di" bpmnElement="Flow_1rxmfxm"><di:waypoint x="2680" y="1570" /><di:waypoint x="2720" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fgknmb_di" bpmnElement="Flow_1fgknmb"><di:waypoint x="2820" y="1570" /><di:waypoint x="2845" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xpedds_di" bpmnElement="Flow_1xpedds"><di:waypoint x="3514" y="270" /><di:waypoint x="3544" y="270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03emr79_di" bpmnElement="Flow_03emr79"><di:waypoint x="3644" y="270" /><di:waypoint x="3681" y="270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06x7glz_di" bpmnElement="Flow_06x7glz"><di:waypoint x="3200" y="295" /><di:waypoint x="3200" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1guaxmr_di" bpmnElement="Flow_1guaxmr"><di:waypoint x="3225" y="270" /><di:waypoint x="3272" y="270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0esvllm_di" bpmnElement="Flow_0esvllm"><di:waypoint x="2895" y="1570" /><di:waypoint x="2970" y="1570" /><di:waypoint x="2970" y="1358" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wqfpru_di" bpmnElement="Flow_1wqfpru"><di:waypoint x="8430" y="915" /><di:waypoint x="8490" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vlhu6u_di" bpmnElement="Flow_0vlhu6u"><di:waypoint x="3170" y="1478" /><di:waypoint x="3170" y="1586" /><di:waypoint x="3230" y="1586" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g7v1rr_di" bpmnElement="Flow_1g7v1rr"><di:waypoint x="3250" y="1460" /><di:waypoint x="3188" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t7bove_di" bpmnElement="Flow_0t7bove"><di:waypoint x="3100" y="954" /><di:waypoint x="3100" y="1561" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_066xl5i_di" bpmnElement="Flow_066xl5i"><di:waypoint x="2970" y="1000" /><di:waypoint x="2970" y="954" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1a6z5ir_di" bpmnElement="Flow_1a6z5ir"><di:waypoint x="2970" y="1136" /><di:waypoint x="2970" y="1080" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01n093e_di" bpmnElement="Flow_01n093e"><di:waypoint x="1640" y="1480" /><di:waypoint x="1740" y="1480" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0c9a5hz_di" bpmnElement="Flow_0c9a5hz"><di:waypoint x="1590" y="1547" /><di:waypoint x="1590" y="1520" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02l1iim_di" bpmnElement="Flow_02l1iim"><di:waypoint x="3670" y="1437" /><di:waypoint x="3670" y="1050" /><di:waypoint x="4190" y="1050" /><di:waypoint x="4190" y="1370" /><di:waypoint x="4290" y="1370" /><di:waypoint x="4290" y="1437" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yjv0yc_di" bpmnElement="Flow_1yjv0yc"><di:waypoint x="1230" y="1587" /><di:waypoint x="1270" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1d6lk72_di" bpmnElement="Flow_1d6lk72"><di:waypoint x="1100" y="1587" /><di:waypoint x="1130" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1volwfg_di" bpmnElement="Flow_1volwfg"><di:waypoint x="720" y="1587" /><di:waypoint x="740" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16fsa4s_di" bpmnElement="Flow_16fsa4s"><di:waypoint x="599" y="1587" /><di:waypoint x="620" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02d2fmh_di" bpmnElement="Flow_02d2fmh"><di:waypoint x="467" y="1587" /><di:waypoint x="499" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0wzq9px_di" bpmnElement="Flow_0wzq9px"><di:waypoint x="344" y="1587" /><di:waypoint x="367" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uj3ort_di" bpmnElement="Flow_0uj3ort"><di:waypoint x="13120" y="750" /><di:waypoint x="13180" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vfycrh_di" bpmnElement="Flow_0vfycrh"><di:waypoint x="12805" y="750" /><di:waypoint x="13020" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_195f7s2_di" bpmnElement="Flow_195f7s2"><di:waypoint x="12660" y="750" /><di:waypoint x="12755" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05go7oa_di" bpmnElement="Flow_05go7oa"><di:waypoint x="12610" y="670" /><di:waypoint x="12610" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rgapov_di" bpmnElement="Flow_1rgapov"><di:waypoint x="12610" y="540" /><di:waypoint x="12610" y="590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03ufxwq_di" bpmnElement="Flow_03ufxwq"><di:waypoint x="12730" y="500" /><di:waypoint x="12660" y="500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b5wtix_di" bpmnElement="Flow_1b5wtix"><di:waypoint x="12780" y="600" /><di:waypoint x="12780" y="540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u62svs_di" bpmnElement="Flow_0u62svs"><di:waypoint x="12780" y="725" /><di:waypoint x="12780" y="680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1drwx39_di" bpmnElement="Flow_1drwx39"><di:waypoint x="12190" y="750" /><di:waypoint x="12250" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0emwpeo_di" bpmnElement="Flow_0emwpeo"><di:waypoint x="11985" y="750" /><di:waypoint x="12090" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dqpwjl_di" bpmnElement="Flow_0dqpwjl"><di:waypoint x="11960" y="590" /><di:waypoint x="11960" y="496" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rpggxk_di" bpmnElement="Flow_1rpggxk"><di:waypoint x="11790" y="496" /><di:waypoint x="11790" y="590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xtyz4z_di" bpmnElement="Flow_1xtyz4z"><di:waypoint x="11840" y="750" /><di:waypoint x="11935" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0e7i6jp_di" bpmnElement="Flow_0e7i6jp"><di:waypoint x="11910" y="456" /><di:waypoint x="11840" y="456" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ytq5p5_di" bpmnElement="Flow_0ytq5p5"><di:waypoint x="11960" y="725" /><di:waypoint x="11960" y="670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_177iq7s_di" bpmnElement="Flow_177iq7s"><di:waypoint x="11790" y="670" /><di:waypoint x="11790" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00531d5_di" bpmnElement="Flow_00531d5"><di:waypoint x="11665" y="750" /><di:waypoint x="11740" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0c9je19_di" bpmnElement="Flow_0c9je19"><di:waypoint x="11470" y="650" /><di:waypoint x="11470" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w6zbg1_di" bpmnElement="Flow_0w6zbg1"><di:waypoint x="11520" y="750" /><di:waypoint x="11615" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ipiwmw_di" bpmnElement="Flow_1ipiwmw"><di:waypoint x="11470" y="496" /><di:waypoint x="11470" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09e3mzf_di" bpmnElement="Flow_09e3mzf"><di:waypoint x="11590" y="456" /><di:waypoint x="11520" y="456" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_049ebkx_di" bpmnElement="Flow_049ebkx"><di:waypoint x="11640" y="590" /><di:waypoint x="11640" y="496" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vvu3ha_di" bpmnElement="Flow_1vvu3ha"><di:waypoint x="11640" y="725" /><di:waypoint x="11640" y="670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ypzew5_di" bpmnElement="Flow_1ypzew5"><di:waypoint x="11325" y="750" /><di:waypoint x="11420" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1df83ji_di" bpmnElement="Flow_1df83ji"><di:waypoint x="11160" y="640" /><di:waypoint x="11160" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0023usd_di" bpmnElement="Flow_0023usd"><di:waypoint x="11250" y="456" /><di:waypoint x="11210" y="456" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12om2z9_di" bpmnElement="Flow_12om2z9"><di:waypoint x="11300" y="590" /><di:waypoint x="11300" y="496" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i2mexo_di" bpmnElement="Flow_0i2mexo"><di:waypoint x="11300" y="725" /><di:waypoint x="11300" y="670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lc8h7w_di" bpmnElement="Flow_1lc8h7w"><di:waypoint x="11160" y="496" /><di:waypoint x="11160" y="560" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lg0rn4_di" bpmnElement="Flow_0lg0rn4"><di:waypoint x="11210" y="750" /><di:waypoint x="11275" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05w4ce7_di" bpmnElement="Flow_05w4ce7"><di:waypoint x="10920" y="750" /><di:waypoint x="10960" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0381xze_di" bpmnElement="Flow_0381xze"><di:waypoint x="10760" y="750" /><di:waypoint x="10820" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1jhu0tx_di" bpmnElement="Flow_1jhu0tx"><di:waypoint x="10610" y="750" /><di:waypoint x="10660" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gmjn17_di" bpmnElement="Flow_0gmjn17"><di:waypoint x="6719" y="1446" /><di:waypoint x="6719" y="2060" /><di:waypoint x="2151" y="2060" /><di:waypoint x="2151" y="1627" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yybsfh_di" bpmnElement="Flow_1yybsfh"><di:waypoint x="9400" y="980" /><di:waypoint x="9400" y="1406" /><di:waypoint x="6769" y="1406" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0u5brxk_di" bpmnElement="Flow_0u5brxk"><di:waypoint x="8630" y="858" /><di:waypoint x="8630" y="940" /><di:waypoint x="8674" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09j5lrt_di" bpmnElement="Flow_09j5lrt"><di:waypoint x="9180" y="940" /><di:waypoint x="9210" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1alvp20_di" bpmnElement="Flow_1alvp20"><di:waypoint x="9310" y="940" /><di:waypoint x="9350" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_139o48d_di" bpmnElement="Flow_139o48d"><di:waypoint x="9040" y="940" /><di:waypoint x="9080" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0no0erz_di" bpmnElement="Flow_0no0erz"><di:waypoint x="8910" y="940" /><di:waypoint x="8940" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nr6453_di" bpmnElement="Flow_1nr6453"><di:waypoint x="8774" y="940" /><di:waypoint x="8810" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hi0n7r_di" bpmnElement="Flow_0hi0n7r"><di:waypoint x="8960" y="770" /><di:waypoint x="8975" y="770" /><di:waypoint x="8975" y="775" /><di:waypoint x="8990" y="775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0l75rbc_di" bpmnElement="Flow_0l75rbc"><di:waypoint x="8640" y="846" /><di:waypoint x="8640" y="770" /><di:waypoint x="8730" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19ixmke_di" bpmnElement="Flow_19ixmke"><di:waypoint x="8616" y="822" /><di:waypoint x="8616" y="775" /><di:waypoint x="8505" y="775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zs7hoo_di" bpmnElement="Flow_0zs7hoo"><di:waypoint x="8590" y="915" /><di:waypoint x="8616" y="915" /><di:waypoint x="8616" y="872" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vdug0c_di" bpmnElement="Flow_0vdug0c"><di:waypoint x="8080" y="872" /><di:waypoint x="8080" y="940" /><di:waypoint x="8190" y="940" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13gwajb_di" bpmnElement="Flow_13gwajb"><di:waypoint x="8405" y="775" /><di:waypoint x="8356" y="775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1crvwxw_di" bpmnElement="Flow_1crvwxw"><di:waypoint x="8290" y="915" /><di:waypoint x="8330" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kqlvuo_di" bpmnElement="Flow_0kqlvuo"><di:waypoint x="8160" y="815" /><di:waypoint x="8160" y="915" /><di:waypoint x="8190" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ob0wkg_di" bpmnElement="Flow_1ob0wkg"><di:waypoint x="8256" y="775" /><di:waypoint x="8210" y="775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04qz97r_di" bpmnElement="Flow_04qz97r"><di:waypoint x="8080" y="872" /><di:waypoint x="8080" y="1283" /><di:waypoint x="8040" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_077j0ke_di" bpmnElement="Flow_077j0ke"><di:waypoint x="7809" y="1283" /><di:waypoint x="7779" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1md00no_di" bpmnElement="Flow_1md00no"><di:waypoint x="7379" y="1283" /><di:waypoint x="7299" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1m7ttk1_di" bpmnElement="Flow_1m7ttk1"><di:waypoint x="7539" y="1283" /><di:waypoint x="7479" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_12l5ldp_di" bpmnElement="Flow_12l5ldp"><di:waypoint x="7679" y="1283" /><di:waypoint x="7639" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18385j8_di" bpmnElement="Flow_18385j8"><di:waypoint x="7940" y="1283" /><di:waypoint x="7909" y="1283" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w69v86_di" bpmnElement="Flow_0w69v86"><di:waypoint x="7199" y="1283" /><di:waypoint x="6719" y="1283" /><di:waypoint x="6719" y="1366" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0be1knj_di" bpmnElement="Flow_0be1knj"><di:waypoint x="8000" y="847" /><di:waypoint x="8055" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13app3q_di" bpmnElement="Flow_13app3q"><di:waypoint x="6465" y="847" /><di:waypoint x="6520" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01eun2b_di" bpmnElement="Flow_01eun2b"><di:waypoint x="6390" y="580" /><di:waypoint x="5490" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p9jwye_di" bpmnElement="Flow_0p9jwye"><di:waypoint x="6440" y="822" /><di:waypoint x="6440" y="620" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mzc01m_di" bpmnElement="Flow_0mzc01m"><di:waypoint x="6351" y="847" /><di:waypoint x="6415" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dw8iex_di" bpmnElement="Flow_0dw8iex"><di:waypoint x="5640" y="861" /><di:waypoint x="5700" y="861" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_080bdgh_di" bpmnElement="Flow_080bdgh"><di:waypoint x="5465" y="861" /><di:waypoint x="5540" y="861" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05he591_di" bpmnElement="Flow_05he591"><di:waypoint x="5390" y="580" /><di:waypoint x="2240" y="580" /><di:waypoint x="2240" y="1587" /><di:waypoint x="2201" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02yaw60_di" bpmnElement="Flow_02yaw60"><di:waypoint x="5440" y="700" /><di:waypoint x="5440" y="620" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1o642mh_di" bpmnElement="Flow_1o642mh"><di:waypoint x="5440" y="836" /><di:waypoint x="5440" y="780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11z3nog_di" bpmnElement="Flow_11z3nog"><di:waypoint x="5301" y="861" /><di:waypoint x="5415" y="861" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08ez9ta_di" bpmnElement="Flow_08ez9ta"><di:waypoint x="4515" y="1010" /><di:waypoint x="4515" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rlvfeo_di" bpmnElement="Flow_1rlvfeo"><di:waypoint x="4350" y="970" /><di:waypoint x="4465" y="970" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0caj1a6_di" bpmnElement="Flow_0caj1a6"><di:waypoint x="4240" y="1452" /><di:waypoint x="4275" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tzrk83_di" bpmnElement="Flow_0tzrk83"><di:waypoint x="4120" y="1880" /><di:waypoint x="4120" y="2020" /><di:waypoint x="2151" y="2020" /><di:waypoint x="2151" y="1627" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mldx96_di" bpmnElement="Flow_0mldx96"><di:waypoint x="4120" y="1680" /><di:waypoint x="4120" y="1800" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mymg19_di" bpmnElement="Flow_1mymg19"><di:waypoint x="3790" y="1477" /><di:waypoint x="3790" y="1510" /><di:waypoint x="4120" y="1510" /><di:waypoint x="4120" y="1600" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0o2kglv_di" bpmnElement="Flow_0o2kglv"><di:waypoint x="3960" y="1452" /><di:waypoint x="3990" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ga7ges_di" bpmnElement="Flow_1ga7ges"><di:waypoint x="3815" y="1452" /><di:waypoint x="3860" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1diznj4_di" bpmnElement="Flow_1diznj4"><di:waypoint x="3790" y="1340" /><di:waypoint x="3790" y="1427" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10d95qi_di" bpmnElement="Flow_10d95qi"><di:waypoint x="3250" y="1880" /><di:waypoint x="2151" y="1880" /><di:waypoint x="2151" y="1627" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04ek24a_di" bpmnElement="Flow_04ek24a"><di:waypoint x="3300" y="1745" /><di:waypoint x="3300" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00csoeu_di" bpmnElement="Flow_00csoeu"><di:waypoint x="3330" y="1587" /><di:waypoint x="3370" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0c5snek_di" bpmnElement="Flow_0c5snek"><di:waypoint x="2603" y="1462" /><di:waypoint x="2630" y="1462" /><di:waypoint x="2630" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u2pcet_di" bpmnElement="Flow_1u2pcet"><di:waypoint x="3100" y="1611" /><di:waypoint x="3100" y="1705" /><di:waypoint x="3250" y="1705" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hn9lx3_di" bpmnElement="Flow_0hn9lx3"><di:waypoint x="3125" y="1586" /><di:waypoint x="3230" y="1586" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xa1ma3_di" bpmnElement="Flow_1xa1ma3"><di:waypoint x="2600" y="1216" /><di:waypoint x="2600" y="1370" /><di:waypoint x="2371" y="1370" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05epzrt_di" bpmnElement="Flow_05epzrt"><di:waypoint x="2489" y="1176" /><di:waypoint x="2550" y="1176" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kbarw9_di" bpmnElement="Flow_1kbarw9"><di:waypoint x="2321" y="1102" /><di:waypoint x="2321" y="1176" /><di:waypoint x="2389" y="1176" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hikcpl_di" bpmnElement="SequenceFlow_0hikcpl"><di:waypoint x="2710" y="1792" /><di:waypoint x="2760" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07bbty4_di" bpmnElement="SequenceFlow_07bbty4"><di:waypoint x="2370" y="1820" /><di:waypoint x="2342" y="1820" /><di:waypoint x="2342" y="1765" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05bczvb_di" bpmnElement="Flow_05bczvb"><di:waypoint x="4090" y="1452" /><di:waypoint x="4140" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0btrysn_di" bpmnElement="Flow_0btrysn"><di:waypoint x="10450" y="750" /><di:waypoint x="10510" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pyhfs6_di" bpmnElement="Flow_1pyhfs6"><di:waypoint x="2371" y="1586" /><di:waypoint x="2420" y="1586" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_182pm57_di" bpmnElement="Flow_182pm57"><di:waypoint x="2321" y="1428" /><di:waypoint x="2321" y="1546" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lik675_di" bpmnElement="Flow_0lik675"><di:waypoint x="3750" y="985" /><di:waypoint x="3792" y="985" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0pu4nnh_di" bpmnElement="Flow_0pu4nnh"><di:waypoint x="3617" y="985" /><di:waypoint x="3650" y="985" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kmjsnr_di" bpmnElement="Flow_0kmjsnr"><di:waypoint x="3567" y="1151" /><di:waypoint x="3567" y="1025" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w7hauf_di" bpmnElement="Flow_0w7hauf"><di:waypoint x="3567" y="1201" /><di:waypoint x="3567" y="1250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1t7vnmn_di" bpmnElement="Flow_1t7vnmn"><di:waypoint x="3445" y="1176" /><di:waypoint x="3542" y="1176" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1te6f5h_di" bpmnElement="Flow_1te6f5h"><di:waypoint x="2014" y="1010" /><di:waypoint x="2014" y="1527" /><di:waypoint x="2101" y="1565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lmxga1_di" bpmnElement="Flow_0lmxga1"><di:waypoint x="1990" y="1587" /><di:waypoint x="2101" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uj2iuk_di" bpmnElement="SequenceFlow_1uj2iuk"><di:waypoint x="2176" y="456" /><di:waypoint x="2439" y="456" /><di:waypoint x="2439" y="645" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_068xn7p_di" bpmnElement="SequenceFlow_068xn7p"><di:waypoint x="2126" y="456" /><di:waypoint x="2014" y="456" /><di:waypoint x="2014" y="930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00y6zui_di" bpmnElement="SequenceFlow_00y6zui"><di:waypoint x="2126" y="670" /><di:waypoint x="2040" y="670" /><di:waypoint x="2040" y="930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rtq52q_di" bpmnElement="SequenceFlow_1rtq52q"><di:waypoint x="2151" y="735" /><di:waypoint x="2151" y="695" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0j53ehs_di" bpmnElement="SequenceFlow_0j53ehs"><di:waypoint x="2151" y="528" /><di:waypoint x="2151" y="481" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bsq02m_di" bpmnElement="SequenceFlow_0bsq02m"><di:waypoint x="2151" y="645" /><di:waypoint x="2151" y="608" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1979ol1_di" bpmnElement="SequenceFlow_1979ol1"><di:waypoint x="2151" y="1448" /><di:waypoint x="2151" y="1428" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hacp16_di" bpmnElement="SequenceFlow_0hacp16"><di:waypoint x="1370" y="1585" /><di:waypoint x="1385" y="1585" /><di:waypoint x="1385" y="1587" /><di:waypoint x="1400" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1w20noy_di" bpmnElement="SequenceFlow_1w20noy"><di:waypoint x="2261" y="925" /><di:waypoint x="2261" y="1557" /><di:waypoint x="2201" y="1557" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dv8a5f_di" bpmnElement="SequenceFlow_1dv8a5f"><di:waypoint x="2439" y="844" /><di:waypoint x="2439" y="889" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lu7dfh_di" bpmnElement="SequenceFlow_1lu7dfh"><di:waypoint x="2439" y="725" /><di:waypoint x="2439" y="764" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0e7hadp_di" bpmnElement="SequenceFlow_0e7hadp"><di:waypoint x="7110" y="887" /><di:waypoint x="7110" y="1060" /><di:waypoint x="6020" y="1060" /><di:waypoint x="6020" y="1202" /><di:waypoint x="6102" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jof35z_di" bpmnElement="SequenceFlow_0jof35z"><di:waypoint x="12500" y="750" /><di:waypoint x="12560" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cmzdop_di" bpmnElement="SequenceFlow_0cmzdop"><di:waypoint x="12350" y="750" /><di:waypoint x="12400" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12wgkv7_di" bpmnElement="SequenceFlow_12wgkv7"><di:waypoint x="10110" y="750" /><di:waypoint x="10170" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dlu33d_di" bpmnElement="SequenceFlow_1dlu33d"><di:waypoint x="9955" y="750" /><di:waypoint x="10010" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wftucm_di" bpmnElement="SequenceFlow_0wftucm"><di:waypoint x="10110" y="580" /><di:waypoint x="10160" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1daqwq2_di" bpmnElement="SequenceFlow_1daqwq2"><di:waypoint x="9930" y="725" /><di:waypoint x="9930" y="580" /><di:waypoint x="10010" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kkknk2_di" bpmnElement="SequenceFlow_1kkknk2"><di:waypoint x="9460" y="750" /><di:waypoint x="9480" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bqz93f_di" bpmnElement="SequenceFlow_0bqz93f"><di:waypoint x="9840" y="750" /><di:waypoint x="9905" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fxish9_di" bpmnElement="SequenceFlow_1fxish9"><di:waypoint x="9710" y="750" /><di:waypoint x="9740" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e4fd6h_di" bpmnElement="SequenceFlow_1e4fd6h"><di:waypoint x="9580" y="750" /><di:waypoint x="9610" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0eaqocu_di" bpmnElement="SequenceFlow_0eaqocu"><di:waypoint x="6767" y="1202" /><di:waypoint x="6807" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_17u4qbs_di" bpmnElement="SequenceFlow_17u4qbs"><di:waypoint x="9160" y="750" /><di:waypoint x="9160" y="670" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1c6igvg_di" bpmnElement="SequenceFlow_1c6igvg"><di:waypoint x="9090" y="775" /><di:waypoint x="9135" y="775" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07nerxu_di" bpmnElement="SequenceFlow_07nerxu"><di:waypoint x="8830" y="770" /><di:waypoint x="8860" y="770" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ca1oec_di" bpmnElement="SequenceFlow_0ca1oec"><di:waypoint x="9330" y="750" /><di:waypoint x="9360" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0xigtll_di" bpmnElement="SequenceFlow_0xigtll"><di:waypoint x="9210" y="630" /><di:waypoint x="9280" y="630" /><di:waypoint x="9280" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19zlk7g_di" bpmnElement="SequenceFlow_19zlk7g"><di:waypoint x="9185" y="775" /><di:waypoint x="9208" y="775" /><di:waypoint x="9208" y="750" /><di:waypoint x="9230" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06gkhty_di" bpmnElement="SequenceFlow_06gkhty"><di:waypoint x="10270" y="750" /><di:waypoint x="10350" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1z0g3yj_di" bpmnElement="SequenceFlow_1z0g3yj"><di:waypoint x="10260" y="580" /><di:waypoint x="10400" y="580" /><di:waypoint x="10400" y="710" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1w3u7qp_di" bpmnElement="SequenceFlow_1w3u7qp"><di:waypoint x="7147" y="1162" /><di:waypoint x="7147" y="960" /><di:waypoint x="7210" y="960" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jggnpm_di" bpmnElement="SequenceFlow_1jggnpm"><di:waypoint x="7049" y="1202" /><di:waypoint x="7097" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kq1bx9_di" bpmnElement="SequenceFlow_1kq1bx9"><di:waypoint x="6907" y="1202" /><di:waypoint x="6949" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pvr0o0_di" bpmnElement="SequenceFlow_1pvr0o0"><di:waypoint x="6627" y="1202" /><di:waypoint x="6667" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0a208kg_di" bpmnElement="SequenceFlow_0a208kg"><di:waypoint x="6501" y="1202" /><di:waypoint x="6527" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ob8kb3_di" bpmnElement="SequenceFlow_0ob8kb3"><di:waypoint x="11060" y="750" /><di:waypoint x="11110" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fc28dk_di" bpmnElement="SequenceFlow_0fc28dk"><di:waypoint x="13280" y="750" /><di:waypoint x="13332" y="750" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_055l0ei_di" bpmnElement="SequenceFlow_055l0ei"><di:waypoint x="6361" y="1202" /><di:waypoint x="6401" y="1202" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0it4nlf_di" bpmnElement="SequenceFlow_0it4nlf"><di:waypoint x="6277" y="1282" /><di:waypoint x="6336" y="1282" /><di:waypoint x="6336" y="1227" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0jelg1l_di" bpmnElement="SequenceFlow_0jelg1l"><di:waypoint x="6277" y="1122" /><di:waypoint x="6336" y="1122" /><di:waypoint x="6336" y="1177" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kb0tcp_di" bpmnElement="SequenceFlow_1kb0tcp"><di:waypoint x="6127" y="1227" /><di:waypoint x="6127" y="1282" /><di:waypoint x="6177" y="1282" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ftffu7_di" bpmnElement="SequenceFlow_1ftffu7"><di:waypoint x="6127" y="1177" /><di:waypoint x="6127" y="1122" /><di:waypoint x="6177" y="1122" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_008xhfb_di" bpmnElement="SequenceFlow_008xhfb"><di:waypoint x="2210" y="1685" /><di:waypoint x="2210" y="1656" /><di:waypoint x="2170" y="1656" /><di:waypoint x="2170" y="1627" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1415jse_di" bpmnElement="SequenceFlow_1415jse"><di:waypoint x="7020" y="847" /><di:waypoint x="7060" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hu0fl0_di" bpmnElement="SequenceFlow_1hu0fl0"><di:waypoint x="6880" y="847" /><di:waypoint x="6920" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02oy4ul_di" bpmnElement="SequenceFlow_02oy4ul"><di:waypoint x="6740" y="847" /><di:waypoint x="6780" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0y51fil_di" bpmnElement="SequenceFlow_0y51fil"><di:waypoint x="6620" y="847" /><di:waypoint x="6640" y="847" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bumqpg_di" bpmnElement="SequenceFlow_1bumqpg"><di:waypoint x="4540" y="1295" /><di:waypoint x="4710" y="1295" /><di:waypoint x="4710" y="1047" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1j12v13_di" bpmnElement="SequenceFlow_1j12v13"><di:waypoint x="4300" y="1045" /><di:waypoint x="4300" y="1010" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0k4v3v0_di" bpmnElement="SequenceFlow_0k4v3v0"><di:waypoint x="4325" y="1295" /><di:waypoint x="4490" y="1295" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1b2jwha_di" bpmnElement="SequenceFlow_1b2jwha"><di:waypoint x="4300" y="1270" /><di:waypoint x="4300" y="1217" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bi9l3o_di" bpmnElement="SequenceFlow_0bi9l3o"><di:waypoint x="4735" y="1452" /><di:waypoint x="4782" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fp96om_di" bpmnElement="SequenceFlow_0fp96om"><di:waypoint x="4570" y="1452" /><di:waypoint x="4635" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vx78c0_di" bpmnElement="SequenceFlow_1vx78c0"><di:waypoint x="4325" y="1452" /><di:waypoint x="4470" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0j98ep6_di" bpmnElement="SequenceFlow_0j98ep6"><di:waypoint x="4300" y="1427" /><di:waypoint x="4300" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pmra6r_di" bpmnElement="SequenceFlow_0pmra6r"><di:waypoint x="3395" y="1562" /><di:waypoint x="3395" y="1216" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zwzjyl_di" bpmnElement="SequenceFlow_0zwzjyl"><di:waypoint x="3617" y="1452" /><di:waypoint x="3655" y="1452" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16hj01l_di" bpmnElement="SequenceFlow_16hj01l"><di:waypoint x="3567" y="1330" /><di:waypoint x="3567" y="1412" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0luyg5v_di" bpmnElement="SequenceFlow_0luyg5v"><di:waypoint x="3683" y="1430" /><di:waypoint x="3696" y="1339" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06f8l3h_di" bpmnElement="SequenceFlow_06f8l3h"><di:waypoint x="3875" y="1547" /><di:waypoint x="3875" y="1530" /><di:waypoint x="3481" y="1530" /><di:waypoint x="3481" y="1318" /><di:waypoint x="3517" y="1318" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1omvve1_di" bpmnElement="SequenceFlow_1omvve1"><di:waypoint x="3770" y="1586" /><di:waypoint x="3798" y="1586" /><di:waypoint x="3798" y="1587" /><di:waypoint x="3825" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18133uy_di" bpmnElement="SequenceFlow_18133uy"><di:waypoint x="3625" y="1587" /><di:waypoint x="3648" y="1587" /><di:waypoint x="3648" y="1586" /><di:waypoint x="3670" y="1586" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y0y1p7_di" bpmnElement="SequenceFlow_1y0y1p7"><di:waypoint x="3420" y="1587" /><di:waypoint x="3525" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0d8ruhx_di" bpmnElement="SequenceFlow_0d8ruhx"><di:waypoint x="3925" y="1792" /><di:waypoint x="3967" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zcn28l_di" bpmnElement="SequenceFlow_0zcn28l"><di:waypoint x="3807" y="1792" /><di:waypoint x="3825" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0igaob8_di" bpmnElement="SequenceFlow_0igaob8"><di:waypoint x="3617" y="1792" /><di:waypoint x="3707" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0iyzrce_di" bpmnElement="SequenceFlow_0iyzrce"><di:waypoint x="3875" y="1627" /><di:waypoint x="3875" y="1692" /><di:waypoint x="3567" y="1692" /><di:waypoint x="3567" y="1752" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1drfdz6_di" bpmnElement="SequenceFlow_1drfdz6"><di:waypoint x="3395" y="1612" /><di:waypoint x="3395" y="1792" /><di:waypoint x="3517" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06nw081_di" bpmnElement="SequenceFlow_06nw081"><di:waypoint x="3380" y="1577" /><di:waypoint x="3380" y="1460" /><di:waypoint x="3350" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cuwcmu_di" bpmnElement="SequenceFlow_0cuwcmu"><di:waypoint x="3130" y="1792" /><di:waypoint x="3192" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1obu50b_di" bpmnElement="SequenceFlow_1obu50b"><di:waypoint x="2990" y="1792" /><di:waypoint x="3030" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0y31u3k_di" bpmnElement="SequenceFlow_0y31u3k"><di:waypoint x="2860" y="1792" /><di:waypoint x="2890" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tz6fak_di" bpmnElement="SequenceFlow_1tz6fak"><di:waypoint x="2520" y="1613" /><di:waypoint x="2581" y="1650" /><di:waypoint x="2581" y="1792" /><di:waypoint x="2610" y="1792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08gktam_di" bpmnElement="SequenceFlow_08gktam"><di:waypoint x="2520" y="1586" /><di:waypoint x="2553" y="1586" /><di:waypoint x="2553" y="1500" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1390337_di" bpmnElement="SequenceFlow_1390337"><di:waypoint x="2470" y="1626" /><di:waypoint x="2470" y="1685" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1l39ack_di" bpmnElement="SequenceFlow_1l39ack"><di:waypoint x="2501" y="1765" /><di:waypoint x="2501" y="1820" /><di:waypoint x="2470" y="1820" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tbd337_di" bpmnElement="SequenceFlow_1tbd337"><di:waypoint x="2292" y="1725" /><di:waypoint x="2260" y="1725" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u10zqw_di" bpmnElement="SequenceFlow_1u10zqw"><di:waypoint x="2176" y="885" /><di:waypoint x="2211" y="885" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1uvqdxq_di" bpmnElement="SequenceFlow_1uvqdxq"><di:waypoint x="2176" y="1295" /><di:waypoint x="2230" y="1295" /><di:waypoint x="2230" y="1497" /><di:waypoint x="2186" y="1547" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mlg3e8_di" bpmnElement="SequenceFlow_0mlg3e8"><di:waypoint x="2151" y="1547" /><di:waypoint x="2151" y="1528" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sj93g0_di" bpmnElement="SequenceFlow_0sj93g0"><di:waypoint x="2414" y="1062" /><di:waypoint x="2371" y="1062" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nu20nz_di" bpmnElement="SequenceFlow_0nu20nz"><di:waypoint x="2439" y="969" /><di:waypoint x="2439" y="1037" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_079v0yi_di" bpmnElement="SequenceFlow_079v0yi"><di:waypoint x="2151" y="1348" /><di:waypoint x="2151" y="1320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hso837_di" bpmnElement="SequenceFlow_1hso837"><di:waypoint x="2151" y="945" /><di:waypoint x="2151" y="910" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16p966p_di" bpmnElement="SequenceFlow_16p966p"><di:waypoint x="2151" y="1045" /><di:waypoint x="2151" y="1025" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0nazcgz_di" bpmnElement="SequenceFlow_0nazcgz"><di:waypoint x="2151" y="1152" /><di:waypoint x="2151" y="1125" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1tikbqj_di" bpmnElement="SequenceFlow_1tikbqj"><di:waypoint x="2151" y="1270" /><di:waypoint x="2151" y="1232" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qkux8i_di" bpmnElement="SequenceFlow_1qkux8i"><di:waypoint x="2464" y="1062" /><di:waypoint x="2800" y="1062" /><di:waypoint x="2800" y="1388" /><di:waypoint x="2371" y="1388" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ewyd5w_di" bpmnElement="SequenceFlow_0ewyd5w"><di:waypoint x="2151" y="860" /><di:waypoint x="2151" y="815" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mjml9b_di" bpmnElement="SequenceFlow_0mjml9b"><di:waypoint x="1840" y="1586" /><di:waypoint x="1890" y="1586" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cvycwo_di" bpmnElement="SequenceFlow_1cvycwo"><di:waypoint x="1500" y="1587" /><di:waypoint x="1540" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ndfqkx_di" bpmnElement="SequenceFlow_1ndfqkx"><di:waypoint x="970" y="1587" /><di:waypoint x="1000" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_127z9we_di" bpmnElement="SequenceFlow_127z9we"><di:waypoint x="840" y="1587" /><di:waypoint x="870" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qn473g_di" bpmnElement="SequenceFlow_0qn473g"><di:waypoint x="188" y="1587" /><di:waypoint x="244" y="1587" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="UserTask_1q5u97k_di" bpmnElement="UserTask_1q5u97k"><dc:Bounds x="2101" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="StartEvent_0auet61_di" bpmnElement="StartEvent_0auet61"><dc:Bounds x="152" y="1569" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rd0afv_di" bpmnElement="ServiceTask_0rd0afv"><dc:Bounds x="499" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1sz2gn0_di" bpmnElement="ServiceTask_1sz2gn0"><dc:Bounds x="620" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1k00tww_di" bpmnElement="ServiceTask_1k00tww"><dc:Bounds x="870" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0j7w428_di" bpmnElement="ScriptTask_0j7w428"><dc:Bounds x="1740" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_13xfkh1_di" bpmnElement="ServiceTask_13xfkh1"><dc:Bounds x="1130" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1wddw0j_di" bpmnElement="ServiceTask_1wddw0j"><dc:Bounds x="740" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1fke5rw_di" bpmnElement="ScriptTask_1fke5rw"><dc:Bounds x="1000" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1eegr8a_di" bpmnElement="CallActivity_1eegr8a" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2389" y="1136" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0iobytb_di" bpmnElement="CallActivity_0iobytb" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2550" y="1136" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1h8wlq9_di" bpmnElement="ServiceTask_1h8wlq9"><dc:Bounds x="2271" y="1348" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1yha8ut_di" bpmnElement="ServiceTask_1yha8ut"><dc:Bounds x="2101" y="1152" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1739afc_di" bpmnElement="ScriptTask_1739afc"><dc:Bounds x="2101" y="1045" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1y1aens_di" bpmnElement="ServiceTask_1y1aens"><dc:Bounds x="2101" y="945" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1epkeu8_di" bpmnElement="ExclusiveGateway_1epkeu8" isMarkerVisible="true"><dc:Bounds x="2126" y="860" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_116qky6_di" bpmnElement="CallActivity_116qky6" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="2101" y="1348" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_18d95qg_di" bpmnElement="ExclusiveGateway_18d95qg" isMarkerVisible="true"><dc:Bounds x="2126" y="1270" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1h07oau_di" bpmnElement="ServiceTask_1h07oau"><dc:Bounds x="2389" y="889" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0av6k5m_di" bpmnElement="ExclusiveGateway_0av6k5m" isMarkerVisible="true"><dc:Bounds x="2414" y="1037" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0enj3sl_di" bpmnElement="ServiceTask_0enj3sl"><dc:Bounds x="2271" y="1022" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jhtdbp_di" bpmnElement="ServiceTask_1jhtdbp"><dc:Bounds x="2160" y="1685" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01274nc_di" bpmnElement="ServiceTask_01274nc"><dc:Bounds x="2292" y="1685" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1r9w3s6_di" bpmnElement="ServiceTask_1r9w3s6"><dc:Bounds x="2451" y="1685" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_08f7j4d_di" bpmnElement="UserTask_08f7j4d" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="2420" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1p03u53_di" bpmnElement="ServiceTask_1p03u53"><dc:Bounds x="2920" y="1136" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12j6s3j_di" bpmnElement="ServiceTask_12j6s3j"><dc:Bounds x="2760" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0fsxjve_di" bpmnElement="ServiceTask_0fsxjve"><dc:Bounds x="2890" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_097wk6s_di" bpmnElement="ServiceTask_097wk6s"><dc:Bounds x="3030" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1kv6hrk_di" bpmnElement="EndEvent_1kv6hrk"><dc:Bounds x="3192" y="1774" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_011z1yf_di" bpmnElement="ServiceTask_011z1yf"><dc:Bounds x="3250" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_027pmko_di" bpmnElement="ServiceTask_027pmko"><dc:Bounds x="3517" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ly7417_di" bpmnElement="ServiceTask_0ly7417"><dc:Bounds x="3707" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1bsodb7_di" bpmnElement="ServiceTask_1bsodb7"><dc:Bounds x="3825" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1o0gw13_di" bpmnElement="EndEvent_1o0gw13"><dc:Bounds x="3967" y="1774" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11sryi9_di" bpmnElement="ServiceTask_11sryi9"><dc:Bounds x="3525" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0nd4k9s_di" bpmnElement="ServiceTask_0nd4k9s"><dc:Bounds x="3670" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1jt0eya_di" bpmnElement="UserTask_1jt0eya" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="3825" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kxht5d_di" bpmnElement="ServiceTask_0kxht5d" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3860" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1wdq4sn_di" bpmnElement="ServiceTask_1wdq4sn" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3517" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pc3hsw_di" bpmnElement="ServiceTask_1pc3hsw"><dc:Bounds x="3517" y="1250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0n5jdtr_di" bpmnElement="ExclusiveGateway_0n5jdtr" isMarkerVisible="true"><dc:Bounds x="3655" y="1427" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1925x4x_di" bpmnElement="ExclusiveGateway_1925x4x" isMarkerVisible="true"><dc:Bounds x="4275" y="1427" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_12w6kyn_di" bpmnElement="ServiceTask_12w6kyn"><dc:Bounds x="4470" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1e65lbe_di" bpmnElement="ServiceTask_1e65lbe"><dc:Bounds x="4635" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0w727ay_di" bpmnElement="EndEvent_0w727ay"><dc:Bounds x="4782" y="1434" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0cif1uk_di" bpmnElement="ExclusiveGateway_0cif1uk" isMarkerVisible="true"><dc:Bounds x="4275" y="1270" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_166mr30_di" bpmnElement="ServiceTask_166mr30"><dc:Bounds x="4250" y="1045" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_075ca4u_di" bpmnElement="ExclusiveGateway_075ca4u" isMarkerVisible="true"><dc:Bounds x="4490" y="1270" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0f73znb_di" bpmnElement="ScriptTask_0f73znb"><dc:Bounds x="6520" y="807" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_06q2u4v_di" bpmnElement="ServiceTask_06q2u4v"><dc:Bounds x="6640" y="807" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0e183oc_di" bpmnElement="ServiceTask_0e183oc"><dc:Bounds x="6780" y="807" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1md4rzy_di" bpmnElement="ServiceTask_1md4rzy"><dc:Bounds x="6920" y="807" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1h9ynfb_di" bpmnElement="ServiceTask_1h9ynfb"><dc:Bounds x="7060" y="807" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0wtz7ei_di" bpmnElement="ExclusiveGateway_0wtz7ei" isMarkerVisible="true"><dc:Bounds x="3370" y="1562" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_0v9azav_di" bpmnElement="ParallelGateway_0v9azav"><dc:Bounds x="6102" y="1177" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_1l0v7hw_di" bpmnElement="ParallelGateway_1l0v7hw"><dc:Bounds x="6311" y="1177" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0p31t0z_di" bpmnElement="CallActivity_0p31t0z"><dc:Bounds x="6177" y="1082" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1b38dfd_di" bpmnElement="CallActivity_1b38dfd"><dc:Bounds x="6177" y="1242" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_05dii2t_di" bpmnElement="ServiceTask_05dii2t"><dc:Bounds x="13180" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1o8vq5r_di" bpmnElement="EndEvent_1o8vq5r"><dc:Bounds x="13332" y="732" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08jyk0p_di" bpmnElement="ServiceTask_08jyk0p"><dc:Bounds x="13020" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0mf7gdb_di" bpmnElement="ServiceTask_0mf7gdb"><dc:Bounds x="11110" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0lbops9_di" bpmnElement="ServiceTask_0lbops9"><dc:Bounds x="11420" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0usxmwk_di" bpmnElement="ServiceTask_0usxmwk"><dc:Bounds x="10660" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pt0hpr_di" bpmnElement="ServiceTask_1pt0hpr"><dc:Bounds x="10820" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bhskka_di" bpmnElement="ServiceTask_0bhskka"><dc:Bounds x="6401" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1n7m39k_di" bpmnElement="CallActivity_1n7m39k"><dc:Bounds x="6527" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1nmdgu6_di" bpmnElement="ServiceTask_1nmdgu6"><dc:Bounds x="6949" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0h40654_di" bpmnElement="ServiceTask_0h40654"><dc:Bounds x="7097" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ppdg19_di" bpmnElement="ServiceTask_0ppdg19"><dc:Bounds x="10350" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1f5kee3_di" bpmnElement="ServiceTask_1f5kee3"><dc:Bounds x="10510" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1wp4mc8_di" bpmnElement="CallActivity_1wp4mc8"><dc:Bounds x="9230" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1tsofa8_di" bpmnElement="ScriptTask_1tsofa8"><dc:Bounds x="8860" y="730" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1h65r5f_di" bpmnElement="ScriptTask_1h65r5f"><dc:Bounds x="8990" y="735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1uulpna_di" bpmnElement="ExclusiveGateway_1uulpna" isMarkerVisible="true"><dc:Bounds x="9135" y="750" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kc3072_di" bpmnElement="ServiceTask_0kc3072"><dc:Bounds x="9110" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0p8ylqv_di" bpmnElement="ServiceTask_0p8ylqv"><dc:Bounds x="11740" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0u0ea7s_di" bpmnElement="ServiceTask_0u0ea7s"><dc:Bounds x="8730" y="730" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01ownn0_di" bpmnElement="ServiceTask_01ownn0"><dc:Bounds x="6667" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ax5k1k_di" bpmnElement="ServiceTask_1ax5k1k"><dc:Bounds x="6807" y="1162" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1whnh6a_di" bpmnElement="ServiceTask_1whnh6a"><dc:Bounds x="10960" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jsjir9_di" bpmnElement="ServiceTask_1jsjir9"><dc:Bounds x="9610" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kol6s7_di" bpmnElement="ServiceTask_0kol6s7"><dc:Bounds x="9740" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ovc5kv_di" bpmnElement="ServiceTask_1ovc5kv"><dc:Bounds x="9360" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0fcxuy3_di" bpmnElement="ServiceTask_0fcxuy3"><dc:Bounds x="9480" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1tk4n9g_di" bpmnElement="ServiceTask_1tk4n9g"><dc:Bounds x="10010" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0ad0jvz_di" bpmnElement="ExclusiveGateway_0ad0jvz" isMarkerVisible="true"><dc:Bounds x="9905" y="725" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1elau1c_di" bpmnElement="ServiceTask_1elau1c"><dc:Bounds x="10010" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_15qej4w_di" bpmnElement="ServiceTask_15qej4w"><dc:Bounds x="10160" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1lfbwvr_di" bpmnElement="ServiceTask_1lfbwvr"><dc:Bounds x="10170" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0p22m6y_di" bpmnElement="CallActivity_0p22m6y"><dc:Bounds x="12090" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01tpdnc_di" bpmnElement="ServiceTask_01tpdnc"><dc:Bounds x="12250" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_14m9ll7_di" bpmnElement="ServiceTask_14m9ll7"><dc:Bounds x="12400" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01crkik_di" bpmnElement="ServiceTask_01crkik"><dc:Bounds x="12560" y="710" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ofibqq_di" bpmnElement="ServiceTask_1ofibqq"><dc:Bounds x="2389" y="764" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08boynk_di" bpmnElement="ServiceTask_08boynk"><dc:Bounds x="2389" y="645" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1e21hlv_di" bpmnElement="ServiceTask_1e21hlv"><dc:Bounds x="2211" y="845" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11nfmym_di" bpmnElement="ServiceTask_11nfmym"><dc:Bounds x="1270" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rwx9y6_di" bpmnElement="ServiceTask_0rwx9y6"><dc:Bounds x="2101" y="1448" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_10ybcn6_di" bpmnElement="CallActivity_10ybcn6" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="2101" y="735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0uficj4_di" bpmnElement="ExclusiveGateway_0uficj4" isMarkerVisible="true"><dc:Bounds x="2126" y="645" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1c2znbj_di" bpmnElement="CallActivity_1c2znbj" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="2101" y="528" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_147qa4c_di" bpmnElement="ExclusiveGateway_147qa4c" isMarkerVisible="true"><dc:Bounds x="2126" y="431" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_18bozwu_di" bpmnElement="ServiceTask_18bozwu"><dc:Bounds x="2503" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_008l2jy_di" bpmnElement="Activity_008l2jy"><dc:Bounds x="1890" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n9n00q_di" bpmnElement="Activity_0n9n00q"><dc:Bounds x="367" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0db480k_di" bpmnElement="Activity_0db480k"><dc:Bounds x="1964" y="930" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0h0e9oz_di" bpmnElement="Activity_0t9q2qw"><dc:Bounds x="3345" y="1136" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1dz9d4a_di" bpmnElement="Gateway_00i6wbj" isMarkerVisible="true"><dc:Bounds x="3542" y="1151" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1joxbj0_di" bpmnElement="Activity_1joxbj0"><dc:Bounds x="3517" y="945" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04vsg7c_di" bpmnElement="Activity_04vsg7c"><dc:Bounds x="3650" y="945" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_01xjt61_di" bpmnElement="Event_01xjt61"><dc:Bounds x="3792" y="967" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1pz6v5w_di" bpmnElement="Activity_1pz6v5w"><dc:Bounds x="2271" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gmou2z_di" bpmnElement="Activity_0gmou2z"><dc:Bounds x="3990" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0mze5e7_di" bpmnElement="ScriptTask_0mze5e7"><dc:Bounds x="2370" y="1780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_049okat_di" bpmnElement="ScriptTask_049okat"><dc:Bounds x="2610" y="1752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0w015wm_di" bpmnElement="ServiceTask_0w015wm"><dc:Bounds x="244" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03sochr_di" bpmnElement="Activity_03sochr"><dc:Bounds x="1400" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1clfxap_di" bpmnElement="Activity_1clfxap"><dc:Bounds x="3230" y="1546" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0gcsk6o_di" bpmnElement="Gateway_0gcsk6o" isMarkerVisible="true"><dc:Bounds x="3075" y="1561" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0w4sjke_di" bpmnElement="Activity_0w4sjke"><dc:Bounds x="3250" y="1665" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ssbw75_di" bpmnElement="Activity_1ssbw75"><dc:Bounds x="3250" y="1820" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0nhqxqz_di" bpmnElement="Activity_0nhqxqz" isExpanded="true"><dc:Bounds x="3690" y="1110" width="338" height="230" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_06y5q23_di" bpmnElement="Flow_06y5q23"><di:waypoint x="3790" y="1245" /><di:waypoint x="3790" y="1272" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lcg5xs_di" bpmnElement="Flow_1lcg5xs"><di:waypoint x="3808" y="1290" /><di:waypoint x="3840" y="1290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vyaky0_di" bpmnElement="Flow_1vyaky0"><di:waypoint x="3751" y="1220" /><di:waypoint x="3765" y="1220" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lug6ep_di" bpmnElement="Flow_1lug6ep"><di:waypoint x="3790" y="1195" /><di:waypoint x="3790" y="1178" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rs2eeo_di" bpmnElement="Flow_0rs2eeo"><di:waypoint x="3808" y="1160" /><di:waypoint x="3850" y="1160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1la6sfz_di" bpmnElement="Flow_1la6sfz"><di:waypoint x="3950" y="1160" /><di:waypoint x="3972" y="1160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_025ee95_di" bpmnElement="Flow_025ee95"><di:waypoint x="3940" y="1300" /><di:waypoint x="3972" y="1300" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_1l9xqvp_di" bpmnElement="Event_1l9xqvp"><dc:Bounds x="3715" y="1202" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_16x620r_di" bpmnElement="Gateway_16x620r"><dc:Bounds x="3765" y="1195" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0rayl59_di" bpmnElement="Event_0rayl59"><dc:Bounds x="3772" y="1142" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0wrhc2q_di" bpmnElement="Event_0wrhc2q"><dc:Bounds x="3972" y="1142" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1jmaoqm_di" bpmnElement="Event_1jmaoqm"><dc:Bounds x="3972" y="1282" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1fkyki1_di" bpmnElement="Activity_1fkyki1"><dc:Bounds x="3850" y="1120" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_04o0fmp_di" bpmnElement="Activity_04o0fmp"><dc:Bounds x="3840" y="1250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_033wrgd_di" bpmnElement="Event_033wrgd"><dc:Bounds x="3772" y="1272" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_141vx4r_di" bpmnElement="Gateway_141vx4r" isMarkerVisible="true"><dc:Bounds x="3765" y="1427" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0opkbbc_di" bpmnElement="Activity_0opkbbc"><dc:Bounds x="4070" y="1600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19i1q6u_di" bpmnElement="Activity_19i1q6u"><dc:Bounds x="4070" y="1800" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01miiud_di" bpmnElement="Activity_01miiud"><dc:Bounds x="4140" y="1412" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ixkeyg_di" bpmnElement="Activity_1ixkeyg"><dc:Bounds x="4250" y="930" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1946ouf_di" bpmnElement="Activity_1946ouf"><dc:Bounds x="4465" y="930" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0394qg9_di" bpmnElement="Activity_0394qg9" isExpanded="true"><dc:Bounds x="4650" y="674" width="651" height="373" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_00m1d09_di" bpmnElement="Flow_00m1d09"><di:waypoint x="4871" y="919" /><di:waypoint x="4871" y="987" /><di:waypoint x="4931" y="987" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0idyar4_di" bpmnElement="Flow_0idyar4"><di:waypoint x="5031" y="987" /><di:waypoint x="5063" y="987" /><di:waypoint x="5063" y="929" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07o2bp1_di" bpmnElement="Flow_07o2bp1"><di:waypoint x="4871" y="869" /><di:waypoint x="4871" y="834" /><di:waypoint x="4931" y="834" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qno87u_di" bpmnElement="Flow_0qno87u"><di:waypoint x="5031" y="834" /><di:waypoint x="5063" y="834" /><di:waypoint x="5063" y="879" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1h4sn8k_di" bpmnElement="Flow_1h4sn8k"><di:waypoint x="5088" y="904" /><di:waypoint x="5113" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vjdxl3_di" bpmnElement="Flow_0vjdxl3"><di:waypoint x="4721" y="841" /><di:waypoint x="4778" y="841" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16rilx1_di" bpmnElement="Flow_16rilx1"><di:waypoint x="4803" y="866" /><di:waypoint x="4803" y="894" /><di:waypoint x="4846" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11awxv8_di" bpmnElement="Flow_11awxv8"><di:waypoint x="4803" y="816" /><di:waypoint x="4803" y="744" /><di:waypoint x="4853" y="744" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_02fmmu5_di" bpmnElement="Flow_02fmmu5"><di:waypoint x="5213" y="904" /><di:waypoint x="5245" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04if2ad_di" bpmnElement="Flow_04if2ad"><di:waypoint x="4889" y="744" /><di:waypoint x="5083" y="744" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rn39qa_di" bpmnElement="Flow_0rn39qa"><di:waypoint x="5183" y="744" /><di:waypoint x="5245" y="744" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0p4f10g_di" bpmnElement="Event_0p4f10g"><dc:Bounds x="4685" y="823" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0guxz4y_di" bpmnElement="Activity_0guxz4y"><dc:Bounds x="4931" y="947" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_03a3z5h_di" bpmnElement="Gateway_03a3z5h"><dc:Bounds x="4846" y="869" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1j58qvk_di" bpmnElement="Activity_1j58qvk"><dc:Bounds x="4931" y="794" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0gbzh6b_di" bpmnElement="Gateway_0gbzh6b"><dc:Bounds x="5038" y="879" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1fl4z7d_di" bpmnElement="Event_1fl4z7d"><dc:Bounds x="5245" y="886" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1uj3794_di" bpmnElement="Gateway_1uj3794"><dc:Bounds x="4778" y="816" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1joc6ud_di" bpmnElement="Event_1joc6ud"><dc:Bounds x="4853" y="726" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05mwhh1_di" bpmnElement="Activity_05mwhh1"><dc:Bounds x="5113" y="864" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08vbrbo_di" bpmnElement="Activity_08vbrbo"><dc:Bounds x="5083" y="704" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0g5bn3v_di" bpmnElement="Event_0g5bn3v"><dc:Bounds x="5245" y="726" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_09o5jm6_di" bpmnElement="Gateway_09o5jm6" isMarkerVisible="true"><dc:Bounds x="5415" y="836" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16od7to_di" bpmnElement="Activity_16od7to"><dc:Bounds x="5390" y="700" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lidbqz_di" bpmnElement="Activity_1lidbqz"><dc:Bounds x="5390" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jpu3x4_di" bpmnElement="Activity_1jpu3x4"><dc:Bounds x="5540" y="821" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qeooqt_di" bpmnElement="Activity_0qeooqt" isExpanded="true"><dc:Bounds x="5700" y="660" width="651" height="373" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1xcsxy4_di" bpmnElement="Flow_1xcsxy4"><di:waypoint x="5921" y="905" /><di:waypoint x="5921" y="955" /><di:waypoint x="5981" y="955" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1uuwf6q_di" bpmnElement="Flow_1uuwf6q"><di:waypoint x="5921" y="855" /><di:waypoint x="5921" y="835" /><di:waypoint x="5970" y="835" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_025ds0v_di" bpmnElement="Flow_025ds0v"><di:waypoint x="5771" y="827" /><di:waypoint x="5828" y="827" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01a1itb_di" bpmnElement="Flow_01a1itb"><di:waypoint x="5853" y="852" /><di:waypoint x="5853" y="880" /><di:waypoint x="5896" y="880" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cqfr8a_di" bpmnElement="Flow_0cqfr8a"><di:waypoint x="5853" y="802" /><di:waypoint x="5853" y="730" /><di:waypoint x="5903" y="730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1d9y3ve_di" bpmnElement="Flow_1d9y3ve"><di:waypoint x="5939" y="730" /><di:waypoint x="6133" y="730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1i2baxp_di" bpmnElement="Flow_1i2baxp"><di:waypoint x="6138" y="890" /><di:waypoint x="6163" y="890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bt8eqq_di" bpmnElement="Flow_1bt8eqq"><di:waypoint x="6263" y="890" /><di:waypoint x="6295" y="890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16ocby4_di" bpmnElement="Flow_16ocby4"><di:waypoint x="6233" y="730" /><di:waypoint x="6295" y="730" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hxtctr_di" bpmnElement="Flow_1hxtctr"><di:waypoint x="6081" y="955" /><di:waypoint x="6113" y="955" /><di:waypoint x="6113" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g6egx9_di" bpmnElement="Flow_0g6egx9"><di:waypoint x="6070" y="835" /><di:waypoint x="6113" y="835" /><di:waypoint x="6113" y="865" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0ci2lxa_di" bpmnElement="Event_0ci2lxa"><dc:Bounds x="5735" y="809" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_05dwc30_di" bpmnElement="Gateway_05dwc30"><dc:Bounds x="5896" y="855" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_18qtimc_di" bpmnElement="Gateway_18qtimc"><dc:Bounds x="5828" y="802" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_00ndil4_di" bpmnElement="Event_00ndil4"><dc:Bounds x="5903" y="712" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wcjpz5_di" bpmnElement="Activity_1wcjpz5"><dc:Bounds x="6133" y="690" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1m6nw6s_di" bpmnElement="Event_1m6nw6s"><dc:Bounds x="6295" y="712" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0c4no00_di" bpmnElement="Gateway_0c4no00"><dc:Bounds x="6088" y="865" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01q9e24_di" bpmnElement="Activity_01q9e24"><dc:Bounds x="6163" y="850" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_072gxjc_di" bpmnElement="Event_072gxjc"><dc:Bounds x="6295" y="872" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0iqtofh_di" bpmnElement="Activity_0iqtofh"><dc:Bounds x="5981" y="915" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1r110na_di" bpmnElement="Activity_1r110na"><dc:Bounds x="5970" y="795" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0hb2xbe_di" bpmnElement="Gateway_0hb2xbe" isMarkerVisible="true"><dc:Bounds x="6415" y="822" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jogccz_di" bpmnElement="Activity_1jogccz"><dc:Bounds x="6390" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0u1es19_di" bpmnElement="Activity_0u1es19" isExpanded="true"><dc:Bounds x="7210" y="705" width="790" height="470" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0ojzpwt_di" bpmnElement="Flow_0ojzpwt"><di:waypoint x="7520" y="1080" /><di:waypoint x="7410" y="1080" /><di:waypoint x="7410" y="1008" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0i59ji4_di" bpmnElement="Flow_0i59ji4"><di:waypoint x="7740" y="993" /><di:waypoint x="7740" y="1080" /><di:waypoint x="7620" y="1080" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1oe6xc0_di" bpmnElement="Flow_1oe6xc0"><di:waypoint x="7765" y="968" /><di:waypoint x="7800" y="968" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xsfut0_di" bpmnElement="Flow_0xsfut0"><di:waypoint x="7620" y="968" /><di:waypoint x="7715" y="968" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1rjzfcv_di" bpmnElement="Flow_1rjzfcv"><di:waypoint x="7900" y="968" /><di:waypoint x="7932" y="968" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1p89qul_di" bpmnElement="Flow_1p89qul"><di:waypoint x="7460" y="968" /><di:waypoint x="7520" y="968" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pcrtvs_di" bpmnElement="Flow_1pcrtvs"><di:waypoint x="7310" y="878" /><di:waypoint x="7310" y="968" /><di:waypoint x="7360" y="968" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ljmj2o_di" bpmnElement="Flow_0ljmj2o"><di:waypoint x="7268" y="853" /><di:waypoint x="7285" y="853" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cfa4kr_di" bpmnElement="Flow_1cfa4kr"><di:waypoint x="7335" y="853" /><di:waypoint x="7370" y="853" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1kdd8n8_di" bpmnElement="Flow_1kdd8n8"><di:waypoint x="7310" y="828" /><di:waypoint x="7310" y="753" /><di:waypoint x="7370" y="753" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19ekouu_di" bpmnElement="Flow_19ekouu"><di:waypoint x="7470" y="753" /><di:waypoint x="7500" y="753" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ps74ao_di" bpmnElement="Flow_1ps74ao"><di:waypoint x="7600" y="753" /><di:waypoint x="7642" y="753" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uxssif_di" bpmnElement="Flow_0uxssif"><di:waypoint x="7470" y="853" /><di:waypoint x="7500" y="853" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0omx8z0_di" bpmnElement="Flow_0omx8z0"><di:waypoint x="7600" y="853" /><di:waypoint x="7642" y="853" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_16opw7z_di" bpmnElement="Event_16opw7z"><dc:Bounds x="7232" y="835" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_182ldi3_di" bpmnElement="Gateway_182ldi3"><dc:Bounds x="7285" y="828" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_18l764g_di" bpmnElement="Activity_18l764g"><dc:Bounds x="7370" y="813" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ycnc51_di" bpmnElement="Activity_1ycnc51" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="7370" y="713" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0c3pg3u_di" bpmnElement="Activity_0c3pg3u"><dc:Bounds x="7500" y="713" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1gcic4n_di" bpmnElement="Event_1gcic4n"><dc:Bounds x="7642" y="735" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_14tm593_di" bpmnElement="Event_14tm593"><dc:Bounds x="7642" y="835" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xm84e8_di" bpmnElement="Activity_1xm84e8"><dc:Bounds x="7500" y="813" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08klsdw_di" bpmnElement="Activity_08klsdw"><dc:Bounds x="7360" y="928" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1j1cy2y_di" bpmnElement="Activity_1j1cy2y"><dc:Bounds x="7800" y="928" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1ddyzmr_di" bpmnElement="Event_1ddyzmr"><dc:Bounds x="7932" y="950" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0dg02ru_di" bpmnElement="Activity_0dg02ru"><dc:Bounds x="7520" y="928" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0enmayj_di" bpmnElement="Gateway_0enmayj" isMarkerVisible="true"><dc:Bounds x="7715" y="943" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0oa3skf_di" bpmnElement="Activity_0oa3skf"><dc:Bounds x="7520" y="1040" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1wj9fbt_di" bpmnElement="Gateway_1wj9fbt" isMarkerVisible="true"><dc:Bounds x="8055" y="822" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mpdox6_di" bpmnElement="Activity_1mpdox6"><dc:Bounds x="6669" y="1366" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1obymz8_di" bpmnElement="Activity_1obymz8"><dc:Bounds x="7940" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1atruar_di" bpmnElement="Activity_1atruar"><dc:Bounds x="7539" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1evv9ui_di" bpmnElement="Activity_1evv9ui"><dc:Bounds x="7379" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xebqw4_di" bpmnElement="Activity_1xebqw4"><dc:Bounds x="7809" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00hkb3z_di" bpmnElement="Activity_00hkb3z"><dc:Bounds x="7679" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1nuzh8c_di" bpmnElement="Activity_1nuzh8c"><dc:Bounds x="7199" y="1243" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mvt89u_di" bpmnElement="Activity_0mvt89u"><dc:Bounds x="8110" y="735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05fy1vq_di" bpmnElement="Activity_05fy1vq"><dc:Bounds x="8490" y="875" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qg8umg_di" bpmnElement="Activity_1qg8umg"><dc:Bounds x="8190" y="875" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ukky3y_di" bpmnElement="Activity_0ukky3y"><dc:Bounds x="8405" y="735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0y5io8y_di" bpmnElement="Activity_0y5io8y"><dc:Bounds x="8256" y="735" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0l97h3s_di" bpmnElement="Gateway_0l97h3s" isMarkerVisible="true"><dc:Bounds x="8591" y="822" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1z1016v_di" bpmnElement="Activity_1z1016v"><dc:Bounds x="8674" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_05udk42_di" bpmnElement="Activity_05udk42"><dc:Bounds x="8940" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1h2y1ne_di" bpmnElement="Activity_1h2y1ne"><dc:Bounds x="9350" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0lcl85u_di" bpmnElement="Activity_0lcl85u"><dc:Bounds x="8810" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1uayj6a_di" bpmnElement="Activity_1uayj6a"><dc:Bounds x="9080" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1snynxj_di" bpmnElement="Activity_1snynxj"><dc:Bounds x="9210" y="900" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0j75jxb_di" bpmnElement="Gateway_0j75jxb" isMarkerVisible="true"><dc:Bounds x="11275" y="725" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n88gti_di" bpmnElement="Activity_0n88gti" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11110" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_133v1bi_di" bpmnElement="Activity_133v1bi"><dc:Bounds x="11250" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19wst2s_di" bpmnElement="Activity_19wst2s"><dc:Bounds x="11110" y="560" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fjnajp_di" bpmnElement="Activity_0fjnajp"><dc:Bounds x="11250" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0xyusdr_di" bpmnElement="Gateway_0xyusdr" isMarkerVisible="true"><dc:Bounds x="11615" y="725" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_026ae5p_di" bpmnElement="Activity_026ae5p"><dc:Bounds x="11590" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hqu0n3_di" bpmnElement="Activity_1hqu0n3" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11420" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1t0d62e_di" bpmnElement="Activity_1t0d62e"><dc:Bounds x="11590" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0or7muh_di" bpmnElement="Activity_0or7muh"><dc:Bounds x="11420" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_04yhvu8_di" bpmnElement="Gateway_04yhvu8" isMarkerVisible="true"><dc:Bounds x="11935" y="725" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_08y6tn8_di" bpmnElement="Activity_08y6tn8"><dc:Bounds x="11910" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gzkrit_di" bpmnElement="Activity_0gzkrit" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11740" y="416" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0s69wv4_di" bpmnElement="Activity_0s69wv4"><dc:Bounds x="11910" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rpq7q1_di" bpmnElement="Activity_1rpq7q1"><dc:Bounds x="11740" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0nrevn5_di" bpmnElement="Gateway_0nrevn5" isMarkerVisible="true"><dc:Bounds x="12755" y="725" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02tibuy_di" bpmnElement="Activity_02tibuy"><dc:Bounds x="12730" y="460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1x4g4nr_di" bpmnElement="Activity_1x4g4nr" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="12560" y="460" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ilj5dl_di" bpmnElement="Activity_0ilj5dl"><dc:Bounds x="12730" y="600" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ozxz0u_di" bpmnElement="Activity_1ozxz0u"><dc:Bounds x="12560" y="590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gjb4hh_di" bpmnElement="Activity_0gjb4hh"><dc:Bounds x="1540" y="1547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vdhrbz_di" bpmnElement="Activity_1vdhrbz"><dc:Bounds x="1540" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17z9vef_di" bpmnElement="Activity_17z9vef" isExpanded="true"><dc:Bounds x="2675" y="674" width="810" height="280" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0gsbjmg_di" bpmnElement="Flow_0gsbjmg"><di:waypoint x="2751" y="824" /><di:waypoint x="2770" y="824" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1j3zkhe_di" bpmnElement="Flow_1j3zkhe"><di:waypoint x="3005" y="894" /><di:waypoint x="3035" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zin39j_di" bpmnElement="Flow_0zin39j"><di:waypoint x="2795" y="849" /><di:waypoint x="2795" y="894" /><di:waypoint x="2905" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0t1b43x_di" bpmnElement="Flow_0t1b43x"><di:waypoint x="2955" y="734" /><di:waypoint x="2977" y="734" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0efj982_di" bpmnElement="Flow_0efj982"><di:waypoint x="3013" y="734" /><di:waypoint x="3035" y="734" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04vmzpl_di" bpmnElement="Flow_04vmzpl"><di:waypoint x="2795" y="799" /><di:waypoint x="2795" y="734" /><di:waypoint x="2855" y="734" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_102gqwg_di" bpmnElement="Flow_102gqwg"><di:waypoint x="3135" y="734" /><di:waypoint x="3157" y="734" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_169x1tp_di" bpmnElement="Flow_169x1tp"><di:waypoint x="3135" y="894" /><di:waypoint x="3167" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1lh59sc_di" bpmnElement="Flow_1lh59sc"><di:waypoint x="3345" y="894" /><di:waypoint x="3387" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g4429x_di" bpmnElement="Flow_1g4429x"><di:waypoint x="3203" y="894" /><di:waypoint x="3245" y="894" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_00ztrtq_di" bpmnElement="Activity_00ztrtq"><dc:Bounds x="2855" y="694" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hp27xt_di" bpmnElement="Activity_1hp27xt"><dc:Bounds x="3035" y="694" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_13p1jr9_di" bpmnElement="Event_13p1jr9"><dc:Bounds x="2977" y="716" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1799bzq_di" bpmnElement="Activity_1799bzq"><dc:Bounds x="3035" y="854" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0k74p9c_di" bpmnElement="Activity_0k74p9c"><dc:Bounds x="2905" y="854" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0a7uslc_di" bpmnElement="Event_0a7uslc"><dc:Bounds x="3157" y="716" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_18nfkrz_di" bpmnElement="Event_18nfkrz"><dc:Bounds x="3167" y="876" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0lhww0o_di" bpmnElement="Event_0lhww0o"><dc:Bounds x="3387" y="876" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_093gucv_di" bpmnElement="Activity_093gucv"><dc:Bounds x="3245" y="854" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0o2sqam_di" bpmnElement="Gateway_0o2sqam"><dc:Bounds x="2770" y="799" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_184o5yv_di" bpmnElement="Event_184o5yv"><dc:Bounds x="2715" y="806" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1e5to57_di" bpmnElement="Activity_1e5to57"><dc:Bounds x="2920" y="1000" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_003b3q7_di" bpmnElement="Event_003b3q7"><dc:Bounds x="3152" y="1442" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15cbpct_di" bpmnElement="Activity_15cbpct"><dc:Bounds x="8330" y="875" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qpj4ft_di" bpmnElement="Activity_0qpj4ft"><dc:Bounds x="2720" y="1530" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0jit00r_di" bpmnElement="Gateway_0jit00r" isMarkerVisible="true"><dc:Bounds x="2845" y="1545" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jl81yl_di" bpmnElement="Activity_1jl81yl"><dc:Bounds x="2580" y="1530" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0d0m2l5_di" bpmnElement="Gateway_0d0m2l5" isMarkerVisible="true"><dc:Bounds x="3175" y="245" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0xzo7xe_di" bpmnElement="Activity_0xzo7xe"><dc:Bounds x="3681" y="230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10tpley_di" bpmnElement="Activity_10tpley"><dc:Bounds x="3414" y="230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17p4rlo_di" bpmnElement="Activity_17p4rlo"><dc:Bounds x="3544" y="230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gyewhy_di" bpmnElement="Activity_0gyewhy"><dc:Bounds x="3272" y="230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17qs7wp_di" bpmnElement="Activity_17qs7wp"><dc:Bounds x="3150" y="360" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1v07j04_di" bpmnElement="Activity_1v07j04"><dc:Bounds x="2920" y="1278" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0tks027_di" bpmnElement="Gateway_0tks027" isMarkerVisible="true"><dc:Bounds x="4275" y="1167" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0kfx2bu_di" bpmnElement="Activity_0pxt9fb"><dc:Bounds x="1740" y="1440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_098dj3x_di" bpmnElement="Activity_098dj3x"><dc:Bounds x="3272" y="360" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>