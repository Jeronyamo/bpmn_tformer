<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_hlk_proxy_reg_app_2_5be80a01-5344-4b76-8350-c7f61e8b3433" name="Заявка на регистрацию доверенности" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1"><bpmn:outgoing>SequenceFlow_0or7jn6</bpmn:outgoing></bpmn:startEvent><bpmn:userTask id="Task_0micukk" name="Заполнение заявки на регистрацию доверенности" camunda:formKey="FILL" camunda:assignee="${initiator}"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="hlk_client_app" label="Клиент" type="string" /><camunda:formField id="hlk_comment" label="Комментарий*" type="string" /><camunda:formField id="hlk_proxy_FILE" label="Файл доверенности" type="string" /><camunda:formField id="hlk_proxy_SIGNING_DATE" label="Дата подписания доверенности" type="string" /><camunda:formField id="hlk_proxy_END_DATE" label="Дата окончания доверенности" type="string" /><camunda:formField id="hlk_proxy_Confidant" label="Доверенное лицо" type="string" /><camunda:formField id="hlk_proxy_KIND" label="Вид доверенности" type="string" /><camunda:formField id="hlk_account_number_contract" label="Номер договора" type="string" /><camunda:formField id="hlk_days_end" label="Количество дней, до истечения срока действия" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0z4k2fn</bpmn:incoming><bpmn:incoming>SequenceFlow_0uvbhnk</bpmn:incoming><bpmn:incoming>SequenceFlow_171wgad</bpmn:incoming><bpmn:outgoing>SequenceFlow_0a1wo2a</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_0or7jn6" sourceRef="StartEvent_1" targetRef="Task_0udxszp" /><bpmn:sequenceFlow id="SequenceFlow_0a1wo2a" sourceRef="Task_0micukk" targetRef="ServiceTask_0yjyfg1" /><bpmn:serviceTask id="ServiceTask_18devms" name="Установка статуса: &#34;Заполнение: Заполнение параметров&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Заполнение+параметров</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0bwyp8d</bpmn:incoming><bpmn:incoming>SequenceFlow_1gejfsg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0z4k2fn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0z4k2fn" sourceRef="ServiceTask_18devms" targetRef="Task_0micukk" /><bpmn:serviceTask id="ServiceTask_0q99htm" name="Установка статуса &#34;Обработка: Заявка зарегистрирована&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+зарегистрирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0w84qp9</bpmn:incoming><bpmn:outgoing>SequenceFlow_027horx</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_027horx" sourceRef="ServiceTask_0q99htm" targetRef="ServiceTask_0iznm12" /><bpmn:sequenceFlow id="SequenceFlow_1bgot8r" sourceRef="Gateway_0kk178m" targetRef="ServiceTask_13962ax"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_01pqxo8" name="Установка статуса &#34;Заполнение: Отсутствует право первой подписи&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Отсутствует+право+первой+подписи</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06ub0ms</bpmn:incoming><bpmn:incoming>SequenceFlow_1e94qaq</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cwad3s</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_13962ax" name="Установка статуса &#34;Исполнена&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1bgot8r</bpmn:incoming><bpmn:incoming>SequenceFlow_1c5p0ar</bpmn:incoming><bpmn:incoming>SequenceFlow_19y1rpq</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gdwqhr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1gdwqhr" sourceRef="ServiceTask_13962ax" targetRef="ServiceTask_0slepa0" /><bpmn:sequenceFlow id="SequenceFlow_06ub0ms" sourceRef="Gateway_0kk178m" targetRef="ServiceTask_01pqxo8" /><bpmn:sequenceFlow id="SequenceFlow_0bwyp8d" sourceRef="UserTask_16hqj3x" targetRef="ServiceTask_18devms"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'retry'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="EndEvent_1xmry8z"><bpmn:incoming>SequenceFlow_07tm4dw</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_16ybaca" sourceRef="UserTask_16hqj3x" targetRef="ServiceTask_1rbdr90"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_0slepa0" name="Повышение версии"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1gdwqhr</bpmn:incoming><bpmn:outgoing>SequenceFlow_0zgwcur</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0zgwcur" sourceRef="ServiceTask_0slepa0" targetRef="ServiceTask_0a8ywnw" /><bpmn:exclusiveGateway id="Gateway_0kk178m" default="SequenceFlow_06ub0ms"><bpmn:incoming>SequenceFlow_0emvinb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1bgot8r</bpmn:outgoing><bpmn:outgoing>SequenceFlow_06ub0ms</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1rbdr90" name="Установка статуса &#34;Заявка отменена&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отказано+в+подтверждении</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16ybaca</bpmn:incoming><bpmn:outgoing>SequenceFlow_07tm4dw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_07tm4dw" sourceRef="ServiceTask_1rbdr90" targetRef="EndEvent_1xmry8z" /><bpmn:userTask id="UserTask_16hqj3x" name="Подтверждение заявки на доверенность" camunda:assignee="${initiator}"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;confirm&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;retry&#34;,&#34;label&#34;:&#34;Повторное заполнение&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;cancel&#34;,&#34;label&#34;:&#34;Отменить заявку&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cwad3s</bpmn:incoming><bpmn:incoming>SequenceFlow_1ne9xs2</bpmn:incoming><bpmn:outgoing>SequenceFlow_0i4zooo</bpmn:outgoing><bpmn:outgoing>SequenceFlow_16ybaca</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0bwyp8d</bpmn:outgoing></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_0i4zooo" sourceRef="UserTask_16hqj3x" targetRef="ServiceTask_0ifkzrj"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "confirm"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1cwad3s" sourceRef="ServiceTask_01pqxo8" targetRef="UserTask_16hqj3x" /><bpmn:serviceTask id="ServiceTask_0ehc7ec" name="Получение поля &#34;Вид доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_KIND</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_KIND">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1egf20c</bpmn:incoming><bpmn:outgoing>SequenceFlow_18shish</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_18shish" sourceRef="ServiceTask_0ehc7ec" targetRef="Gateway_1b964b1" /><bpmn:serviceTask id="ServiceTask_0a8ywnw" name="Создание доверенности"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_temp_type" : "Доверенность"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0zgwcur</bpmn:incoming><bpmn:outgoing>SequenceFlow_0gc8t72</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0agaf9w" sourceRef="Gateway_1b964b1" targetRef="ServiceTask_0f2b0ds"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_KIND == "Право второй подписи"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_1b964b1" default="SequenceFlow_1c5p0ar"><bpmn:incoming>SequenceFlow_18shish</bpmn:incoming><bpmn:outgoing>SequenceFlow_0agaf9w</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1c5p0ar</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0034gfd</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1c5p0ar" sourceRef="Gateway_1b964b1" targetRef="ServiceTask_13962ax" /><bpmn:serviceTask id="ServiceTask_0f2b0ds" name="Проверка права первой подписи"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	"filter": { 		"templatePrimaryId": "5dca67c5e189c4000750f60d", 		"attributes.hlk_client_app.primaryId": "${hlk_client_app}", 		"attributes.hlk_proxy_KIND": "Право первой подписи", 		"activityStatus": "ACTIVE" 	}, 	"projection": { 		"_id": 1 	} }</camunda:inputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0agaf9w</bpmn:incoming><bpmn:outgoing>SequenceFlow_0emvinb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0emvinb" sourceRef="ServiceTask_0f2b0ds" targetRef="Gateway_0kk178m" /><bpmn:serviceTask id="ServiceTask_1fz3env" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1itfbod</bpmn:incoming><bpmn:outgoing>SequenceFlow_0okl02s</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0okl02s" sourceRef="ServiceTask_1fz3env" targetRef="ServiceTask_1yermc6" /><bpmn:serviceTask id="ServiceTask_1yermc6" name="Записываем primaryId в объект"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0okl02s</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gejfsg</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1gejfsg" sourceRef="ServiceTask_1yermc6" targetRef="ServiceTask_18devms" /><bpmn:serviceTask id="ServiceTask_0yjyfg1" name="Получение поля &#34;Дата регистрации доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_DateRegistration</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_DateRegistration">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0a1wo2a</bpmn:incoming><bpmn:outgoing>SequenceFlow_0sfg2ff</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_03zt1mn" name="Получение поля &#34;Дата подписания доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_SIGNING_DATE</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_SIGNING_DATE">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0sfg2ff</bpmn:incoming><bpmn:outgoing>SequenceFlow_03rvta2</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0pvik8w" name="Получение поля &#34;Дата окончания доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_END_DATE</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_END_DATE">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03rvta2</bpmn:incoming><bpmn:outgoing>SequenceFlow_1w5simx</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0wgs2zu" default="SequenceFlow_1wh86im"><bpmn:incoming>SequenceFlow_1w5simx</bpmn:incoming><bpmn:outgoing>SequenceFlow_1wh86im</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1jyq58u</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_0xs3dvw" name="Установка статуса &#34;Некорректная дата доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Некорректная+дата+окончания+доверенности</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1wh86im</bpmn:incoming><bpmn:incoming>SequenceFlow_0j12wws</bpmn:incoming><bpmn:outgoing>SequenceFlow_0uvbhnk</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_1u1skes" default="SequenceFlow_0j12wws"><bpmn:incoming>SequenceFlow_1jyq58u</bpmn:incoming><bpmn:outgoing>SequenceFlow_0j12wws</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0w84qp9</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0sfg2ff" sourceRef="ServiceTask_0yjyfg1" targetRef="ServiceTask_03zt1mn" /><bpmn:sequenceFlow id="SequenceFlow_03rvta2" sourceRef="ServiceTask_03zt1mn" targetRef="ServiceTask_0pvik8w" /><bpmn:sequenceFlow id="SequenceFlow_1w5simx" sourceRef="ServiceTask_0pvik8w" targetRef="ExclusiveGateway_0wgs2zu" /><bpmn:sequenceFlow id="SequenceFlow_1wh86im" sourceRef="ExclusiveGateway_0wgs2zu" targetRef="ServiceTask_0xs3dvw" /><bpmn:sequenceFlow id="SequenceFlow_1jyq58u" sourceRef="ExclusiveGateway_0wgs2zu" targetRef="ExclusiveGateway_1u1skes"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_SIGNING_DATE &lt; hlk_proxy_END_DATE}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0j12wws" sourceRef="ExclusiveGateway_1u1skes" targetRef="ServiceTask_0xs3dvw" /><bpmn:sequenceFlow id="SequenceFlow_0w84qp9" sourceRef="ExclusiveGateway_1u1skes" targetRef="ServiceTask_0q99htm"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_DateRegistration &lt; hlk_proxy_END_DATE}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0uvbhnk" sourceRef="ServiceTask_0xs3dvw" targetRef="Task_0micukk" /><bpmn:serviceTask id="ServiceTask_0pv8dtg" name="генерим учетку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/password/generate</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="password"><camunda:script scriptFormat="javascript">JSON.parse(response).password</camunda:script></camunda:outputParameter><camunda:outputParameter name="hash"><camunda:script scriptFormat="javascript">JSON.parse(response).passowrdHash</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_038k65g</bpmn:incoming><bpmn:outgoing>SequenceFlow_1od6vxu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0r9rbne" name="Создаем учетку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/users</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("login", accountNumber)
.prop("firstName", firstName)
.prop("lastName", lastName)
.prop("fullName", ShortName)
.prop("email", mail ? mail : "null")
.prop("roles", ["Client"])
.prop("type", "LOCAL")
.prop("password", hash)
.prop("hashPassword",true)
.prop("active", true)
.prop("changePassword" , true)
.prop("phone", phone ? phone : "null")
.prop("state","ACTIVE")
.prop("createdBy",S("{}")
.prop("collection","individualPerson")
.prop("id", hlk_proxy_Confidant))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1od6vxu</bpmn:incoming><bpmn:outgoing>SequenceFlow_1217pbb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1m8axrj" name="Определяем  у клиента активный счет в цд"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "invoice",
	"filter": {
		"attributes.hlk_account_owner.primaryId": "${hlk_client_app}",
                "attributes.hlk_clearing_system.value" : "АО ЦЕНТРАЛЬНЫЙ ДЕПОЗИТАРИЙ ЦЕННЫХ БУМАГ",
                "attributes.hlk_account_type" : "Ценнобумажный"
	},
	"projection": {
		"attributes.hlk_Account_Number": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountNumberCD"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_Account_Number
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03gqzk7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0b7rwcg</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0tzsuof" default="SequenceFlow_0wwtt1j"><bpmn:incoming>SequenceFlow_02ktrl9</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wwtt1j</bpmn:outgoing><bpmn:outgoing>SequenceFlow_03eyjik</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1yws171" name="определяем вид доверенности"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_KIND</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_KIND">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03eyjik</bpmn:incoming><bpmn:outgoing>SequenceFlow_0n10udu</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0tov7uj" default="SequenceFlow_13s9irh"><bpmn:incoming>SequenceFlow_0n10udu</bpmn:incoming><bpmn:outgoing>SequenceFlow_13s9irh</bpmn:outgoing><bpmn:outgoing>SequenceFlow_19av8z1</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="ExclusiveGateway_1ndxrcs" default="SequenceFlow_184wwrm"><bpmn:incoming>SequenceFlow_13s9irh</bpmn:incoming><bpmn:outgoing>SequenceFlow_184wwrm</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1a5sd5l</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0b7rwcg" sourceRef="ServiceTask_1m8axrj" targetRef="ScriptTask_0dpgcep" /><bpmn:sequenceFlow id="SequenceFlow_1od6vxu" sourceRef="ServiceTask_0pv8dtg" targetRef="ServiceTask_0r9rbne" /><bpmn:sequenceFlow id="SequenceFlow_0wwtt1j" name="клиент ФЛ" sourceRef="ExclusiveGateway_0tzsuof" targetRef="ExclusiveGateway_19krhs2" /><bpmn:sequenceFlow id="SequenceFlow_03eyjik" name="клиент ЮЛ" sourceRef="ExclusiveGateway_0tzsuof" targetRef="ServiceTask_1yws171"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0n10udu" sourceRef="ServiceTask_1yws171" targetRef="ExclusiveGateway_0tov7uj" /><bpmn:sequenceFlow id="SequenceFlow_13s9irh" sourceRef="ExclusiveGateway_0tov7uj" targetRef="ExclusiveGateway_1ndxrcs" /><bpmn:serviceTask id="ServiceTask_06mb2or" name="Достаем primaryId доверенного лица, ID участника и др параметры"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "individualPerson",
	"filter": {
		"primaryId": "${hlk_proxy_Confidant}"
	},
	"projection": {
		"attributes.hlk_app_id": 1,
                "attributes.hlk_lastname": 1,
                "attributes.hlk_firstname": 1,
                "attributes.hlk_patronomic": 1,
                "attributes.hlk_email": 1,
                "attributes.ShortName": 1,
                "attributes.hlk_phone": 1,
                "attributes.hlk_id": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="appId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_app_id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="hlk_id"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="firstName"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_firstname
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="lastName"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_lastname
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="fullName"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.ShortName
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mail"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_email
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="phone"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_phone
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="ShortName"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.ShortName
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0qmhuv7</bpmn:incoming><bpmn:incoming>SequenceFlow_1a5sd5l</bpmn:incoming><bpmn:incoming>SequenceFlow_19av8z1</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ncghop</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_0943srv"><bpmn:incoming>SequenceFlow_0kkxl86</bpmn:incoming><bpmn:outgoing>SequenceFlow_1815u8o</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1ydwxw3"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="ServiceTask_0kbgiuv" name="Мониторим integrationBuffer"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "integrationBuffer",
	"filter": {
		"type": "BOOK",
                "abstractDictionaryObject.attributes.hlk_app_id":"${primaryId}"
	},
	"projection": {
		"handleStatus": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].handleStatus</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1815u8o</bpmn:incoming><bpmn:outgoing>SequenceFlow_0yarjap</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_19b3wm6" default="SequenceFlow_0kkxl86"><bpmn:incoming>SequenceFlow_0yarjap</bpmn:incoming><bpmn:outgoing>SequenceFlow_0kkxl86</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0kkxl86" sourceRef="ExclusiveGateway_19b3wm6" targetRef="IntermediateCatchEvent_0943srv" /><bpmn:sequenceFlow id="SequenceFlow_1815u8o" sourceRef="IntermediateCatchEvent_0943srv" targetRef="ServiceTask_0kbgiuv" /><bpmn:sequenceFlow id="SequenceFlow_0yarjap" sourceRef="ServiceTask_0kbgiuv" targetRef="ExclusiveGateway_19b3wm6" /><bpmn:serviceTask id="ServiceTask_0rjv53j" name="Определяем тип клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "legalEntity",
	"filter": {
		"primaryId": "${hlk_client_app}"
	},
	"projection": {
		"attributes.hlk_app_id": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="appId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.hlk_app_id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_10jta8k</bpmn:incoming><bpmn:outgoing>SequenceFlow_02ktrl9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_02ktrl9" sourceRef="ServiceTask_0rjv53j" targetRef="ExclusiveGateway_0tzsuof" /><bpmn:exclusiveGateway id="ExclusiveGateway_19krhs2" default="SequenceFlow_0dd32qx"><bpmn:incoming>SequenceFlow_0wwtt1j</bpmn:incoming><bpmn:outgoing>SequenceFlow_0qmhuv7</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0dd32qx</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0qmhuv7" sourceRef="ExclusiveGateway_19krhs2" targetRef="ServiceTask_06mb2or"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_KIND== "Право первой подписи с ЭЦП/СМС"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:endEvent id="EndEvent_0ohyrms"><bpmn:incoming>SequenceFlow_0ycvd5v</bpmn:incoming><bpmn:incoming>SequenceFlow_1qzmwpw</bpmn:incoming><bpmn:incoming>SequenceFlow_1oxbyez</bpmn:incoming></bpmn:endEvent><bpmn:sequenceFlow id="SequenceFlow_0dd32qx" sourceRef="ExclusiveGateway_19krhs2" targetRef="ServiceTask_17h3aiu" /><bpmn:sequenceFlow id="SequenceFlow_184wwrm" sourceRef="ExclusiveGateway_1ndxrcs" targetRef="ServiceTask_1sjpqhd" /><bpmn:sequenceFlow id="SequenceFlow_0ncghop" sourceRef="ServiceTask_06mb2or" targetRef="ServiceTask_04glm82" /><bpmn:sequenceFlow id="SequenceFlow_1217pbb" sourceRef="ServiceTask_0r9rbne" targetRef="ServiceTask_0u7sney" /><bpmn:serviceTask id="ServiceTask_0y39lzn" name="Получение поля &#34;Доверенное лицо&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_Confidant</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_Confidant">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1k67u83</bpmn:incoming><bpmn:outgoing>SequenceFlow_0udq8rl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0udq8rl" sourceRef="ServiceTask_0y39lzn" targetRef="ServiceTask_04mvizl" /><bpmn:serviceTask id="ServiceTask_0u7sney" name="Записываем статус формирования логина"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/Login_status?incrementVersion=false&amp;value=Логин+сформирован</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1217pbb</bpmn:incoming><bpmn:outgoing>SequenceFlow_0i2wial</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0i2wial" sourceRef="ServiceTask_0u7sney" targetRef="ServiceTask_0hoqfjm" /><bpmn:serviceTask id="ServiceTask_0hoqfjm" name="Записываем  логин"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/login?incrementVersion=false&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0i2wial</bpmn:incoming><bpmn:outgoing>SequenceFlow_12ctjag</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_12ctjag" sourceRef="ServiceTask_0hoqfjm" targetRef="ServiceTask_1iqkbua" /><bpmn:serviceTask id="ServiceTask_17h3aiu" name="Записываем статус формирования логина"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/Login_status?incrementVersion=false&amp;value=Логин+не+используется</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0dd32qx</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ycvd5v</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ycvd5v" sourceRef="ServiceTask_17h3aiu" targetRef="EndEvent_0ohyrms" /><bpmn:serviceTask id="ServiceTask_04glm82" name="Проверка существующих доверенностей у клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	
"filter": { 		
"templatePrimaryId": "5dca67c5e189c4000750f60d", 		"attributes.hlk_client_app.primaryId": "${hlk_client_app}"
             }, 	
"projection": { "_id": 1}
 }</camunda:inputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch.length+1</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ncghop</bpmn:incoming><bpmn:outgoing>SequenceFlow_03gqzk7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_03gqzk7" sourceRef="ServiceTask_04glm82" targetRef="ServiceTask_1m8axrj" /><bpmn:scriptTask id="ScriptTask_0dpgcep" name="Склеиваем логин порядковый номер + счет цд" scriptFormat="javascript" camunda:resultVariable="accountNumber"><bpmn:incoming>SequenceFlow_0b7rwcg</bpmn:incoming><bpmn:outgoing>SequenceFlow_038k65g</bpmn:outgoing><bpmn:script>found + accountNumberCD</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_038k65g" sourceRef="ScriptTask_0dpgcep" targetRef="ServiceTask_0pv8dtg" /><bpmn:serviceTask id="ServiceTask_0e1fyzk" name="Проставление в ФЛ статуса доверенное лицо"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/individual/${referenceId1}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_confidant": true}</camunda:inputParameter><camunda:outputParameter name="rrr">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1n7unop</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vtcsw9</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0vtcsw9" sourceRef="ServiceTask_0e1fyzk" targetRef="ServiceTask_0unu9r0" /><bpmn:serviceTask id="ServiceTask_04mvizl" name="Получаем инстанс айди доверенного лица"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getRefId/hlk_proxy_Confidant</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="referenceId1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0udq8rl</bpmn:incoming><bpmn:outgoing>SequenceFlow_1n7unop</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1n7unop" sourceRef="ServiceTask_04mvizl" targetRef="ServiceTask_0e1fyzk" /><bpmn:serviceTask id="ServiceTask_08xil3t" name="Записываем в объект ID доверенности"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_proxy_id?incrementVersion=false&amp;value=${PrimaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14vzzgi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1k67u83</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1k67u83" sourceRef="ServiceTask_08xil3t" targetRef="ServiceTask_0y39lzn" /><bpmn:sequenceFlow id="SequenceFlow_1a5sd5l" name="вид=Право второй подписи с ЭЦП" sourceRef="ExclusiveGateway_1ndxrcs" targetRef="ServiceTask_06mb2or"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_KIND== "Право второй подписи с ЭЦП"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_19av8z1" name="вид=Право первой подписи с ЭЦП/СМС" sourceRef="ExclusiveGateway_0tov7uj" targetRef="ServiceTask_06mb2or"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_KIND== "Право первой подписи с ЭЦП/СМС"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_1sjpqhd" name="Записываем статус формирования логина"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/Login_status?incrementVersion=false&amp;value=Логин+не+используется</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_184wwrm</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qzmwpw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1qzmwpw" sourceRef="ServiceTask_1sjpqhd" targetRef="EndEvent_0ohyrms" /><bpmn:serviceTask id="ServiceTask_0gtg54q" name="Проверка права первой подписи ЭЦП/СМС"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	"filter": { 		"templatePrimaryId": "5dca67c5e189c4000750f60d", 		"attributes.hlk_client_app.primaryId": "${hlk_client_app}", 		"attributes.hlk_proxy_KIND": "Право первой подписи с ЭЦП/СМС", 		"activityStatus": "ACTIVE" 	}, 	"projection": { 		"_id": 1 	} }</camunda:inputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0034gfd</bpmn:incoming><bpmn:outgoing>SequenceFlow_0t750ef</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0034gfd" sourceRef="Gateway_1b964b1" targetRef="ServiceTask_0gtg54q"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${hlk_proxy_KIND == "Право второй подписи с ЭЦП"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="ExclusiveGateway_0p6evhq"><bpmn:incoming>SequenceFlow_0t750ef</bpmn:incoming><bpmn:outgoing>SequenceFlow_19y1rpq</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1e94qaq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0t750ef" sourceRef="ServiceTask_0gtg54q" targetRef="ExclusiveGateway_0p6evhq" /><bpmn:sequenceFlow id="SequenceFlow_19y1rpq" name="есть" sourceRef="ExclusiveGateway_0p6evhq" targetRef="ServiceTask_13962ax"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1e94qaq" sourceRef="ExclusiveGateway_0p6evhq" targetRef="ServiceTask_01pqxo8" /><bpmn:serviceTask id="ServiceTask_1iqkbua" name="Записываем  хэш"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/Hash?incrementVersion=false&amp;value=${hash}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12ctjag</bpmn:incoming><bpmn:outgoing>SequenceFlow_0h3ws7n</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0h3ws7n" sourceRef="ServiceTask_1iqkbua" targetRef="ServiceTask_1ej1irx" /><bpmn:serviceTask id="ServiceTask_0uezl6i" name="Определяем доверенность"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"primaryId": "${PrimaryId}"
	},
	"projection": {
		"_id": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="appId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0]._id</camunda:script></camunda:outputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ivh2vm</bpmn:incoming><bpmn:outgoing>SequenceFlow_0b9nxtk</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1s56mhq" name="Обновление доверенности"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${appId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("login", accountNumber)
.prop("password",password)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0b9nxtk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1u404cb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_19s91dc" name="Повышаем версию доверенности"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${appId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1u404cb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1oxbyez</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1u404cb" sourceRef="ServiceTask_1s56mhq" targetRef="ServiceTask_19s91dc" /><bpmn:sequenceFlow id="SequenceFlow_0b9nxtk" sourceRef="ServiceTask_0uezl6i" targetRef="ServiceTask_1s56mhq" /><bpmn:sequenceFlow id="SequenceFlow_1oxbyez" sourceRef="ServiceTask_19s91dc" targetRef="EndEvent_0ohyrms" /><bpmn:serviceTask id="ServiceTask_0unu9r0" name="Повышение версии"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/individual/processCompleted/${referenceId1}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vtcsw9</bpmn:incoming><bpmn:outgoing>SequenceFlow_10jta8k</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_10jta8k" sourceRef="ServiceTask_0unu9r0" targetRef="ServiceTask_0rjv53j" /><bpmn:serviceTask id="ServiceTask_0iznm12" name="Получение поля Primary_ID &#34;Клиент&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_027horx</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ozxg6i</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1pxwmz1" name="Получение поля ID экземпляра &#34;Клиент&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getRefId/hlk_client_app</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_client_app_ekz">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ozxg6i</bpmn:incoming><bpmn:outgoing>SequenceFlow_1fglcmk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ozxg6i" sourceRef="ServiceTask_0iznm12" targetRef="ServiceTask_1pxwmz1" /><bpmn:sequenceFlow id="SequenceFlow_1fglcmk" sourceRef="ServiceTask_1pxwmz1" targetRef="ServiceTask_03vz3yp" /><bpmn:serviceTask id="ServiceTask_0u8fzvg" name="Получение поля &#34;ID заявки&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_app_id</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_app_id">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1sbd4mk</bpmn:incoming><bpmn:outgoing>SequenceFlow_0v23irg</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0p0xx01" name="Получение доп данных по ФЛ (Клиент)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${hlk_client_app_ekz}&amp;sourceType=INDIVIDUAL</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_typesdoc":"hlk_typesdoc_pr","hlk_dateissue":"hlk_dateissue_pr","hlk_serialdocument":"hlk_serialdocument_pr","hlk_numberdocument":"hlk_numberdocument_pr","hlk_Placeofissue":"hlk_Placeofissue_pr","hlk_iin_bin":"hlk_iin_bin_pr","hlk_email":"hlk_email_pr","hlk_issueddocument":"hlk_issueddocument_pr"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_11y7cjh</bpmn:incoming><bpmn:outgoing>SequenceFlow_1d8mkec</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1po83ff" name="Получение доп данных по ФЛ (Доверенное лицо)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${hlk_proxy_Confidant}&amp;sourceType=INDIVIDUAL</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_typesdoc":"hlk_du_doctype_pr","hlk_dateissue":"hlk_du_issue_date_pr","hlk_serialdocument":"hlk_du_serialdocument_pr","hlk_numberdocument":"hlk_du_numberdocument_pr","hlk_Placeofissue":"hlk_du_Placeofissue_pr","hlk_iin_bin":"hlk_du_iin_bin_pr","hlk_email":"hlk_du_email_pr","hlk_issueddocument":"hlk_du_issueddocument_pr"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_073ftck</bpmn:incoming><bpmn:outgoing>SequenceFlow_1sbd4mk</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0qyke97" name="Получение доп данных по ЮЛ (Клиент)"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/mapAttributes?sourceId=${hlk_client_app_ekz}&amp;sourceType=LEGAL_ENTITY</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"hlk_typesdoc":"hlk_typesdoc_pr","hlk_dateissue":"hlk_dateissue_pr","hlk_serialdocument":"hlk_serialdocument_pr","hlk_numberdocument":"hlk_numberdocument_pr","hlk_Placeofissue":"hlk_Placeofissue_pr","hlk_iin_bin":"hlk_iin_bin_pr","hlk_regnumber":"hlk_regnumber_pr","hlk_email":"hlk_email_pr","hlk_issueddocument":"hlk_issueddocument_pr"}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0rdb0bn</bpmn:incoming><bpmn:outgoing>SequenceFlow_1p8gud7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1g9fjn0" name="Получение поля ID &#34;Доверенное лицо&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getRefId/hlk_proxy_Confidant</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_Confidant">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1d8mkec</bpmn:incoming><bpmn:incoming>SequenceFlow_1p8gud7</bpmn:incoming><bpmn:outgoing>SequenceFlow_073ftck</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_03vz3yp" name="Проверка ФЛ/ЮЛ для Клиента"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"attributes.hlk_client_app.source": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="clientSource"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].attributes.hlk_client_app.source</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1fglcmk</bpmn:incoming><bpmn:outgoing>SequenceFlow_156wk7l</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0vr3g2z"><bpmn:incoming>SequenceFlow_156wk7l</bpmn:incoming><bpmn:outgoing>SequenceFlow_11y7cjh</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0rdb0bn</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_04y7x5a" name="Проверка на дубли доверенности"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{"find":"book","filter":{"templatePrimaryId":"5dca67c5e189c4000750f60d","attributes.hlk_client_app.primaryId":"${hlk_client_app}","attributes.hlk_proxy_KIND":"${hlk_proxy_KIND}", "labelStatus" :{ $ne:"Отозвана"} },"projection": {"_id": 1}}</camunda:inputParameter><camunda:outputParameter name="foundDU"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1amr1dj</bpmn:incoming><bpmn:outgoing>SequenceFlow_1c7wy6q</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_01vn7bm" name="Установка статуса &#34;Отклонена&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отклонена+(дубль+заявки)</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1pk0j3j</bpmn:incoming><bpmn:incoming>SequenceFlow_027lksb</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gtfmsd</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0e6gnk0" default="SequenceFlow_1amr1dj"><bpmn:incoming>SequenceFlow_1j1hf6b</bpmn:incoming><bpmn:outgoing>SequenceFlow_1amr1dj</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1pk0j3j</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="ExclusiveGateway_1xmxcez" default="SequenceFlow_1957q8k"><bpmn:incoming>SequenceFlow_1c7wy6q</bpmn:incoming><bpmn:outgoing>SequenceFlow_027lksb</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1957q8k</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:endEvent id="EndEvent_07yimfi"><bpmn:incoming>SequenceFlow_1gtfmsd</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_194ncg0" name="Проверка на дубли заявки"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ "find": "book", "filter":{"templatePrimaryId":"5e70e1a6a7b11b00071fe0d3","attributes.hlk_client_app.primaryId":"${hlk_client_app}","_id": { "$ne":ObjectId("${instanceId}")},"attributes.hlk_proxy_KIND":"${hlk_proxy_KIND}","labelStatus":"Заполнение: Заявка зарегистрирована. Подтверждение заявки"},"projection":{"_id":1}}</camunda:inputParameter><camunda:outputParameter name="found"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vnweb3</bpmn:incoming><bpmn:outgoing>SequenceFlow_1j1hf6b</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1no8n3h" name="Получение поля &#34;вид доверенности&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_proxy_KIND</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="hlk_proxy_KIND">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0v23irg</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vnweb3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0v23irg" sourceRef="ServiceTask_0u8fzvg" targetRef="ServiceTask_1no8n3h" /><bpmn:sequenceFlow id="SequenceFlow_11y7cjh" sourceRef="ExclusiveGateway_0vr3g2z" targetRef="ServiceTask_0p0xx01"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientSource == "individualPerson"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1d8mkec" sourceRef="ServiceTask_0p0xx01" targetRef="ServiceTask_1g9fjn0" /><bpmn:sequenceFlow id="SequenceFlow_0rdb0bn" sourceRef="ExclusiveGateway_0vr3g2z" targetRef="ServiceTask_0qyke97"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${clientSource == "legalEntity"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1p8gud7" sourceRef="ServiceTask_0qyke97" targetRef="ServiceTask_1g9fjn0" /><bpmn:sequenceFlow id="SequenceFlow_156wk7l" sourceRef="ServiceTask_03vz3yp" targetRef="ExclusiveGateway_0vr3g2z" /><bpmn:sequenceFlow id="SequenceFlow_1amr1dj" sourceRef="ExclusiveGateway_0e6gnk0" targetRef="ServiceTask_04y7x5a" /><bpmn:sequenceFlow id="SequenceFlow_1c7wy6q" sourceRef="ServiceTask_04y7x5a" targetRef="ExclusiveGateway_1xmxcez" /><bpmn:sequenceFlow id="SequenceFlow_1pk0j3j" sourceRef="ExclusiveGateway_0e6gnk0" targetRef="ServiceTask_01vn7bm"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${found == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_027lksb" name="найдены дубли" sourceRef="ExclusiveGateway_1xmxcez" targetRef="ServiceTask_01vn7bm"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${foundDU == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1gtfmsd" sourceRef="ServiceTask_01vn7bm" targetRef="EndEvent_07yimfi" /><bpmn:sequenceFlow id="SequenceFlow_1j1hf6b" sourceRef="ServiceTask_194ncg0" targetRef="ExclusiveGateway_0e6gnk0" /><bpmn:sequenceFlow id="SequenceFlow_0vnweb3" sourceRef="ServiceTask_1no8n3h" targetRef="ServiceTask_194ncg0" /><bpmn:sequenceFlow id="SequenceFlow_073ftck" sourceRef="ServiceTask_1g9fjn0" targetRef="ServiceTask_1po83ff" /><bpmn:sequenceFlow id="SequenceFlow_1sbd4mk" sourceRef="ServiceTask_1po83ff" targetRef="ServiceTask_0u8fzvg" /><bpmn:serviceTask id="ServiceTask_0hni1k4" name="Установка статуса &#34;Заполнение: Заявка зарегистрирована. Подтверждение заявки&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Заявка+зарегистрирована.+Подтверждение+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1957q8k</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ne9xs2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ne9xs2" sourceRef="ServiceTask_0hni1k4" targetRef="UserTask_16hqj3x" /><bpmn:sequenceFlow id="SequenceFlow_1957q8k" sourceRef="ExclusiveGateway_1xmxcez" targetRef="ServiceTask_0hni1k4" /><bpmn:serviceTask id="ServiceTask_0sp9rgy" name="Статус заявки: Обработка: Создание"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Создание</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0yee9pi</bpmn:incoming><bpmn:outgoing>SequenceFlow_1itfbod</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1itfbod" sourceRef="ServiceTask_0sp9rgy" targetRef="ServiceTask_1fz3env" /><bpmn:serviceTask id="ServiceTask_0ifkzrj" name="Установка статуса &#34;Обработка&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0i4zooo</bpmn:incoming><bpmn:outgoing>SequenceFlow_1egf20c</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1egf20c" sourceRef="ServiceTask_0ifkzrj" targetRef="ServiceTask_0ehc7ec" /><bpmn:subProcess id="SubProcess_0t3ijrx"><bpmn:incoming>SequenceFlow_0gc8t72</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qltji9</bpmn:outgoing><bpmn:startEvent id="StartEvent_1a2na2p"><bpmn:outgoing>SequenceFlow_1crl0bo</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="ParallelGateway_1khihf1"><bpmn:incoming>SequenceFlow_1crl0bo</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gz50ih</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1i24q4z</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_18b6ryu"><bpmn:incoming>SequenceFlow_1i24q4z</bpmn:incoming><bpmn:outgoing>SequenceFlow_03h4okg</bpmn:outgoing><bpmn:conditionalEventDefinition id="ConditionalEventDefinition_1jqygfw"><bpmn:condition xsi:type="bpmn:tFormalExpression">${PrimaryId != "-1"}</bpmn:condition></bpmn:conditionalEventDefinition></bpmn:intermediateCatchEvent><bpmn:intermediateCatchEvent id="IntermediateCatchEvent_1uq3v81"><bpmn:incoming>SequenceFlow_1gz50ih</bpmn:incoming><bpmn:outgoing>SequenceFlow_02x7u7x</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1ehiebm"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT360S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="EndEvent_0v7qine"><bpmn:incoming>SequenceFlow_1sr4cw9</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0lz46u9" /></bpmn:endEvent><bpmn:endEvent id="EndEvent_0h8b2p4"><bpmn:incoming>SequenceFlow_19wp98t</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_022ifrk" /></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_19ti415" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>SequenceFlow_02x7u7x</bpmn:incoming><bpmn:outgoing>SequenceFlow_1sr4cw9</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_17x92yo" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>SequenceFlow_03h4okg</bpmn:incoming><bpmn:outgoing>SequenceFlow_19wp98t</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_19wp98t" sourceRef="ServiceTask_17x92yo" targetRef="EndEvent_0h8b2p4" /><bpmn:sequenceFlow id="SequenceFlow_03h4okg" sourceRef="IntermediateCatchEvent_18b6ryu" targetRef="ServiceTask_17x92yo" /><bpmn:sequenceFlow id="SequenceFlow_1sr4cw9" sourceRef="ServiceTask_19ti415" targetRef="EndEvent_0v7qine" /><bpmn:sequenceFlow id="SequenceFlow_02x7u7x" sourceRef="IntermediateCatchEvent_1uq3v81" targetRef="ServiceTask_19ti415" /><bpmn:sequenceFlow id="SequenceFlow_1gz50ih" sourceRef="ParallelGateway_1khihf1" targetRef="IntermediateCatchEvent_1uq3v81" /><bpmn:sequenceFlow id="SequenceFlow_1i24q4z" sourceRef="ParallelGateway_1khihf1" targetRef="IntermediateCatchEvent_18b6ryu" /><bpmn:sequenceFlow id="SequenceFlow_1crl0bo" sourceRef="StartEvent_1a2na2p" targetRef="ParallelGateway_1khihf1" /></bpmn:subProcess><bpmn:sequenceFlow id="SequenceFlow_0gc8t72" sourceRef="ServiceTask_0a8ywnw" targetRef="SubProcess_0t3ijrx" /><bpmn:exclusiveGateway id="ExclusiveGateway_0gwudes" default="SequenceFlow_14vzzgi"><bpmn:incoming>SequenceFlow_1qltji9</bpmn:incoming><bpmn:outgoing>SequenceFlow_14vzzgi</bpmn:outgoing><bpmn:outgoing>SequenceFlow_04ec4dr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1qltji9" sourceRef="SubProcess_0t3ijrx" targetRef="ExclusiveGateway_0gwudes" /><bpmn:sequenceFlow id="SequenceFlow_14vzzgi" sourceRef="ExclusiveGateway_0gwudes" targetRef="ServiceTask_08xil3t" /><bpmn:serviceTask id="ServiceTask_0bsml7e" name="Установка статуса &#34;Ошибка&#34;"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+при+создании+доверенности</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04ec4dr</bpmn:incoming><bpmn:outgoing>SequenceFlow_171wgad</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_04ec4dr" sourceRef="ExclusiveGateway_0gwudes" targetRef="ServiceTask_0bsml7e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout ==  true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_171wgad" sourceRef="ServiceTask_0bsml7e" targetRef="Task_0micukk" /><bpmn:sequenceFlow id="SequenceFlow_0yee9pi" sourceRef="Task_0udxszp" targetRef="ServiceTask_0sp9rgy" /><bpmn:serviceTask id="Task_0udxszp" name="Устанавливаем признак создания доверенности" camunda:expression="${execution.setVariable(&#39;PrimaryId&#39;, &#39;-1&#39;)}"><bpmn:incoming>SequenceFlow_0or7jn6</bpmn:incoming><bpmn:outgoing>SequenceFlow_0yee9pi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ej1irx" name="Записываем испр."><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("password", password)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0h3ws7n</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ivh2vm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0ivh2vm" sourceRef="ServiceTask_1ej1irx" targetRef="ServiceTask_0uezl6i" /></bpmn:process><bpmn:message id="Message_12wicv7" name="proxyCreated" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_hlk_proxy_reg_app_2_5be80a01-5344-4b76-8350-c7f61e8b3433"><bpmndi:BPMNEdge id="SequenceFlow_0ivh2vm_di" bpmnElement="SequenceFlow_0ivh2vm"><di:waypoint x="5350" y="580" /><di:waypoint x="5379" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0yee9pi_di" bpmnElement="SequenceFlow_0yee9pi"><di:waypoint x="340" y="679" /><di:waypoint x="388" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_171wgad_di" bpmnElement="SequenceFlow_171wgad"><di:waypoint x="3009" y="160" /><di:waypoint x="3009" y="80" /><di:waypoint x="1030" y="80" /><di:waypoint x="1030" y="650" /><di:waypoint x="1010" y="650" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04ec4dr_di" bpmnElement="SequenceFlow_04ec4dr"><di:waypoint x="3009" y="370" /><di:waypoint x="3009" y="240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14vzzgi_di" bpmnElement="SequenceFlow_14vzzgi"><di:waypoint x="3009" y="420" /><di:waypoint x="3009" y="639" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qltji9_di" bpmnElement="SequenceFlow_1qltji9"><di:waypoint x="2920" y="395" /><di:waypoint x="2984" y="395" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0gc8t72_di" bpmnElement="SequenceFlow_0gc8t72"><di:waypoint x="2751" y="639" /><di:waypoint x="2751" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1egf20c_di" bpmnElement="SequenceFlow_1egf20c"><di:waypoint x="2034" y="679" /><di:waypoint x="2059" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1itfbod_di" bpmnElement="SequenceFlow_1itfbod"><di:waypoint x="488" y="679" /><di:waypoint x="516" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1957q8k_di" bpmnElement="SequenceFlow_1957q8k"><di:waypoint x="1711" y="468" /><di:waypoint x="1711" y="639" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ne9xs2_di" bpmnElement="SequenceFlow_1ne9xs2"><di:waypoint x="1761" y="679" /><di:waypoint x="1799" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1sbd4mk_di" bpmnElement="SequenceFlow_1sbd4mk"><di:waypoint x="1458" y="234" /><di:waypoint x="1458" y="211" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_073ftck_di" bpmnElement="SequenceFlow_073ftck"><di:waypoint x="1458" y="338" /><di:waypoint x="1458" y="314" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vnweb3_di" bpmnElement="SequenceFlow_0vnweb3"><di:waypoint x="1640" y="171" /><di:waypoint x="1669" y="171" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1j1hf6b_di" bpmnElement="SequenceFlow_1j1hf6b"><di:waypoint x="1711" y="211" /><di:waypoint x="1711" y="234" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gtfmsd_di" bpmnElement="SequenceFlow_1gtfmsd"><di:waypoint x="1845" y="328" /><di:waypoint x="2052" y="328" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_027lksb_di" bpmnElement="SequenceFlow_027lksb"><di:waypoint x="1736" y="443" /><di:waypoint x="1795" y="443" /><di:waypoint x="1795" y="377" /><bpmndi:BPMNLabel><dc:Bounds x="1740" y="446" width="79" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1pk0j3j_di" bpmnElement="SequenceFlow_1pk0j3j"><di:waypoint x="1736" y="259" /><di:waypoint x="1795" y="259" /><di:waypoint x="1795" y="297" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1c7wy6q_di" bpmnElement="SequenceFlow_1c7wy6q"><di:waypoint x="1634" y="377" /><di:waypoint x="1634" y="443" /><di:waypoint x="1686" y="443" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1amr1dj_di" bpmnElement="SequenceFlow_1amr1dj"><di:waypoint x="1686" y="259" /><di:waypoint x="1634" y="259" /><di:waypoint x="1634" y="297" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_156wk7l_di" bpmnElement="SequenceFlow_156wk7l"><di:waypoint x="1460" y="637" /><di:waypoint x="1460" y="589" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1p8gud7_di" bpmnElement="SequenceFlow_1p8gud7"><di:waypoint x="1359" y="450" /><di:waypoint x="1359" y="378" /><di:waypoint x="1408" y="378" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rdb0bn_di" bpmnElement="SequenceFlow_0rdb0bn"><di:waypoint x="1435" y="564" /><di:waypoint x="1359" y="564" /><di:waypoint x="1359" y="530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1d8mkec_di" bpmnElement="SequenceFlow_1d8mkec"><di:waypoint x="1556" y="450" /><di:waypoint x="1556" y="378" /><di:waypoint x="1508" y="378" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_11y7cjh_di" bpmnElement="SequenceFlow_11y7cjh"><di:waypoint x="1485" y="564" /><di:waypoint x="1556" y="564" /><di:waypoint x="1556" y="530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0v23irg_di" bpmnElement="SequenceFlow_0v23irg"><di:waypoint x="1508" y="171" /><di:waypoint x="1540" y="171" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fglcmk_di" bpmnElement="SequenceFlow_1fglcmk"><di:waypoint x="1390" y="678" /><di:waypoint x="1419" y="678" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ozxg6i_di" bpmnElement="SequenceFlow_0ozxg6i"><di:waypoint x="1263" y="679" /><di:waypoint x="1290" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_10jta8k_di" bpmnElement="SequenceFlow_10jta8k"><di:waypoint x="3577" y="679" /><di:waypoint x="3601" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1oxbyez_di" bpmnElement="SequenceFlow_1oxbyez"><di:waypoint x="5742" y="580" /><di:waypoint x="5758" y="580" /><di:waypoint x="5758" y="693" /><di:waypoint x="5774" y="693" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0b9nxtk_di" bpmnElement="SequenceFlow_0b9nxtk"><di:waypoint x="5479" y="580" /><di:waypoint x="5510" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1u404cb_di" bpmnElement="SequenceFlow_1u404cb"><di:waypoint x="5610" y="580" /><di:waypoint x="5642" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0h3ws7n_di" bpmnElement="SequenceFlow_0h3ws7n"><di:waypoint x="5220" y="580" /><di:waypoint x="5250" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1e94qaq_di" bpmnElement="SequenceFlow_1e94qaq"><di:waypoint x="2329" y="796" /><di:waypoint x="2366" y="827" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19y1rpq_di" bpmnElement="SequenceFlow_19y1rpq"><di:waypoint x="2340" y="785" /><di:waypoint x="2505" y="785" /><di:waypoint x="2505" y="719" /><bpmndi:BPMNLabel><dc:Bounds x="2338" y="768" width="23" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0t750ef_di" bpmnElement="SequenceFlow_0t750ef"><di:waypoint x="2262" y="785" /><di:waypoint x="2290" y="785" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0034gfd_di" bpmnElement="SequenceFlow_0034gfd"><di:waypoint x="2212" y="704" /><di:waypoint x="2212" y="745" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qzmwpw_di" bpmnElement="SequenceFlow_1qzmwpw"><di:waypoint x="4951" y="799" /><di:waypoint x="5792" y="799" /><di:waypoint x="5792" y="711" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19av8z1_di" bpmnElement="SequenceFlow_19av8z1"><di:waypoint x="3918" y="774" /><di:waypoint x="3918" y="619" /><bpmndi:BPMNLabel><dc:Bounds x="3914" y="742" width="82" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1a5sd5l_di" bpmnElement="SequenceFlow_1a5sd5l"><di:waypoint x="3994" y="774" /><di:waypoint x="3994" y="748" /><di:waypoint x="3994" y="620" /><bpmndi:BPMNLabel><dc:Bounds x="4002" y="742" width="81" height="40" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1k67u83_di" bpmnElement="SequenceFlow_1k67u83"><di:waypoint x="3059" y="679" /><di:waypoint x="3077" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1n7unop_di" bpmnElement="SequenceFlow_1n7unop"><di:waypoint x="3322" y="679" /><di:waypoint x="3358" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vtcsw9_di" bpmnElement="SequenceFlow_0vtcsw9"><di:waypoint x="3458" y="679" /><di:waypoint x="3477" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_038k65g_di" bpmnElement="SequenceFlow_038k65g"><di:waypoint x="4398" y="580" /><di:waypoint x="4413" y="580" /><di:waypoint x="4413" y="581" /><di:waypoint x="4428" y="581" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03gqzk7_di" bpmnElement="SequenceFlow_03gqzk7"><di:waypoint x="4143" y="580" /><di:waypoint x="4169" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ycvd5v_di" bpmnElement="SequenceFlow_0ycvd5v"><di:waypoint x="4951" y="462" /><di:waypoint x="5792" y="462" /><di:waypoint x="5792" y="675" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12ctjag_di" bpmnElement="SequenceFlow_12ctjag"><di:waypoint x="5091" y="581" /><di:waypoint x="5120" y="581" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0i2wial_di" bpmnElement="SequenceFlow_0i2wial"><di:waypoint x="4951" y="580" /><di:waypoint x="4971" y="580" /><di:waypoint x="4971" y="581" /><di:waypoint x="4991" y="581" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0udq8rl_di" bpmnElement="SequenceFlow_0udq8rl"><di:waypoint x="3177" y="679" /><di:waypoint x="3222" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1217pbb_di" bpmnElement="SequenceFlow_1217pbb"><di:waypoint x="4820" y="580" /><di:waypoint x="4851" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ncghop_di" bpmnElement="SequenceFlow_0ncghop"><di:waypoint x="4012" y="580" /><di:waypoint x="4043" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_184wwrm_di" bpmnElement="SequenceFlow_184wwrm"><di:waypoint x="4019" y="799" /><di:waypoint x="4851" y="799" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0dd32qx_di" bpmnElement="SequenceFlow_0dd32qx"><di:waypoint x="3846" y="555" /><di:waypoint x="3846" y="462" /><di:waypoint x="4851" y="462" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0qmhuv7_di" bpmnElement="SequenceFlow_0qmhuv7"><di:waypoint x="3871" y="580" /><di:waypoint x="3912" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02ktrl9_di" bpmnElement="SequenceFlow_02ktrl9"><di:waypoint x="3701" y="679" /><di:waypoint x="3718" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0yarjap_di" bpmnElement="SequenceFlow_0yarjap"><di:waypoint x="2985" y="823" /><di:waypoint x="3002" y="823" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1815u8o_di" bpmnElement="SequenceFlow_1815u8o"><di:waypoint x="2860" y="823" /><di:waypoint x="2885" y="823" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0kkxl86_di" bpmnElement="SequenceFlow_0kkxl86"><di:waypoint x="3027" y="848" /><di:waypoint x="3027" y="906" /><di:waypoint x="2842" y="906" /><di:waypoint x="2842" y="841" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_13s9irh_di" bpmnElement="SequenceFlow_13s9irh"><di:waypoint x="3943" y="799" /><di:waypoint x="3969" y="799" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0n10udu_di" bpmnElement="SequenceFlow_0n10udu"><di:waypoint x="3793" y="799" /><di:waypoint x="3893" y="799" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03eyjik_di" bpmnElement="SequenceFlow_03eyjik"><di:waypoint x="3743" y="704" /><di:waypoint x="3743" y="759" /><bpmndi:BPMNLabel><dc:Bounds x="3747" y="712" width="56" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wwtt1j_di" bpmnElement="SequenceFlow_0wwtt1j"><di:waypoint x="3743" y="654" /><di:waypoint x="3743" y="580" /><di:waypoint x="3821" y="580" /><bpmndi:BPMNLabel><dc:Bounds x="3750" y="630" width="53" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1od6vxu_di" bpmnElement="SequenceFlow_1od6vxu"><di:waypoint x="4528" y="580" /><di:waypoint x="4720" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0b7rwcg_di" bpmnElement="SequenceFlow_0b7rwcg"><di:waypoint x="4269" y="580" /><di:waypoint x="4298" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0uvbhnk_di" bpmnElement="SequenceFlow_0uvbhnk"><di:waypoint x="825" y="398" /><di:waypoint x="825" y="580" /><di:waypoint x="912" y="644" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0w84qp9_di" bpmnElement="SequenceFlow_0w84qp9"><di:waypoint x="1091" y="299" /><di:waypoint x="1091" y="639" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0j12wws_di" bpmnElement="SequenceFlow_0j12wws"><di:waypoint x="1091" y="249" /><di:waypoint x="1091" y="225" /><di:waypoint x="800" y="225" /><di:waypoint x="800" y="318" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jyq58u_di" bpmnElement="SequenceFlow_1jyq58u"><di:waypoint x="985" y="274" /><di:waypoint x="1066" y="274" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1wh86im_di" bpmnElement="SequenceFlow_1wh86im"><di:waypoint x="935" y="274" /><di:waypoint x="825" y="274" /><di:waypoint x="825" y="318" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1w5simx_di" bpmnElement="SequenceFlow_1w5simx"><di:waypoint x="960" y="318" /><di:waypoint x="960" y="299" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03rvta2_di" bpmnElement="SequenceFlow_03rvta2"><di:waypoint x="960" y="422" /><di:waypoint x="960" y="398" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sfg2ff_di" bpmnElement="SequenceFlow_0sfg2ff"><di:waypoint x="960" y="524" /><di:waypoint x="960" y="502" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gejfsg_di" bpmnElement="SequenceFlow_1gejfsg"><di:waypoint x="747" y="679" /><di:waypoint x="775" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0okl02s_di" bpmnElement="SequenceFlow_0okl02s"><di:waypoint x="616" y="679" /><di:waypoint x="647" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0emvinb_di" bpmnElement="SequenceFlow_0emvinb"><di:waypoint x="2365" y="679" /><di:waypoint x="2384" y="679" /><bpmndi:BPMNLabel><dc:Bounds x="1047" y="96" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1c5p0ar_di" bpmnElement="SequenceFlow_1c5p0ar"><di:waypoint x="2212" y="654" /><di:waypoint x="2212" y="576" /><di:waypoint x="2505" y="576" /><di:waypoint x="2505" y="639" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0agaf9w_di" bpmnElement="SequenceFlow_0agaf9w"><di:waypoint x="2237" y="679" /><di:waypoint x="2265" y="679" /><bpmndi:BPMNLabel><dc:Bounds x="787.5" y="96" width="90" height="20" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18shish_di" bpmnElement="SequenceFlow_18shish"><di:waypoint x="2159" y="679" /><di:waypoint x="2187" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cwad3s_di" bpmnElement="SequenceFlow_1cwad3s"><di:waypoint x="2359" y="866" /><di:waypoint x="1885" y="866" /><di:waypoint x="1885" y="719" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0i4zooo_di" bpmnElement="SequenceFlow_0i4zooo"><di:waypoint x="1899" y="679" /><di:waypoint x="1934" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07tm4dw_di" bpmnElement="SequenceFlow_07tm4dw"><di:waypoint x="1821" y="906" /><di:waypoint x="1821" y="954" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0zgwcur_di" bpmnElement="SequenceFlow_0zgwcur"><di:waypoint x="2677" y="679" /><di:waypoint x="2701" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16ybaca_di" bpmnElement="SequenceFlow_16ybaca"><di:waypoint x="1849" y="719" /><di:waypoint x="1849" y="826" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0bwyp8d_di" bpmnElement="SequenceFlow_0bwyp8d"><di:waypoint x="1823" y="719" /><di:waypoint x="1823" y="758" /><di:waypoint x="825" y="758" /><di:waypoint x="825" y="719" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06ub0ms_di" bpmnElement="SequenceFlow_06ub0ms"><di:waypoint x="2409" y="704" /><di:waypoint x="2409" y="826" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gdwqhr_di" bpmnElement="SequenceFlow_1gdwqhr"><di:waypoint x="2555" y="679" /><di:waypoint x="2577" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1bgot8r_di" bpmnElement="SequenceFlow_1bgot8r"><di:waypoint x="2434" y="679" /><di:waypoint x="2455" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_027horx_di" bpmnElement="SequenceFlow_027horx"><di:waypoint x="1141" y="679" /><di:waypoint x="1163" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0z4k2fn_di" bpmnElement="SequenceFlow_0z4k2fn"><di:waypoint x="875" y="679" /><di:waypoint x="910" y="679" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0a1wo2a_di" bpmnElement="SequenceFlow_0a1wo2a"><di:waypoint x="960" y="639" /><di:waypoint x="960" y="604" /><bpmndi:BPMNLabel><dc:Bounds x="454" y="99" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or7jn6_di" bpmnElement="SequenceFlow_0or7jn6"><di:waypoint x="188" y="679" /><di:waypoint x="240" y="679" /><bpmndi:BPMNLabel><dc:Bounds x="228" y="114" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="661" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1quc7do_di" bpmnElement="Task_0micukk" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="910" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_18devms_di" bpmnElement="ServiceTask_18devms"><dc:Bounds x="775" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0q99htm_di" bpmnElement="ServiceTask_0q99htm"><dc:Bounds x="1041" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01pqxo8_di" bpmnElement="ServiceTask_01pqxo8"><dc:Bounds x="2359" y="826" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_13962ax_di" bpmnElement="ServiceTask_13962ax"><dc:Bounds x="2455" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1xmry8z_di" bpmnElement="EndEvent_1xmry8z"><dc:Bounds x="1803" y="954" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0slepa0_di" bpmnElement="ServiceTask_0slepa0"><dc:Bounds x="2577" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1vlqnug_di" bpmnElement="Gateway_0kk178m" isMarkerVisible="true"><dc:Bounds x="2384" y="654" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1rbdr90_di" bpmnElement="ServiceTask_1rbdr90"><dc:Bounds x="1771" y="826" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_16hqj3x_di" bpmnElement="UserTask_16hqj3x" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="1799" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ehc7ec_di" bpmnElement="ServiceTask_0ehc7ec"><dc:Bounds x="2059" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a8ywnw_di" bpmnElement="ServiceTask_0a8ywnw"><dc:Bounds x="2701" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1xzgkbd_di" bpmnElement="Gateway_1b964b1" isMarkerVisible="true"><dc:Bounds x="2187" y="654" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0f2b0ds_di" bpmnElement="ServiceTask_0f2b0ds"><dc:Bounds x="2265" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1fz3env_di" bpmnElement="ServiceTask_1fz3env"><dc:Bounds x="516" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1yermc6_di" bpmnElement="ServiceTask_1yermc6"><dc:Bounds x="647" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0yjyfg1_di" bpmnElement="ServiceTask_0yjyfg1"><dc:Bounds x="910" y="524" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03zt1mn_di" bpmnElement="ServiceTask_03zt1mn"><dc:Bounds x="910" y="422" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0pvik8w_di" bpmnElement="ServiceTask_0pvik8w"><dc:Bounds x="910" y="318" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0wgs2zu_di" bpmnElement="ExclusiveGateway_0wgs2zu" isMarkerVisible="true"><dc:Bounds x="935" y="249" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0xs3dvw_di" bpmnElement="ServiceTask_0xs3dvw"><dc:Bounds x="775" y="318" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1u1skes_di" bpmnElement="ExclusiveGateway_1u1skes" isMarkerVisible="true"><dc:Bounds x="1066" y="249" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0pv8dtg_di" bpmnElement="ServiceTask_0pv8dtg" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="4428" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0r9rbne_di" bpmnElement="ServiceTask_0r9rbne" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="4720" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1m8axrj_di" bpmnElement="ServiceTask_1m8axrj"><dc:Bounds x="4169" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0tzsuof_di" bpmnElement="ExclusiveGateway_0tzsuof" isMarkerVisible="true"><dc:Bounds x="3718" y="654" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1yws171_di" bpmnElement="ServiceTask_1yws171"><dc:Bounds x="3693" y="759" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0tov7uj_di" bpmnElement="ExclusiveGateway_0tov7uj" isMarkerVisible="true"><dc:Bounds x="3893" y="774" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1ndxrcs_di" bpmnElement="ExclusiveGateway_1ndxrcs" isMarkerVisible="true"><dc:Bounds x="3969" y="774" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_06mb2or_di" bpmnElement="ServiceTask_06mb2or"><dc:Bounds x="3912" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_0943srv_di" bpmnElement="IntermediateCatchEvent_0943srv"><dc:Bounds x="2824" y="805" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0kbgiuv_di" bpmnElement="ServiceTask_0kbgiuv" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="2885" y="783" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_19b3wm6_di" bpmnElement="ExclusiveGateway_19b3wm6" isMarkerVisible="true"><dc:Bounds x="3002" y="798" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0rjv53j_di" bpmnElement="ServiceTask_0rjv53j"><dc:Bounds x="3601" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_19krhs2_di" bpmnElement="ExclusiveGateway_19krhs2" isMarkerVisible="true"><dc:Bounds x="3821" y="555" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0ohyrms_di" bpmnElement="EndEvent_0ohyrms"><dc:Bounds x="5774" y="675" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0y39lzn_di" bpmnElement="ServiceTask_0y39lzn"><dc:Bounds x="3077" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0u7sney_di" bpmnElement="ServiceTask_0u7sney"><dc:Bounds x="4851" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0hoqfjm_di" bpmnElement="ServiceTask_0hoqfjm"><dc:Bounds x="4991" y="541" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_17h3aiu_di" bpmnElement="ServiceTask_17h3aiu"><dc:Bounds x="4851" y="422" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04glm82_di" bpmnElement="ServiceTask_04glm82"><dc:Bounds x="4043" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0dpgcep_di" bpmnElement="ScriptTask_0dpgcep"><dc:Bounds x="4298" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0e1fyzk_di" bpmnElement="ServiceTask_0e1fyzk"><dc:Bounds x="3358" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04mvizl_di" bpmnElement="ServiceTask_04mvizl"><dc:Bounds x="3222" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08xil3t_di" bpmnElement="ServiceTask_08xil3t" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="2959" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1sjpqhd_di" bpmnElement="ServiceTask_1sjpqhd"><dc:Bounds x="4851" y="759" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0gtg54q_di" bpmnElement="ServiceTask_0gtg54q"><dc:Bounds x="2162" y="745" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0p6evhq_di" bpmnElement="ExclusiveGateway_0p6evhq" isMarkerVisible="true"><dc:Bounds x="2290" y="760" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1iqkbua_di" bpmnElement="ServiceTask_1iqkbua"><dc:Bounds x="5120" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0uezl6i_di" bpmnElement="ServiceTask_0uezl6i"><dc:Bounds x="5379" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1s56mhq_di" bpmnElement="ServiceTask_1s56mhq"><dc:Bounds x="5510" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19s91dc_di" bpmnElement="ServiceTask_19s91dc"><dc:Bounds x="5642" y="540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0unu9r0_di" bpmnElement="ServiceTask_0unu9r0"><dc:Bounds x="3477" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0iznm12_di" bpmnElement="ServiceTask_0iznm12"><dc:Bounds x="1163" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1pxwmz1_di" bpmnElement="ServiceTask_1pxwmz1"><dc:Bounds x="1290" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0u8fzvg_di" bpmnElement="ServiceTask_0u8fzvg"><dc:Bounds x="1408" y="131" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0p0xx01_di" bpmnElement="ServiceTask_0p0xx01"><dc:Bounds x="1506" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1po83ff_di" bpmnElement="ServiceTask_1po83ff"><dc:Bounds x="1408" y="234" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0qyke97_di" bpmnElement="ServiceTask_0qyke97"><dc:Bounds x="1309" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1g9fjn0_di" bpmnElement="ServiceTask_1g9fjn0"><dc:Bounds x="1408" y="338" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03vz3yp_di" bpmnElement="ServiceTask_03vz3yp"><dc:Bounds x="1419" y="637" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0vr3g2z_di" bpmnElement="ExclusiveGateway_0vr3g2z" isMarkerVisible="true"><dc:Bounds x="1435" y="539" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_04y7x5a_di" bpmnElement="ServiceTask_04y7x5a"><dc:Bounds x="1584" y="297" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_01vn7bm_di" bpmnElement="ServiceTask_01vn7bm"><dc:Bounds x="1745" y="297" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0e6gnk0_di" bpmnElement="ExclusiveGateway_0e6gnk0" isMarkerVisible="true"><dc:Bounds x="1686" y="234" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1xmxcez_di" bpmnElement="ExclusiveGateway_1xmxcez" isMarkerVisible="true"><dc:Bounds x="1686" y="418" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_07yimfi_di" bpmnElement="EndEvent_07yimfi"><dc:Bounds x="2052" y="310" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_194ncg0_di" bpmnElement="ServiceTask_194ncg0"><dc:Bounds x="1670" y="131" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1no8n3h_di" bpmnElement="ServiceTask_1no8n3h"><dc:Bounds x="1540" y="131" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0hni1k4_di" bpmnElement="ServiceTask_0hni1k4"><dc:Bounds x="1661" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0sp9rgy_di" bpmnElement="ServiceTask_0sp9rgy"><dc:Bounds x="388" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0ifkzrj_di" bpmnElement="ServiceTask_0ifkzrj"><dc:Bounds x="1934" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="SubProcess_0t3ijrx_di" bpmnElement="SubProcess_0t3ijrx" isExpanded="true"><dc:Bounds x="2582" y="280" width="338" height="230" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="SequenceFlow_1crl0bo_di" bpmnElement="SequenceFlow_1crl0bo"><di:waypoint x="2643" y="390" /><di:waypoint x="2697" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1i24q4z_di" bpmnElement="SequenceFlow_1i24q4z"><di:waypoint x="2722" y="415" /><di:waypoint x="2722" y="442" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gz50ih_di" bpmnElement="SequenceFlow_1gz50ih"><di:waypoint x="2722" y="365" /><di:waypoint x="2722" y="358" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02x7u7x_di" bpmnElement="SequenceFlow_02x7u7x"><di:waypoint x="2740" y="340" /><di:waypoint x="2752" y="340" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1sr4cw9_di" bpmnElement="SequenceFlow_1sr4cw9"><di:waypoint x="2852" y="340" /><di:waypoint x="2864" y="340" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03h4okg_di" bpmnElement="SequenceFlow_03h4okg"><di:waypoint x="2740" y="460" /><di:waypoint x="2752" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19wp98t_di" bpmnElement="SequenceFlow_19wp98t"><di:waypoint x="2852" y="460" /><di:waypoint x="2864" y="460" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_1a2na2p_di" bpmnElement="StartEvent_1a2na2p"><dc:Bounds x="2607" y="372" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ParallelGateway_1khihf1_di" bpmnElement="ParallelGateway_1khihf1"><dc:Bounds x="2697" y="365" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_18b6ryu_di" bpmnElement="IntermediateCatchEvent_18b6ryu"><dc:Bounds x="2704" y="442" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="IntermediateCatchEvent_1uq3v81_di" bpmnElement="IntermediateCatchEvent_1uq3v81"><dc:Bounds x="2704" y="322" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0v7qine_di" bpmnElement="EndEvent_0v7qine"><dc:Bounds x="2864" y="322" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0h8b2p4_di" bpmnElement="EndEvent_0h8b2p4"><dc:Bounds x="2864" y="442" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_19ti415_di" bpmnElement="ServiceTask_19ti415"><dc:Bounds x="2752" y="300" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_17x92yo_di" bpmnElement="ServiceTask_17x92yo"><dc:Bounds x="2752" y="410" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0gwudes_di" bpmnElement="ExclusiveGateway_0gwudes" isMarkerVisible="true"><dc:Bounds x="2984" y="370" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bsml7e_di" bpmnElement="ServiceTask_0bsml7e"><dc:Bounds x="2959" y="160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0iisk1v_di" bpmnElement="Task_0udxszp"><dc:Bounds x="240" y="639" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ej1irx_di" bpmnElement="ServiceTask_1ej1irx"><dc:Bounds x="5250" y="540" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>