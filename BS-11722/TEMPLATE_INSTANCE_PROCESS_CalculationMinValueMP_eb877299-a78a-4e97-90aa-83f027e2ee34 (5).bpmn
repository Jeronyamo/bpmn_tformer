<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_CalculationMinValueMP_eb877299-a78a-4e97-90aa-83f027e2ee34" name="Расчет минимальной стоимости модельного портфеля" isExecutable="true"><bpmn:documentation /><bpmn:extensionElements><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:startEvent id="StartEvent_1"><bpmn:outgoing>SequenceFlow_0or7jn6</bpmn:outgoing></bpmn:startEvent><bpmn:endEvent id="EndEvent_0djl7a3"><bpmn:incoming>Flow_0oq84kl</bpmn:incoming></bpmn:endEvent><bpmn:userTask id="Task_0micukk" name="Пустой блок заполнения" camunda:formKey="FILL" camunda:assignee="${initiator}" camunda:candidateGroups=""><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements></bpmn:userTask><bpmn:sequenceFlow id="SequenceFlow_0or7jn6" sourceRef="StartEvent_1" targetRef="Activity_1s6ic2u" /><bpmn:userTask id="Task_0qmpvo4" name="Пустой блок верификации" camunda:formKey="VERIFICATION" camunda:assignee="${initiator}" camunda:candidateGroups=""><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements></bpmn:userTask><bpmn:scriptTask id="Activity_170sxmt" name="переменная адрес фокус" scriptFormat="javascript"><bpmn:incoming>Flow_048qfc4</bpmn:incoming><bpmn:outgoing>Flow_0o5hld2</bpmn:outgoing><bpmn:script>execution.setVariable("focusUrl", (java.lang.System).getenv("focusUrl"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0o5hld2" sourceRef="Activity_170sxmt" targetRef="Activity_1t5uo1j" /><bpmn:serviceTask id="Activity_1t5uo1j" name="Получаем primaryId справочника входных параметров"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	"filter": 
{
 "$or": 
[		
{
"templatePrimaryId": "62750654f9333e215f5be213",
"attributes.Basic": true,
"activityStatus" : "ACTIVE"
}	
]
},
"projection": { 		"primaryId": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId_input"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].primaryId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyFound"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0o5hld2</bpmn:incoming><bpmn:outgoing>Flow_1ouyxht</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_10f1odf" name="Получаем список модельных портфелей" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	"filter": 
{
 "$or": 
[		
{
"templatePrimaryId": "613ef0ac687006695cd4a397",
"activityStatus" : "ACTIVE"
}	
]
},
"projection": { 		"primaryId": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="mp_primaryId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].primaryId
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="Qty"><camunda:script scriptFormat="javascript">S(response).prop("cursor").prop("firstBatch").elements().size()</camunda:script></camunda:outputParameter><camunda:outputParameter name="json_resp"><camunda:script scriptFormat="javascript">S(response).prop("cursor")</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qxfu79</bpmn:incoming><bpmn:outgoing>Flow_10mf328</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_08udkvu" name="тестовый массив МП для проверки" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="masmp"><bpmn:script>var masmp = "624aaf54e6afeb45a496a353,6295d2e1b4547e11646997cc,6295f432b4547e116469b2f9";
execution.setVariable('masmp', masmp);</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="Gateway_1ooiluy" default="Flow_1qxfu79"><bpmn:incoming>Flow_1ouyxht</bpmn:incoming><bpmn:outgoing>Flow_1qxfu79</bpmn:outgoing><bpmn:outgoing>Flow_173l37y</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1ouyxht" name="не найден справочник" sourceRef="Activity_1t5uo1j" targetRef="Gateway_1ooiluy" /><bpmn:sequenceFlow id="Flow_1qxfu79" sourceRef="Gateway_1ooiluy" targetRef="Activity_10f1odf" /><bpmn:exclusiveGateway id="Gateway_1tfwutc" default="Flow_0ifakh8"><bpmn:incoming>Flow_10mf328</bpmn:incoming><bpmn:outgoing>Flow_0ifakh8</bpmn:outgoing><bpmn:outgoing>Flow_1505z8o</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_10mf328" name="не найдены МП" sourceRef="Activity_10f1odf" targetRef="Gateway_1tfwutc" /><bpmn:sequenceFlow id="Flow_0ifakh8" sourceRef="Gateway_1tfwutc" targetRef="Activity_196cqxc" /><bpmn:sequenceFlow id="Flow_173l37y" sourceRef="Gateway_1ooiluy" targetRef="Activity_0faaf15"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyFound == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1505z8o" sourceRef="Gateway_1tfwutc" targetRef="Activity_0ue5hwv"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Qty == 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0d2ifig" name="Запрос расчета стоимости в CalcService"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry><camunda:entry key="Authorization">Basic ${Authorization}</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${focusUrl}/api/Tasks/ExecuteSync?task=CalculationMinimumCostTask&amp;PortfolioIds=${masmp}&amp;DictionaryId=${primaryId_input}</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="calcmessage"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).Message
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="batchQty"><camunda:script scriptFormat="javascript">try {
S(response).prop("Result").prop("Costs").elements().size()
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_resp"><camunda:script scriptFormat="javascript">S(response).prop("Result")</camunda:script></camunda:outputParameter><camunda:outputParameter name="TaskStatus"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).TaskStatus
}
catch (e)
{
-2
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="DateTime"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).Result.DateTime.replace(/"/g, '').substring(0, 19).replace('T', ' ')
}
catch (e)
{
0
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1si6qyl</bpmn:incoming><bpmn:outgoing>Flow_0qmxmdr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0qmxmdr" sourceRef="Activity_0d2ifig" targetRef="Gateway_05dzlc3" /><bpmn:scriptTask id="Activity_17d4q5p" name="Номер элемента из массива мп i" scriptFormat="javascript"><bpmn:incoming>Flow_038714f</bpmn:incoming><bpmn:outgoing>Flow_1006ant</bpmn:outgoing><bpmn:script>execution.setVariable('i', org.camunda.bpm.engine.variable.Variables.integerValue(0))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1006ant" sourceRef="Activity_17d4q5p" targetRef="Activity_0k9jeyp" /><bpmn:serviceTask id="Activity_0toonrr" name="Получаем instance id МП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "book", 	"filter": 
{
 "$or": 
[		
{
"templatePrimaryId": "613ef0ac687006695cd4a397",
"activityStatus" : "ACTIVE",
"primaryId": "${primaryId_mp}"
}	
]
},
"projection": { 		"_id": 1, "attributes.mp_name": 1, "attributes.ExcpectedYield": 1, "attributes.mp_portfolioGroupIndex": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="mp_name"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_name
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_portfolioGroupIndex"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.mp_portfolioGroupIndex
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="ExcpectedYield"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0].attributes.ExcpectedYield
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_id"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1dyxb7u</bpmn:incoming><bpmn:outgoing>Flow_0xa92v1</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_1rxtz7g" name="мп i - minCost" scriptFormat="javascript" camunda:resultVariable="MinCost"><bpmn:extensionElements><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_0henoyg</bpmn:incoming><bpmn:outgoing>Flow_1j423xe</bpmn:outgoing><bpmn:script>JSON.parse(mp_resp).Costs[i].MinimalCost</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1j423xe" sourceRef="Activity_1rxtz7g" targetRef="Activity_1gzwm9u" /><bpmn:exclusiveGateway id="Gateway_17wlfan" default="Flow_08squl6"><bpmn:incoming>Flow_1x7hf6a</bpmn:incoming><bpmn:outgoing>Flow_07ifnrj</bpmn:outgoing><bpmn:outgoing>Flow_08squl6</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:exclusiveGateway id="Gateway_05dzlc3" default="Flow_19ik6hy"><bpmn:incoming>Flow_0qmxmdr</bpmn:incoming><bpmn:outgoing>Flow_19ik6hy</bpmn:outgoing><bpmn:outgoing>Flow_1k2rmzx</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_19ik6hy" sourceRef="Gateway_05dzlc3" targetRef="Activity_1waxv96" /><bpmn:sequenceFlow id="Flow_1k2rmzx" name="нет МП с мин стоимостью" sourceRef="Gateway_05dzlc3" targetRef="Activity_0ad5tbm"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${batchQty == 0}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_196cqxc" name="приводим МП к формату запроса калк" camunda:asyncAfter="true" scriptFormat="javascript" camunda:resultVariable="masmp"><bpmn:incoming>Flow_0ifakh8</bpmn:incoming><bpmn:outgoing>Flow_1si6qyl</bpmn:outgoing><bpmn:script>var masmp = mp_primaryId;
for (var j = 1; j &lt; Qty; j++)
{
masmp = masmp + ',' + JSON.parse(json_resp).firstBatch[j].primaryId;
}</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="Activity_03j4b97" name="увеличиваем значение номера ответа i" scriptFormat="javascript" camunda:resultVariable="i"><bpmn:extensionElements><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_0qzga9a</bpmn:incoming><bpmn:incoming>Flow_0tyi0p7</bpmn:incoming><bpmn:outgoing>Flow_1x7hf6a</bpmn:outgoing><bpmn:script>Math.round(+i+1)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1x7hf6a" sourceRef="Activity_03j4b97" targetRef="Gateway_17wlfan" /><bpmn:sequenceFlow id="Flow_07ifnrj" sourceRef="Gateway_17wlfan" targetRef="Activity_0k9jeyp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${i &lt; batchQty}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1si6qyl" sourceRef="Activity_196cqxc" targetRef="Activity_0d2ifig" /><bpmn:exclusiveGateway id="Gateway_1pa28h4" default="Flow_0iupmc7"><bpmn:incoming>Flow_11ebs2v</bpmn:incoming><bpmn:outgoing>Flow_0henoyg</bpmn:outgoing><bpmn:outgoing>Flow_0iupmc7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0henoyg" sourceRef="Gateway_1pa28h4" targetRef="Activity_1rxtz7g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ErrorMessage == null}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_0k9jeyp" name="проверяем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="ErrorMessage"><bpmn:incoming>Flow_1006ant</bpmn:incoming><bpmn:incoming>Flow_07ifnrj</bpmn:incoming><bpmn:outgoing>Flow_0g0atz4</bpmn:outgoing><bpmn:script>execution.setVariable('ErrorMessage', JSON.parse(mp_resp).Costs[i].ErrorMessage)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0g0atz4" sourceRef="Activity_0k9jeyp" targetRef="Activity_0x58l5s" /><bpmn:sequenceFlow id="Flow_0iupmc7" sourceRef="Gateway_1pa28h4" targetRef="Activity_0y4i71r" /><bpmn:scriptTask id="Activity_1ye24y2" name="переменная messagemp" scriptFormat="javascript" camunda:resultVariable="messagemp"><bpmn:incoming>Flow_00l6tri</bpmn:incoming><bpmn:outgoing>Flow_1q2f9co</bpmn:outgoing><bpmn:script>"Ошибки Calc Service при расчете минимальной стоимости модельного портфеля"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1q2f9co" sourceRef="Activity_1ye24y2" targetRef="Activity_061ashd" /><bpmn:scriptTask id="Activity_0y4i71r" name="добавляем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="messagemp"><bpmn:incoming>Flow_0iupmc7</bpmn:incoming><bpmn:outgoing>Flow_0qzga9a</bpmn:outgoing><bpmn:script>messagemp = messagemp + "\n" + "Идентификатор МП " + primaryId_mp + ": " + "Ошибка: " + ErrorMessage</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0qzga9a" sourceRef="Activity_0y4i71r" targetRef="Activity_03j4b97" /><bpmn:scriptTask id="Activity_0x58l5s" name="мп i - праймари-ид" scriptFormat="javascript" camunda:resultVariable="primaryId_mp"><bpmn:incoming>Flow_0g0atz4</bpmn:incoming><bpmn:outgoing>Flow_11ebs2v</bpmn:outgoing><bpmn:script>JSON.parse(mp_resp).Costs[i].ModelPortfolio</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_11ebs2v" sourceRef="Activity_0x58l5s" targetRef="Gateway_1pa28h4" /><bpmn:scriptTask id="Activity_1s6ic2u" name="переменная successmessagemp" scriptFormat="javascript" camunda:resultVariable="successmessagemp"><bpmn:incoming>SequenceFlow_0or7jn6</bpmn:incoming><bpmn:outgoing>Flow_00l6tri</bpmn:outgoing><bpmn:script>"Успешно рассчитанная минимальная стоимость модельных портфелей:"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_00l6tri" sourceRef="Activity_1s6ic2u" targetRef="Activity_1ye24y2" /><bpmn:scriptTask id="Activity_1gzwm9u" name="добавляем сообщение" scriptFormat="javascript" camunda:resultVariable="successmessagemp"><bpmn:extensionElements><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_1j423xe</bpmn:incoming><bpmn:outgoing>Flow_1dyxb7u</bpmn:outgoing><bpmn:script>successmessagemp = successmessagemp + "\n" + "Идентификатор МП " + primaryId_mp + ": " + "Стоимость: " + MinCost</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1dyxb7u" sourceRef="Activity_1gzwm9u" targetRef="Activity_0toonrr" /><bpmn:scriptTask id="Activity_061ashd" name="переменная для авторизации" scriptFormat="javascript"><bpmn:incoming>Flow_1q2f9co</bpmn:incoming><bpmn:outgoing>Flow_048qfc4</bpmn:outgoing><bpmn:script>execution.setVariable("Authorization", (java.lang.System).getenv("Authorization"))</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_048qfc4" sourceRef="Activity_061ashd" targetRef="Activity_170sxmt" /><bpmn:serviceTask id="Activity_0faaf15" name="Помещаем сообщение об ошибке" camunda:asyncAfter="true" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="payload">{ 
"Message": "Не найден справочник входных параметров"
}</camunda:inputParameter><camunda:inputParameter name="url">/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_173l37y</bpmn:incoming><bpmn:outgoing>Flow_0d157by</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ue5hwv" name="Помещаем сообщение об ошибке" camunda:asyncAfter="true" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="url">/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="payload">{ 
"Message": "Не найдены модельные портфели для расчета"
}</camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_1505z8o</bpmn:incoming><bpmn:outgoing>Flow_0cybktq</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ad5tbm" name="Устанавливаем сообщение об ошибке" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:inputOutput><camunda:inputParameter name="url">/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", calcmessage)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_1k2rmzx</bpmn:incoming><bpmn:outgoing>Flow_0p84xex</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0p84xex" sourceRef="Activity_0ad5tbm" targetRef="Activity_0s20snl" /><bpmn:serviceTask id="Activity_1waxv96" name="Помещаем дату расчета" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="url">/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="payload">{ 
"CalcDateTime": "${DateTime}"
}</camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_19ik6hy</bpmn:incoming><bpmn:outgoing>Flow_038714f</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_038714f" sourceRef="Activity_1waxv96" targetRef="Activity_17d4q5p" /><bpmn:serviceTask id="Activity_10ff5yc" name="Получаем значение параметров МП" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="payload">{
"mp_riskProfile" : "getValue",
"mp_marketQuotes": "getValue",
"mp_portfolioCurrency": "getValue"
}</camunda:inputParameter><camunda:inputParameter name="url">/api/camunda/instance/book/${mp_id}/getAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:outputParameter name="mp_portfolioCurrency"><camunda:script scriptFormat="javascript">JSON.parse(result).mp_portfolioCurrency</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_marketQuotes"><camunda:script scriptFormat="javascript">JSON.parse(result).mp_marketQuotes</camunda:script></camunda:outputParameter><camunda:outputParameter name="mp_riskProfile"><camunda:script scriptFormat="javascript">JSON.parse(result).mp_riskProfile</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_0xa92v1</bpmn:incoming><bpmn:outgoing>Flow_0w6bhw1</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0w6bhw1" sourceRef="Activity_10ff5yc" targetRef="Activity_0moozfy" /><bpmn:serviceTask id="Activity_0moozfy" name="Апдейт МП: мин стоимость - ext.task" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{
	"attributes":{
        "TemplateType": "ModelPortfolio",
	     "idModelPortfolio": "${primaryId_mp}",
          "MinCost": ${MinCost}
  }
}</camunda:inputParameter><camunda:inputParameter name="url">/api/integration/queue/BOOK/639</camunda:inputParameter><camunda:outputParameter name="PO_objectId"><camunda:script scriptFormat="javascript">JSON.parse(result).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:properties><camunda:property name="SequenceFlowType" value="Default Flow" /></camunda:properties></bpmn:extensionElements><bpmn:incoming>Flow_0w6bhw1</bpmn:incoming><bpmn:outgoing>Flow_0tyi0p7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ju2a79" name="Устанавливаем значение параметров" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:inputOutput><camunda:inputParameter name="url">/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("Message", messagemp)
.prop("CalcMinCost", successmessagemp)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_08squl6</bpmn:incoming><bpmn:outgoing>Flow_0zvtx1e</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_08squl6" sourceRef="Gateway_17wlfan" targetRef="Activity_0ju2a79" /><bpmn:sequenceFlow id="Flow_0cybktq" sourceRef="Activity_0ue5hwv" targetRef="Activity_0s20snl" /><bpmn:sequenceFlow id="Flow_0d157by" sourceRef="Activity_0faaf15" targetRef="Activity_0s20snl" /><bpmn:serviceTask id="Activity_0s20snl" name="Сообщаем об окончании процесса" camunda:type="external" camunda:topic="criticalPriority"><bpmn:extensionElements><camunda:inputOutput><camunda:inputParameter name="url">/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_0cybktq</bpmn:incoming><bpmn:incoming>Flow_0d157by</bpmn:incoming><bpmn:incoming>Flow_0p84xex</bpmn:incoming><bpmn:incoming>Flow_0zvtx1e</bpmn:incoming><bpmn:outgoing>Flow_0oq84kl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0oq84kl" sourceRef="Activity_0s20snl" targetRef="EndEvent_0djl7a3" /><bpmn:sequenceFlow id="Flow_0xa92v1" sourceRef="Activity_0toonrr" targetRef="Activity_10ff5yc" /><bpmn:sequenceFlow id="Flow_0zvtx1e" sourceRef="Activity_0ju2a79" targetRef="Activity_0s20snl" /><bpmn:serviceTask id="Activity_0jkmzt5" name="Апдейт МП: мин стоимость"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
  "templatePrimaryId" : "613ef0ac687006695cd4a397", 
	"attributes":{
        "TemplateType": "ModelPortfolio",
	     "idModelPortfolio": "${primaryId_mp}",
          "MinCost": ${MinCost}
  }
}</camunda:inputParameter><camunda:outputParameter name="PO_objectId"><camunda:script scriptFormat="javascript">JSON.parse(result).objectId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0tyi0p7" sourceRef="Activity_0moozfy" targetRef="Activity_03j4b97" /></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_CalculationMinValueMP_eb877299-a78a-4e97-90aa-83f027e2ee34"><bpmndi:BPMNEdge id="Flow_0tyi0p7_di" bpmnElement="Flow_0tyi0p7"><di:waypoint x="2770" y="320" /><di:waypoint x="2890" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zvtx1e_di" bpmnElement="Flow_0zvtx1e"><di:waypoint x="3220" y="320" /><di:waypoint x="3290" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xa92v1_di" bpmnElement="Flow_0xa92v1"><di:waypoint x="2450" y="320" /><di:waypoint x="2490" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0oq84kl_di" bpmnElement="Flow_0oq84kl"><di:waypoint x="3390" y="320" /><di:waypoint x="3422" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d157by_di" bpmnElement="Flow_0d157by"><di:waypoint x="1000" y="610" /><di:waypoint x="3340" y="610" /><di:waypoint x="3340" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0cybktq_di" bpmnElement="Flow_0cybktq"><di:waypoint x="1320" y="550" /><di:waypoint x="3340" y="550" /><di:waypoint x="3340" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08squl6_di" bpmnElement="Flow_08squl6"><di:waypoint x="3075" y="320" /><di:waypoint x="3120" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w6bhw1_di" bpmnElement="Flow_0w6bhw1"><di:waypoint x="2590" y="320" /><di:waypoint x="2670" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_038714f_di" bpmnElement="Flow_038714f"><di:waypoint x="1530" y="320" /><di:waypoint x="1570" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0p84xex_di" bpmnElement="Flow_0p84xex"><di:waypoint x="1770" y="490" /><di:waypoint x="3340" y="490" /><di:waypoint x="3340" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_048qfc4_di" bpmnElement="Flow_048qfc4"><di:waypoint x="650" y="250" /><di:waypoint x="650" y="280" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dyxb7u_di" bpmnElement="Flow_1dyxb7u"><di:waypoint x="2320" y="320" /><di:waypoint x="2350" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00l6tri_di" bpmnElement="Flow_00l6tri"><di:waypoint x="370" y="320" /><di:waypoint x="430" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11ebs2v_di" bpmnElement="Flow_11ebs2v"><di:waypoint x="1950" y="320" /><di:waypoint x="2015" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qzga9a_di" bpmnElement="Flow_0qzga9a"><di:waypoint x="2240" y="420" /><di:waypoint x="2940" y="420" /><di:waypoint x="2940" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1q2f9co_di" bpmnElement="Flow_1q2f9co"><di:waypoint x="530" y="320" /><di:waypoint x="565" y="320" /><di:waypoint x="565" y="210" /><di:waypoint x="600" y="210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iupmc7_di" bpmnElement="Flow_0iupmc7"><di:waypoint x="2040" y="345" /><di:waypoint x="2040" y="420" /><di:waypoint x="2140" y="420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0g0atz4_di" bpmnElement="Flow_0g0atz4"><di:waypoint x="1820" y="320" /><di:waypoint x="1850" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0henoyg_di" bpmnElement="Flow_0henoyg"><di:waypoint x="2065" y="320" /><di:waypoint x="2090" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1si6qyl_di" bpmnElement="Flow_1si6qyl"><di:waypoint x="1170" y="320" /><di:waypoint x="1210" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07ifnrj_di" bpmnElement="Flow_07ifnrj"><di:waypoint x="3050" y="295" /><di:waypoint x="3050" y="140" /><di:waypoint x="1770" y="140" /><di:waypoint x="1770" y="280" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1x7hf6a_di" bpmnElement="Flow_1x7hf6a"><di:waypoint x="2990" y="320" /><di:waypoint x="3025" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1k2rmzx_di" bpmnElement="Flow_1k2rmzx"><di:waypoint x="1360" y="455" /><di:waypoint x="1360" y="490" /><di:waypoint x="1670" y="490" /><bpmndi:BPMNLabel><dc:Bounds x="1364" y="509" width="69" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19ik6hy_di" bpmnElement="Flow_19ik6hy"><di:waypoint x="1385" y="430" /><di:waypoint x="1480" y="430" /><di:waypoint x="1480" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1j423xe_di" bpmnElement="Flow_1j423xe"><di:waypoint x="2190" y="320" /><di:waypoint x="2220" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1006ant_di" bpmnElement="Flow_1006ant"><di:waypoint x="1670" y="320" /><di:waypoint x="1720" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qmxmdr_di" bpmnElement="Flow_0qmxmdr"><di:waypoint x="1310" y="320" /><di:waypoint x="1360" y="320" /><di:waypoint x="1360" y="405" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1505z8o_di" bpmnElement="Flow_1505z8o"><di:waypoint x="1020" y="455" /><di:waypoint x="1020" y="550" /><di:waypoint x="1220" y="550" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_173l37y_di" bpmnElement="Flow_173l37y"><di:waypoint x="810" y="465" /><di:waypoint x="810" y="610" /><di:waypoint x="900" y="610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ifakh8_di" bpmnElement="Flow_0ifakh8"><di:waypoint x="1045" y="430" /><di:waypoint x="1120" y="430" /><di:waypoint x="1120" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_10mf328_di" bpmnElement="Flow_10mf328"><di:waypoint x="1000" y="320" /><di:waypoint x="1020" y="320" /><di:waypoint x="1020" y="405" /><bpmndi:BPMNLabel><dc:Bounds x="929" y="463" width="81" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qxfu79_di" bpmnElement="Flow_1qxfu79"><di:waypoint x="835" y="440" /><di:waypoint x="950" y="440" /><di:waypoint x="950" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ouyxht_di" bpmnElement="Flow_1ouyxht"><di:waypoint x="810" y="360" /><di:waypoint x="810" y="415" /><bpmndi:BPMNLabel><dc:Bounds x="740" y="476" width="60" height="27" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0o5hld2_di" bpmnElement="Flow_0o5hld2"><di:waypoint x="700" y="320" /><di:waypoint x="760" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0or7jn6_di" bpmnElement="SequenceFlow_0or7jn6"><di:waypoint x="188" y="320" /><di:waypoint x="270" y="320" /><bpmndi:BPMNLabel><dc:Bounds x="228" y="114" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="302" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0djl7a3_di" bpmnElement="EndEvent_0djl7a3"><dc:Bounds x="3422" y="302" width="36" height="36" /><bpmndi:BPMNLabel><dc:Bounds x="1064" y="142" width="90" height="12" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1quc7do_di" bpmnElement="Task_0micukk"><dc:Bounds x="800" y="680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_02c0jfb_di" bpmnElement="Task_0qmpvo4"><dc:Bounds x="930" y="680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_170sxmt_di" bpmnElement="Activity_170sxmt" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="600" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1t5uo1j_di" bpmnElement="Activity_1t5uo1j"><dc:Bounds x="760" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10f1odf_di" bpmnElement="Activity_10f1odf"><dc:Bounds x="900" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0e8ncys_di" bpmnElement="Activity_08udkvu"><dc:Bounds x="1130" y="80" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ooiluy_di" bpmnElement="Gateway_1ooiluy" isMarkerVisible="true"><dc:Bounds x="785" y="415" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1tfwutc_di" bpmnElement="Gateway_1tfwutc" isMarkerVisible="true"><dc:Bounds x="995" y="405" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0d2ifig_di" bpmnElement="Activity_0d2ifig" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="1210" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17d4q5p_di" bpmnElement="Activity_17d4q5p"><dc:Bounds x="1570" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0toonrr_di" bpmnElement="Activity_0toonrr"><dc:Bounds x="2350" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1rxtz7g_di" bpmnElement="Activity_1rxtz7g"><dc:Bounds x="2090" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_17wlfan_di" bpmnElement="Gateway_17wlfan" isMarkerVisible="true"><dc:Bounds x="3025" y="295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_05dzlc3_di" bpmnElement="Gateway_05dzlc3" isMarkerVisible="true"><dc:Bounds x="1335" y="405" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_196cqxc_di" bpmnElement="Activity_196cqxc"><dc:Bounds x="1070" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_03j4b97_di" bpmnElement="Activity_03j4b97"><dc:Bounds x="2890" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1pa28h4_di" bpmnElement="Gateway_1pa28h4" isMarkerVisible="true"><dc:Bounds x="2015" y="295" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0k9jeyp_di" bpmnElement="Activity_0k9jeyp"><dc:Bounds x="1720" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ye24y2_di" bpmnElement="Activity_1ye24y2"><dc:Bounds x="430" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0y4i71r_di" bpmnElement="Activity_0y4i71r"><dc:Bounds x="2140" y="380" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0x58l5s_di" bpmnElement="Activity_0x58l5s"><dc:Bounds x="1850" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1s6ic2u_di" bpmnElement="Activity_1s6ic2u"><dc:Bounds x="270" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gzwm9u_di" bpmnElement="Activity_1gzwm9u"><dc:Bounds x="2220" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_061ashd_di" bpmnElement="Activity_061ashd" bioc:stroke="black" bioc:fill="white"><dc:Bounds x="600" y="170" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0faaf15_di" bpmnElement="Activity_0faaf15"><dc:Bounds x="900" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ue5hwv_di" bpmnElement="Activity_0ue5hwv"><dc:Bounds x="1220" y="510" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ad5tbm_di" bpmnElement="Activity_0ad5tbm"><dc:Bounds x="1670" y="450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1waxv96_di" bpmnElement="Activity_1waxv96"><dc:Bounds x="1430" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10ff5yc_di" bpmnElement="Activity_10ff5yc"><dc:Bounds x="2490" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0moozfy_di" bpmnElement="Activity_0moozfy" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="2670" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ju2a79_di" bpmnElement="Activity_0ju2a79"><dc:Bounds x="3120" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0s20snl_di" bpmnElement="Activity_0s20snl"><dc:Bounds x="3290" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jkmzt5_di" bpmnElement="Activity_0jkmzt5" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="2500" y="160" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>