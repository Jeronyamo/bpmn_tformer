<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.8.1"><bpmn:process id="TEMPLATE_INSTANCE_PROCESS_hlk_REGUL_73c20b4e-6cab-41b8-a008-8c4d08d7fe9c" name="Заявка на регистрацию партнера ЮЛ" isExecutable="true"><bpmn:documentation /><bpmn:startEvent id="StartEvent_1"><bpmn:outgoing>SequenceFlow_07e3ecq</bpmn:outgoing></bpmn:startEvent><bpmn:userTask id="Task_0micukk" name="Блок заполнения" camunda:formKey="FILL" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="fillverify" /></camunda:properties><camunda:formData><camunda:formField id="ezdocObjectUrl" type="string" /><camunda:formField id="ezdocObjectEditorUrl" type="string" /><camunda:formField id="hlk_shorttitle" label="Кратк. наименование " type="string" /><camunda:formField id="hlk_fulltitle" label="Полн. наименование" type="string" /><camunda:formField id="hlk_legalform" label="Организац.-правовая форма" type="string" /><camunda:formField id="hlk_oked" label="ОКЭД" type="string" /><camunda:formField id="hlk_is_issuer" label="Эмитент?" type="string" /><camunda:formField id="hlk_name_first_head" label="ФИО первого руководителя" type="string" /><camunda:formField id="hlk_isbank" label="Банк?" type="string" /><camunda:formField id="hlk_registrcountry" label="Страна регистрации*" type="string" /><camunda:formField id="hlk_regcountry" label="Страна резидентства" type="string" /><camunda:formField id="hlk_presence_related_person" label="Наличие связанного лица" type="string" /><camunda:formField id="hlk_economicsector" label="Сектор экономики" type="string" /><camunda:formField id="hlk_taxprivileges" label="Налоговые льготы" type="string" /><camunda:formField id="hlk_Conterparty_Level" label="Уровень учета" type="string" /><camunda:formField id="hlk_other_information" label="Прочая информация" type="string" /><camunda:formField id="hlk_QualInvestor" label="Квалифицированный инвестор" type="string" /><camunda:formField id="hlk_isbroker" label="Брокер?" type="string" /><camunda:formField id="hlk_iin_bin" label="ИИН/БИН" type="string" /><camunda:formField id="hlk_costtt_center" label="Профит центр*" type="string" /><camunda:formField id="hlk_se_id" label="ID Сектора Экономики" type="string" /><camunda:formField id="hlk_Account_Number" label="Номер счета" type="string" /><camunda:formField id="hlk_app_id" label="ID заявки" type="string" /><camunda:formField id="hlk_customer" label="Клиент?" type="string" /><camunda:formField id="hlk_counterparty" label="Контрагент?" type="string" /><camunda:formField id="hlk_shareholder" label="Пайщик?" type="string" /><camunda:formField id="hlk_related_person" label="Связанное лицо?" type="string" /><camunda:formField id="hlk_confidant" label="Доверенное лицо?" type="string" /><camunda:formField id="hlk_RiskLevelAML" label="Уровень риска AML" type="string" /><camunda:formField id="hlk_AMLCommentRiskLevel" label="Комментарий к уровню риска" type="string" /><camunda:formField id="hlk_AMLReviewComment" label="Комментарий по результатам проверки AML" type="string" /><camunda:formField id="hlk_signfatcaul" label="Признак FATCA" type="string" /><camunda:formField id="hlk_FATCA_participation" label="Участие FATCA" type="string" /><camunda:formField id="hlk_type_organization_fatca" label="Тип организации (FATCA)" type="string" /><camunda:formField id="hlk_gintinul" label="Номер участника GIIN/TIN" type="string" /><camunda:formField id="hlk_ipdlUL" label="ИПДЛ" type="string" /><camunda:formField id="hlk_date_ipdl" label="Дата определения / изменения признака ИПДЛ" type="string" /><camunda:formField id="hlk_residentusaul" label="Резидент США" type="string" /><camunda:formField id="hlk_comment_ipdl" label="Комментарий к параметру ИПДЛ" type="string" /><camunda:formField id="hlk_SIGN_FATCA_DATE" label="Дата определения / изменения Признак FATCA" type="string" /><camunda:formField id="hlk_postcode" label="Адрес регистрации: Почтовый индекс" type="string" /><camunda:formField id="hlk_typelocality" label="Адрес регистрации: Вид населенного пункта" type="string" /><camunda:formField id="hlk_street" label="Адрес регистрации: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_house" label="Адрес регистрации: Номер дома" type="string" /><camunda:formField id="hlk_officeflat" label="Адрес регистрации: Номер квартиры" type="string" /><camunda:formField id="hlk_kato_adress_locality_id" label="ID КАТО Адрес регистрации: Населенный пункт" type="string" /><camunda:formField id="hlk_kato_region_id" label="ID КАТО Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_kato_area_idid" label="ID КАТО Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_RegAdress_Area" label="Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_RegAdress_District" label="Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_regionul" label="Адрес регистрации: Область КАТО" type="string" /><camunda:formField id="hlk_areaa" label="Адрес регистрации: Район КАТО" type="string" /><camunda:formField id="hlk_RegAdress_Locality" label="Адрес регистрации: Населенный Пункт" type="string" /><camunda:formField id="hlk_locality" label="Адрес регистрации: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_country_location_ul" label="Страна местонахождения" type="string" /><camunda:formField id="hlk_location_address_postcode_ul" label="Фактический адрес: Почтовый индекс" type="string" /><camunda:formField id="hlk_location_address_type_settlement_ul" label="Фактический адрес: Вид населенного пункта" type="string" /><camunda:formField id="hlk_location_address_street" label="Фактический адрес: Улица/проспект/мкр" type="string" /><camunda:formField id="hlk_location_address_apartment_office" label="Фактический адрес: Номер квартиры/офиса" type="string" /><camunda:formField id="hlk_location_address_house" label="Фактический адрес: Номер дома" type="string" /><camunda:formField id="hlk_kato_fact_area_id" label="ID КАТО Фактический адрес: Район" type="string" /><camunda:formField id="hlk_kato_fact_region_id" label="ID КАТО Фактический адрес: Область" type="string" /><camunda:formField id="hlk_kato_fact_adress_locality_id" label="ID КАТО Фактический адрес: Населенный пункт" type="string" /><camunda:formField id="hlk_HabAdress_Area" label="Адрес факт/проживания: Область" type="string" /><camunda:formField id="hlk_HabAdress_District" label="Адрес факт/проживания: Район" type="string" /><camunda:formField id="hlk_HabAdress_Locality" label="Адрес факт/проживания: Населенный пункт" type="string" /><camunda:formField id="hlk_location_address_region" label="Фактический адрес: Область КАТО" type="string" /><camunda:formField id="hlk_location_address_district_ul" label="Фактический адрес: Район КАТО" type="string" /><camunda:formField id="hlk_location_address_locality_ul" label="Фактический адрес: Населенный пункт КАТО" type="string" /><camunda:formField id="hlk_regnumber" label="Регистрационный номер" type="string" /><camunda:formField id="hlk_regdate" label="Дата регистрации*" type="string" /><camunda:formField id="hlk_typesdoc" label="Вид документа" type="string" /><camunda:formField id="hlk_serialdocument" label="Серия документа" type="string" /><camunda:formField id="hlk_numberdocument" label="Номер документа" type="string" /><camunda:formField id="hlk_dateissue" label="Дата выдачи" type="string" /><camunda:formField id="hlk_document_expiration_date" label="Дата истечения срока действия документа" type="string" /><camunda:formField id="hlk_Placeofissue" label="Место выдачи документа" type="string" /><camunda:formField id="hlk_issueddocument" label="Кем выдан документ" type="string" /><camunda:formField id="hlk_phone" label="Телефон" type="string" /><camunda:formField id="hlk_email" label="Адрес эл. почты" type="string" /><camunda:formField id="hlk_NotificationMethod" label="Способ получения уведомления" type="string" /><camunda:formField id="hlk_BankDetails" label="Банковские реквизиты для перевода ДС" type="string" /><camunda:formField id="hlk_DetailsTransfer" label="Реквизиты для перевода ЦБ" type="string" /><camunda:formField id="hlk_isnpf" label="НПФ?" type="string" /><camunda:formField id="hlk_isinsurance" label="Страховая компания?" type="string" /><camunda:formField id="hlk_is_other_licensee" label="Прочий лицензиат?" type="string" /><camunda:formField id="hlk_is_level2" label="Банк 2-го уровня?" type="string" /><camunda:formField id="hlk_is_licensed_broker" label="Лицензированный брокер?" type="string" /><camunda:formField id="hlk_is_custody" label="Кастоди?" type="string" /><camunda:formField id="hlk_ApplicationAccessionAgreement" label="Заявление о присоединении к Договору " type="string" /><camunda:formField id="hlk_OrderOpeningAccount" label="Приказ на открытие лицевого счета для ФЛ/ИП" type="string" /><camunda:formField id="hlk_IdentityDocumentScan" label="Документ, удостоверяющий личность" type="string" /><camunda:formField id="hlk_SpouseConsentScan" label="Согласие супруга/супруги" type="string" /><camunda:formField id="hlk_SignatureSealCard" label="Карточка с образцом подписи/печати" type="string" /><camunda:formField id="hlk_PowerAttorney" label="Доверенность" type="string" /><camunda:formField id="hlk_BankTransferDetails" label="Банковские реквизиты для перевода ДС" type="string" /><camunda:formField id="hlk_detailsforsecurities" label="Реквизиты для перевода ЦБ" type="string" /><camunda:formField id="hlk_reg_tau_kato_district" label="ID ТАУ КАТО Адрес регистрации: Район" type="string" /><camunda:formField id="hlk_reg_tau_kato_region" label="ID ТАУ КАТО Адрес регистрации: Область" type="string" /><camunda:formField id="hlk_reg_tau_kato_locality" label="ID ТАУ КАТО Адрес регистрации: Населенный пункт" type="string" /><camunda:formField id="hlk_tau_kato_region" label="ID ТАУ КАТО Адрес проживания/фактический: Область" type="string" /><camunda:formField id="hlk_tau_kato_district" label="ID ТАУ КАТО Адрес проживания/фактический: Район" type="string" /><camunda:formField id="hlk_tau_kato_locality" label="ID ТАУ КАТО Адрес проживания/фактический: Населенный пункт" type="string" /><camunda:formField id="hlk_cp_tariff_plan" label="Тарифный план участника" type="string" /><camunda:formField id="hlk_scanIDDocuments" label="Сканиров. документы удостоверяющего личность подписанта" type="string" /><camunda:formField id="hlk_scan_contract_bdd" label="Договор БДД" type="string" /><camunda:formField id="hlk_scan_order_ul" label="Приказ на открытие лицевого счета для ЮЛ" type="string" /><camunda:formField id="hlk_account_type_holder" label="Вид держателя" type="string" /><camunda:formField id="hlk_adressmatch" label="Адрес проживания совпадает с адресом регистрации" type="string" /><camunda:formField id="MarginOrderRegistrationDate" label="Дата регистрации" type="string" /><camunda:formField id="hlk_doc_first_date" label="Дата первичной регистрации документа" type="string" /><camunda:formField id="hlk_AML_MatchFound" label="Обнаружено совпадение по спискам AML" type="string" /><camunda:formField id="hlk_AMLStatus" label="Код статуса проверки АМЛ" type="string" /><camunda:formField id="hlk_isCommissionReceiver" label="Получатель  комиссии" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
data.templateId = templateId;
data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0hykypg</bpmn:incoming><bpmn:incoming>SequenceFlow_0likwkq</bpmn:incoming><bpmn:incoming>SequenceFlow_1hdf1ob</bpmn:incoming><bpmn:incoming>SequenceFlow_0h0d2db</bpmn:incoming><bpmn:incoming>SequenceFlow_0c0tetz</bpmn:incoming><bpmn:incoming>SequenceFlow_19lot16</bpmn:incoming><bpmn:incoming>SequenceFlow_09esusj</bpmn:incoming><bpmn:incoming>Flow_1cx3l0d</bpmn:incoming><bpmn:incoming>Flow_172s0pi</bpmn:incoming><bpmn:incoming>Flow_1wi2oiu</bpmn:incoming><bpmn:outgoing>SequenceFlow_0cjqw5l</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_0wj5pgl" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ont7bs</bpmn:incoming><bpmn:outgoing>SequenceFlow_0me1hcu</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1saooe4" name="Статус заявки &#34;Обработка: Заявка зарегистрирована&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Заявка+зарегистрирована</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ww5x19</bpmn:incoming><bpmn:outgoing>Flow_0zqti4p</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_0ldbku4" name="Подтверждение заявки" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /><camunda:formField id="{&#34;id&#34;: &#34;Cancel&#34;, &#34;label&#34;: &#34;Отклонить&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_close&#34;, &#34;label&#34;: &#34;Причина отклонения&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0v7s9u3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ww5x19</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1hak0di</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0ui0360</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="ServiceTask_0iib0v5" name="Статус заявки отклонена сотрудником СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+отклонена+сотрудником+СП</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04h5ecy</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ont7bs</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1g70x44"><bpmn:incoming>SequenceFlow_0me1hcu</bpmn:incoming></bpmn:endEvent><bpmn:exclusiveGateway id="ExclusiveGateway_0criw3u"><bpmn:incoming>SequenceFlow_1m8mcvo</bpmn:incoming><bpmn:incoming>Flow_16uejag</bpmn:incoming><bpmn:outgoing>SequenceFlow_1dsq1s9</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1m7uquq</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1csv323" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1dsq1s9</bpmn:incoming><bpmn:outgoing>SequenceFlow_1h1rqfu</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_1xab3ay"><bpmn:incoming>SequenceFlow_022h4i7</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_08woed8" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1h1rqfu</bpmn:incoming><bpmn:outgoing>SequenceFlow_022h4i7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0dc3scv" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0b44hj8</bpmn:incoming><bpmn:outgoing>Flow_1ls56te</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_18odnnp"><bpmn:incoming>Flow_1ls56te</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_1ld75wz" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0xj401y</bpmn:incoming><bpmn:outgoing>Flow_0b44hj8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_07u2ado" name="Создаем счет" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${instanceId}/to/INVOICE</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_type_account_int" , "ценнобумажный")
.prop("hlk_account_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.prop("hlk_Account_Number" , accountNumber)
.prop("AccountNumber" , accountNumber)
.prop("hlk_personal_account" , true)
.prop("hlk_DefaultAccount" , true)
.prop("hlk_account_external" , false)
.prop("hlk_blocked_account" , false)
.prop("hlk_account_type","Ценнобумажный")
.prop("hlk_account_status" , "Открыт")
.prop("hlk_clearing_system" , "АО ЦЕНТРАЛЬНЫЙ ДЕПОЗИТАРИЙ ЦЕННЫХ БУМАГ")
.prop("hlk_account_bin" , "970740000154")
.prop("hlk_accont_name_registrar_holder" ,"Halyk Finance")
.prop("hlk_account_opening_date" , SWIFT_DOCREG_DATE)
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1r2it9m</bpmn:incoming><bpmn:incoming>Flow_0fxiznl</bpmn:incoming><bpmn:outgoing>Flow_0d8ogsv</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1brocmh" name="Сообщаем об окончании подпроцесса" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1kxgg5v</bpmn:incoming><bpmn:outgoing>SequenceFlow_0n0csju</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0aun3b7" name="Достаем ссылку на клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_iin_bin</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="iin">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_17x2r99</bpmn:incoming><bpmn:outgoing>Flow_1r2it9m</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_10ocghy" name="Отправляем SWIFT" camunda:asyncAfter="true" calledElement="MT501Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0clvaly</bpmn:incoming><bpmn:outgoing>SequenceFlow_0lecpg6</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0zd0i4n" name="Получаем референс"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "swiftMessageEntity",
         "filter": { 
		"instanceId": "${accountId}",
		"instanceType": "BOOK"
	},
	"projection": { 
		"refId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="SWIFT_MSG_REF"><camunda:script scriptFormat="JavaScript">JSON.parse(response).cursor.firstBatch[0].refId;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_08d7rp4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ijx8sh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_129llks" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/SWIFT_MSG_REF?incrementVersion=true&amp;value=${SWIFT_MSG_REF}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ijx8sh</bpmn:incoming><bpmn:outgoing>Flow_0f6lgd5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0fkrqh8" name="Меняем статус заявки на регистрацию счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+исполнена.+SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07w4jv1</bpmn:incoming><bpmn:outgoing>SequenceFlow_1lciq2d</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0qqg4w6" name="Меняем статус заявки на регистрацию договора" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+исполнена.+Договор+зарегистрирован</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1lciq2d</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kxgg5v</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_00myvbt" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_105vvtj</bpmn:incoming><bpmn:incoming>Flow_0aefvk7</bpmn:incoming><bpmn:outgoing>SequenceFlow_1gt5ave</bpmn:outgoing></bpmn:serviceTask><bpmn:callActivity id="CallActivity_0q17ioc" name="Генерируем печатные формы" calledElement="AccountOrderGeneration"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in sourceExpression="${accountId}" target="accountId" /></bpmn:extensionElements><bpmn:incoming>Flow_1w94grl</bpmn:incoming><bpmn:outgoing>Flow_1amd180</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0h52xqs" name="Достаем primaryId заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${instanceId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="primaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xn4bia</bpmn:incoming><bpmn:outgoing>SequenceFlow_100c6bi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_10zy1sr" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_app_id?incrementVersion=true&amp;value=${primaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_100c6bi</bpmn:incoming><bpmn:outgoing>SequenceFlow_0sckeot</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_1ctu6an" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="regDate"><bpmn:incoming>SequenceFlow_0j07zfy</bpmn:incoming><bpmn:outgoing>SequenceFlow_1qfc4so</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_0i6x8gm" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1gt5ave</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xz0oik</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0tn60s7" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+отклонена+SWIFT+ошибка</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xz0oik</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xuwf90</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_0yo5pqi" name="Получаем текущую дату" scriptFormat="JavaScript" camunda:resultVariable="acceptDate"><bpmn:incoming>Flow_0q03p52</bpmn:incoming><bpmn:outgoing>Flow_0zmndjo</bpmn:outgoing><bpmn:script>JSON.stringify(new Date()).replace(/"/g, '').substring(0, 10)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_0ttp7ea" name="Считаем разницу между датами" scriptFormat="javascript" camunda:resultVariable="difference"><bpmn:incoming>Flow_0zmndjo</bpmn:incoming><bpmn:outgoing>Flow_0av2aj7</bpmn:outgoing><bpmn:script>Math.floor(Math.abs(new Date(acceptDate) - new Date(regDate))/(1000 * 60 * 60 * 24));</bpmn:script></bpmn:scriptTask><bpmn:exclusiveGateway id="ExclusiveGateway_1g03dpo" default="SequenceFlow_1lakag4"><bpmn:incoming>Flow_0av2aj7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0vn1hy3</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1lakag4</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_1f0pr55" name="Меняем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/setAttribute/hlk_Contract_Start_Date?incrementVersion=true&amp;value=${acceptDate}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">**</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1lakag4</bpmn:incoming><bpmn:outgoing>Flow_11toe0w</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0me1hcu" sourceRef="ServiceTask_0wj5pgl" targetRef="EndEvent_1g70x44" /><bpmn:sequenceFlow id="SequenceFlow_0ww5x19" sourceRef="UserTask_0ldbku4" targetRef="ServiceTask_1saooe4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1hak0di" sourceRef="UserTask_0ldbku4" targetRef="ScriptTask_0bsz72u"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1dsq1s9" sourceRef="ExclusiveGateway_0criw3u" targetRef="ServiceTask_1csv323"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1h1rqfu" sourceRef="ServiceTask_1csv323" targetRef="ServiceTask_08woed8" /><bpmn:sequenceFlow id="SequenceFlow_022h4i7" sourceRef="ServiceTask_08woed8" targetRef="EndEvent_1xab3ay" /><bpmn:sequenceFlow id="SequenceFlow_1kxgg5v" sourceRef="ServiceTask_0qqg4w6" targetRef="ServiceTask_1brocmh" /><bpmn:sequenceFlow id="SequenceFlow_0n0csju" sourceRef="ServiceTask_1brocmh" targetRef="Activity_1gc7fao" /><bpmn:sequenceFlow id="SequenceFlow_1ijx8sh" sourceRef="ServiceTask_0zd0i4n" targetRef="ServiceTask_129llks" /><bpmn:sequenceFlow id="SequenceFlow_1lciq2d" sourceRef="ServiceTask_0fkrqh8" targetRef="ServiceTask_0qqg4w6" /><bpmn:sequenceFlow id="SequenceFlow_1gt5ave" sourceRef="ServiceTask_00myvbt" targetRef="ServiceTask_0i6x8gm" /><bpmn:sequenceFlow id="SequenceFlow_0vn1hy3" sourceRef="ExclusiveGateway_1g03dpo" targetRef="Gateway_0dgr5j5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${difference &lt;= 3}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_100c6bi" sourceRef="ServiceTask_0h52xqs" targetRef="ServiceTask_10zy1sr" /><bpmn:sequenceFlow id="SequenceFlow_0sckeot" sourceRef="ServiceTask_10zy1sr" targetRef="ScriptTask_1gpzlaj" /><bpmn:sequenceFlow id="SequenceFlow_1xz0oik" sourceRef="ServiceTask_0i6x8gm" targetRef="ServiceTask_0tn60s7" /><bpmn:sequenceFlow id="SequenceFlow_1lakag4" sourceRef="ExclusiveGateway_1g03dpo" targetRef="ServiceTask_1f0pr55" /><bpmn:callActivity id="CallActivity_024w4yw" name="Запускаем процесс регистрации счета" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_securities_account_6e551763-f964-457e-89bc-9a53378b5d7c"><bpmn:extensionElements><camunda:in sourceExpression="${accountId}" target="instanceId" /><camunda:in sourceExpression="${accountTemplateId}" target="templateId" /><camunda:in sourceExpression="${accountType}" target="type" /><camunda:in sourceExpression="${accountEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${accountEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${accountType.toLowerCase()}_${accountId}" /></bpmn:extensionElements><bpmn:incoming>Flow_0o6yf2j</bpmn:incoming><bpmn:outgoing>Flow_03n1h1e</bpmn:outgoing></bpmn:callActivity><bpmn:callActivity id="CallActivity_0x2df99" name="Запускаем процесс регистрации договора" calledElement="TEMPLATE_INSTANCE_PROCESS_hlk_AppRegContracts_41524162-fa02-47df-9197-2338660d72f4"><bpmn:extensionElements><camunda:in sourceExpression="${agreementId}" target="instanceId" /><camunda:in sourceExpression="${agreementTemplateId}" target="templateId" /><camunda:in sourceExpression="${agreementType}" target="type" /><camunda:in sourceExpression="${agreementEzDocObjectEditorUrl}" target="ezdocObjectEditorUrl" /><camunda:in sourceExpression="${agreementEzDocObjectUrl}" target="ezdocObjectUrl" /><camunda:in sourceExpression="${initiator}" target="initiator" /><camunda:out variables="all" /><camunda:in sourceExpression="${ezdocUrl}" target="ezdocUrl" /><camunda:in businessKey="${agreementType.toLowerCase()}_${agreementId}" /></bpmn:extensionElements><bpmn:incoming>Flow_0gug36a</bpmn:incoming><bpmn:outgoing>Flow_1bbi0it</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_084vp7b" name="Получаем тип договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/getAttribute/hlk_account_type_contract</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_051z3u4" default="SequenceFlow_1vvu5un"><bpmn:outgoing>SequenceFlow_03kohz4</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1vvu5un</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_03kohz4" sourceRef="ExclusiveGateway_051z3u4" targetRef="ServiceTask_1ljvqa9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "Брокерское обслуживание ЮЛ"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_010ugp5" name="Меняем статус заявки на регистрацию договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${agreementId}?label=Заявка+исполнена.+Договор+зарегистрирован</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vvu5un</bpmn:incoming><bpmn:outgoing>SequenceFlow_0il832x</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1vvu5un" sourceRef="ExclusiveGateway_051z3u4" targetRef="ServiceTask_010ugp5" /><bpmn:serviceTask id="ServiceTask_0t7wfvg" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0il832x</bpmn:incoming><bpmn:outgoing>SequenceFlow_0ddg1ag</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0il832x" sourceRef="ServiceTask_010ugp5" targetRef="ServiceTask_0t7wfvg" /><bpmn:serviceTask id="ServiceTask_1c0so8z" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ebm30m</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vaxuhr</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_0bd6u35"><bpmn:incoming>SequenceFlow_1vaxuhr</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_077ce62" name="Статус заявки - исполнена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заявка+исполнена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1vxtut4</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ebm30m</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0dgjo0l" name="Создаем договор"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"EXCEL_NAME" : "CONTRACT"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ddg1ag</bpmn:incoming><bpmn:outgoing>SequenceFlow_1vxtut4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ebm30m" sourceRef="ServiceTask_077ce62" targetRef="ServiceTask_1c0so8z" /><bpmn:sequenceFlow id="SequenceFlow_1vaxuhr" sourceRef="ServiceTask_1c0so8z" targetRef="EndEvent_0bd6u35" /><bpmn:sequenceFlow id="SequenceFlow_1vxtut4" sourceRef="ServiceTask_0dgjo0l" targetRef="ServiceTask_077ce62" /><bpmn:sequenceFlow id="SequenceFlow_0ddg1ag" sourceRef="ServiceTask_0t7wfvg" targetRef="ServiceTask_0dgjo0l" /><bpmn:serviceTask id="ServiceTask_1msvpx8" name="Генерируем номер счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028111137</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dwpz3r</bpmn:incoming><bpmn:outgoing>SequenceFlow_04qr9es</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ljvqa9" name="Получаем номер договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/getAttribute/hlk_account_number_contract</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="Contract">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03kohz4</bpmn:incoming></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0bm3npl" name="Сообщаем об окончании процесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03n7qsr</bpmn:incoming><bpmn:outgoing>SequenceFlow_1lj3pps</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="EndEvent_124oaof"><bpmn:incoming>SequenceFlow_1lj3pps</bpmn:incoming></bpmn:endEvent><bpmn:serviceTask id="ServiceTask_0d8cmu3" name="Статус заявки отклонена, найдено совпадение по спискам амл"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Клиент+не+прошел+проверку+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13fm8y3</bpmn:incoming><bpmn:outgoing>SequenceFlow_03n7qsr</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="UserTask_0hjskmz" name="Ручная проверка" camunda:candidateGroups="cb_backoffice, cb_frontoffice, cb_middleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Accept&#34;,&#34;label&#34;:&#34;Подтвердить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /><camunda:formField id="{&#34;id&#34;:&#34;Cancel&#34;,&#34;label&#34;:&#34;Отклонить&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>SequenceFlow_03rjl0e</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xvupk8</bpmn:outgoing><bpmn:outgoing>Flow_0clbcxj</bpmn:outgoing></bpmn:userTask><bpmn:exclusiveGateway id="ExclusiveGateway_0vne501"><bpmn:incoming>SequenceFlow_0x93a4f</bpmn:incoming><bpmn:outgoing>SequenceFlow_1kvqh9h</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0vahhfc</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0fksfg7</bpmn:outgoing><bpmn:outgoing>Flow_11tmkkx</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="ServiceTask_00jrd71" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=AML.Совпадений+не+найдено</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xvupk8</bpmn:incoming><bpmn:incoming>SequenceFlow_1kvqh9h</bpmn:incoming><bpmn:outgoing>SequenceFlow_14w8b23</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1suyhbn" name="Изменяем статус заявки &#34;Системная ошибка AML&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Системная+ошибка+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1iskmoe</bpmn:incoming><bpmn:outgoing>SequenceFlow_03rjl0e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1ckbaw7" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Выявлено+совпадение.+Ожидайте+решение+Compliance</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0fksfg7</bpmn:incoming><bpmn:outgoing>Flow_0uixew5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0fcezq4" name="Ожидаем ответ"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_AMLStatus</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jpwkr5</bpmn:incoming><bpmn:incoming>Flow_00i7dwl</bpmn:incoming><bpmn:outgoing>SequenceFlow_0x93a4f</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_03n7qsr" sourceRef="ServiceTask_0d8cmu3" targetRef="ServiceTask_0bm3npl" /><bpmn:sequenceFlow id="SequenceFlow_1lj3pps" sourceRef="ServiceTask_0bm3npl" targetRef="EndEvent_124oaof" /><bpmn:sequenceFlow id="SequenceFlow_1kvqh9h" sourceRef="ExclusiveGateway_0vne501" targetRef="ServiceTask_00jrd71"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '0'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1xvupk8" sourceRef="UserTask_0hjskmz" targetRef="ServiceTask_00jrd71"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Accept'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0vahhfc" sourceRef="ExclusiveGateway_0vne501" targetRef="ServiceTask_070673a"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '3'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_03rjl0e" sourceRef="ServiceTask_1suyhbn" targetRef="UserTask_0hjskmz" /><bpmn:sequenceFlow id="SequenceFlow_0x93a4f" sourceRef="ServiceTask_0fcezq4" targetRef="ExclusiveGateway_0vne501" /><bpmn:sequenceFlow id="SequenceFlow_0fksfg7" sourceRef="ExclusiveGateway_0vne501" targetRef="ServiceTask_1ckbaw7"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_0y4dhe5" name="Меняем статус заявки SWIFT исполнен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+исполнен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_181bnhx</bpmn:incoming><bpmn:outgoing>Flow_0q03p52</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_11neoxf" name="Создаем запись о ранжировании" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Range")
.prop("hlk_client_app" , ShortNameCurrentCtpt)
.prop("hlk_range_AssignedRiskGroup1" , "Сбалансированная")
.prop("hlk_range_date" , SWIFT_DOCREG_DATE)
.prop("hlk_range_InvoiceNumber" , accountNumber)
.prop("hlk_range_IDAssignedRiskGroup1" , "1")
.prop("hlk_range_BasisAssignment1" , "По результатам анкетирования")
.prop("hlk_counterparty_type","0") 
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0esbnm7</bpmn:incoming><bpmn:incoming>Flow_09mfqq8</bpmn:incoming><bpmn:outgoing>Flow_1ctk0os</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0xp36oj" name="Меняем статус заявки SWIFT отправлен для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0lecpg6</bpmn:incoming><bpmn:outgoing>SequenceFlow_1jj5qez</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0tdvjgq" name="Меняем статус заявки SWIFT отправлен"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+отправлен</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1jj5qez</bpmn:incoming><bpmn:outgoing>SequenceFlow_08d7rp4</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1jj5qez" sourceRef="ServiceTask_0xp36oj" targetRef="ServiceTask_0tdvjgq" /><bpmn:sequenceFlow id="SequenceFlow_0lecpg6" sourceRef="CallActivity_10ocghy" targetRef="ServiceTask_0xp36oj" /><bpmn:sequenceFlow id="SequenceFlow_08d7rp4" sourceRef="ServiceTask_0tdvjgq" targetRef="ServiceTask_0zd0i4n" /><bpmn:sequenceFlow id="SequenceFlow_1qfc4so" sourceRef="ScriptTask_1ctu6an" targetRef="ServiceTask_1yfobcp" /><bpmn:serviceTask id="ServiceTask_1blpevb" name="Создаем клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/LEGAL_ENTITY/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ShortName", ShortNameCurrentCtpt)
.prop("hlk_counterparty_type", "2")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14w8b23</bpmn:incoming><bpmn:outgoing>SequenceFlow_1toh18t</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_14w8b23" sourceRef="ServiceTask_00jrd71" targetRef="ServiceTask_1blpevb" /><bpmn:sequenceFlow id="SequenceFlow_1toh18t" sourceRef="ServiceTask_1blpevb" targetRef="ExclusiveGateway_0lscfxj" /><bpmn:serviceTask id="ServiceTask_1a0rnql" name="Определяем тип свифта"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_swift_type?incrementVersion=true&amp;value=100</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0so1cu7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0j07zfy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0j07zfy" sourceRef="ServiceTask_1a0rnql" targetRef="ScriptTask_1ctu6an" /><bpmn:serviceTask id="ServiceTask_1u02rkn" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_04qr9es</bpmn:incoming><bpmn:outgoing>SequenceFlow_05q8y1e</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_04qr9es" sourceRef="ServiceTask_1msvpx8" targetRef="ServiceTask_1u02rkn" /><bpmn:serviceTask id="ServiceTask_0wa2y9q" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_05q8y1e</bpmn:incoming><bpmn:outgoing>SequenceFlow_0om285i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_05q8y1e" sourceRef="ServiceTask_1u02rkn" targetRef="ServiceTask_0wa2y9q" /><bpmn:sequenceFlow id="SequenceFlow_0om285i" sourceRef="ServiceTask_0wa2y9q" targetRef="ExclusiveGateway_1at31m2" /><bpmn:callActivity id="CallActivity_1xhbxvb" name="Генерируем форму 14" calledElement="Form14Generation"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in sourceExpression="${instanceId}" target="instanceId" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_18r6en9</bpmn:incoming><bpmn:outgoing>SequenceFlow_0g240o6</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_1xi8p4s" name="Получаем email клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_email</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="mail">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0g240o6</bpmn:incoming><bpmn:incoming>SequenceFlow_0wz61d3</bpmn:incoming><bpmn:outgoing>SequenceFlow_0pmv7nv</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0g240o6" sourceRef="CallActivity_1xhbxvb" targetRef="ServiceTask_1xi8p4s" /><bpmn:serviceTask id="ServiceTask_070673a" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"email":"uao@halykfinance.kz",
"subject":"Ошибка! Проверка клиента ${ShortName} в AML",
"text":"Внимание! Ошибка при проверке клиента ${ShortName}  по спискам AML. Проверка клиента в АМL не доступна"
}</camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0vahhfc</bpmn:incoming><bpmn:outgoing>SequenceFlow_1iskmoe</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1iskmoe" sourceRef="ServiceTask_070673a" targetRef="ServiceTask_1suyhbn" /><bpmn:serviceTask id="ServiceTask_0cxa9nn" name="Достаем номер договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_account_number_contract</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="agreementNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1amd180</bpmn:incoming><bpmn:outgoing>SequenceFlow_152ucl7</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1jov9hv" name="Достаем дату регистрации договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${agreementId}/getAttribute/hlk_Contract_Start_Date</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="registrationDate">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_152ucl7</bpmn:incoming><bpmn:outgoing>SequenceFlow_0dmec3h</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0dmec3h" sourceRef="ServiceTask_1jov9hv" targetRef="Activity_1vttyhg" /><bpmn:sequenceFlow id="SequenceFlow_152ucl7" sourceRef="ServiceTask_0cxa9nn" targetRef="ServiceTask_1jov9hv" /><bpmn:serviceTask id="ServiceTask_1bfkstr" name="Достаем праймари айди заявки на договор"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${agreementId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="agreementPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1tajun2</bpmn:incoming><bpmn:outgoing>Flow_1ga0tn3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0mv914z" sourceRef="Gateway_11d00mg" targetRef="ScriptTask_01t68px" /><bpmn:exclusiveGateway id="ExclusiveGateway_0zap78k" default="SequenceFlow_14ct0ag"><bpmn:incoming>Flow_19zlmnc</bpmn:incoming><bpmn:outgoing>SequenceFlow_0rgmv54</bpmn:outgoing><bpmn:outgoing>SequenceFlow_14ct0ag</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0rgmv54" sourceRef="ExclusiveGateway_0zap78k" targetRef="Activity_0rcjlgp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${errorCode == ""}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_14ct0ag" sourceRef="ExclusiveGateway_0zap78k" targetRef="Activity_1jngfcf" /><bpmn:serviceTask id="ServiceTask_0u0cocf" name="определяем ShortName"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_shorttitle</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="ShortName">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_02xcd54</bpmn:incoming><bpmn:outgoing>SequenceFlow_16boqya</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_1uypq3f" name="Записываем в объект"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"ShortName" : "${ShortName}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_16boqya</bpmn:incoming><bpmn:outgoing>SequenceFlow_1djl1sa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_16boqya" sourceRef="ServiceTask_0u0cocf" targetRef="ServiceTask_1uypq3f" /><bpmn:sequenceFlow id="SequenceFlow_1djl1sa" sourceRef="ServiceTask_1uypq3f" targetRef="ServiceTask_15xme30" /><bpmn:sequenceFlow id="SequenceFlow_1xuwf90" sourceRef="ServiceTask_0tn60s7" targetRef="Activity_0hrstjl" /><bpmn:callActivity id="CallActivity_18mndl7" name="Открываем пакет счетов" camunda:asyncAfter="true" calledElement="AccountPoolCreateLegalEntity"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /><camunda:in businessKey="#{execution.processBusinessKey}" /></bpmn:extensionElements><bpmn:incoming>Flow_0kh2o51</bpmn:incoming><bpmn:outgoing>Flow_102of6r</bpmn:outgoing></bpmn:callActivity><bpmn:serviceTask id="ServiceTask_0r436s3" name="Получаем аттрибуты"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_gintinul&amp;systemName=hlk_signfatcaul&amp;systemName=hlk_residentusaul&amp;systemName=hlk_iin_bin&amp;systemName=hlk_residentFL&amp;systemName=hlk_typesdoc</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="attributes">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1l9wdru</bpmn:incoming><bpmn:outgoing>SequenceFlow_1s7kjoh</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="ScriptTask_0tvyo2s" name="Проверяем правильность заполнения" scriptFormat="javascript" camunda:resultVariable="validationErrors"><bpmn:incoming>SequenceFlow_1s7kjoh</bpmn:incoming><bpmn:outgoing>SequenceFlow_0wowiu7</bpmn:outgoing><bpmn:script>var attrs = JSON.parse(attributes);
var errors = {};

//Сами проверки
if (!attrs.hlk_gintinul &amp;&amp; attrs.hlk_signfatcaul === 'FATCA' &amp;&amp; attrs.hlk_residentusaul) {
    errors.hlk_gintinul = {
        verified: false,
        decision: 'Параметр является обязательным, если выставлены Признак FATCA и Резидент США'
    };
} else {
    errors.hlk_gintinul = {
        verified: true
    }
}

if (!attrs.hlk_iin_bin &amp;&amp; (attrs.hlk_residentFL || attrs.hlk_typesdoc === 'Вид на жительство иностранца в Республике Казахстан')) {
    errors.hlk_iin_bin = {
        verified: false,
        decision: 'Обязательно к заполнению'
    };
} else {
    errors.hlk_iin_bin = {
        verified: true
    }
}

JSON.stringify(errors);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="ServiceTask_0a4oln0" name="Записываем результат валидации"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/verification/${instanceId}</camunda:inputParameter><camunda:inputParameter name="payload">${validationErrors}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0wowiu7</bpmn:incoming><bpmn:outgoing>SequenceFlow_04sex91</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="ExclusiveGateway_0ms1mnj" default="SequenceFlow_02dv478"><bpmn:incoming>SequenceFlow_04sex91</bpmn:incoming><bpmn:outgoing>SequenceFlow_02dv478</bpmn:outgoing><bpmn:outgoing>SequenceFlow_02xcd54</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_02dv478" sourceRef="ExclusiveGateway_0ms1mnj" targetRef="ServiceTask_00t1fq0" /><bpmn:sequenceFlow id="SequenceFlow_02xcd54" sourceRef="ExclusiveGateway_0ms1mnj" targetRef="ServiceTask_0u0cocf"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="javascript">var verified =true;
var v = JSON.parse(validationErrors);
for (key in v) {
    verified = verified &amp;&amp; v[key].verified; 
}
verified;</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1s7kjoh" sourceRef="ServiceTask_0r436s3" targetRef="ScriptTask_0tvyo2s" /><bpmn:sequenceFlow id="SequenceFlow_0wowiu7" sourceRef="ScriptTask_0tvyo2s" targetRef="ServiceTask_0a4oln0" /><bpmn:sequenceFlow id="SequenceFlow_04sex91" sourceRef="ServiceTask_0a4oln0" targetRef="ExclusiveGateway_0ms1mnj" /><bpmn:callActivity id="CallActivity_18ctl89" name="Подпроцесс проверки" calledElement="ControlSaveLE"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1ftw82l</bpmn:incoming><bpmn:outgoing>SequenceFlow_1fgri3f</bpmn:outgoing></bpmn:callActivity><bpmn:exclusiveGateway id="ExclusiveGateway_0z56oom" default="SequenceFlow_1guxshr"><bpmn:incoming>SequenceFlow_1fgri3f</bpmn:incoming><bpmn:outgoing>SequenceFlow_1guxshr</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0hykypg</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1fgri3f" sourceRef="CallActivity_18ctl89" targetRef="ExclusiveGateway_0z56oom" /><bpmn:sequenceFlow id="SequenceFlow_1guxshr" sourceRef="ExclusiveGateway_0z56oom" targetRef="CallActivity_1fh2o82" /><bpmn:sequenceFlow id="SequenceFlow_0hykypg" sourceRef="ExclusiveGateway_0z56oom" targetRef="Task_0micukk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0cjqw5l" sourceRef="Task_0micukk" targetRef="ServiceTask_07t0rg2" /><bpmn:sequenceFlow id="SequenceFlow_0pmv7nv" sourceRef="ServiceTask_1xi8p4s" targetRef="ServiceTask_0c85bl3" /><bpmn:sequenceFlow id="SequenceFlow_0ui0360" sourceRef="UserTask_0ldbku4" targetRef="Activity_0z4p76w"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Reject'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_0m4dlxy" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1vtl1pm</bpmn:incoming><bpmn:outgoing>SequenceFlow_1axk2yr</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_153xj4a" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1axk2yr</bpmn:incoming><bpmn:outgoing>SequenceFlow_0sl85kj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1axk2yr" sourceRef="ServiceTask_0m4dlxy" targetRef="ServiceTask_153xj4a" /><bpmn:serviceTask id="ServiceTask_1w5iyc6" name="Устанавливаем признак вернувшейся заявки" camunda:expression="true" camunda:resultVariable="cdRejected"><bpmn:incoming>SequenceFlow_0sl85kj</bpmn:incoming><bpmn:outgoing>SequenceFlow_0likwkq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0sl85kj" sourceRef="ServiceTask_153xj4a" targetRef="ServiceTask_1w5iyc6" /><bpmn:sequenceFlow id="SequenceFlow_0likwkq" sourceRef="ServiceTask_1w5iyc6" targetRef="Task_0micukk" /><bpmn:exclusiveGateway id="ExclusiveGateway_1nevesx" default="SequenceFlow_0usaj3l"><bpmn:incoming>SequenceFlow_1m7uquq</bpmn:incoming><bpmn:outgoing>SequenceFlow_0usaj3l</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0c3pj2r</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_0usaj3l" sourceRef="ExclusiveGateway_1nevesx" targetRef="Gateway_10pi0u6" /><bpmn:sequenceFlow id="SequenceFlow_0c3pj2r" sourceRef="ExclusiveGateway_1nevesx" targetRef="ExclusiveGateway_1at31m2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_072e62y" name="Устанавливаем признак вернувшейся заявки" camunda:expression="false" camunda:resultVariable="cdRejected"><bpmn:incoming>SequenceFlow_1t1gepk</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xn4bia</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_07e3ecq" sourceRef="StartEvent_1" targetRef="Activity_0au2le6" /><bpmn:sequenceFlow id="SequenceFlow_1xn4bia" sourceRef="ServiceTask_072e62y" targetRef="ServiceTask_0h52xqs" /><bpmn:exclusiveGateway id="ExclusiveGateway_1at31m2"><bpmn:incoming>SequenceFlow_0c3pj2r</bpmn:incoming><bpmn:incoming>SequenceFlow_0om285i</bpmn:incoming><bpmn:incoming>Flow_19k01p3</bpmn:incoming><bpmn:outgoing>SequenceFlow_1xb6pi5</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1xb6pi5" sourceRef="ExclusiveGateway_1at31m2" targetRef="Activity_09x17j3" /><bpmn:scriptTask id="ScriptTask_01t68px" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0mv914z</bpmn:incoming><bpmn:outgoing>Flow_1ml0qdw</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_1ptnqfa" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>Flow_1ufuw6z</bpmn:incoming><bpmn:outgoing>Flow_1o0j36x</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_00kzpq4" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>Flow_1qqhd11</bpmn:incoming><bpmn:outgoing>Flow_1pu628u</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_0uumxt3" name="Технический блок: Копируем instanceId" scriptFormat="javascript"><bpmn:incoming>Flow_1pu628u</bpmn:incoming><bpmn:outgoing>SequenceFlow_0u4yyq6</bpmn:outgoing><bpmn:script>execution.setVariable('instanceId', instanceIdCopy)
execution.setVariable('templateId', templateIdCopy)</bpmn:script></bpmn:scriptTask><bpmn:scriptTask id="ScriptTask_1gpzlaj" name="Технический блок: Создаем буфер" scriptFormat="javascript"><bpmn:incoming>SequenceFlow_0sckeot</bpmn:incoming><bpmn:outgoing>SequenceFlow_0so1cu7</bpmn:outgoing><bpmn:script>execution.setVariable('instanceIdCopy', instanceId);
execution.setVariable('templateIdCopy', templateId)</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_0so1cu7" sourceRef="ScriptTask_1gpzlaj" targetRef="ServiceTask_1a0rnql" /><bpmn:serviceTask id="ServiceTask_1nhc5np" name="Записываем в объект ID клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_ID_Client?incrementVersion=true&amp;value=${clientPrimaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ynvwgp</bpmn:incoming><bpmn:outgoing>SequenceFlow_1cuojzr</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1cuojzr" sourceRef="ServiceTask_1nhc5np" targetRef="ServiceTask_1bwkntl" /><bpmn:sequenceFlow id="SequenceFlow_0ont7bs" sourceRef="ServiceTask_0iib0v5" targetRef="ServiceTask_0wj5pgl" /><bpmn:serviceTask id="ServiceTask_1iyqxtl" name="Статус заявки: Заполнение:Заявка отклонена"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Заявка+отклонена</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_12mta0z</bpmn:incoming><bpmn:outgoing>SequenceFlow_1hdf1ob</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1hdf1ob" sourceRef="ServiceTask_1iyqxtl" targetRef="Task_0micukk" /><bpmn:serviceTask id="ServiceTask_15xme30" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1djl1sa</bpmn:incoming><bpmn:outgoing>SequenceFlow_0l6zord</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0l6zord" sourceRef="ServiceTask_15xme30" targetRef="ExclusiveGateway_18a5vta" /><bpmn:exclusiveGateway id="ExclusiveGateway_18a5vta" default="SequenceFlow_0wz61d3"><bpmn:incoming>SequenceFlow_0l6zord</bpmn:incoming><bpmn:outgoing>SequenceFlow_18r6en9</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0wz61d3</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_18r6en9" sourceRef="ExclusiveGateway_18a5vta" targetRef="CallActivity_1xhbxvb"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_0wz61d3" sourceRef="ExclusiveGateway_18a5vta" targetRef="ServiceTask_1xi8p4s" /><bpmn:serviceTask id="ServiceTask_0z9bkxp" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_remake_reason?incrementVersion=true&amp;value=${hlk_reason_return.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_00gaze5</bpmn:incoming><bpmn:outgoing>SequenceFlow_12mta0z</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_12mta0z" sourceRef="ServiceTask_0z9bkxp" targetRef="ServiceTask_1iyqxtl" /><bpmn:serviceTask id="ServiceTask_15o1r2d" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_cancelation_reason?incrementVersion=true&amp;value=${hlk_reason_close.replace(" ","+")}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1y5sbb6</bpmn:incoming><bpmn:outgoing>SequenceFlow_04h5ecy</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_04h5ecy" sourceRef="ServiceTask_15o1r2d" targetRef="ServiceTask_0iib0v5" /><bpmn:serviceTask id="ServiceTask_0e86zwt" name="Создаем книгу" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "book")
.prop("hlk_full_name" , ShortNameCurrentCtpt)
.prop("ShortName" , ShortNameCurrentCtpt)
.prop("hlk_book_owner",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1hpilmx</bpmn:incoming><bpmn:incoming>Flow_19lkm3i</bpmn:incoming><bpmn:outgoing>Flow_1tn06eh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_17mnp7u" name="Получаем вид субсчета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${accountId}/getAttribute/hlk_invoice_subaccount_type</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0u4yyq6</bpmn:incoming><bpmn:outgoing>Flow_130jhoi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="ServiceTask_0bax1sb" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_invoice_subaccount_type" : "${answer}"
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_130jhoi</bpmn:incoming><bpmn:outgoing>SequenceFlow_0clvaly</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0u4yyq6" sourceRef="ScriptTask_0uumxt3" targetRef="ServiceTask_17mnp7u" /><bpmn:sequenceFlow id="SequenceFlow_0clvaly" sourceRef="ServiceTask_0bax1sb" targetRef="CallActivity_10ocghy" /><bpmn:exclusiveGateway id="ExclusiveGateway_0lscfxj" default="SequenceFlow_1m8mcvo"><bpmn:incoming>SequenceFlow_1toh18t</bpmn:incoming><bpmn:outgoing>SequenceFlow_02epu7f</bpmn:outgoing><bpmn:outgoing>SequenceFlow_1m8mcvo</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_02epu7f" sourceRef="ExclusiveGateway_0lscfxj" targetRef="Activity_1412k1z"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${cdRejected == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="SequenceFlow_1m8mcvo" sourceRef="ExclusiveGateway_0lscfxj" targetRef="ExclusiveGateway_0criw3u" /><bpmn:serviceTask id="ServiceTask_1bwkntl" name="Записываем в объект ID партнера"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_partner_id?incrementVersion=true&amp;value=${clientPrimaryId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1cuojzr</bpmn:incoming><bpmn:outgoing>SequenceFlow_173at4s</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_173at4s" sourceRef="ServiceTask_1bwkntl" targetRef="Activity_1ipkbdn" /><bpmn:serviceTask id="ServiceTask_1yfobcp" name="clientPrimaryId =-1" camunda:expression="${execution.setVariable(&#39;clientPrimaryId&#39;, &#39;-1&#39;)}"><bpmn:incoming>SequenceFlow_1qfc4so</bpmn:incoming><bpmn:outgoing>SequenceFlow_0d5uaa7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0d5uaa7" sourceRef="ServiceTask_1yfobcp" targetRef="Activity_16iea6c" /><bpmn:serviceTask id="ServiceTask_00t1fq0" name="Статус заявки &#34;Некорректно заполнены параметры&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Некорректно+заполнены+параметры</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_02dv478</bpmn:incoming><bpmn:outgoing>SequenceFlow_0h0d2db</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0h0d2db" sourceRef="ServiceTask_00t1fq0" targetRef="Task_0micukk" /><bpmn:callActivity id="CallActivity_1fh2o82" name="Подпроцесс проверки ИИН" calledElement="IIN_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1guxshr</bpmn:incoming><bpmn:outgoing>SequenceFlow_1rhrfh1</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="SequenceFlow_1rhrfh1" sourceRef="CallActivity_1fh2o82" targetRef="ExclusiveGateway_103dpji" /><bpmn:serviceTask id="ServiceTask_1hczx18" name="clientType== &#34;ЮЛ&#34;" camunda:expression="ЮЛ" camunda:resultVariable="clientType"><bpmn:incoming>Flow_01mmwkl</bpmn:incoming><bpmn:outgoing>SequenceFlow_06m3htn</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_06m3htn" sourceRef="ServiceTask_1hczx18" targetRef="ServiceTask_1cm0vav" /><bpmn:exclusiveGateway id="ExclusiveGateway_103dpji" default="SequenceFlow_1y3sb2p"><bpmn:incoming>SequenceFlow_1rhrfh1</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y3sb2p</bpmn:outgoing><bpmn:outgoing>SequenceFlow_0c0tetz</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1y3sb2p" sourceRef="ExclusiveGateway_103dpji" targetRef="CallActivity_15rwll5" /><bpmn:sequenceFlow id="SequenceFlow_0c0tetz" sourceRef="ExclusiveGateway_103dpji" targetRef="Task_0micukk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_07t0rg2" name="Статус заявки &#34;Обработка: Параметры заполнены&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Параметры+заполнены</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0cjqw5l</bpmn:incoming><bpmn:outgoing>SequenceFlow_1ftw82l</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1ftw82l" sourceRef="ServiceTask_07t0rg2" targetRef="CallActivity_18ctl89" /><bpmn:callActivity id="CallActivity_15rwll5" name="Подпроцесс проверки Номер документа" calledElement="NumberDocument_Unic"><bpmn:extensionElements><camunda:in variables="all" /><camunda:out variables="all" /></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1y3sb2p</bpmn:incoming><bpmn:outgoing>SequenceFlow_0swuj86</bpmn:outgoing></bpmn:callActivity><bpmn:sequenceFlow id="SequenceFlow_0swuj86" sourceRef="CallActivity_15rwll5" targetRef="ExclusiveGateway_0keqb5g" /><bpmn:exclusiveGateway id="ExclusiveGateway_0keqb5g" default="SequenceFlow_1l9wdru"><bpmn:incoming>SequenceFlow_0swuj86</bpmn:incoming><bpmn:outgoing>SequenceFlow_1l9wdru</bpmn:outgoing><bpmn:outgoing>SequenceFlow_19lot16</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="SequenceFlow_1l9wdru" sourceRef="ExclusiveGateway_0keqb5g" targetRef="ServiceTask_0r436s3" /><bpmn:sequenceFlow id="SequenceFlow_19lot16" sourceRef="ExclusiveGateway_0keqb5g" targetRef="Task_0micukk"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Error== '1'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="ServiceTask_0c85bl3" name="Статус заявки: Заполнение: Подтверждение заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Подтверждение+заявки</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0pmv7nv</bpmn:incoming><bpmn:outgoing>SequenceFlow_0v7s9u3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0v7s9u3" sourceRef="ServiceTask_0c85bl3" targetRef="UserTask_0ldbku4" /><bpmn:serviceTask id="ServiceTask_03jqmdl" name="Статус заявки: Обработка: Создание"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Обработка:+Создание</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0r4whbp</bpmn:incoming><bpmn:outgoing>SequenceFlow_1t1gepk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_1t1gepk" sourceRef="ServiceTask_03jqmdl" targetRef="ServiceTask_072e62y" /><bpmn:serviceTask id="ServiceTask_1cm0vav" name="Статус заявки &#34;Заполнение: Заполнение параметров клиента&#34;"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Заполнение:+Заполнение+параметров+клиента</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_06m3htn</bpmn:incoming><bpmn:outgoing>SequenceFlow_09esusj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_09esusj" sourceRef="ServiceTask_1cm0vav" targetRef="Task_0micukk" /><bpmn:scriptTask id="ScriptTask_1ng2rl3" name="Декодируем url для отправки причины отмены" scriptFormat="groovy" camunda:resultVariable="hlk_reason_return"><bpmn:incoming>Flow_0ktzm4q</bpmn:incoming><bpmn:outgoing>SequenceFlow_00gaze5</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_return = execution.getVariable("hlk_reason_return")

hlk_reason_return = java.net.URLEncoder.encode(hlk_reason_return, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_00gaze5" sourceRef="ScriptTask_1ng2rl3" targetRef="ServiceTask_0z9bkxp" /><bpmn:scriptTask id="ScriptTask_0bsz72u" name="Декодируем url для отправки причины отклонения" scriptFormat="groovy" camunda:resultVariable="hlk_reason_close"><bpmn:incoming>SequenceFlow_1hak0di</bpmn:incoming><bpmn:outgoing>SequenceFlow_1y5sbb6</bpmn:outgoing><bpmn:script>import groovy.*

def hlk_reason_close = execution.getVariable("hlk_reason_close")

hlk_reason_return = java.net.URLEncoder.encode(hlk_reason_close, "UTF-8")</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="SequenceFlow_1y5sbb6" sourceRef="ScriptTask_0bsz72u" targetRef="ServiceTask_15o1r2d" /><bpmn:serviceTask id="ServiceTask_1cd1q1m" name="definition of &#34;key&#34;" camunda:expression="legalEntity" camunda:resultVariable="key"><bpmn:incoming>Flow_07t1qmf</bpmn:incoming><bpmn:outgoing>SequenceFlow_0r4whbp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="SequenceFlow_0r4whbp" sourceRef="ServiceTask_1cd1q1m" targetRef="ServiceTask_03jqmdl" /><bpmn:sequenceFlow id="SequenceFlow_1m7uquq" sourceRef="ExclusiveGateway_0criw3u" targetRef="ExclusiveGateway_1nevesx"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1r2it9m" sourceRef="ServiceTask_0aun3b7" targetRef="ServiceTask_07u2ado" /><bpmn:exclusiveGateway id="Gateway_1lerna4" default="Flow_08436iz"><bpmn:incoming>Flow_1b7z9za</bpmn:incoming><bpmn:outgoing>Flow_08436iz</bpmn:outgoing><bpmn:outgoing>Flow_0jpwkr5</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_00qutj5" name="Формируем сообщение об ошибке" camunda:expression="Таймаут+ожидания+ответа+от+АМЛ" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_08436iz</bpmn:incoming><bpmn:outgoing>Flow_15how9m</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1qp7e41" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_15how9m</bpmn:incoming><bpmn:outgoing>Flow_1cx3l0d</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_15how9m" sourceRef="Activity_00qutj5" targetRef="Activity_1qp7e41" /><bpmn:sequenceFlow id="Flow_08436iz" sourceRef="Gateway_1lerna4" targetRef="Activity_00qutj5" /><bpmn:sequenceFlow id="Flow_0jpwkr5" sourceRef="Gateway_1lerna4" targetRef="ServiceTask_0fcezq4"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1cx3l0d" sourceRef="Activity_1qp7e41" targetRef="Task_0micukk" /><bpmn:subProcess id="Activity_1412k1z"><bpmn:incoming>SequenceFlow_02epu7f</bpmn:incoming><bpmn:outgoing>Flow_00an97v</bpmn:outgoing><bpmn:startEvent id="Event_0ww15ff"><bpmn:outgoing>Flow_0jefd48</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_0cnpjfp"><bpmn:incoming>Flow_0jefd48</bpmn:incoming><bpmn:outgoing>Flow_0uq75zm</bpmn:outgoing><bpmn:outgoing>Flow_0n0ihg9</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_1ecn74c"><bpmn:incoming>Flow_0uq75zm</bpmn:incoming><bpmn:outgoing>Flow_04ewafw</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0f3dg52"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT360S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="Event_0n3r135"><bpmn:incoming>Flow_1h9tg3o</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1bqg933" /></bpmn:endEvent><bpmn:endEvent id="Event_0hf745l"><bpmn:incoming>Flow_16jwuhk</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1lfwllk" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1dksg0t" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_04ewafw</bpmn:incoming><bpmn:outgoing>Flow_1h9tg3o</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_10mk23p" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1dzmjbn</bpmn:incoming><bpmn:outgoing>Flow_16jwuhk</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_16jwuhk" sourceRef="Activity_10mk23p" targetRef="Event_0hf745l" /><bpmn:sequenceFlow id="Flow_1h9tg3o" sourceRef="Activity_1dksg0t" targetRef="Event_0n3r135" /><bpmn:sequenceFlow id="Flow_04ewafw" sourceRef="Event_1ecn74c" targetRef="Activity_1dksg0t" /><bpmn:sequenceFlow id="Flow_0uq75zm" sourceRef="Gateway_0cnpjfp" targetRef="Event_1ecn74c" /><bpmn:sequenceFlow id="Flow_0n0ihg9" sourceRef="Gateway_0cnpjfp" targetRef="Event_04n9kk4" /><bpmn:sequenceFlow id="Flow_0jefd48" sourceRef="Event_0ww15ff" targetRef="Gateway_0cnpjfp" /><bpmn:intermediateCatchEvent id="Event_04n9kk4" camunda:asyncAfter="true"><bpmn:incoming>Flow_0n0ihg9</bpmn:incoming><bpmn:outgoing>Flow_1dzmjbn</bpmn:outgoing><bpmn:messageEventDefinition id="MessageEventDefinition_0btitd3" messageRef="Message_0cewth3" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_1dzmjbn" sourceRef="Event_04n9kk4" targetRef="Activity_10mk23p" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_0z8ajfa"><bpmn:incoming>Flow_00an97v</bpmn:incoming><bpmn:outgoing>Flow_0ynvwgp</bpmn:outgoing><bpmn:outgoing>Flow_07o3zi3</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_00an97v" sourceRef="Activity_1412k1z" targetRef="Gateway_0z8ajfa" /><bpmn:sequenceFlow id="Flow_0ynvwgp" sourceRef="Gateway_0z8ajfa" targetRef="ServiceTask_1nhc5np"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_1s2eady" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0b6vgno</bpmn:incoming><bpmn:outgoing>Flow_172s0pi</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_02yvhcr" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+клиента.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_07o3zi3</bpmn:incoming><bpmn:outgoing>Flow_0b6vgno</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0b6vgno" sourceRef="Activity_02yvhcr" targetRef="Activity_1s2eady" /><bpmn:sequenceFlow id="Flow_07o3zi3" sourceRef="Gateway_0z8ajfa" targetRef="Activity_02yvhcr"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_172s0pi" sourceRef="Activity_1s2eady" targetRef="Task_0micukk" /><bpmn:subProcess id="Activity_09x17j3"><bpmn:incoming>SequenceFlow_1xb6pi5</bpmn:incoming><bpmn:outgoing>Flow_001z9at</bpmn:outgoing><bpmn:startEvent id="Event_03pg736"><bpmn:outgoing>Flow_19bgyhl</bpmn:outgoing></bpmn:startEvent><bpmn:serviceTask id="Activity_161h012" name="Создаем заявку на регистрацию счета" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "account")
.prop("hlk_Account_Number" , accountNumber)
.prop("hlk_account_type_contract" , "Брокерское обслуживание ЮЛ")
.prop("hlk_account_number_contract" , accountNumber.substring(accountNumber.length()-6))
.prop("hlk_app_date" , regDate)
.prop("hlk_invoice_subaccount_type" , "Субсчет держателя")
.prop("hlk_account_type_holder" , hlk_account_type_holder)
.prop("hlk_InContract_ID_Client" , clientPrimaryId)
.prop("hlk_client_app",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.prop("hlk_counterparty_type","0")
.prop("hlk_autostart" , true)
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_07iei45</bpmn:incoming><bpmn:outgoing>Flow_0fqf007</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="Gateway_0d0lzi5" camunda:asyncAfter="true" camunda:exclusive="false"><bpmn:incoming>Flow_0tgd0aw</bpmn:incoming><bpmn:outgoing>Flow_0ha5dal</bpmn:outgoing><bpmn:outgoing>Flow_07iei45</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="Activity_0ionn41" name="Ожидаем сообщения о готовности к старту от подпроцесса" camunda:asyncAfter="true" messageRef="Message_0qkob8k"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">accountCreated</camunda:outputParameter><camunda:outputParameter name="accountProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="accountId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="accountTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="accountType">${type}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="accountEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_0ha5dal</bpmn:incoming><bpmn:outgoing>Flow_1gusycj</bpmn:outgoing></bpmn:receiveTask><bpmn:parallelGateway id="Gateway_020jyid"><bpmn:incoming>Flow_1gusycj</bpmn:incoming><bpmn:incoming>Flow_0fqf007</bpmn:incoming><bpmn:outgoing>Flow_0bq8tur</bpmn:outgoing></bpmn:parallelGateway><bpmn:endEvent id="Event_11pl4cp"><bpmn:incoming>Flow_0qamnkb</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0kc9v7i" /></bpmn:endEvent><bpmn:parallelGateway id="Gateway_14g2jbn"><bpmn:incoming>Flow_19bgyhl</bpmn:incoming><bpmn:outgoing>Flow_18glmaa</bpmn:outgoing><bpmn:outgoing>Flow_0tgd0aw</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_08ihm6t"><bpmn:incoming>Flow_18glmaa</bpmn:incoming><bpmn:outgoing>Flow_1wry93k</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0hfhz3f"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT300S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0zguoj0" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0bq8tur</bpmn:incoming><bpmn:outgoing>Flow_0qamnkb</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0vseybf" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_1wry93k</bpmn:incoming><bpmn:outgoing>Flow_1t827jr</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1uscilf"><bpmn:incoming>Flow_1t827jr</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1aiw927" /></bpmn:endEvent><bpmn:sequenceFlow id="Flow_1t827jr" sourceRef="Activity_0vseybf" targetRef="Event_1uscilf" /><bpmn:sequenceFlow id="Flow_1wry93k" sourceRef="Event_08ihm6t" targetRef="Activity_0vseybf" /><bpmn:sequenceFlow id="Flow_0qamnkb" sourceRef="Activity_0zguoj0" targetRef="Event_11pl4cp" /><bpmn:sequenceFlow id="Flow_18glmaa" sourceRef="Gateway_14g2jbn" targetRef="Event_08ihm6t" /><bpmn:sequenceFlow id="Flow_0tgd0aw" sourceRef="Gateway_14g2jbn" targetRef="Gateway_0d0lzi5" /><bpmn:sequenceFlow id="Flow_19bgyhl" sourceRef="Event_03pg736" targetRef="Gateway_14g2jbn" /><bpmn:sequenceFlow id="Flow_0bq8tur" sourceRef="Gateway_020jyid" targetRef="Activity_0zguoj0" /><bpmn:sequenceFlow id="Flow_1gusycj" sourceRef="Activity_0ionn41" targetRef="Gateway_020jyid" /><bpmn:sequenceFlow id="Flow_0ha5dal" sourceRef="Gateway_0d0lzi5" targetRef="Activity_0ionn41" /><bpmn:sequenceFlow id="Flow_0fqf007" sourceRef="Activity_161h012" targetRef="Gateway_020jyid" /><bpmn:sequenceFlow id="Flow_07iei45" sourceRef="Gateway_0d0lzi5" targetRef="Activity_161h012" /></bpmn:subProcess><bpmn:exclusiveGateway id="Gateway_11d00mg" default="SequenceFlow_0mv914z"><bpmn:incoming>Flow_001z9at</bpmn:incoming><bpmn:outgoing>SequenceFlow_0mv914z</bpmn:outgoing><bpmn:outgoing>Flow_03abo14</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_001z9at" sourceRef="Activity_09x17j3" targetRef="Gateway_11d00mg" /><bpmn:serviceTask id="Activity_1yhkvv2" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+заявки+на+регистрацию+счета.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_03abo14</bpmn:incoming><bpmn:outgoing>Flow_1r9jmky</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0n2ircn" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${errorDescription}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1r9jmky</bpmn:incoming><bpmn:incoming>Flow_0rtl31b</bpmn:incoming><bpmn:outgoing>Flow_1wi2oiu</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1r9jmky" sourceRef="Activity_1yhkvv2" targetRef="Activity_0n2ircn" /><bpmn:sequenceFlow id="Flow_03abo14" sourceRef="Gateway_11d00mg" targetRef="Activity_1yhkvv2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1wi2oiu" sourceRef="Activity_0n2ircn" targetRef="Task_0micukk" /><bpmn:subProcess id="Activity_0rhqbck"><bpmn:incoming>Flow_14bueir</bpmn:incoming><bpmn:outgoing>Flow_1l2pu98</bpmn:outgoing><bpmn:startEvent id="Event_03uw820"><bpmn:outgoing>Flow_1fi3190</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_0yvlkjn" camunda:asyncAfter="true" camunda:exclusive="false"><bpmn:incoming>Flow_0hroyuh</bpmn:incoming><bpmn:outgoing>Flow_15czeuh</bpmn:outgoing><bpmn:outgoing>Flow_1qimq24</bpmn:outgoing></bpmn:parallelGateway><bpmn:parallelGateway id="Gateway_1l8t5q9"><bpmn:incoming>Flow_1fi3190</bpmn:incoming><bpmn:outgoing>Flow_0mwnkpk</bpmn:outgoing><bpmn:outgoing>Flow_0hroyuh</bpmn:outgoing></bpmn:parallelGateway><bpmn:intermediateCatchEvent id="Event_1u1goqf"><bpmn:incoming>Flow_0mwnkpk</bpmn:incoming><bpmn:outgoing>Flow_0w05m68</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0j968h1"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT480S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_1hbg8wr" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0w05m68</bpmn:incoming><bpmn:outgoing>Flow_1de7nkn</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1pllu8w"><bpmn:incoming>Flow_1de7nkn</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_14mx01g" /></bpmn:endEvent><bpmn:parallelGateway id="Gateway_1enm4un"><bpmn:incoming>Flow_04tmkmh</bpmn:incoming><bpmn:incoming>Flow_0lrraw0</bpmn:incoming><bpmn:outgoing>Flow_0aubjcn</bpmn:outgoing></bpmn:parallelGateway><bpmn:serviceTask id="Activity_027z79n" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0aubjcn</bpmn:incoming><bpmn:outgoing>Flow_05p8730</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_1fg1icp"><bpmn:incoming>Flow_05p8730</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_16qmpfk" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1xgibh6" name="Создаем заявку на регистрацию договора" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_EDS_Confirmation" , false)
.prop("hlk_executor" , initiator)
.prop("hlk_contract_status" , "Открыт")
.prop("hlk_account_type_contract" , "Брокерское обслуживание ЮЛ")
.prop("hlk_source_doc" , "Вручную")
.prop("ObjectType" , "agreement")
.prop("hlk_app_date" , regDate)
.prop("hlk_Contract_Start_Date" , regDate)
.prop("hlk_InContract_ID_Client" , clientPrimaryId)
.prop("hlk_client_FL",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.prop("hlk_counterparty_type","0")
.prop("hlk_Tariff_Plan" , "Стандартный")
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1qimq24</bpmn:incoming><bpmn:outgoing>Flow_0lrraw0</bpmn:outgoing></bpmn:serviceTask><bpmn:receiveTask id="Activity_0i48q7k" name="Ожидаем сообщения о готовности к старту от подпроцесса" camunda:asyncAfter="true" messageRef="Message_11r8f6w"><bpmn:extensionElements><camunda:inputOutput><camunda:outputParameter name="ez_step">agreementCreated</camunda:outputParameter><camunda:outputParameter name="agreementProcess">${processKey}</camunda:outputParameter><camunda:outputParameter name="agreementId">${instanceId}</camunda:outputParameter><camunda:outputParameter name="agreementTemplateId">${templateId}</camunda:outputParameter><camunda:outputParameter name="agreementType">${type}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectEditorUrl">${ezdocObjectEditorUrl}</camunda:outputParameter><camunda:outputParameter name="agreementEzDocObjectUrl">${ezdocObjectUrl}</camunda:outputParameter></camunda:inputOutput></bpmn:extensionElements><bpmn:incoming>Flow_15czeuh</bpmn:incoming><bpmn:outgoing>Flow_04tmkmh</bpmn:outgoing></bpmn:receiveTask><bpmn:sequenceFlow id="Flow_04tmkmh" sourceRef="Activity_0i48q7k" targetRef="Gateway_1enm4un" /><bpmn:sequenceFlow id="Flow_0lrraw0" sourceRef="Activity_1xgibh6" targetRef="Gateway_1enm4un" /><bpmn:sequenceFlow id="Flow_1de7nkn" sourceRef="Activity_1hbg8wr" targetRef="Event_1pllu8w" /><bpmn:sequenceFlow id="Flow_05p8730" sourceRef="Activity_027z79n" targetRef="Event_1fg1icp" /><bpmn:sequenceFlow id="Flow_0aubjcn" sourceRef="Gateway_1enm4un" targetRef="Activity_027z79n" /><bpmn:sequenceFlow id="Flow_0w05m68" sourceRef="Event_1u1goqf" targetRef="Activity_1hbg8wr" /><bpmn:sequenceFlow id="Flow_0mwnkpk" sourceRef="Gateway_1l8t5q9" targetRef="Event_1u1goqf" /><bpmn:sequenceFlow id="Flow_0hroyuh" sourceRef="Gateway_1l8t5q9" targetRef="Gateway_0yvlkjn" /><bpmn:sequenceFlow id="Flow_1fi3190" sourceRef="Event_03uw820" targetRef="Gateway_1l8t5q9" /><bpmn:sequenceFlow id="Flow_15czeuh" sourceRef="Gateway_0yvlkjn" targetRef="Activity_0i48q7k" /><bpmn:sequenceFlow id="Flow_1qimq24" sourceRef="Gateway_0yvlkjn" targetRef="Activity_1xgibh6" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_1ml0qdw" sourceRef="ScriptTask_01t68px" targetRef="Event_02q4y91" /><bpmn:exclusiveGateway id="Gateway_0500g82" default="Flow_1ufuw6z"><bpmn:incoming>Flow_1l2pu98</bpmn:incoming><bpmn:outgoing>Flow_0dehhe5</bpmn:outgoing><bpmn:outgoing>Flow_1ufuw6z</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1l2pu98" sourceRef="Activity_0rhqbck" targetRef="Gateway_0500g82" /><bpmn:serviceTask id="Activity_0wzzrqc" name="Формируем сообщение об ошибке" camunda:expression="Ошибка+при+создании+заявки+на+регистрацию+договора.+Проверьте+integrationBuffer" camunda:resultVariable="errorDescription"><bpmn:incoming>Flow_0dehhe5</bpmn:incoming><bpmn:outgoing>Flow_0rtl31b</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0dehhe5" sourceRef="Gateway_0500g82" targetRef="Activity_0wzzrqc"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${timeout == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0rtl31b" sourceRef="Activity_0wzzrqc" targetRef="Activity_0n2ircn" /><bpmn:sequenceFlow id="Flow_1ufuw6z" sourceRef="Gateway_0500g82" targetRef="ScriptTask_1ptnqfa" /><bpmn:serviceTask id="Activity_02lj2bc" name="Достаем праймари айди заявки на счет"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "book",
	"filter": {
		"_id": ObjectId("${accountId}")
	},
	"projection": {
		"primaryId": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="accountPrimaryId"><camunda:script scriptFormat="javascript">JSON.parse(response).cursor.firstBatch[0].primaryId</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1o0j36x</bpmn:incoming><bpmn:outgoing>Flow_1p7jixw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1o0j36x" sourceRef="ScriptTask_1ptnqfa" targetRef="Activity_02lj2bc" /><bpmn:serviceTask id="Activity_1q2kaq0" name="Записываем ссылку на заявку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_accountApp_id",S("{}")
.prop("value" , ShortName)
.prop("primaryId" , accountPrimaryId)
.prop("source","book"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1p7jixw</bpmn:incoming><bpmn:outgoing>Flow_1tajun2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1p7jixw" sourceRef="Activity_02lj2bc" targetRef="Activity_1q2kaq0" /><bpmn:serviceTask id="Activity_19k9a5z" name="Записываем ссылку на заявку"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_agreementApp_id",S("{}")
.prop("value" , ShortName)
.prop("primaryId" , agreementPrimaryId)
.prop("source","book"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ga0tn3</bpmn:incoming><bpmn:outgoing>Flow_034rxjp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1ga0tn3" sourceRef="ServiceTask_1bfkstr" targetRef="Activity_19k9a5z" /><bpmn:sequenceFlow id="Flow_1tajun2" sourceRef="Activity_1q2kaq0" targetRef="ServiceTask_1bfkstr" /><bpmn:sequenceFlow id="Flow_034rxjp" sourceRef="Activity_19k9a5z" targetRef="Gateway_02ldjgw" /><bpmn:parallelGateway id="Gateway_02ldjgw"><bpmn:incoming>Flow_034rxjp</bpmn:incoming><bpmn:outgoing>Flow_0gug36a</bpmn:outgoing><bpmn:outgoing>Flow_0o6yf2j</bpmn:outgoing></bpmn:parallelGateway><bpmn:sequenceFlow id="Flow_1bbi0it" sourceRef="CallActivity_0x2df99" targetRef="Gateway_0h7ueo2" /><bpmn:parallelGateway id="Gateway_0h7ueo2"><bpmn:incoming>Flow_1bbi0it</bpmn:incoming><bpmn:incoming>Flow_03n1h1e</bpmn:incoming><bpmn:outgoing>Flow_1qqhd11</bpmn:outgoing></bpmn:parallelGateway><bpmn:sequenceFlow id="Flow_0gug36a" sourceRef="Gateway_02ldjgw" targetRef="CallActivity_0x2df99" /><bpmn:sequenceFlow id="Flow_0o6yf2j" sourceRef="Gateway_02ldjgw" targetRef="CallActivity_024w4yw" /><bpmn:sequenceFlow id="Flow_03n1h1e" sourceRef="CallActivity_024w4yw" targetRef="Gateway_0h7ueo2" /><bpmn:sequenceFlow id="Flow_1qqhd11" sourceRef="Gateway_0h7ueo2" targetRef="ScriptTask_00kzpq4" /><bpmn:sequenceFlow id="Flow_1pu628u" sourceRef="ScriptTask_00kzpq4" targetRef="ScriptTask_0uumxt3" /><bpmn:sequenceFlow id="Flow_130jhoi" sourceRef="ServiceTask_17mnp7u" targetRef="ServiceTask_0bax1sb" /><bpmn:subProcess id="Activity_0bc9pac"><bpmn:incoming>Flow_0f6lgd5</bpmn:incoming><bpmn:outgoing>Flow_1vcnstr</bpmn:outgoing><bpmn:startEvent id="Event_0oqsrfk"><bpmn:outgoing>Flow_1c0v51d</bpmn:outgoing></bpmn:startEvent><bpmn:parallelGateway id="Gateway_14j7upn"><bpmn:incoming>Flow_1c0v51d</bpmn:incoming><bpmn:outgoing>Flow_1nfbpzw</bpmn:outgoing><bpmn:outgoing>Flow_15l8vu5</bpmn:outgoing><bpmn:outgoing>Flow_0eouevf</bpmn:outgoing></bpmn:parallelGateway><bpmn:receiveTask id="Activity_0ddp28j" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_19kfs5a"><bpmn:incoming>Flow_15l8vu5</bpmn:incoming><bpmn:outgoing>Flow_17ko9yc</bpmn:outgoing></bpmn:receiveTask><bpmn:userTask id="Activity_13a7i6z" name="Возврат к заполнению" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;: &#34;Reject&#34;, &#34;label&#34;: &#34;Возврат на доработку&#34;, &#34;type&#34;:&#34;fillingParam&#34;,&#34;params&#34;: [  {&#34;name&#34;: &#34;hlk_reason_return&#34;, &#34;label&#34;: &#34;Причина возврата на доработку&#34;, &#34;type&#34;: &#34;string&#34;} ]}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1nfbpzw</bpmn:incoming><bpmn:outgoing>Flow_17sexef</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="Activity_0wlr4yd" name="Устанавливаем признак" camunda:expression="true" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_17sexef</bpmn:incoming><bpmn:outgoing>Flow_0csv8v0</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_0o0mov8"><bpmn:incoming>Flow_0csv8v0</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0e3dzap" /></bpmn:endEvent><bpmn:endEvent id="Event_1siy9wb"><bpmn:incoming>Flow_1yblupa</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0lugr71" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1ssz7j7" name="Устанавливаем признак" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_17ko9yc</bpmn:incoming><bpmn:outgoing>Flow_1yblupa</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1yblupa" sourceRef="Activity_1ssz7j7" targetRef="Event_1siy9wb" /><bpmn:sequenceFlow id="Flow_17ko9yc" sourceRef="Activity_0ddp28j" targetRef="Activity_1ssz7j7" /><bpmn:sequenceFlow id="Flow_0csv8v0" sourceRef="Activity_0wlr4yd" targetRef="Event_0o0mov8" /><bpmn:sequenceFlow id="Flow_17sexef" sourceRef="Activity_13a7i6z" targetRef="Activity_0wlr4yd" /><bpmn:sequenceFlow id="Flow_1nfbpzw" sourceRef="Gateway_14j7upn" targetRef="Activity_13a7i6z" /><bpmn:sequenceFlow id="Flow_15l8vu5" sourceRef="Gateway_14j7upn" targetRef="Activity_0ddp28j" /><bpmn:sequenceFlow id="Flow_1c0v51d" sourceRef="Event_0oqsrfk" targetRef="Gateway_14j7upn" /><bpmn:userTask id="Activity_1jd52xx" name="Ручная привязка МТ 539" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Otbor539&#34;,&#34;label&#34;:&#34;Ручной отбор MT539&#34;,&#34;type&#34;:&#34;swift&#34;}" type="string" /></camunda:formData><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener></bpmn:extensionElements><bpmn:incoming>Flow_1wuly57</bpmn:incoming><bpmn:incoming>Flow_0eouevf</bpmn:incoming><bpmn:outgoing>Flow_0bn4al9</bpmn:outgoing></bpmn:userTask><bpmn:serviceTask id="Activity_0xrfgpf" name="Устанавливаем признак isRejected = false" camunda:expression="false" camunda:resultVariable="isRejected"><bpmn:incoming>Flow_1u7if2g</bpmn:incoming><bpmn:outgoing>Flow_1mw9j5w</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_15xh627"><bpmn:incoming>Flow_1mw9j5w</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_0crf865" /></bpmn:endEvent><bpmn:serviceTask id="Activity_1dyqilm" name="Проводим метчинг"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/condition/evaluate/539FindPair?leftType=SWIFT&amp;leftId=${swiftId}&amp;rightType=BOOK&amp;rightId=${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:outputParameter name="matchingResult">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0bn4al9</bpmn:incoming><bpmn:outgoing>Flow_1g0rfq6</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1ln5k45" default="Flow_1u7if2g"><bpmn:incoming>Flow_1g0rfq6</bpmn:incoming><bpmn:outgoing>Flow_1u7if2g</bpmn:outgoing><bpmn:outgoing>Flow_04t7ro4</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1cl1i9e" name="Меняем статус заявки SWIFT ошибка"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ошибка+прикрепленного+SWIFT</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_04t7ro4</bpmn:incoming><bpmn:outgoing>Flow_1wuly57</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1wuly57" sourceRef="Activity_1cl1i9e" targetRef="Activity_1jd52xx" /><bpmn:sequenceFlow id="Flow_0bn4al9" sourceRef="Activity_1jd52xx" targetRef="Activity_1dyqilm" /><bpmn:sequenceFlow id="Flow_1u7if2g" sourceRef="Gateway_1ln5k45" targetRef="Activity_0xrfgpf" /><bpmn:sequenceFlow id="Flow_1mw9j5w" sourceRef="Activity_0xrfgpf" targetRef="Event_15xh627" /><bpmn:sequenceFlow id="Flow_1g0rfq6" sourceRef="Activity_1dyqilm" targetRef="Gateway_1ln5k45" /><bpmn:sequenceFlow id="Flow_04t7ro4" sourceRef="Gateway_1ln5k45" targetRef="Activity_1cl1i9e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${matchingResult == 'false'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0eouevf" sourceRef="Gateway_14j7upn" targetRef="Activity_1jd52xx" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_0f6lgd5" sourceRef="ServiceTask_129llks" targetRef="Activity_0bc9pac" /><bpmn:exclusiveGateway id="Gateway_1uqar3u" default="Flow_1dthgl0"><bpmn:incoming>Flow_1vcnstr</bpmn:incoming><bpmn:outgoing>Flow_105vvtj</bpmn:outgoing><bpmn:outgoing>Flow_1dthgl0</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1vcnstr" sourceRef="Activity_0bc9pac" targetRef="Gateway_1uqar3u" /><bpmn:sequenceFlow id="Flow_105vvtj" sourceRef="Gateway_1uqar3u" targetRef="ServiceTask_00myvbt"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isRejected == "true"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:receiveTask id="Activity_0fw91rl" name="539 ждем" camunda:asyncAfter="true" messageRef="Message_0gwe1k7"><bpmn:incoming>Flow_19uw9xq</bpmn:incoming><bpmn:outgoing>Flow_1j3qxei</bpmn:outgoing></bpmn:receiveTask><bpmn:serviceTask id="Activity_1yxlcty" name="Сохраняем 539" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/attach/${swiftId}?type=BOOK&amp;instanceId=${accountId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_027ygqe</bpmn:incoming><bpmn:outgoing>Flow_1xggfa1</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1aiajc3" name="Смотрим статус"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_OPERATION_STATUS</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="answer">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1j3qxei</bpmn:incoming><bpmn:incoming>Flow_1dthgl0</bpmn:incoming><bpmn:outgoing>Flow_0ycn0a8</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_009ro7w" name="Меняем статус заявки SWIFT принят"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0bx5car</bpmn:incoming><bpmn:outgoing>Flow_0ngkqe5</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_1c9qa2y" name="Меняем статус заявки SWIFT принят для счета"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${accountId}?label=SWIFT+принят</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ngkqe5</bpmn:incoming><bpmn:outgoing>Flow_19uw9xq</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_19uw9xq" sourceRef="Activity_1c9qa2y" targetRef="Activity_0fw91rl" /><bpmn:sequenceFlow id="Flow_1j3qxei" sourceRef="Activity_0fw91rl" targetRef="Activity_1aiajc3" /><bpmn:sequenceFlow id="Flow_0ycn0a8" sourceRef="Activity_1aiajc3" targetRef="Activity_0ulvgdh" /><bpmn:sequenceFlow id="Flow_0ngkqe5" sourceRef="Activity_009ro7w" targetRef="Activity_1c9qa2y" /><bpmn:exclusiveGateway id="Gateway_1u6s6nm" default="Flow_0aefvk7"><bpmn:incoming>Flow_1xggfa1</bpmn:incoming><bpmn:outgoing>Flow_0bx5car</bpmn:outgoing><bpmn:outgoing>Flow_181bnhx</bpmn:outgoing><bpmn:outgoing>Flow_0aefvk7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1xggfa1" sourceRef="Activity_1yxlcty" targetRef="Gateway_1u6s6nm" /><bpmn:sequenceFlow id="Flow_0bx5car" sourceRef="Gateway_1u6s6nm" targetRef="Activity_009ro7w"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "30"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1dthgl0" sourceRef="Gateway_1uqar3u" targetRef="Activity_1aiajc3" /><bpmn:sequenceFlow id="Flow_181bnhx" sourceRef="Gateway_1u6s6nm" targetRef="ServiceTask_0y4dhe5"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == "00"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0q03p52" sourceRef="ServiceTask_0y4dhe5" targetRef="ScriptTask_0yo5pqi" /><bpmn:sequenceFlow id="Flow_0zmndjo" sourceRef="ScriptTask_0yo5pqi" targetRef="ScriptTask_0ttp7ea" /><bpmn:sequenceFlow id="Flow_0av2aj7" sourceRef="ScriptTask_0ttp7ea" targetRef="ExclusiveGateway_1g03dpo" /><bpmn:sequenceFlow id="Flow_11toe0w" sourceRef="ServiceTask_1f0pr55" targetRef="Gateway_0dgr5j5" /><bpmn:sequenceFlow id="Flow_1amd180" sourceRef="CallActivity_0q17ioc" targetRef="ServiceTask_0cxa9nn" /><bpmn:exclusiveGateway id="Gateway_0pvvyil" default="Flow_1wmx8ns"><bpmn:incoming>Flow_0d8ogsv</bpmn:incoming><bpmn:outgoing>Flow_1bqkl8r</bpmn:outgoing><bpmn:outgoing>Flow_1wmx8ns</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1t4zwsv" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0dpt0qo</bpmn:incoming><bpmn:outgoing>Flow_0j8bac4</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_0f7ds41" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0j8bac4</bpmn:incoming><bpmn:outgoing>Flow_1ox1xbe</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_0q6ugvo" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_1bqkl8r</bpmn:incoming><bpmn:outgoing>Flow_0dpt0qo</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1qe4rfl" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ox1xbe</bpmn:incoming><bpmn:outgoing>Flow_0fxiznl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0fxiznl" sourceRef="Activity_1qe4rfl" targetRef="ServiceTask_07u2ado" /><bpmn:sequenceFlow id="Flow_1bqkl8r" sourceRef="Gateway_0pvvyil" targetRef="Activity_0q6ugvo"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0dpt0qo" sourceRef="Activity_0q6ugvo" targetRef="Activity_1t4zwsv" /><bpmn:sequenceFlow id="Flow_0j8bac4" sourceRef="Activity_1t4zwsv" targetRef="Activity_0f7ds41" /><bpmn:sequenceFlow id="Flow_1ox1xbe" sourceRef="Activity_0f7ds41" targetRef="Activity_1qe4rfl"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0d8ogsv" sourceRef="ServiceTask_07u2ado" targetRef="Gateway_0pvvyil" /><bpmn:sequenceFlow id="Flow_1wmx8ns" sourceRef="Gateway_0pvvyil" targetRef="Event_0ofpk23" /><bpmn:exclusiveGateway id="Gateway_1u9x874" default="Flow_0esbnm7"><bpmn:incoming>Flow_0n86y8v</bpmn:incoming><bpmn:outgoing>Flow_1gnx8by</bpmn:outgoing><bpmn:outgoing>Flow_0esbnm7</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1gzcx67" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1m49a2l</bpmn:incoming><bpmn:outgoing>Flow_1l3yrwp</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_1bs94m4" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_1l3yrwp</bpmn:incoming><bpmn:outgoing>Flow_0h0l7f1</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_1mcle75" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_1gnx8by</bpmn:incoming><bpmn:outgoing>Flow_1m49a2l</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0tgvowp" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0h0l7f1</bpmn:incoming><bpmn:outgoing>Flow_0b4p8wf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1gnx8by" sourceRef="Gateway_1u9x874" targetRef="Activity_1mcle75"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1m49a2l" sourceRef="Activity_1mcle75" targetRef="Activity_1gzcx67" /><bpmn:sequenceFlow id="Flow_1l3yrwp" sourceRef="Activity_1gzcx67" targetRef="Activity_1bs94m4" /><bpmn:sequenceFlow id="Flow_0h0l7f1" sourceRef="Activity_1bs94m4" targetRef="Activity_0tgvowp"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0esbnm7" sourceRef="Gateway_1u9x874" targetRef="ServiceTask_11neoxf" /><bpmn:exclusiveGateway id="Gateway_1dd7y65" default="Flow_0kh2o51"><bpmn:incoming>Flow_1ctk0os</bpmn:incoming><bpmn:outgoing>Flow_06sg7pw</bpmn:outgoing><bpmn:outgoing>Flow_0kh2o51</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_0wu387f" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1ii8dwm</bpmn:incoming><bpmn:outgoing>Flow_0zt4xlf</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_1jm8uyc" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_0zt4xlf</bpmn:incoming><bpmn:outgoing>Flow_0oy1cfa</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_15az5fv" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_06sg7pw</bpmn:incoming><bpmn:outgoing>Flow_1ii8dwm</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1w2rrjt" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0oy1cfa</bpmn:incoming><bpmn:outgoing>Flow_09mfqq8</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_06sg7pw" sourceRef="Gateway_1dd7y65" targetRef="Activity_15az5fv"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1ii8dwm" sourceRef="Activity_15az5fv" targetRef="Activity_0wu387f" /><bpmn:sequenceFlow id="Flow_0zt4xlf" sourceRef="Activity_0wu387f" targetRef="Activity_1jm8uyc" /><bpmn:sequenceFlow id="Flow_0oy1cfa" sourceRef="Activity_1jm8uyc" targetRef="Activity_1w2rrjt"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_1ctk0os" sourceRef="ServiceTask_11neoxf" targetRef="Gateway_1dd7y65" /><bpmn:sequenceFlow id="Flow_09mfqq8" sourceRef="Activity_1w2rrjt" targetRef="ServiceTask_11neoxf" /><bpmn:sequenceFlow id="Flow_0kh2o51" sourceRef="Gateway_1dd7y65" targetRef="CallActivity_18mndl7" /><bpmn:serviceTask id="Activity_0060hx2" name="Определяем инстанс айди клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
	"find": "legalEntity",
	"filter": {
		"primaryId": "${clientPrimaryId}",
	},
	"projection": {
		"_id": 1
	}
}</camunda:inputParameter><camunda:outputParameter name="clientInstanceId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_102of6r</bpmn:incoming><bpmn:outgoing>Flow_1udirji</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0a0phog" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/legalEntity/${clientInstanceId}/setAttribute/hlk_asset_account_open?incrementVersion=false&amp;value=true</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1udirji</bpmn:incoming><bpmn:outgoing>Flow_1hpilmx</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1udirji" sourceRef="Activity_0060hx2" targetRef="Activity_0a0phog" /><bpmn:sequenceFlow id="Flow_102of6r" sourceRef="CallActivity_18mndl7" targetRef="Activity_0060hx2" /><bpmn:sequenceFlow id="Flow_1hpilmx" sourceRef="Activity_0a0phog" targetRef="ServiceTask_0e86zwt" /><bpmn:exclusiveGateway id="Gateway_1ccghl5" default="Flow_0xj401y"><bpmn:incoming>Flow_1tn06eh</bpmn:incoming><bpmn:outgoing>Flow_0vglp1q</bpmn:outgoing><bpmn:outgoing>Flow_0xj401y</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1lr2j02" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=${message}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jyrgya</bpmn:incoming><bpmn:outgoing>Flow_03hql81</bpmn:outgoing></bpmn:serviceTask><bpmn:userTask id="Activity_0x1d8ha" name="Решаем что делать" camunda:candidateGroups="cb_directordp, cb_headmiddleofice, cb_managermiddleoffice, jira-users"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocTask" value="true" /><camunda:property name="ezdocTaskType" value="buttons" /></camunda:properties><camunda:taskListener event="create"><camunda:script scriptFormat="javascript">try {
              var formData = task.execution.processEngineServices.formService.getTaskFormData(task.id);
              var data = {};
              data.taskId = task.id;
              data.templateId = templateId;
              data.formKey = formData.formKey;
              var formFields = [];
              formData.formFields.forEach(function (a) {formFields.push(a.id)});
              data.formFields = formFields;

              httpPost(ezdocUrl + "/api/camunda/common/taskNotify?type=" + type + "&amp;instanceId=" + instanceId, JSON.stringify(data));
              }
              catch(error) {}

              /*************
              UTILITY FUNCTIONS
              *************/
              function httpPost(e,t,n){n=n||"application/json;charset=UTF-8";var a=new java.net.URL(e).openConnection();return a.requestMethod="POST",a.setRequestProperty("Content-Type",n),a.setRequestProperty("Accept-Charset", "UTF-8"),a.doOutput=!0,write(a.outputStream,t),asResponse(a)}function asResponse(e){return{data:read(e.inputStream),statusCode:e.responseCode}}function write(e,t){var n=new java.io.DataOutputStream(e);n.writeChars(t),n.flush(),n.close()}function read(e){for(var t,n=new java.io.BufferedReader(new java.io.InputStreamReader(e)),a=new java.lang.StringBuffer;null!=(t=n.readLine());)a.append(t);return n.close(),a.toString()}</camunda:script></camunda:taskListener><camunda:formData><camunda:formField id="{&#34;id&#34;:&#34;Retry&#34;,&#34;label&#34;:&#34;Повторить попытку отправки&#34;,&#34;type&#34;:&#34;simple&#34;}" type="string" /></camunda:formData></bpmn:extensionElements><bpmn:incoming>Flow_03hql81</bpmn:incoming><bpmn:outgoing>Flow_1xhegh3</bpmn:outgoing></bpmn:userTask><bpmn:scriptTask id="Activity_1q9twod" name="Обрабатываем сообщение об ошибке" scriptFormat="javascript" camunda:resultVariable="message"><bpmn:incoming>Flow_0vglp1q</bpmn:incoming><bpmn:outgoing>Flow_0jyrgya</bpmn:outgoing><bpmn:script>encodeURIComponent(message);</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_1c99kx9" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1xhegh3</bpmn:incoming><bpmn:outgoing>Flow_19lkm3i</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0vglp1q" sourceRef="Gateway_1ccghl5" targetRef="Activity_1q9twod"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${status == "ERROR"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0jyrgya" sourceRef="Activity_1q9twod" targetRef="Activity_1lr2j02" /><bpmn:sequenceFlow id="Flow_03hql81" sourceRef="Activity_1lr2j02" targetRef="Activity_0x1d8ha" /><bpmn:sequenceFlow id="Flow_1xhegh3" sourceRef="Activity_0x1d8ha" targetRef="Activity_1c99kx9"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == "Retry"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_19lkm3i" sourceRef="Activity_1c99kx9" targetRef="ServiceTask_0e86zwt" /><bpmn:sequenceFlow id="Flow_1tn06eh" sourceRef="ServiceTask_0e86zwt" targetRef="Gateway_1ccghl5" /><bpmn:sequenceFlow id="Flow_0xj401y" sourceRef="Gateway_1ccghl5" targetRef="ServiceTask_1ld75wz" /><bpmn:sequenceFlow id="Flow_1ls56te" sourceRef="ServiceTask_0dc3scv" targetRef="EndEvent_18odnnp" /><bpmn:sequenceFlow id="Flow_0b44hj8" sourceRef="ServiceTask_1ld75wz" targetRef="ServiceTask_0dc3scv" /><bpmn:serviceTask id="Activity_0sw1zw4" name="Вставить сюда новый метод отображения ошибок на фронте"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/camunda-error-description?errorDescription=</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0lwn838</bpmn:incoming><bpmn:incoming>Flow_1akd03a</bpmn:incoming><bpmn:incoming>Flow_1t51aqp</bpmn:incoming><bpmn:outgoing>Flow_1nu24xp</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1nu24xp" sourceRef="Activity_0sw1zw4" targetRef="Activity_1o8wzou" /><bpmn:serviceTask id="Activity_1o8wzou" name="Полуаем атрибуты типов клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttribute/hlk_customer</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="step">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1nu24xp</bpmn:incoming><bpmn:outgoing>Flow_0jfd9q2</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0jfd9q2" sourceRef="Activity_1o8wzou" targetRef="Activity_18n0vg6" /><bpmn:serviceTask id="Activity_1ipkbdn" name="Изменяем статус заявки"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=AML.Совпадений+не+найдено.+Клиент+создан</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_173at4s</bpmn:incoming><bpmn:outgoing>Flow_16uejag</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_16uejag" sourceRef="Activity_1ipkbdn" targetRef="ExclusiveGateway_0criw3u" /><bpmn:serviceTask id="Activity_16iea6c" name="amlRecieved = -1" camunda:expression="${execution.setVariable(&#39;amlRecieved&#39;, &#39;-1&#39;)}"><bpmn:incoming>SequenceFlow_0d5uaa7</bpmn:incoming><bpmn:outgoing>Flow_131bq2e</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ioobfg" name="ipdlRecieved = -1" camunda:expression="${execution.setVariable(&#39;ipdlRecieved&#39;, &#39;-1&#39;)}"><bpmn:incoming>Flow_0d938pd</bpmn:incoming><bpmn:outgoing>Flow_01mmwkl</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_131bq2e" sourceRef="Activity_16iea6c" targetRef="Activity_17rutmo" /><bpmn:sequenceFlow id="Flow_01mmwkl" sourceRef="Activity_0ioobfg" targetRef="ServiceTask_1hczx18" /><bpmn:subProcess id="Activity_0j0dzwa"><bpmn:incoming>Flow_1gzn60d</bpmn:incoming><bpmn:outgoing>Flow_1b7z9za</bpmn:outgoing><bpmn:scriptTask id="Activity_1gnhlmj" name="waiting for signal" scriptFormat="javascript"><bpmn:incoming>Flow_0fyk0h8</bpmn:incoming><bpmn:outgoing>Flow_0r6uy1o</bpmn:outgoing><bpmn:script>print(new Date() + " waiting for signal " + instanceId)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_0csriea" name="Таймаут?" camunda:expression="false" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0kbkxsn</bpmn:incoming><bpmn:outgoing>Flow_0gq6m7o</bpmn:outgoing></bpmn:serviceTask><bpmn:intermediateCatchEvent id="Event_1k7hpom" camunda:asyncAfter="true"><bpmn:incoming>Flow_0r6uy1o</bpmn:incoming><bpmn:outgoing>Flow_0kbkxsn</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_1pnxba8" signalRef="Signal_1w2wjwv" /></bpmn:intermediateCatchEvent><bpmn:serviceTask id="Activity_0gjqj7d" name="Отправка в AML"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Ожидает+ответа+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1dgnih9</bpmn:incoming><bpmn:outgoing>Flow_03qoimf</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0sad354" name="Отправка в AML" camunda:asyncBefore="true" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/saveLabel/${instanceId}?label=Отправлено+в+AML</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_03vg725</bpmn:incoming><bpmn:outgoing>Flow_1dgnih9</bpmn:outgoing></bpmn:serviceTask><bpmn:endEvent id="Event_06aaw87"><bpmn:incoming>Flow_0gq6m7o</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1dbmd1h" /></bpmn:endEvent><bpmn:intermediateCatchEvent id="Event_0alste5"><bpmn:incoming>Flow_03qoimf</bpmn:incoming><bpmn:outgoing>Flow_0ll6se6</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_1yeywu5"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT900S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:endEvent id="Event_0k1h7g9"><bpmn:incoming>Flow_1su0uwa</bpmn:incoming><bpmn:terminateEventDefinition id="TerminateEventDefinition_1j8hobv" /></bpmn:endEvent><bpmn:serviceTask id="Activity_0qpfhjf" name="Таймаут?" camunda:expression="true" camunda:resultVariable="timeout"><bpmn:incoming>Flow_0ll6se6</bpmn:incoming><bpmn:outgoing>Flow_1su0uwa</bpmn:outgoing></bpmn:serviceTask><bpmn:parallelGateway id="Gateway_1btvkai"><bpmn:incoming>Flow_1ea00rd</bpmn:incoming><bpmn:outgoing>Flow_0fyk0h8</bpmn:outgoing><bpmn:outgoing>Flow_03vg725</bpmn:outgoing></bpmn:parallelGateway><bpmn:startEvent id="Event_1gj5okt"><bpmn:outgoing>Flow_1ea00rd</bpmn:outgoing></bpmn:startEvent><bpmn:sequenceFlow id="Flow_0ll6se6" sourceRef="Event_0alste5" targetRef="Activity_0qpfhjf" /><bpmn:sequenceFlow id="Flow_1su0uwa" sourceRef="Activity_0qpfhjf" targetRef="Event_0k1h7g9" /><bpmn:sequenceFlow id="Flow_03qoimf" sourceRef="Activity_0gjqj7d" targetRef="Event_0alste5" /><bpmn:sequenceFlow id="Flow_0gq6m7o" sourceRef="Activity_0csriea" targetRef="Event_06aaw87" /><bpmn:sequenceFlow id="Flow_0fyk0h8" sourceRef="Gateway_1btvkai" targetRef="Activity_1gnhlmj" /><bpmn:sequenceFlow id="Flow_0kbkxsn" sourceRef="Event_1k7hpom" targetRef="Activity_0csriea" /><bpmn:sequenceFlow id="Flow_0r6uy1o" sourceRef="Activity_1gnhlmj" targetRef="Event_1k7hpom" /><bpmn:sequenceFlow id="Flow_03vg725" sourceRef="Gateway_1btvkai" targetRef="Activity_0sad354" /><bpmn:sequenceFlow id="Flow_1dgnih9" sourceRef="Activity_0sad354" targetRef="Activity_0gjqj7d" /><bpmn:sequenceFlow id="Flow_1ea00rd" sourceRef="Event_1gj5okt" targetRef="Gateway_1btvkai" /></bpmn:subProcess><bpmn:sequenceFlow id="Flow_0uixew5" sourceRef="ServiceTask_1ckbaw7" targetRef="Event_1162j6o" /><bpmn:sequenceFlow id="Flow_1b7z9za" sourceRef="Activity_0j0dzwa" targetRef="Gateway_1lerna4" /><bpmn:intermediateCatchEvent id="Event_1162j6o" camunda:asyncAfter="true"><bpmn:incoming>Flow_0uixew5</bpmn:incoming><bpmn:outgoing>Flow_00i7dwl</bpmn:outgoing><bpmn:signalEventDefinition id="SignalEventDefinition_02w4cl1" signalRef="Signal_1w2wjwv" /></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_00i7dwl" sourceRef="Event_1162j6o" targetRef="ServiceTask_0fcezq4" /><bpmn:serviceTask id="Activity_11cqezj" name="answer" camunda:expression="${execution.setVariable(&#39;answer&#39;, &#39;-1&#39;)}"><bpmn:incoming>Flow_0kl5tg7</bpmn:incoming><bpmn:outgoing>Flow_1gzn60d</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1gzn60d" sourceRef="Activity_11cqezj" targetRef="Activity_0j0dzwa" /><bpmn:serviceTask id="Activity_18n0vg6" name="Получаем тип клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/getAttributes?systemName=hlk_account_type_holder</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="hlk_account_type_holder"><camunda:script scriptFormat="javascript">JSON.parse(response).hlk_account_type_holder</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jfd9q2</bpmn:incoming><bpmn:outgoing>Flow_0kl5tg7</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0kl5tg7" sourceRef="Activity_18n0vg6" targetRef="Activity_11cqezj" /><bpmn:serviceTask id="Activity_17rutmo" name="STATUS = U" camunda:expression="${execution.setVariable(&#39;status&#39;, &#39;u&#39;)}"><bpmn:incoming>Flow_131bq2e</bpmn:incoming><bpmn:outgoing>Flow_091sb15</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0ulvgdh" name="Смотрим Дату"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/swift/${swiftId}/getAttribute/SWIFT_DOCREG_DATE</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="SWIFT_DOCREG_DATE"><camunda:script scriptFormat="javascript">response.replace(/"/g, '').substring(0, 10)</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0ycn0a8</bpmn:incoming><bpmn:outgoing>Flow_027ygqe</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_027ygqe" sourceRef="Activity_0ulvgdh" targetRef="Activity_1yxlcty" /><bpmn:intermediateCatchEvent id="Event_02q4y91"><bpmn:incoming>Flow_1ml0qdw</bpmn:incoming><bpmn:outgoing>Flow_14bueir</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0o0tzmk"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_14bueir" sourceRef="Event_02q4y91" targetRef="Activity_0rhqbck" /><bpmn:intermediateCatchEvent id="Event_0ofpk23"><bpmn:incoming>Flow_1wmx8ns</bpmn:incoming><bpmn:outgoing>Flow_0mnk1tr</bpmn:outgoing><bpmn:timerEventDefinition id="TimerEventDefinition_0thbn7w"><bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5S</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:intermediateCatchEvent><bpmn:sequenceFlow id="Flow_0mnk1tr" sourceRef="Event_0ofpk23" targetRef="Activity_1qqpu7g" /><bpmn:serviceTask id="Activity_1qqpu7g" name="Создаем договор" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/integration/queue/send/BOOK/by/${agreementId}/to/BOOK</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("hlk_InContract_ID_Client",S("{}")
.prop("value" , clientPrimaryId)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.prop("hlk_client_FL",S("{}")
.prop("value" , ShortNameCurrentCtpt)
.prop("primaryId" , clientPrimaryId)
.prop("source" , "legalEntity"))
.prop("EXCEL_NAME" , "CONTRACT")
.prop("hlk_account_number_contract" , agreementNumber)
.prop("hlk_account" , accountNumber)
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="status"><camunda:script scriptFormat="javascript">JSON.parse(response).status</camunda:script></camunda:outputParameter><camunda:outputParameter name="message"><camunda:script scriptFormat="javascript">JSON.parse(response).message;</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0mnk1tr</bpmn:incoming><bpmn:incoming>Flow_0b4p8wf</bpmn:incoming><bpmn:outgoing>Flow_0n86y8v</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0n86y8v" sourceRef="Activity_1qqpu7g" targetRef="Gateway_1u9x874" /><bpmn:sequenceFlow id="Flow_0b4p8wf" sourceRef="Activity_0tgvowp" targetRef="Activity_1qqpu7g" /><bpmn:sequenceFlow id="Flow_0aefvk7" sourceRef="Gateway_1u6s6nm" targetRef="ServiceTask_00myvbt" /><bpmn:exclusiveGateway id="Gateway_0dgr5j5"><bpmn:incoming>SequenceFlow_0vn1hy3</bpmn:incoming><bpmn:incoming>Flow_11toe0w</bpmn:incoming><bpmn:outgoing>Flow_1w94grl</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_1w94grl" sourceRef="Gateway_0dgr5j5" targetRef="CallActivity_0q17ioc" /><bpmn:exclusiveGateway id="Gateway_0ep8o5h"><bpmn:incoming>Flow_1mk4xnw</bpmn:incoming><bpmn:incoming>Flow_1hwsdpd</bpmn:incoming><bpmn:outgoing>Flow_07w4jv1</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_07w4jv1" sourceRef="Gateway_0ep8o5h" targetRef="ServiceTask_0fkrqh8" /><bpmn:serviceTask id="Activity_1vttyhg" name="Отправляем уведомление в СП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Открытие БС " + ShortName)
.prop("text","Внимание! БС № " + accountNumber + " на имя " + ShortName + "успешно открыт в ЦД, Договор № " + agreementNumber + " от " + regDate + "успешно зарегистрирован")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0dmec3h</bpmn:incoming><bpmn:outgoing>Flow_0c5rlp4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0avvihb" name="Отправляем уведомление клиенту" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email",mail ? mail : S('{"x":null}').prop("x"))
.prop("subject","Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("text","Уважаемый клиент, настоящим АО «Halyk Finance» информирует об открытии на Ваше имя брокерского счета № " + accountNumber + " в рамках Договора брокерского обслуживания № " + agreementNumber + " от  acceptDate. Условия Договора и контактные данные доступны на сайте AO «Halyk Finance» https://halykfinance.kz/brokerskoe-obsluzhivanie/?lang=ru")
.prop("attachments", [generated])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0c5rlp4</bpmn:incoming><bpmn:outgoing>Flow_19zlmnc</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0c5rlp4" sourceRef="Activity_1vttyhg" targetRef="Activity_0avvihb" /><bpmn:sequenceFlow id="Flow_19zlmnc" sourceRef="Activity_0avvihb" targetRef="ExclusiveGateway_0zap78k" /><bpmn:serviceTask id="Activity_0rcjlgp" name="Отправляем уведомление в СП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Отправка уведомления об открытии БС" + accountNumber + " " + "на имя" + " " + ShortName)
.prop("text","Внимание! Уведомление об открытии БС №" + " " + accountNumber + " " + "на имя" + " " + ShortName + " " + "на e-mail:" + mail + " " + "успешно отправлено.")
.prop("attachments", [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0rgmv54</bpmn:incoming><bpmn:outgoing>Flow_060ojmb</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_060ojmb" sourceRef="Activity_0rcjlgp" targetRef="Activity_1lfp1u1" /><bpmn:serviceTask id="Activity_1lfp1u1" name="Создаем запись в журнале почтовых уведомлений" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType", "Notification")
.prop("hlk_email", mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app", ShortName)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Успешно отправлено")
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_060ojmb</bpmn:incoming><bpmn:outgoing>Flow_1mk4xnw</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1mk4xnw" sourceRef="Activity_1lfp1u1" targetRef="Gateway_0ep8o5h" /><bpmn:serviceTask id="Activity_01tsta2" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Отправка уведомления об открытии БС № " + accountNumber + " " + "на имя ShortName")
.prop("text","Внимание! Ошибка при отправке уведомления об открытии № " + accountNumber + " на имя ShortName на e-mail:" + mail + ". Уведомление не отправлено по причине errorCode")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode1">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements></bpmn:serviceTask><bpmn:serviceTask id="Activity_1jngfcf" name="Создаем запись в журнале почтовых уведомлений" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/sendInstanceTo/BOOK/${instanceId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("ObjectType" , "Notification")
.prop("hlk_email" , mail ? mail : S('{"x":null}').prop("x"))
.prop("hlk_client_app" , ShortName)
.prop("hlk_mail_theme" , "Уведомление об открытии брокерского счета в АО «Halyk Finance»")
.prop("hlk_mail_status" , "Ошибка отправки." + " " + errorCode)
.prop("hlk_mail_date" , acceptDate)
.prop("hlk_counterparty_type","0")
.prop("hlk_document", S("{}")
.prop("name" , generated)
.prop("reference" , generated)
.prop("_class","egar.ezdoc.model.entity.attribute.FileReference"))
.toString()</camunda:script></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_14ct0ag</bpmn:incoming><bpmn:outgoing>Flow_1hwsdpd</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1hwsdpd" sourceRef="Activity_1jngfcf" targetRef="Gateway_0ep8o5h" /><bpmn:serviceTask id="Activity_0hrstjl" name="Отправляем уведомление в СП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Ошибка! Открытие БС " +  ShortName)
.prop("text","Внимание! Ошибка при открытии БС № " + accountNumber + "на имя " + ShortName + ". Счет не открыт в ЦД по причине: ошибка SWIFT.")
.prop("attachments" , [ ])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_1xuwf90</bpmn:incoming><bpmn:outgoing>Flow_1vtl1pm</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1vtl1pm" sourceRef="Activity_0hrstjl" targetRef="ServiceTask_0m4dlxy" /><bpmn:serviceTask id="Activity_0b7fy4a" name="Отправляем уведомление в СП"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Проверка клиента"+" "+ ShortName + " " + "в AML")
.prop("text","Клиент" + " " + ShortName + " " + "не прошел проверку по спискам AML. Все заявки на имя клиента и операции будут заблокированы.")
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0jtvc6d</bpmn:incoming><bpmn:outgoing>Flow_13fm8y3</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_11tmkkx" sourceRef="ExclusiveGateway_0vne501" targetRef="Gateway_11uyrx8"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${answer == '2'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_0clbcxj" sourceRef="UserTask_0hjskmz" targetRef="Gateway_11uyrx8"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${buttonId == 'Cancel'}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:exclusiveGateway id="Gateway_11uyrx8"><bpmn:incoming>Flow_11tmkkx</bpmn:incoming><bpmn:incoming>Flow_0clbcxj</bpmn:incoming><bpmn:outgoing>Flow_0jtvc6d</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0jtvc6d" sourceRef="Gateway_11uyrx8" targetRef="Activity_0b7fy4a" /><bpmn:sequenceFlow id="Flow_13fm8y3" sourceRef="Activity_0b7fy4a" targetRef="ServiceTask_0d8cmu3" /><bpmn:serviceTask id="Activity_0z4p76w" name="Отправляем уведомление в СП" camunda:asyncAfter="true"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/email/send</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload"><camunda:script scriptFormat="javascript">S("{}")
.prop("email","uao@halykfinance.kz")
.prop("subject","Возврат заявки на регистрацию клиента на доработку исполнителю")
.prop("text","Заявка" + " " + ezdocObjectUrl + " " +  "возвращена исполнителю на доработку")
.prop("attachments" , [])
.toString()</camunda:script></camunda:inputParameter><camunda:outputParameter name="errorCode">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0ui0360</bpmn:incoming><bpmn:outgoing>Flow_0ktzm4q</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0ktzm4q" sourceRef="Activity_0z4p76w" targetRef="ScriptTask_1ng2rl3" /><bpmn:serviceTask id="Activity_1gc7fao" name="Сообщаем об окончании подпроцесса"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/processCompleted/${agreementId}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_0n0csju</bpmn:incoming><bpmn:outgoing>Flow_17x2r99</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_17x2r99" sourceRef="Activity_1gc7fao" targetRef="ServiceTask_0aun3b7" /><bpmn:exclusiveGateway id="Gateway_0g00t0g" default="Flow_19sqqhr"><bpmn:incoming>Flow_1l0mpeg</bpmn:incoming><bpmn:outgoing>Flow_1wu2679</bpmn:outgoing><bpmn:outgoing>Flow_19sqqhr</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:scriptTask id="Activity_01xquxx" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_1ggdiyh</bpmn:incoming><bpmn:outgoing>Flow_1t51aqp</bpmn:outgoing><bpmn:script>ShortName + " " + accountNumber.substring(accountNumber.length()-6)</bpmn:script></bpmn:scriptTask><bpmn:serviceTask id="Activity_07kph7z" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_account_number_contract?incrementVersion=true&amp;value=${accountNumber.substring(accountNumber.length()-6)}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1j1vqro</bpmn:incoming><bpmn:outgoing>Flow_13krzo4</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_0uhdlvc" name="Записываем"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttribute/hlk_AccountNumber?incrementVersion=true&amp;value=${accountNumber}</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_13krzo4</bpmn:incoming><bpmn:outgoing>Flow_1ggdiyh</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_14fxk4e" name="Генерируем номер счета и договора"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/sequence/next/Account?default=1028111137</camunda:inputParameter><camunda:inputParameter name="method">GET</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry></camunda:map></camunda:inputParameter><camunda:outputParameter name="accountNumber">${response}</camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_1wu2679</bpmn:incoming><bpmn:outgoing>Flow_1i6d872</bpmn:outgoing></bpmn:serviceTask><bpmn:scriptTask id="Activity_17xfoi7" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_19sqqhr</bpmn:incoming><bpmn:outgoing>Flow_1akd03a</bpmn:outgoing><bpmn:script>ShortName + " 00"</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_1wu2679" sourceRef="Gateway_0g00t0g" targetRef="Activity_14fxk4e"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${step == "true" &amp;&amp; cdRejected == "false"}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:sequenceFlow id="Flow_19sqqhr" sourceRef="Gateway_0g00t0g" targetRef="Activity_17xfoi7" /><bpmn:sequenceFlow id="Flow_1ggdiyh" sourceRef="Activity_0uhdlvc" targetRef="Activity_01xquxx" /><bpmn:sequenceFlow id="Flow_13krzo4" sourceRef="Activity_07kph7z" targetRef="Activity_0uhdlvc" /><bpmn:serviceTask id="Activity_0mg6mlx" name="Определяем, есть ли клиент с тем же именем"><bpmn:extensionElements><camunda:properties><camunda:property name="isEzdocServiceTask" value="true" /><camunda:property name="ezdocServiceTaskType" value="request" /><camunda:property name="requestType" value="GENERIC" /></camunda:properties><camunda:connector><camunda:inputOutput><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/common/executeRequest</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="payload">{ 	"find": "legalEntity", 	"filter": 
{
 "$or": 
[		
{
"listTemplatePrimaryId": "5d778677a7b11b00088f391f",
"attributes.ShortName": "${ShortName}", 
"attributes.hlk_app_id": {$ne: "${primaryId}" },
"activityStatus" : "ACTIVE"
}, 	
{
"listTemplatePrimaryId": "5d945c25a7b11b0008da1025",
"attributes.ShortName": "${ShortName}", 
"attributes.hlk_app_id": {$ne: "${primaryId}" },
"activityStatus" : "ACTIVE"
}, 	
{
"listTemplatePrimaryId": "5d945ccca7b11b0008da25d1",
"attributes.ShortName": "${ShortName}", 
"attributes.hlk_app_id": {$ne: "${primaryId}" },
"activityStatus" : "ACTIVE"
}, 	
{
"listTemplatePrimaryId": "5d945d3ea7b11b0008da34ba",
"attributes.ShortName": "${ShortName}", 
"attributes.hlk_app_id": {$ne: "${primaryId}" },
"activityStatus" : "ACTIVE"
}
]
},
"projection": { 		"_id": 1 	}
}</camunda:inputParameter><camunda:outputParameter name="foundTeska"><camunda:script scriptFormat="javascript">!!JSON.parse(response).cursor.firstBatch.length</camunda:script></camunda:outputParameter><camunda:outputParameter name="TeskaId"><camunda:script scriptFormat="javascript">try {
JSON.parse(response).cursor.firstBatch[0]._id
}
catch (e)
{
"0"
}</camunda:script></camunda:outputParameter><camunda:outputParameter name="isEmptyTeska"><camunda:script scriptFormat="javascript">S(response)
.prop("cursor")
.prop("firstBatch").elements().isEmpty()</camunda:script></camunda:outputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>Flow_0onq2aj</bpmn:incoming><bpmn:outgoing>Flow_1pjbpmi</bpmn:outgoing></bpmn:serviceTask><bpmn:exclusiveGateway id="Gateway_1grg3q1" default="Flow_024ihws"><bpmn:incoming>Flow_1pjbpmi</bpmn:incoming><bpmn:outgoing>Flow_024ihws</bpmn:outgoing><bpmn:outgoing>Flow_1l0mpeg</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:serviceTask id="Activity_1ejilar" name="Устанавливаем признак foundTeska = false" camunda:asyncAfter="true" camunda:expression="false" camunda:resultVariable="foundTeska"><bpmn:incoming>Flow_0zqti4p</bpmn:incoming><bpmn:outgoing>Flow_0onq2aj</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_0onq2aj" sourceRef="Activity_1ejilar" targetRef="Activity_0mg6mlx" /><bpmn:sequenceFlow id="Flow_1pjbpmi" sourceRef="Activity_0mg6mlx" targetRef="Gateway_1grg3q1" /><bpmn:sequenceFlow id="Flow_0zqti4p" sourceRef="ServiceTask_1saooe4" targetRef="Activity_1ejilar" /><bpmn:sequenceFlow id="Flow_024ihws" sourceRef="Gateway_1grg3q1" targetRef="Activity_10qv7yy" /><bpmn:sequenceFlow id="Flow_1l0mpeg" sourceRef="Gateway_1grg3q1" targetRef="Gateway_0g00t0g"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isEmptyTeska == false}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:scriptTask id="Activity_10qv7yy" name="ShortName текущего клиента" scriptFormat="javascript" camunda:resultVariable="ShortNameCurrentCtpt"><bpmn:incoming>Flow_024ihws</bpmn:incoming><bpmn:outgoing>Flow_0lwn838</bpmn:outgoing><bpmn:script>ShortName</bpmn:script></bpmn:scriptTask><bpmn:sequenceFlow id="Flow_0lwn838" sourceRef="Activity_10qv7yy" targetRef="Activity_0sw1zw4" /><bpmn:sequenceFlow id="Flow_1akd03a" sourceRef="Activity_17xfoi7" targetRef="Activity_0sw1zw4" /><bpmn:sequenceFlow id="Flow_1t51aqp" sourceRef="Activity_01xquxx" targetRef="Activity_0sw1zw4" /><bpmn:exclusiveGateway id="Gateway_10pi0u6" default="Flow_0dwpz3r"><bpmn:incoming>SequenceFlow_0usaj3l</bpmn:incoming><bpmn:outgoing>Flow_0dwpz3r</bpmn:outgoing><bpmn:outgoing>Flow_19k01p3</bpmn:outgoing></bpmn:exclusiveGateway><bpmn:sequenceFlow id="Flow_0dwpz3r" sourceRef="Gateway_10pi0u6" targetRef="ServiceTask_1msvpx8" /><bpmn:sequenceFlow id="Flow_19k01p3" sourceRef="Gateway_10pi0u6" targetRef="ExclusiveGateway_1at31m2"><bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${isTeska == true}</bpmn:conditionExpression></bpmn:sequenceFlow><bpmn:serviceTask id="Activity_0au2le6" name="Очищаем ID клиента"><bpmn:extensionElements><camunda:connector><camunda:inputOutput><camunda:inputParameter name="url">${ezdocUrl}/api/camunda/instance/book/${instanceId}/setAttributes</camunda:inputParameter><camunda:inputParameter name="method">POST</camunda:inputParameter><camunda:inputParameter name="headers"><camunda:map><camunda:entry key="Accept">*/*</camunda:entry><camunda:entry key="Content-Type">application/json</camunda:entry></camunda:map></camunda:inputParameter><camunda:inputParameter name="payload">{
"hlk_ID_Client" : "",
"hlk_partner_id" : ""
}</camunda:inputParameter></camunda:inputOutput><camunda:connectorId>http-connector</camunda:connectorId></camunda:connector></bpmn:extensionElements><bpmn:incoming>SequenceFlow_07e3ecq</bpmn:incoming><bpmn:outgoing>Flow_07t1qmf</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_07t1qmf" sourceRef="Activity_0au2le6" targetRef="ServiceTask_1cd1q1m" /><bpmn:sequenceFlow id="Flow_091sb15" sourceRef="Activity_17rutmo" targetRef="Activity_152u9m5" /><bpmn:sequenceFlow id="Flow_0d938pd" sourceRef="Activity_152u9m5" targetRef="Activity_0ioobfg" /><bpmn:serviceTask id="Activity_152u9m5" name="Устанавливаем признак isTeska = false" camunda:expression="false" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_091sb15</bpmn:incoming><bpmn:outgoing>Flow_0d938pd</bpmn:outgoing></bpmn:serviceTask><bpmn:serviceTask id="Activity_14ghlsl" name="Устанавливаем признак isTeska = true" camunda:expression="true" camunda:resultVariable="isTeska"><bpmn:incoming>Flow_1i6d872</bpmn:incoming><bpmn:outgoing>Flow_1j1vqro</bpmn:outgoing></bpmn:serviceTask><bpmn:sequenceFlow id="Flow_1i6d872" sourceRef="Activity_14fxk4e" targetRef="Activity_14ghlsl" /><bpmn:sequenceFlow id="Flow_1j1vqro" sourceRef="Activity_14ghlsl" targetRef="Activity_07kph7z" /></bpmn:process><bpmn:message id="Message_0164nul" name="bookReady" /><bpmn:message id="Message_1tv68cd" name="539Receive" /><bpmn:message id="Message_09xb1pz" name="clientCreated" /><bpmn:signal id="Signal_1292do8" name="e" /><bpmn:signal id="Signal_1x4y94t" name="r" /><bpmn:message id="Message_0qkob8k" name="bookReady" /><bpmn:message id="Message_11r8f6w" name="bookReady" /><bpmn:message id="Message_19kfs5a" name="539Receive" /><bpmn:message id="Message_0gwe1k7" name="539Receive" /><bpmn:signal id="Signal_0lx5q5b" name="Signal_0rfja5c" /><bpmn:signal id="Signal_1adu8ix" name="q" /><bpmn:signal id="Signal_1w2wjwv" name="bookUpdateReceive${instanceId}" /><bpmn:message id="Message_0cewth3" name="parentProcess" /><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="TEMPLATE_INSTANCE_PROCESS_hlk_REGUL_73c20b4e-6cab-41b8-a008-8c4d08d7fe9c"><bpmndi:BPMNEdge id="Flow_1j1vqro_di" bpmnElement="Flow_1j1vqro"><di:waypoint x="2510" y="399" /><di:waypoint x="2602" y="399" /><di:waypoint x="2602" y="470" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1i6d872_di" bpmnElement="Flow_1i6d872"><di:waypoint x="2460" y="470" /><di:waypoint x="2460" y="439" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d938pd_di" bpmnElement="Flow_0d938pd"><di:waypoint x="1544" y="1100" /><di:waypoint x="1544" y="1130" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_091sb15_di" bpmnElement="Flow_091sb15"><di:waypoint x="1430" y="1030" /><di:waypoint x="1430" y="1000" /><di:waypoint x="1544" y="1000" /><di:waypoint x="1544" y="1020" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07t1qmf_di" bpmnElement="Flow_07t1qmf"><di:waypoint x="330" y="1285" /><di:waypoint x="380" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19k01p3_di" bpmnElement="Flow_19k01p3"><di:waypoint x="4219" y="710" /><di:waypoint x="4390" y="710" /><di:waypoint x="4390" y="792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dwpz3r_di" bpmnElement="Flow_0dwpz3r"><di:waypoint x="4194" y="685" /><di:waypoint x="4194" y="580" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1t51aqp_di" bpmnElement="Flow_1t51aqp"><di:waypoint x="2869" y="550" /><di:waypoint x="2869" y="680" /><di:waypoint x="2420" y="680" /><di:waypoint x="2420" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1akd03a_di" bpmnElement="Flow_1akd03a"><di:waypoint x="2338" y="650" /><di:waypoint x="2338" y="710" /><di:waypoint x="2400" y="710" /><di:waypoint x="2400" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lwn838_di" bpmnElement="Flow_0lwn838"><di:waypoint x="2320" y="1024" /><di:waypoint x="2320" y="1135" /><di:waypoint x="2370" y="1135" /><di:waypoint x="2370" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1l0mpeg_di" bpmnElement="Flow_1l0mpeg"><di:waypoint x="2210" y="950" /><di:waypoint x="2210" y="510" /><di:waypoint x="2313" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_024ihws_di" bpmnElement="Flow_024ihws"><di:waypoint x="2235" y="975" /><di:waypoint x="2253" y="975" /><di:waypoint x="2253" y="984" /><di:waypoint x="2270" y="984" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zqti4p_di" bpmnElement="Flow_0zqti4p"><di:waypoint x="2200" y="1245" /><di:waypoint x="2200" y="1230" /><di:waypoint x="2210" y="1230" /><di:waypoint x="2210" y="1215" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pjbpmi_di" bpmnElement="Flow_1pjbpmi"><di:waypoint x="2210" y="1025" /><di:waypoint x="2210" y="1000" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0onq2aj_di" bpmnElement="Flow_0onq2aj"><di:waypoint x="2210" y="1135" /><di:waypoint x="2210" y="1105" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13krzo4_di" bpmnElement="Flow_13krzo4"><di:waypoint x="2652" y="510" /><di:waypoint x="2682" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ggdiyh_di" bpmnElement="Flow_1ggdiyh"><di:waypoint x="2782" y="510" /><di:waypoint x="2819" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19sqqhr_di" bpmnElement="Flow_19sqqhr"><di:waypoint x="2338" y="535" /><di:waypoint x="2338" y="570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wu2679_di" bpmnElement="Flow_1wu2679"><di:waypoint x="2363" y="510" /><di:waypoint x="2410" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17x2r99_di" bpmnElement="Flow_17x2r99"><di:waypoint x="10860" y="913" /><di:waypoint x="10836" y="913" /><di:waypoint x="10940" y="913" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ktzm4q_di" bpmnElement="Flow_0ktzm4q"><di:waypoint x="2057" y="1487" /><di:waypoint x="2057" y="1530" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_13fm8y3_di" bpmnElement="Flow_13fm8y3"><di:waypoint x="3365" y="1610" /><di:waypoint x="3395" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jtvc6d_di" bpmnElement="Flow_0jtvc6d"><di:waypoint x="3315" y="1535" /><di:waypoint x="3315" y="1570" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0clbcxj_di" bpmnElement="Flow_0clbcxj"><di:waypoint x="3614" y="1405" /><di:waypoint x="3725" y="1405" /><di:waypoint x="3725" y="1510" /><di:waypoint x="3340" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11tmkkx_di" bpmnElement="Flow_11tmkkx"><di:waypoint x="3182" y="1430" /><di:waypoint x="3182" y="1510" /><di:waypoint x="3290" y="1510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vtl1pm_di" bpmnElement="Flow_1vtl1pm"><di:waypoint x="8860" y="1460" /><di:waypoint x="8892" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hwsdpd_di" bpmnElement="Flow_1hwsdpd"><di:waypoint x="10290" y="1020" /><di:waypoint x="10320" y="1020" /><di:waypoint x="10320" y="947" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mk4xnw_di" bpmnElement="Flow_1mk4xnw"><di:waypoint x="10300" y="840" /><di:waypoint x="10320" y="840" /><di:waypoint x="10320" y="897" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_060ojmb_di" bpmnElement="Flow_060ojmb"><di:waypoint x="10170" y="840" /><di:waypoint x="10200" y="840" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19zlmnc_di" bpmnElement="Flow_19zlmnc"><di:waypoint x="11060" y="709" /><di:waypoint x="10030" y="709" /><di:waypoint x="10030" y="895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0c5rlp4_di" bpmnElement="Flow_0c5rlp4"><di:waypoint x="11110" y="639" /><di:waypoint x="11110" y="669" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07w4jv1_di" bpmnElement="Flow_07w4jv1"><di:waypoint x="10343" y="920" /><di:waypoint x="10372" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1w94grl_di" bpmnElement="Flow_1w94grl"><di:waypoint x="10635" y="599" /><di:waypoint x="10660" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aefvk7_di" bpmnElement="Flow_0aefvk7"><di:waypoint x="10000" y="624" /><di:waypoint x="10000" y="950" /><di:waypoint x="8452" y="950" /><di:waypoint x="8452" y="1420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b4p8wf_di" bpmnElement="Flow_0b4p8wf"><di:waypoint x="11610" y="840" /><di:waypoint x="11610" y="858" /><di:waypoint x="11630" y="858" /><di:waypoint x="11630" y="875" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n86y8v_di" bpmnElement="Flow_0n86y8v"><di:waypoint x="11680" y="915" /><di:waypoint x="11755" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mnk1tr_di" bpmnElement="Flow_0mnk1tr"><di:waypoint x="11538" y="913" /><di:waypoint x="11580" y="913" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_14bueir_di" bpmnElement="Flow_14bueir"><di:waypoint x="5618" y="599" /><di:waypoint x="5644" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_027ygqe_di" bpmnElement="Flow_027ygqe"><di:waypoint x="9840" y="709" /><di:waypoint x="9900" y="709" /><di:waypoint x="9900" y="639" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kl5tg7_di" bpmnElement="Flow_0kl5tg7"><di:waypoint x="2680" y="1285" /><di:waypoint x="2700" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gzn60d_di" bpmnElement="Flow_1gzn60d"><di:waypoint x="2750" y="1245" /><di:waypoint x="2750" y="1115" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00i7dwl_di" bpmnElement="Flow_00i7dwl"><di:waypoint x="2938" y="1201" /><di:waypoint x="2938" y="1223" /><di:waypoint x="2910" y="1223" /><di:waypoint x="2910" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1b7z9za_di" bpmnElement="Flow_1b7z9za"><di:waypoint x="2830" y="1115" /><di:waypoint x="2830" y="1260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uixew5_di" bpmnElement="Flow_0uixew5"><di:waypoint x="3070" y="1183" /><di:waypoint x="2956" y="1183" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_01mmwkl_di" bpmnElement="Flow_01mmwkl"><di:waypoint x="1544" y="1210" /><di:waypoint x="1544" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_131bq2e_di" bpmnElement="Flow_131bq2e"><di:waypoint x="1421" y="1130" /><di:waypoint x="1421" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16uejag_di" bpmnElement="Flow_16uejag"><di:waypoint x="3934" y="1270" /><di:waypoint x="3974" y="1270" /><di:waypoint x="3974" y="1225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jfd9q2_di" bpmnElement="Flow_0jfd9q2"><di:waypoint x="2560" y="1285" /><di:waypoint x="2580" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nu24xp_di" bpmnElement="Flow_1nu24xp"><di:waypoint x="2440" y="1285" /><di:waypoint x="2460" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b44hj8_di" bpmnElement="Flow_0b44hj8"><di:waypoint x="13060" y="920" /><di:waypoint x="13160" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ls56te_di" bpmnElement="Flow_1ls56te"><di:waypoint x="13260" y="920" /><di:waypoint x="13382" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0xj401y_di" bpmnElement="Flow_0xj401y"><di:waypoint x="12885" y="920" /><di:waypoint x="12960" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tn06eh_di" bpmnElement="Flow_1tn06eh"><di:waypoint x="12750" y="920" /><di:waypoint x="12835" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19lkm3i_di" bpmnElement="Flow_19lkm3i"><di:waypoint x="12700" y="832" /><di:waypoint x="12700" y="880" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xhegh3_di" bpmnElement="Flow_1xhegh3"><di:waypoint x="12700" y="709" /><di:waypoint x="12700" y="752" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03hql81_di" bpmnElement="Flow_03hql81"><di:waypoint x="12810" y="669" /><di:waypoint x="12750" y="669" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jyrgya_di" bpmnElement="Flow_0jyrgya"><di:waypoint x="12860" y="760" /><di:waypoint x="12860" y="709" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0vglp1q_di" bpmnElement="Flow_0vglp1q"><di:waypoint x="12860" y="895" /><di:waypoint x="12860" y="840" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hpilmx_di" bpmnElement="Flow_1hpilmx"><di:waypoint x="12600" y="920" /><di:waypoint x="12650" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_102of6r_di" bpmnElement="Flow_102of6r"><di:waypoint x="12280" y="920" /><di:waypoint x="12350" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1udirji_di" bpmnElement="Flow_1udirji"><di:waypoint x="12450" y="920" /><di:waypoint x="12500" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kh2o51_di" bpmnElement="Flow_0kh2o51"><di:waypoint x="12115" y="915" /><di:waypoint x="12180" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_09mfqq8_di" bpmnElement="Flow_09mfqq8"><di:waypoint x="11920" y="840" /><di:waypoint x="11920" y="880" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ctk0os_di" bpmnElement="Flow_1ctk0os"><di:waypoint x="11970" y="920" /><di:waypoint x="12018" y="920" /><di:waypoint x="12018" y="915" /><di:waypoint x="12065" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0oy1cfa_di" bpmnElement="Flow_0oy1cfa"><di:waypoint x="11920" y="720" /><di:waypoint x="11920" y="760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zt4xlf_di" bpmnElement="Flow_0zt4xlf"><di:waypoint x="12040" y="680" /><di:waypoint x="11970" y="680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ii8dwm_di" bpmnElement="Flow_1ii8dwm"><di:waypoint x="12090" y="752" /><di:waypoint x="12090" y="720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_06sg7pw_di" bpmnElement="Flow_06sg7pw"><di:waypoint x="12090" y="890" /><di:waypoint x="12090" y="832" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0esbnm7_di" bpmnElement="Flow_0esbnm7"><di:waypoint x="11805" y="915" /><di:waypoint x="11838" y="915" /><di:waypoint x="11838" y="920" /><di:waypoint x="11870" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0h0l7f1_di" bpmnElement="Flow_0h0l7f1"><di:waypoint x="11610" y="720" /><di:waypoint x="11610" y="760" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1l3yrwp_di" bpmnElement="Flow_1l3yrwp"><di:waypoint x="11730" y="680" /><di:waypoint x="11660" y="680" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1m49a2l_di" bpmnElement="Flow_1m49a2l"><di:waypoint x="11780" y="760" /><di:waypoint x="11780" y="720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gnx8by_di" bpmnElement="Flow_1gnx8by"><di:waypoint x="11780" y="890" /><di:waypoint x="11780" y="840" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wmx8ns_di" bpmnElement="Flow_1wmx8ns"><di:waypoint x="11455" y="915" /><di:waypoint x="11479" y="915" /><di:waypoint x="11479" y="913" /><di:waypoint x="11502" y="913" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0d8ogsv_di" bpmnElement="Flow_0d8ogsv"><di:waypoint x="11210" y="915" /><di:waypoint x="11405" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ox1xbe_di" bpmnElement="Flow_1ox1xbe"><di:waypoint x="11297" y="729" /><di:waypoint x="11297" y="760" /><di:waypoint x="11300" y="760" /><di:waypoint x="11300" y="780" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0j8bac4_di" bpmnElement="Flow_0j8bac4"><di:waypoint x="11390" y="689" /><di:waypoint x="11367" y="689" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dpt0qo_di" bpmnElement="Flow_0dpt0qo"><di:waypoint x="11423" y="760" /><di:waypoint x="11423" y="745" /><di:waypoint x="11440" y="745" /><di:waypoint x="11440" y="729" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bqkl8r_di" bpmnElement="Flow_1bqkl8r"><di:waypoint x="11430" y="890" /><di:waypoint x="11430" y="840" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fxiznl_di" bpmnElement="Flow_0fxiznl"><di:waypoint x="11310" y="860" /><di:waypoint x="11310" y="890" /><di:waypoint x="11210" y="890" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1amd180_di" bpmnElement="Flow_1amd180"><di:waypoint x="10760" y="599" /><di:waypoint x="10790" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_11toe0w_di" bpmnElement="Flow_11toe0w"><di:waypoint x="10560" y="470" /><di:waypoint x="10610" y="470" /><di:waypoint x="10610" y="574" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0av2aj7_di" bpmnElement="Flow_0av2aj7"><di:waypoint x="10470" y="599" /><di:waypoint x="10485" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0zmndjo_di" bpmnElement="Flow_0zmndjo"><di:waypoint x="10330" y="599" /><di:waypoint x="10370" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0q03p52_di" bpmnElement="Flow_0q03p52"><di:waypoint x="10180" y="599" /><di:waypoint x="10230" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_181bnhx_di" bpmnElement="Flow_181bnhx"><di:waypoint x="10025" y="599" /><di:waypoint x="10080" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dthgl0_di" bpmnElement="Flow_1dthgl0"><di:waypoint x="9605" y="599" /><di:waypoint x="9640" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bx5car_di" bpmnElement="Flow_0bx5car"><di:waypoint x="10000" y="574" /><di:waypoint x="10000" y="480" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1xggfa1_di" bpmnElement="Flow_1xggfa1"><di:waypoint x="9950" y="599" /><di:waypoint x="9975" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ngkqe5_di" bpmnElement="Flow_0ngkqe5"><di:waypoint x="9950" y="440" /><di:waypoint x="9890" y="440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ycn0a8_di" bpmnElement="Flow_0ycn0a8"><di:waypoint x="9690" y="639" /><di:waypoint x="9690" y="689" /><di:waypoint x="9740" y="689" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1j3qxei_di" bpmnElement="Flow_1j3qxei"><di:waypoint x="9690" y="480" /><di:waypoint x="9690" y="559" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19uw9xq_di" bpmnElement="Flow_19uw9xq"><di:waypoint x="9790" y="440" /><di:waypoint x="9740" y="440" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_105vvtj_di" bpmnElement="Flow_105vvtj"><di:waypoint x="9580" y="624" /><di:waypoint x="9580" y="800" /><di:waypoint x="8452" y="800" /><di:waypoint x="8452" y="1420" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1vcnstr_di" bpmnElement="Flow_1vcnstr"><di:waypoint x="9490" y="399" /><di:waypoint x="9580" y="399" /><di:waypoint x="9580" y="574" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0f6lgd5_di" bpmnElement="Flow_0f6lgd5"><di:waypoint x="8730" y="559" /><di:waypoint x="8730" y="522" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_130jhoi_di" bpmnElement="Flow_130jhoi"><di:waypoint x="7890" y="599" /><di:waypoint x="7930" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1pu628u_di" bpmnElement="Flow_1pu628u"><di:waypoint x="7590" y="599" /><di:waypoint x="7640" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1qqhd11_di" bpmnElement="Flow_1qqhd11"><di:waypoint x="7445" y="599" /><di:waypoint x="7490" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03n1h1e_di" bpmnElement="Flow_03n1h1e"><di:waypoint x="7340" y="720" /><di:waypoint x="7420" y="720" /><di:waypoint x="7420" y="624" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0o6yf2j_di" bpmnElement="Flow_0o6yf2j"><di:waypoint x="7160" y="624" /><di:waypoint x="7160" y="720" /><di:waypoint x="7240" y="720" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gug36a_di" bpmnElement="Flow_0gug36a"><di:waypoint x="7160" y="574" /><di:waypoint x="7160" y="470" /><di:waypoint x="7250" y="470" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1bbi0it_di" bpmnElement="Flow_1bbi0it"><di:waypoint x="7350" y="470" /><di:waypoint x="7420" y="470" /><di:waypoint x="7420" y="574" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_034rxjp_di" bpmnElement="Flow_034rxjp"><di:waypoint x="7090" y="599" /><di:waypoint x="7135" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1tajun2_di" bpmnElement="Flow_1tajun2"><di:waypoint x="6820" y="599" /><di:waypoint x="6850" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ga0tn3_di" bpmnElement="Flow_1ga0tn3"><di:waypoint x="6950" y="599" /><di:waypoint x="6990" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1p7jixw_di" bpmnElement="Flow_1p7jixw"><di:waypoint x="6682" y="599" /><di:waypoint x="6720" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1o0j36x_di" bpmnElement="Flow_1o0j36x"><di:waypoint x="6542" y="599" /><di:waypoint x="6582" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ufuw6z_di" bpmnElement="Flow_1ufuw6z"><di:waypoint x="6395" y="599" /><di:waypoint x="6442" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0rtl31b_di" bpmnElement="Flow_0rtl31b"><di:waypoint x="6370" y="220" /><di:waypoint x="6370" y="150" /><di:waypoint x="5210" y="150" /><di:waypoint x="5210" y="280" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0dehhe5_di" bpmnElement="Flow_0dehhe5"><di:waypoint x="6370" y="574" /><di:waypoint x="6370" y="300" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1l2pu98_di" bpmnElement="Flow_1l2pu98"><di:waypoint x="6295" y="599" /><di:waypoint x="6345" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1ml0qdw_di" bpmnElement="Flow_1ml0qdw"><di:waypoint x="5550" y="599" /><di:waypoint x="5582" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wi2oiu_di" bpmnElement="Flow_1wi2oiu"><di:waypoint x="5160" y="280" /><di:waypoint x="5160" y="160" /><di:waypoint x="1990" y="160" /><di:waypoint x="1990" y="1285" /><di:waypoint x="1877" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03abo14_di" bpmnElement="Flow_03abo14"><di:waypoint x="5370" y="567" /><di:waypoint x="5370" y="360" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1r9jmky_di" bpmnElement="Flow_1r9jmky"><di:waypoint x="5320" y="320" /><di:waypoint x="5231" y="320" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_001z9at_di" bpmnElement="Flow_001z9at"><di:waypoint x="5231" y="592" /><di:waypoint x="5345" y="592" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_172s0pi_di" bpmnElement="Flow_172s0pi"><di:waypoint x="3550" y="738" /><di:waypoint x="1970" y="738" /><di:waypoint x="1970" y="1260" /><di:waypoint x="1877" y="1260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_07o3zi3_di" bpmnElement="Flow_07o3zi3"><di:waypoint x="3884" y="1010" /><di:waypoint x="3884" y="738" /><di:waypoint x="3829" y="738" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0b6vgno_di" bpmnElement="Flow_0b6vgno"><di:waypoint x="3729" y="738" /><di:waypoint x="3650" y="738" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ynvwgp_di" bpmnElement="Flow_0ynvwgp"><di:waypoint x="3884" y="1060" /><di:waypoint x="3884" y="1190" /><di:waypoint x="3635" y="1190" /><di:waypoint x="3635" y="1230" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_00an97v_di" bpmnElement="Flow_00an97v"><di:waypoint x="3833" y="1035" /><di:waypoint x="3859" y="1035" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1cx3l0d_di" bpmnElement="Flow_1cx3l0d"><di:waypoint x="2624" y="1630" /><di:waypoint x="1840" y="1630" /><di:waypoint x="1840" y="1325" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jpwkr5_di" bpmnElement="Flow_0jpwkr5"><di:waypoint x="2855" y="1285" /><di:waypoint x="2897" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_08436iz_di" bpmnElement="Flow_08436iz"><di:waypoint x="2830" y="1310" /><di:waypoint x="2830" y="1590" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15how9m_di" bpmnElement="Flow_15how9m"><di:waypoint x="2780" y="1630" /><di:waypoint x="2724" y="1630" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1r2it9m_di" bpmnElement="Flow_1r2it9m"><di:waypoint x="11040" y="913" /><di:waypoint x="11075" y="913" /><di:waypoint x="11075" y="915" /><di:waypoint x="11110" y="915" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1m7uquq_di" bpmnElement="SequenceFlow_1m7uquq"><di:waypoint x="3974" y="1175" /><di:waypoint x="3974" y="817" /><di:waypoint x="4169" y="817" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0r4whbp_di" bpmnElement="SequenceFlow_0r4whbp"><di:waypoint x="480" y="1285" /><di:waypoint x="528" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y5sbb6_di" bpmnElement="SequenceFlow_1y5sbb6"><di:waypoint x="2260" y="1420" /><di:waypoint x="2260" y="1450" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_00gaze5_di" bpmnElement="SequenceFlow_00gaze5"><di:waypoint x="2007" y="1570" /><di:waypoint x="1910" y="1570" /><di:waypoint x="1910" y="1487" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_09esusj_di" bpmnElement="SequenceFlow_09esusj"><di:waypoint x="1727" y="1285" /><di:waypoint x="1777" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1t1gepk_di" bpmnElement="SequenceFlow_1t1gepk"><di:waypoint x="628" y="1285" /><di:waypoint x="649" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0v7s9u3_di" bpmnElement="SequenceFlow_0v7s9u3"><di:waypoint x="2057" y="1223" /><di:waypoint x="2057" y="1245" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_19lot16_di" bpmnElement="SequenceFlow_19lot16"><di:waypoint x="1802" y="591" /><di:waypoint x="1754" y="591" /><di:waypoint x="1754" y="1259" /><di:waypoint x="1777" y="1259" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1l9wdru_di" bpmnElement="SequenceFlow_1l9wdru"><di:waypoint x="1827" y="566" /><di:waypoint x="1827" y="531" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0swuj86_di" bpmnElement="SequenceFlow_0swuj86"><di:waypoint x="1827" y="649" /><di:waypoint x="1827" y="616" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ftw82l_di" bpmnElement="SequenceFlow_1ftw82l"><di:waypoint x="1827" y="1143" /><di:waypoint x="1827" y="1110" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0c0tetz_di" bpmnElement="SequenceFlow_0c0tetz"><di:waypoint x="1802" y="792" /><di:waypoint x="1751" y="792" /><di:waypoint x="1751" y="1264" /><di:waypoint x="1777" y="1264" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1y3sb2p_di" bpmnElement="SequenceFlow_1y3sb2p"><di:waypoint x="1827" y="767" /><di:waypoint x="1827" y="729" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_06m3htn_di" bpmnElement="SequenceFlow_06m3htn"><di:waypoint x="1594" y="1285" /><di:waypoint x="1627" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1rhrfh1_di" bpmnElement="SequenceFlow_1rhrfh1"><di:waypoint x="1827" y="846" /><di:waypoint x="1827" y="817" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0h0d2db_di" bpmnElement="SequenceFlow_0h0d2db"><di:waypoint x="1940" y="559" /><di:waypoint x="1940" y="1127" /><di:waypoint x="1873" y="1247" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0d5uaa7_di" bpmnElement="SequenceFlow_0d5uaa7"><di:waypoint x="1421" y="1245" /><di:waypoint x="1421" y="1210" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_173at4s_di" bpmnElement="SequenceFlow_173at4s"><di:waypoint x="3810" y="1270" /><di:waypoint x="3834" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1m8mcvo_di" bpmnElement="SequenceFlow_1m8mcvo"><di:waypoint x="3556" y="1270" /><di:waypoint x="3974" y="1270" /><di:waypoint x="3974" y="1225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02epu7f_di" bpmnElement="SequenceFlow_02epu7f"><di:waypoint x="3531" y="1245" /><di:waypoint x="3531" y="1150" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0clvaly_di" bpmnElement="SequenceFlow_0clvaly"><di:waypoint x="8030" y="599" /><di:waypoint x="8093" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0u4yyq6_di" bpmnElement="SequenceFlow_0u4yyq6"><di:waypoint x="7740" y="599" /><di:waypoint x="7790" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04h5ecy_di" bpmnElement="SequenceFlow_04h5ecy"><di:waypoint x="2310" y="1490" /><di:waypoint x="2377" y="1490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_12mta0z_di" bpmnElement="SequenceFlow_12mta0z"><di:waypoint x="1867" y="1447" /><di:waypoint x="1807" y="1447" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wz61d3_di" bpmnElement="SequenceFlow_0wz61d3"><di:waypoint x="2082" y="864" /><di:waypoint x="2147" y="864" /><di:waypoint x="2147" y="1070" /><di:waypoint x="2107" y="1070" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_18r6en9_di" bpmnElement="SequenceFlow_18r6en9"><di:waypoint x="2057" y="889" /><di:waypoint x="2057" y="925" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0l6zord_di" bpmnElement="SequenceFlow_0l6zord"><di:waypoint x="2057" y="807" /><di:waypoint x="2057" y="839" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hdf1ob_di" bpmnElement="SequenceFlow_1hdf1ob"><di:waypoint x="1787" y="1407" /><di:waypoint x="1787" y="1325" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ont7bs_di" bpmnElement="SequenceFlow_0ont7bs"><di:waypoint x="2477" y="1490" /><di:waypoint x="2527" y="1490" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1cuojzr_di" bpmnElement="SequenceFlow_1cuojzr"><di:waypoint x="3685" y="1270" /><di:waypoint x="3710" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0so1cu7_di" bpmnElement="SequenceFlow_0so1cu7"><di:waypoint x="1112" y="1285" /><di:waypoint x="1131" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xb6pi5_di" bpmnElement="SequenceFlow_1xb6pi5"><di:waypoint x="4415" y="817" /><di:waypoint x="4906" y="817" /><di:waypoint x="4906" y="778" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xn4bia_di" bpmnElement="SequenceFlow_1xn4bia"><di:waypoint x="749" y="1285" /><di:waypoint x="769" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_07e3ecq_di" bpmnElement="SequenceFlow_07e3ecq"><di:waypoint x="188" y="1285" /><di:waypoint x="230" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0c3pj2r_di" bpmnElement="SequenceFlow_0c3pj2r"><di:waypoint x="4219" y="817" /><di:waypoint x="4365" y="817" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0usaj3l_di" bpmnElement="SequenceFlow_0usaj3l"><di:waypoint x="4194" y="792" /><di:waypoint x="4194" y="735" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0likwkq_di" bpmnElement="SequenceFlow_0likwkq"><di:waypoint x="9082" y="1620" /><di:waypoint x="9082" y="1737" /><di:waypoint x="1827" y="1737" /><di:waypoint x="1827" y="1325" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sl85kj_di" bpmnElement="SequenceFlow_0sl85kj"><di:waypoint x="9082" y="1500" /><di:waypoint x="9082" y="1540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1axk2yr_di" bpmnElement="SequenceFlow_1axk2yr"><di:waypoint x="8992" y="1460" /><di:waypoint x="9032" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ui0360_di" bpmnElement="SequenceFlow_0ui0360"><di:waypoint x="2057" y="1325" /><di:waypoint x="2057" y="1407" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0pmv7nv_di" bpmnElement="SequenceFlow_0pmv7nv"><di:waypoint x="2057" y="1110" /><di:waypoint x="2057" y="1143" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0cjqw5l_di" bpmnElement="SequenceFlow_0cjqw5l"><di:waypoint x="1827" y="1245" /><di:waypoint x="1827" y="1223" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0hykypg_di" bpmnElement="SequenceFlow_0hykypg"><di:waypoint x="1802" y="984" /><di:waypoint x="1749" y="984" /><di:waypoint x="1749" y="1262" /><di:waypoint x="1777" y="1262" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1guxshr_di" bpmnElement="SequenceFlow_1guxshr"><di:waypoint x="1827" y="959" /><di:waypoint x="1827" y="926" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1fgri3f_di" bpmnElement="SequenceFlow_1fgri3f"><di:waypoint x="1827" y="1030" /><di:waypoint x="1827" y="1009" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04sex91_di" bpmnElement="SequenceFlow_04sex91"><di:waypoint x="1827" y="242" /><di:waypoint x="1827" y="216" /><di:waypoint x="1916" y="216" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0wowiu7_di" bpmnElement="SequenceFlow_0wowiu7"><di:waypoint x="1827" y="349" /><di:waypoint x="1827" y="322" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1s7kjoh_di" bpmnElement="SequenceFlow_1s7kjoh"><di:waypoint x="1827" y="451" /><di:waypoint x="1827" y="429" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02xcd54_di" bpmnElement="SequenceFlow_02xcd54"><di:waypoint x="1966" y="216" /><di:waypoint x="2057" y="216" /><di:waypoint x="2057" y="242" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_02dv478_di" bpmnElement="SequenceFlow_02dv478"><di:waypoint x="1941" y="241" /><di:waypoint x="1941" y="360" /><di:waypoint x="1940" y="360" /><di:waypoint x="1940" y="479" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xuwf90_di" bpmnElement="SequenceFlow_1xuwf90"><di:waypoint x="8742" y="1460" /><di:waypoint x="8760" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1djl1sa_di" bpmnElement="SequenceFlow_1djl1sa"><di:waypoint x="2057" y="429" /><di:waypoint x="2057" y="727" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_16boqya_di" bpmnElement="SequenceFlow_16boqya"><di:waypoint x="2057" y="322" /><di:waypoint x="2057" y="349" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14ct0ag_di" bpmnElement="SequenceFlow_14ct0ag"><di:waypoint x="10030" y="945" /><di:waypoint x="10030" y="1020" /><di:waypoint x="10190" y="1020" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0rgmv54_di" bpmnElement="SequenceFlow_0rgmv54"><di:waypoint x="10030" y="895" /><di:waypoint x="10030" y="840" /><di:waypoint x="10070" y="840" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0mv914z_di" bpmnElement="SequenceFlow_0mv914z"><di:waypoint x="5395" y="592" /><di:waypoint x="5450" y="592" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_152ucl7_di" bpmnElement="SequenceFlow_152ucl7"><di:waypoint x="10890" y="599" /><di:waypoint x="10940" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0dmec3h_di" bpmnElement="SequenceFlow_0dmec3h"><di:waypoint x="11040" y="599" /><di:waypoint x="11060" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1iskmoe_di" bpmnElement="SequenceFlow_1iskmoe"><di:waypoint x="3352" y="1405" /><di:waypoint x="3379" y="1405" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0g240o6_di" bpmnElement="SequenceFlow_0g240o6"><di:waypoint x="2057" y="1005" /><di:waypoint x="2057" y="1030" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0om285i_di" bpmnElement="SequenceFlow_0om285i"><di:waypoint x="4390" y="690" /><di:waypoint x="4390" y="792" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_05q8y1e_di" bpmnElement="SequenceFlow_05q8y1e"><di:waypoint x="4390" y="580" /><di:waypoint x="4390" y="610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_04qr9es_di" bpmnElement="SequenceFlow_04qr9es"><di:waypoint x="4254" y="540" /><di:waypoint x="4340" y="540" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0j07zfy_di" bpmnElement="SequenceFlow_0j07zfy"><di:waypoint x="1231" y="1285" /><di:waypoint x="1249" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1toh18t_di" bpmnElement="SequenceFlow_1toh18t"><di:waypoint x="3495" y="1270" /><di:waypoint x="3506" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_14w8b23_di" bpmnElement="SequenceFlow_14w8b23"><di:waypoint x="3352" y="1270" /><di:waypoint x="3395" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1qfc4so_di" bpmnElement="SequenceFlow_1qfc4so"><di:waypoint x="1349" y="1285" /><di:waypoint x="1371" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_08d7rp4_di" bpmnElement="SequenceFlow_08d7rp4"><di:waypoint x="8490" y="599" /><di:waypoint x="8540" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0lecpg6_di" bpmnElement="SequenceFlow_0lecpg6"><di:waypoint x="8193" y="599" /><di:waypoint x="8242" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1jj5qez_di" bpmnElement="SequenceFlow_1jj5qez"><di:waypoint x="8342" y="599" /><di:waypoint x="8390" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0fksfg7_di" bpmnElement="SequenceFlow_0fksfg7"><di:waypoint x="3182" y="1380" /><di:waypoint x="3182" y="1310" /><di:waypoint x="3137" y="1310" /><di:waypoint x="3137" y="1240" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0x93a4f_di" bpmnElement="SequenceFlow_0x93a4f"><di:waypoint x="2997" y="1285" /><di:waypoint x="3071" y="1285" /><di:waypoint x="3071" y="1405" /><di:waypoint x="3157" y="1405" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03rjl0e_di" bpmnElement="SequenceFlow_03rjl0e"><di:waypoint x="3479" y="1405" /><di:waypoint x="3514" y="1405" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vahhfc_di" bpmnElement="SequenceFlow_0vahhfc"><di:waypoint x="3207" y="1405" /><di:waypoint x="3252" y="1405" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xvupk8_di" bpmnElement="SequenceFlow_1xvupk8"><di:waypoint x="3564" y="1365" /><di:waypoint x="3564" y="1330" /><di:waypoint x="3302" y="1330" /><di:waypoint x="3302" y="1310" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kvqh9h_di" bpmnElement="SequenceFlow_1kvqh9h"><di:waypoint x="3190" y="1388" /><di:waypoint x="3190" y="1270" /><di:waypoint x="3252" y="1270" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lj3pps_di" bpmnElement="SequenceFlow_1lj3pps"><di:waypoint x="3614" y="1610" /><di:waypoint x="3662" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03n7qsr_di" bpmnElement="SequenceFlow_03n7qsr"><di:waypoint x="3495" y="1610" /><di:waypoint x="3514" y="1610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ddg1ag_di" bpmnElement="SequenceFlow_0ddg1ag"><di:waypoint x="6192" y="904" /><di:waypoint x="6272" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vxtut4_di" bpmnElement="SequenceFlow_1vxtut4"><di:waypoint x="6372" y="904" /><di:waypoint x="6442" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vaxuhr_di" bpmnElement="SequenceFlow_1vaxuhr"><di:waypoint x="6702" y="904" /><di:waypoint x="6764" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ebm30m_di" bpmnElement="SequenceFlow_1ebm30m"><di:waypoint x="6542" y="904" /><di:waypoint x="6602" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0il832x_di" bpmnElement="SequenceFlow_0il832x"><di:waypoint x="5990" y="930" /><di:waypoint x="6041" y="930" /><di:waypoint x="6041" y="904" /><di:waypoint x="6092" y="904" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1vvu5un_di" bpmnElement="SequenceFlow_1vvu5un"><di:waypoint x="5817" y="904" /><di:waypoint x="5854" y="904" /><di:waypoint x="5854" y="930" /><di:waypoint x="5890" y="930" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_03kohz4_di" bpmnElement="SequenceFlow_03kohz4"><di:waypoint x="5792" y="929" /><di:waypoint x="5792" y="1290" /><di:waypoint x="5842" y="1290" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lakag4_di" bpmnElement="SequenceFlow_1lakag4"><di:waypoint x="10510" y="574" /><di:waypoint x="10510" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1xz0oik_di" bpmnElement="SequenceFlow_1xz0oik"><di:waypoint x="8622" y="1460" /><di:waypoint x="8642" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0sckeot_di" bpmnElement="SequenceFlow_0sckeot"><di:waypoint x="988" y="1285" /><di:waypoint x="1012" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_100c6bi_di" bpmnElement="SequenceFlow_100c6bi"><di:waypoint x="869" y="1285" /><di:waypoint x="888" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0vn1hy3_di" bpmnElement="SequenceFlow_0vn1hy3"><di:waypoint x="10535" y="599" /><di:waypoint x="10585" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1gt5ave_di" bpmnElement="SequenceFlow_1gt5ave"><di:waypoint x="8502" y="1460" /><di:waypoint x="8522" y="1460" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1lciq2d_di" bpmnElement="SequenceFlow_1lciq2d"><di:waypoint x="10472" y="920" /><di:waypoint x="10502" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1ijx8sh_di" bpmnElement="SequenceFlow_1ijx8sh"><di:waypoint x="8640" y="599" /><di:waypoint x="8680" y="599" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0n0csju_di" bpmnElement="SequenceFlow_0n0csju"><di:waypoint x="10732" y="915" /><di:waypoint x="10746" y="915" /><di:waypoint x="10746" y="920" /><di:waypoint x="10760" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1kxgg5v_di" bpmnElement="SequenceFlow_1kxgg5v"><di:waypoint x="10602" y="920" /><di:waypoint x="10632" y="920" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_022h4i7_di" bpmnElement="SequenceFlow_022h4i7"><di:waypoint x="4422" y="1200" /><di:waypoint x="4516" y="1200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1h1rqfu_di" bpmnElement="SequenceFlow_1h1rqfu"><di:waypoint x="4244" y="1200" /><di:waypoint x="4322" y="1200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1dsq1s9_di" bpmnElement="SequenceFlow_1dsq1s9"><di:waypoint x="3999" y="1200" /><di:waypoint x="4144" y="1200" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_1hak0di_di" bpmnElement="SequenceFlow_1hak0di"><di:waypoint x="2101" y="1324" /><di:waypoint x="2167" y="1380" /><di:waypoint x="2210" y="1380" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0ww5x19_di" bpmnElement="SequenceFlow_0ww5x19"><di:waypoint x="2107" y="1285" /><di:waypoint x="2150" y="1285" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0me1hcu_di" bpmnElement="SequenceFlow_0me1hcu"><di:waypoint x="2627" y="1490" /><di:waypoint x="2649" y="1490" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="1267" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_1quc7do_di" bpmnElement="Task_0micukk" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="1777" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0wj5pgl_di" bpmnElement="ServiceTask_0wj5pgl"><dc:Bounds x="2527" y="1450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1saooe4_di" bpmnElement="ServiceTask_1saooe4"><dc:Bounds x="2150" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0ldbku4_di" bpmnElement="UserTask_0ldbku4" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="2007" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0iib0v5_di" bpmnElement="ServiceTask_0iib0v5"><dc:Bounds x="2377" y="1450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1g70x44_di" bpmnElement="EndEvent_1g70x44"><dc:Bounds x="2649" y="1472" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0criw3u_di" bpmnElement="ExclusiveGateway_0criw3u" isMarkerVisible="true"><dc:Bounds x="3949" y="1175" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1csv323_di" bpmnElement="ServiceTask_1csv323"><dc:Bounds x="4144" y="1160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_1xab3ay_di" bpmnElement="EndEvent_1xab3ay"><dc:Bounds x="4516" y="1182" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_08woed8_di" bpmnElement="ServiceTask_08woed8"><dc:Bounds x="4322" y="1160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0dc3scv_di" bpmnElement="ServiceTask_0dc3scv"><dc:Bounds x="13160" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_18odnnp_di" bpmnElement="EndEvent_18odnnp"><dc:Bounds x="13382" y="902" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ld75wz_di" bpmnElement="ServiceTask_1ld75wz"><dc:Bounds x="12960" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_07u2ado_di" bpmnElement="ServiceTask_07u2ado"><dc:Bounds x="11110" y="875" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1brocmh_di" bpmnElement="ServiceTask_1brocmh"><dc:Bounds x="10632" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0aun3b7_di" bpmnElement="ServiceTask_0aun3b7"><dc:Bounds x="10940" y="873" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_10ocghy_di" bpmnElement="CallActivity_10ocghy"><dc:Bounds x="8093" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0zd0i4n_di" bpmnElement="ServiceTask_0zd0i4n"><dc:Bounds x="8540" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_129llks_di" bpmnElement="ServiceTask_129llks"><dc:Bounds x="8680" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0fkrqh8_di" bpmnElement="ServiceTask_0fkrqh8"><dc:Bounds x="10372" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0qqg4w6_di" bpmnElement="ServiceTask_0qqg4w6"><dc:Bounds x="10502" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00myvbt_di" bpmnElement="ServiceTask_00myvbt"><dc:Bounds x="8402" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0q17ioc_di" bpmnElement="CallActivity_0q17ioc"><dc:Bounds x="10660" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0h52xqs_di" bpmnElement="ServiceTask_0h52xqs"><dc:Bounds x="769" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_10zy1sr_di" bpmnElement="ServiceTask_10zy1sr"><dc:Bounds x="888" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1ctu6an_di" bpmnElement="ScriptTask_1ctu6an"><dc:Bounds x="1249" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0i6x8gm_di" bpmnElement="ServiceTask_0i6x8gm"><dc:Bounds x="8522" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0tn60s7_di" bpmnElement="ServiceTask_0tn60s7"><dc:Bounds x="8642" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0yo5pqi_di" bpmnElement="ScriptTask_0yo5pqi"><dc:Bounds x="10230" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0ttp7ea_di" bpmnElement="ScriptTask_0ttp7ea"><dc:Bounds x="10370" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1g03dpo_di" bpmnElement="ExclusiveGateway_1g03dpo" isMarkerVisible="true"><dc:Bounds x="10485" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1f0pr55_di" bpmnElement="ServiceTask_1f0pr55"><dc:Bounds x="10460" y="430" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_024w4yw_di" bpmnElement="CallActivity_024w4yw"><dc:Bounds x="7240" y="680" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_0x2df99_di" bpmnElement="CallActivity_0x2df99"><dc:Bounds x="7250" y="440" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_084vp7b_di" bpmnElement="ServiceTask_084vp7b"><dc:Bounds x="5620" y="860" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_051z3u4_di" bpmnElement="ExclusiveGateway_051z3u4" isMarkerVisible="true"><dc:Bounds x="5767" y="879" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_010ugp5_di" bpmnElement="ServiceTask_010ugp5"><dc:Bounds x="5890" y="890" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0t7wfvg_di" bpmnElement="ServiceTask_0t7wfvg"><dc:Bounds x="6092" y="864" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1c0so8z_di" bpmnElement="ServiceTask_1c0so8z"><dc:Bounds x="6602" y="864" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_0bd6u35_di" bpmnElement="EndEvent_0bd6u35"><dc:Bounds x="6764" y="886" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_077ce62_di" bpmnElement="ServiceTask_077ce62"><dc:Bounds x="6442" y="864" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0dgjo0l_di" bpmnElement="ServiceTask_0dgjo0l"><dc:Bounds x="6272" y="864" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1msvpx8_di" bpmnElement="ServiceTask_1msvpx8"><dc:Bounds x="4154" y="500" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ljvqa9_di" bpmnElement="ServiceTask_1ljvqa9"><dc:Bounds x="5842" y="1250" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bm3npl_di" bpmnElement="ServiceTask_0bm3npl"><dc:Bounds x="3514" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="EndEvent_124oaof_di" bpmnElement="EndEvent_124oaof"><dc:Bounds x="3662" y="1592" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0d8cmu3_di" bpmnElement="ServiceTask_0d8cmu3"><dc:Bounds x="3395" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="UserTask_0hjskmz_di" bpmnElement="UserTask_0hjskmz" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="3514" y="1365" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0vne501_di" bpmnElement="ExclusiveGateway_0vne501" isMarkerVisible="true"><dc:Bounds x="3157" y="1380" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00jrd71_di" bpmnElement="ServiceTask_00jrd71"><dc:Bounds x="3252" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1suyhbn_di" bpmnElement="ServiceTask_1suyhbn"><dc:Bounds x="3379" y="1365" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1ckbaw7_di" bpmnElement="ServiceTask_1ckbaw7"><dc:Bounds x="3070" y="1160" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0fcezq4_di" bpmnElement="ServiceTask_0fcezq4"><dc:Bounds x="2897" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0y4dhe5_di" bpmnElement="ServiceTask_0y4dhe5"><dc:Bounds x="10080" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_11neoxf_di" bpmnElement="ServiceTask_11neoxf"><dc:Bounds x="11870" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0xp36oj_di" bpmnElement="ServiceTask_0xp36oj"><dc:Bounds x="8242" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0tdvjgq_di" bpmnElement="ServiceTask_0tdvjgq"><dc:Bounds x="8390" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1blpevb_di" bpmnElement="ServiceTask_1blpevb" bioc:stroke="rgb(142, 36, 170)" bioc:fill="rgb(225, 190, 231)"><dc:Bounds x="3395" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1a0rnql_di" bpmnElement="ServiceTask_1a0rnql"><dc:Bounds x="1131" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1u02rkn_di" bpmnElement="ServiceTask_1u02rkn"><dc:Bounds x="4340" y="500" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0wa2y9q_di" bpmnElement="ServiceTask_0wa2y9q"><dc:Bounds x="4340" y="610" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1xhbxvb_di" bpmnElement="CallActivity_1xhbxvb" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)"><dc:Bounds x="2007" y="925" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1xi8p4s_di" bpmnElement="ServiceTask_1xi8p4s"><dc:Bounds x="2007" y="1030" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_070673a_di" bpmnElement="ServiceTask_070673a"><dc:Bounds x="3252" y="1365" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0cxa9nn_di" bpmnElement="ServiceTask_0cxa9nn"><dc:Bounds x="10790" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1jov9hv_di" bpmnElement="ServiceTask_1jov9hv"><dc:Bounds x="10940" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1bfkstr_di" bpmnElement="ServiceTask_1bfkstr"><dc:Bounds x="6850" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0zap78k_di" bpmnElement="ExclusiveGateway_0zap78k" isMarkerVisible="true"><dc:Bounds x="10005" y="895" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0u0cocf_di" bpmnElement="ServiceTask_0u0cocf"><dc:Bounds x="2007" y="242" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1uypq3f_di" bpmnElement="ServiceTask_1uypq3f"><dc:Bounds x="2007" y="349" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_18mndl7_di" bpmnElement="CallActivity_18mndl7" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="12180" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0r436s3_di" bpmnElement="ServiceTask_0r436s3"><dc:Bounds x="1777" y="451" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0tvyo2s_di" bpmnElement="ScriptTask_0tvyo2s"><dc:Bounds x="1777" y="349" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0a4oln0_di" bpmnElement="ServiceTask_0a4oln0"><dc:Bounds x="1777" y="242" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0ms1mnj_di" bpmnElement="ExclusiveGateway_0ms1mnj" isMarkerVisible="true"><dc:Bounds x="1916" y="191" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_18ctl89_di" bpmnElement="CallActivity_18ctl89" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1777" y="1030" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0z56oom_di" bpmnElement="ExclusiveGateway_0z56oom" isMarkerVisible="true"><dc:Bounds x="1802" y="959" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0m4dlxy_di" bpmnElement="ServiceTask_0m4dlxy"><dc:Bounds x="8892" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_153xj4a_di" bpmnElement="ServiceTask_153xj4a"><dc:Bounds x="9032" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1w5iyc6_di" bpmnElement="ServiceTask_1w5iyc6"><dc:Bounds x="9032" y="1540" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1nevesx_di" bpmnElement="ExclusiveGateway_1nevesx" isMarkerVisible="true"><dc:Bounds x="4169" y="792" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_072e62y_di" bpmnElement="ServiceTask_072e62y"><dc:Bounds x="649" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_1at31m2_di" bpmnElement="ExclusiveGateway_1at31m2" isMarkerVisible="true"><dc:Bounds x="4365" y="792" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_01t68px_di" bpmnElement="ScriptTask_01t68px"><dc:Bounds x="5450" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1ptnqfa_di" bpmnElement="ScriptTask_1ptnqfa"><dc:Bounds x="6442" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_00kzpq4_di" bpmnElement="ScriptTask_00kzpq4"><dc:Bounds x="7490" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0uumxt3_di" bpmnElement="ScriptTask_0uumxt3"><dc:Bounds x="7640" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1gpzlaj_di" bpmnElement="ScriptTask_1gpzlaj"><dc:Bounds x="1012" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1nhc5np_di" bpmnElement="ServiceTask_1nhc5np" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3585" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1iyqxtl_di" bpmnElement="ServiceTask_1iyqxtl"><dc:Bounds x="1707" y="1407" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_15xme30_di" bpmnElement="ServiceTask_15xme30"><dc:Bounds x="2007" y="727" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_18a5vta_di" bpmnElement="ExclusiveGateway_18a5vta" isMarkerVisible="true"><dc:Bounds x="2032" y="839" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0z9bkxp_di" bpmnElement="ServiceTask_0z9bkxp"><dc:Bounds x="1867" y="1407" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_15o1r2d_di" bpmnElement="ServiceTask_15o1r2d"><dc:Bounds x="2210" y="1450" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0e86zwt_di" bpmnElement="ServiceTask_0e86zwt"><dc:Bounds x="12650" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_17mnp7u_di" bpmnElement="ServiceTask_17mnp7u"><dc:Bounds x="7790" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0bax1sb_di" bpmnElement="ServiceTask_0bax1sb"><dc:Bounds x="7930" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0lscfxj_di" bpmnElement="ExclusiveGateway_0lscfxj" isMarkerVisible="true"><dc:Bounds x="3506" y="1245" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1bwkntl_di" bpmnElement="ServiceTask_1bwkntl" bioc:stroke="rgb(229, 57, 53)" bioc:fill="rgb(255, 205, 210)"><dc:Bounds x="3710" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1yfobcp_di" bpmnElement="ServiceTask_1yfobcp"><dc:Bounds x="1371" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_00t1fq0_di" bpmnElement="ServiceTask_00t1fq0"><dc:Bounds x="1890" y="479" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_1fh2o82_di" bpmnElement="CallActivity_1fh2o82" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1777" y="846" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1hczx18_di" bpmnElement="ServiceTask_1hczx18"><dc:Bounds x="1494" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_103dpji_di" bpmnElement="ExclusiveGateway_103dpji" isMarkerVisible="true"><dc:Bounds x="1802" y="767" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_07t0rg2_di" bpmnElement="ServiceTask_07t0rg2"><dc:Bounds x="1777" y="1143" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="CallActivity_15rwll5_di" bpmnElement="CallActivity_15rwll5" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="1777" y="649" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ExclusiveGateway_0keqb5g_di" bpmnElement="ExclusiveGateway_0keqb5g" isMarkerVisible="true"><dc:Bounds x="1802" y="566" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_0c85bl3_di" bpmnElement="ServiceTask_0c85bl3"><dc:Bounds x="2007" y="1143" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_03jqmdl_di" bpmnElement="ServiceTask_03jqmdl"><dc:Bounds x="528" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1cm0vav_di" bpmnElement="ServiceTask_1cm0vav"><dc:Bounds x="1627" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_1ng2rl3_di" bpmnElement="ScriptTask_1ng2rl3"><dc:Bounds x="2007" y="1530" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ScriptTask_0bsz72u_di" bpmnElement="ScriptTask_0bsz72u"><dc:Bounds x="2210" y="1340" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="ServiceTask_1cd1q1m_di" bpmnElement="ServiceTask_1cd1q1m"><dc:Bounds x="380" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1lerna4_di" bpmnElement="Gateway_1lerna4" isMarkerVisible="true"><dc:Bounds x="2805" y="1260" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_00qutj5_di" bpmnElement="Activity_00qutj5"><dc:Bounds x="2780" y="1590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qp7e41_di" bpmnElement="Activity_1qp7e41"><dc:Bounds x="2624" y="1590" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1412k1z_di" bpmnElement="Activity_1412k1z" isExpanded="true"><dc:Bounds x="3495" y="920" width="338" height="230" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1dzmjbn_di" bpmnElement="Flow_1dzmjbn"><di:waypoint x="3650" y="1100" /><di:waypoint x="3665" y="1100" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0jefd48_di" bpmnElement="Flow_0jefd48"><di:waypoint x="3556" y="1030" /><di:waypoint x="3610" y="1030" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0n0ihg9_di" bpmnElement="Flow_0n0ihg9"><di:waypoint x="3635" y="1055" /><di:waypoint x="3635" y="1072" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0uq75zm_di" bpmnElement="Flow_0uq75zm"><di:waypoint x="3635" y="1005" /><di:waypoint x="3635" y="998" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04ewafw_di" bpmnElement="Flow_04ewafw"><di:waypoint x="3653" y="980" /><di:waypoint x="3665" y="980" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1h9tg3o_di" bpmnElement="Flow_1h9tg3o"><di:waypoint x="3765" y="980" /><di:waypoint x="3777" y="980" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_16jwuhk_di" bpmnElement="Flow_16jwuhk"><di:waypoint x="3765" y="1100" /><di:waypoint x="3777" y="1100" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0ww15ff_di" bpmnElement="Event_0ww15ff"><dc:Bounds x="3520" y="1012" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0cnpjfp_di" bpmnElement="Gateway_0cnpjfp"><dc:Bounds x="3610" y="1005" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1ecn74c_di" bpmnElement="Event_1ecn74c"><dc:Bounds x="3617" y="962" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0n3r135_di" bpmnElement="Event_0n3r135"><dc:Bounds x="3777" y="962" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0hf745l_di" bpmnElement="Event_0hf745l"><dc:Bounds x="3777" y="1082" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dksg0t_di" bpmnElement="Activity_1dksg0t"><dc:Bounds x="3665" y="940" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10mk23p_di" bpmnElement="Activity_10mk23p"><dc:Bounds x="3665" y="1050" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_04n9kk4_di" bpmnElement="Event_04n9kk4"><dc:Bounds x="3617" y="1072" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0z8ajfa_di" bpmnElement="Gateway_0z8ajfa" isMarkerVisible="true"><dc:Bounds x="3859" y="1010" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1s2eady_di" bpmnElement="Activity_1s2eady"><dc:Bounds x="3550" y="698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02yvhcr_di" bpmnElement="Activity_02yvhcr"><dc:Bounds x="3729" y="698" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_09x17j3_di" bpmnElement="Activity_09x17j3" isExpanded="true"><dc:Bounds x="4580" y="405" width="651" height="373" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_07iei45_di" bpmnElement="Flow_07iei45"><di:waypoint x="4801" y="650" /><di:waypoint x="4801" y="718" /><di:waypoint x="4861" y="718" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fqf007_di" bpmnElement="Flow_0fqf007"><di:waypoint x="4961" y="718" /><di:waypoint x="4993" y="718" /><di:waypoint x="4993" y="660" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ha5dal_di" bpmnElement="Flow_0ha5dal"><di:waypoint x="4801" y="600" /><di:waypoint x="4801" y="565" /><di:waypoint x="4861" y="565" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gusycj_di" bpmnElement="Flow_1gusycj"><di:waypoint x="4961" y="565" /><di:waypoint x="4993" y="565" /><di:waypoint x="4993" y="610" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bq8tur_di" bpmnElement="Flow_0bq8tur"><di:waypoint x="5018" y="635" /><di:waypoint x="5043" y="635" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_19bgyhl_di" bpmnElement="Flow_19bgyhl"><di:waypoint x="4651" y="572" /><di:waypoint x="4708" y="572" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0tgd0aw_di" bpmnElement="Flow_0tgd0aw"><di:waypoint x="4733" y="597" /><di:waypoint x="4733" y="625" /><di:waypoint x="4776" y="625" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_18glmaa_di" bpmnElement="Flow_18glmaa"><di:waypoint x="4733" y="547" /><di:waypoint x="4733" y="475" /><di:waypoint x="4783" y="475" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qamnkb_di" bpmnElement="Flow_0qamnkb"><di:waypoint x="5143" y="635" /><di:waypoint x="5175" y="635" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wry93k_di" bpmnElement="Flow_1wry93k"><di:waypoint x="4819" y="475" /><di:waypoint x="5013" y="475" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1t827jr_di" bpmnElement="Flow_1t827jr"><di:waypoint x="5113" y="475" /><di:waypoint x="5175" y="475" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_03pg736_di" bpmnElement="Event_03pg736"><dc:Bounds x="4615" y="554" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_161h012_di" bpmnElement="Activity_161h012" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="4861" y="678" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0d0lzi5_di" bpmnElement="Gateway_0d0lzi5"><dc:Bounds x="4776" y="600" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ionn41_di" bpmnElement="Activity_0ionn41"><dc:Bounds x="4861" y="525" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_020jyid_di" bpmnElement="Gateway_020jyid"><dc:Bounds x="4968" y="610" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_11pl4cp_di" bpmnElement="Event_11pl4cp"><dc:Bounds x="5175" y="617" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_14g2jbn_di" bpmnElement="Gateway_14g2jbn"><dc:Bounds x="4708" y="547" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_08ihm6t_di" bpmnElement="Event_08ihm6t"><dc:Bounds x="4783" y="457" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0zguoj0_di" bpmnElement="Activity_0zguoj0"><dc:Bounds x="5043" y="595" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0vseybf_di" bpmnElement="Activity_0vseybf"><dc:Bounds x="5013" y="435" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1uscilf_di" bpmnElement="Event_1uscilf"><dc:Bounds x="5175" y="457" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_11d00mg_di" bpmnElement="Gateway_11d00mg" isMarkerVisible="true"><dc:Bounds x="5345" y="567" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yhkvv2_di" bpmnElement="Activity_1yhkvv2"><dc:Bounds x="5320" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0n2ircn_di" bpmnElement="Activity_0n2ircn"><dc:Bounds x="5131" y="280" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rhqbck_di" bpmnElement="Activity_0rhqbck" isExpanded="true"><dc:Bounds x="5644" y="412" width="651" height="373" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1qimq24_di" bpmnElement="Flow_1qimq24"><di:waypoint x="5865" y="657" /><di:waypoint x="5865" y="707" /><di:waypoint x="5925" y="707" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15czeuh_di" bpmnElement="Flow_15czeuh"><di:waypoint x="5865" y="607" /><di:waypoint x="5865" y="587" /><di:waypoint x="5914" y="587" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fi3190_di" bpmnElement="Flow_1fi3190"><di:waypoint x="5715" y="579" /><di:waypoint x="5772" y="579" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0hroyuh_di" bpmnElement="Flow_0hroyuh"><di:waypoint x="5797" y="604" /><di:waypoint x="5797" y="632" /><di:waypoint x="5840" y="632" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mwnkpk_di" bpmnElement="Flow_0mwnkpk"><di:waypoint x="5797" y="554" /><di:waypoint x="5797" y="482" /><di:waypoint x="5847" y="482" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0w05m68_di" bpmnElement="Flow_0w05m68"><di:waypoint x="5883" y="482" /><di:waypoint x="6077" y="482" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0aubjcn_di" bpmnElement="Flow_0aubjcn"><di:waypoint x="6082" y="642" /><di:waypoint x="6107" y="642" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_05p8730_di" bpmnElement="Flow_05p8730"><di:waypoint x="6207" y="642" /><di:waypoint x="6239" y="642" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1de7nkn_di" bpmnElement="Flow_1de7nkn"><di:waypoint x="6177" y="482" /><di:waypoint x="6239" y="482" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0lrraw0_di" bpmnElement="Flow_0lrraw0"><di:waypoint x="6025" y="707" /><di:waypoint x="6057" y="707" /><di:waypoint x="6057" y="667" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04tmkmh_di" bpmnElement="Flow_04tmkmh"><di:waypoint x="6014" y="587" /><di:waypoint x="6057" y="587" /><di:waypoint x="6057" y="617" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_03uw820_di" bpmnElement="Event_03uw820"><dc:Bounds x="5679" y="561" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0yvlkjn_di" bpmnElement="Gateway_0yvlkjn"><dc:Bounds x="5840" y="607" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1l8t5q9_di" bpmnElement="Gateway_1l8t5q9"><dc:Bounds x="5772" y="554" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1u1goqf_di" bpmnElement="Event_1u1goqf"><dc:Bounds x="5847" y="464" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1hbg8wr_di" bpmnElement="Activity_1hbg8wr"><dc:Bounds x="6077" y="442" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1pllu8w_di" bpmnElement="Event_1pllu8w"><dc:Bounds x="6239" y="464" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1enm4un_di" bpmnElement="Gateway_1enm4un"><dc:Bounds x="6032" y="617" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_027z79n_di" bpmnElement="Activity_027z79n"><dc:Bounds x="6107" y="602" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1fg1icp_di" bpmnElement="Event_1fg1icp"><dc:Bounds x="6239" y="624" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1xgibh6_di" bpmnElement="Activity_1xgibh6" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)"><dc:Bounds x="5925" y="667" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0i48q7k_di" bpmnElement="Activity_0i48q7k"><dc:Bounds x="5914" y="547" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0500g82_di" bpmnElement="Gateway_0500g82" isMarkerVisible="true"><dc:Bounds x="6345" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wzzrqc_di" bpmnElement="Activity_0wzzrqc"><dc:Bounds x="6320" y="220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_02lj2bc_di" bpmnElement="Activity_02lj2bc"><dc:Bounds x="6582" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1q2kaq0_di" bpmnElement="Activity_1q2kaq0"><dc:Bounds x="6720" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_19k9a5z_di" bpmnElement="Activity_19k9a5z"><dc:Bounds x="6990" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1x35qh5_di" bpmnElement="Gateway_02ldjgw"><dc:Bounds x="7135" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1r9naf0_di" bpmnElement="Gateway_0h7ueo2"><dc:Bounds x="7395" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bc9pac_di" bpmnElement="Activity_0bc9pac" isExpanded="true"><dc:Bounds x="8550" y="80" width="940" height="442" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_0eouevf_di" bpmnElement="Flow_0eouevf"><di:waypoint x="8700" y="236" /><di:waypoint x="8700" y="350" /><di:waypoint x="8780" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_04t7ro4_di" bpmnElement="Flow_04t7ro4"><di:waypoint x="9160" y="375" /><di:waypoint x="9160" y="462" /><di:waypoint x="9040" y="462" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1g0rfq6_di" bpmnElement="Flow_1g0rfq6"><di:waypoint x="9040" y="350" /><di:waypoint x="9135" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mw9j5w_di" bpmnElement="Flow_1mw9j5w"><di:waypoint x="9320" y="350" /><di:waypoint x="9352" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1u7if2g_di" bpmnElement="Flow_1u7if2g"><di:waypoint x="9185" y="350" /><di:waypoint x="9220" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0bn4al9_di" bpmnElement="Flow_0bn4al9"><di:waypoint x="8880" y="350" /><di:waypoint x="8940" y="350" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wuly57_di" bpmnElement="Flow_1wuly57"><di:waypoint x="8940" y="462" /><di:waypoint x="8830" y="462" /><di:waypoint x="8830" y="390" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1c0v51d_di" bpmnElement="Flow_1c0v51d"><di:waypoint x="8638" y="211" /><di:waypoint x="8675" y="211" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15l8vu5_di" bpmnElement="Flow_15l8vu5"><di:waypoint x="8700" y="236" /><di:waypoint x="8700" y="260" /><di:waypoint x="9020" y="260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1nfbpzw_di" bpmnElement="Flow_1nfbpzw"><di:waypoint x="8700" y="186" /><di:waypoint x="8700" y="160" /><di:waypoint x="9020" y="160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17sexef_di" bpmnElement="Flow_17sexef"><di:waypoint x="9120" y="160" /><di:waypoint x="9170" y="160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0csv8v0_di" bpmnElement="Flow_0csv8v0"><di:waypoint x="9270" y="160" /><di:waypoint x="9322" y="160" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_17ko9yc_di" bpmnElement="Flow_17ko9yc"><di:waypoint x="9120" y="260" /><di:waypoint x="9170" y="260" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1yblupa_di" bpmnElement="Flow_1yblupa"><di:waypoint x="9270" y="260" /><di:waypoint x="9322" y="260" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0oqsrfk_di" bpmnElement="Event_0oqsrfk"><dc:Bounds x="8602" y="193" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_14j7upn_di" bpmnElement="Gateway_14j7upn"><dc:Bounds x="8675" y="186" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ddp28j_di" bpmnElement="Activity_0ddp28j"><dc:Bounds x="9020" y="220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_13a7i6z_di" bpmnElement="Activity_13a7i6z" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="9020" y="120" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wlr4yd_di" bpmnElement="Activity_0wlr4yd"><dc:Bounds x="9170" y="120" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0o0mov8_di" bpmnElement="Event_0o0mov8"><dc:Bounds x="9322" y="142" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1siy9wb_di" bpmnElement="Event_1siy9wb"><dc:Bounds x="9322" y="242" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ssz7j7_di" bpmnElement="Activity_1ssz7j7"><dc:Bounds x="9170" y="220" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jd52xx_di" bpmnElement="Activity_1jd52xx"><dc:Bounds x="8780" y="310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0xrfgpf_di" bpmnElement="Activity_0xrfgpf"><dc:Bounds x="9220" y="310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_15xh627_di" bpmnElement="Event_15xh627"><dc:Bounds x="9352" y="332" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1dyqilm_di" bpmnElement="Activity_1dyqilm"><dc:Bounds x="8940" y="310" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ln5k45_di" bpmnElement="Gateway_1ln5k45" isMarkerVisible="true"><dc:Bounds x="9135" y="325" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1cl1i9e_di" bpmnElement="Activity_1cl1i9e"><dc:Bounds x="8940" y="422" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1uqar3u_di" bpmnElement="Gateway_1uqar3u" isMarkerVisible="true"><dc:Bounds x="9555" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fw91rl_di" bpmnElement="Activity_0fw91rl"><dc:Bounds x="9640" y="400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yxlcty_di" bpmnElement="Activity_1yxlcty"><dc:Bounds x="9850" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1aiajc3_di" bpmnElement="Activity_1aiajc3"><dc:Bounds x="9640" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_009ro7w_di" bpmnElement="Activity_009ro7w"><dc:Bounds x="9950" y="400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1c9qa2y_di" bpmnElement="Activity_1c9qa2y"><dc:Bounds x="9790" y="400" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1u6s6nm_di" bpmnElement="Gateway_1u6s6nm" isMarkerVisible="true"><dc:Bounds x="9975" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0pvvyil_di" bpmnElement="Gateway_0pvvyil" isMarkerVisible="true"><dc:Bounds x="11405" y="890" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1t4zwsv_di" bpmnElement="Activity_1t4zwsv"><dc:Bounds x="11390" y="649" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0f7ds41_di" bpmnElement="Activity_0f7ds41" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11267" y="649" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0q6ugvo_di" bpmnElement="Activity_0q6ugvo"><dc:Bounds x="11380" y="760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qe4rfl_di" bpmnElement="Activity_1qe4rfl"><dc:Bounds x="11260" y="780" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1u9x874_di" bpmnElement="Gateway_1u9x874" isMarkerVisible="true"><dc:Bounds x="11755" y="890" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gzcx67_di" bpmnElement="Activity_1gzcx67"><dc:Bounds x="11730" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1bs94m4_di" bpmnElement="Activity_1bs94m4" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11560" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1mcle75_di" bpmnElement="Activity_1mcle75"><dc:Bounds x="11730" y="760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0tgvowp_di" bpmnElement="Activity_0tgvowp"><dc:Bounds x="11560" y="760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1dd7y65_di" bpmnElement="Gateway_1dd7y65" isMarkerVisible="true"><dc:Bounds x="12065" y="890" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wu387f_di" bpmnElement="Activity_0wu387f"><dc:Bounds x="12040" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jm8uyc_di" bpmnElement="Activity_1jm8uyc" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="11870" y="640" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_15az5fv_di" bpmnElement="Activity_15az5fv"><dc:Bounds x="12040" y="752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1w2rrjt_di" bpmnElement="Activity_1w2rrjt"><dc:Bounds x="11870" y="760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0060hx2_di" bpmnElement="Activity_0060hx2"><dc:Bounds x="12350" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0a0phog_di" bpmnElement="Activity_0a0phog"><dc:Bounds x="12500" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1ccghl5_di" bpmnElement="Gateway_1ccghl5" isMarkerVisible="true"><dc:Bounds x="12835" y="895" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lr2j02_di" bpmnElement="Activity_1lr2j02"><dc:Bounds x="12810" y="629" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0x1d8ha_di" bpmnElement="Activity_0x1d8ha" bioc:stroke="rgb(67, 160, 71)" bioc:fill="rgb(200, 230, 201)"><dc:Bounds x="12650" y="629" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1q9twod_di" bpmnElement="Activity_1q9twod"><dc:Bounds x="12810" y="760" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1c99kx9_di" bpmnElement="Activity_1c99kx9"><dc:Bounds x="12650" y="752" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0sw1zw4_di" bpmnElement="Activity_0sw1zw4"><dc:Bounds x="2340" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1o8wzou_di" bpmnElement="Activity_1o8wzou"><dc:Bounds x="2460" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ipkbdn_di" bpmnElement="Activity_1ipkbdn"><dc:Bounds x="3834" y="1230" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_16iea6c_di" bpmnElement="Activity_16iea6c"><dc:Bounds x="1371" y="1130" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ioobfg_di" bpmnElement="Activity_0ioobfg"><dc:Bounds x="1494" y="1130" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0j0dzwa_di" bpmnElement="Activity_0j0dzwa" isExpanded="true"><dc:Bounds x="2580" y="835" width="810" height="280" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1ea00rd_di" bpmnElement="Flow_1ea00rd"><di:waypoint x="2656" y="985" /><di:waypoint x="2675" y="985" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1dgnih9_di" bpmnElement="Flow_1dgnih9"><di:waypoint x="2910" y="1055" /><di:waypoint x="2940" y="1055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03vg725_di" bpmnElement="Flow_03vg725"><di:waypoint x="2700" y="1010" /><di:waypoint x="2700" y="1055" /><di:waypoint x="2810" y="1055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0r6uy1o_di" bpmnElement="Flow_0r6uy1o"><di:waypoint x="2860" y="895" /><di:waypoint x="2882" y="895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kbkxsn_di" bpmnElement="Flow_0kbkxsn"><di:waypoint x="2918" y="895" /><di:waypoint x="2940" y="895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0fyk0h8_di" bpmnElement="Flow_0fyk0h8"><di:waypoint x="2700" y="960" /><di:waypoint x="2700" y="895" /><di:waypoint x="2760" y="895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0gq6m7o_di" bpmnElement="Flow_0gq6m7o"><di:waypoint x="3040" y="895" /><di:waypoint x="3062" y="895" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_03qoimf_di" bpmnElement="Flow_03qoimf"><di:waypoint x="3040" y="1055" /><di:waypoint x="3072" y="1055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1su0uwa_di" bpmnElement="Flow_1su0uwa"><di:waypoint x="3250" y="1055" /><di:waypoint x="3292" y="1055" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0ll6se6_di" bpmnElement="Flow_0ll6se6"><di:waypoint x="3108" y="1055" /><di:waypoint x="3150" y="1055" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Activity_1gnhlmj_di" bpmnElement="Activity_1gnhlmj"><dc:Bounds x="2760" y="855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0csriea_di" bpmnElement="Activity_0csriea"><dc:Bounds x="2940" y="855" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1k7hpom_di" bpmnElement="Event_1k7hpom"><dc:Bounds x="2882" y="877" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0gjqj7d_di" bpmnElement="Activity_0gjqj7d"><dc:Bounds x="2940" y="1015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0sad354_di" bpmnElement="Activity_0sad354"><dc:Bounds x="2810" y="1015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_06aaw87_di" bpmnElement="Event_06aaw87"><dc:Bounds x="3062" y="877" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0alste5_di" bpmnElement="Event_0alste5"><dc:Bounds x="3072" y="1037" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0k1h7g9_di" bpmnElement="Event_0k1h7g9"><dc:Bounds x="3292" y="1037" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0qpfhjf_di" bpmnElement="Activity_0qpfhjf"><dc:Bounds x="3150" y="1015" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1btvkai_di" bpmnElement="Gateway_1btvkai"><dc:Bounds x="2675" y="960" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1gj5okt_di" bpmnElement="Event_1gj5okt"><dc:Bounds x="2620" y="967" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1162j6o_di" bpmnElement="Event_1162j6o"><dc:Bounds x="2920" y="1165" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_11cqezj_di" bpmnElement="Activity_11cqezj"><dc:Bounds x="2700" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_18n0vg6_di" bpmnElement="Activity_18n0vg6"><dc:Bounds x="2580" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17rutmo_di" bpmnElement="Activity_17rutmo"><dc:Bounds x="1380" y="1030" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0ulvgdh_di" bpmnElement="Activity_0ulvgdh"><dc:Bounds x="9740" y="649" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_02q4y91_di" bpmnElement="Event_02q4y91"><dc:Bounds x="5582" y="581" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0ofpk23_di" bpmnElement="Event_0ofpk23"><dc:Bounds x="11502" y="895" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1qqpu7g_di" bpmnElement="Activity_1qqpu7g"><dc:Bounds x="11580" y="875" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0dgr5j5_di" bpmnElement="Gateway_0dgr5j5" isMarkerVisible="true"><dc:Bounds x="10585" y="574" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0ep8o5h_di" bpmnElement="Gateway_0ep8o5h" isMarkerVisible="true"><dc:Bounds x="10295" y="897" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1vttyhg_di" bpmnElement="Activity_1vttyhg"><dc:Bounds x="11060" y="559" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0avvihb_di" bpmnElement="Activity_0avvihb"><dc:Bounds x="11060" y="669" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0rcjlgp_di" bpmnElement="Activity_0rcjlgp"><dc:Bounds x="10070" y="800" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1lfp1u1_di" bpmnElement="Activity_1lfp1u1"><dc:Bounds x="10200" y="800" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01tsta2_di" bpmnElement="Activity_01tsta2"><dc:Bounds x="10070" y="980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1jngfcf_di" bpmnElement="Activity_1jngfcf"><dc:Bounds x="10190" y="980" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0hrstjl_di" bpmnElement="Activity_0hrstjl"><dc:Bounds x="8760" y="1420" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0b7fy4a_di" bpmnElement="Activity_0b7fy4a"><dc:Bounds x="3265" y="1570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_11uyrx8_di" bpmnElement="Gateway_11uyrx8" isMarkerVisible="true"><dc:Bounds x="3290" y="1485" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0z4p76w_di" bpmnElement="Activity_0z4p76w"><dc:Bounds x="2007" y="1407" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1gc7fao_di" bpmnElement="Activity_1gc7fao"><dc:Bounds x="10760" y="880" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0g00t0g_di" bpmnElement="Gateway_0g00t0g" isMarkerVisible="true"><dc:Bounds x="2313" y="485" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_01xquxx_di" bpmnElement="Activity_01xquxx"><dc:Bounds x="2819" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_07kph7z_di" bpmnElement="Activity_07kph7z"><dc:Bounds x="2552" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0uhdlvc_di" bpmnElement="Activity_0uhdlvc"><dc:Bounds x="2682" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14fxk4e_di" bpmnElement="Activity_14fxk4e"><dc:Bounds x="2410" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_17xfoi7_di" bpmnElement="Activity_17xfoi7"><dc:Bounds x="2288" y="570" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0mg6mlx_di" bpmnElement="Activity_0mg6mlx"><dc:Bounds x="2160" y="1025" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1grg3q1_di" bpmnElement="Gateway_1grg3q1" isMarkerVisible="true"><dc:Bounds x="2185" y="950" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ejilar_di" bpmnElement="Activity_1ejilar"><dc:Bounds x="2160" y="1135" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_10qv7yy_di" bpmnElement="Activity_10qv7yy"><dc:Bounds x="2270" y="944" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_10pi0u6_di" bpmnElement="Gateway_10pi0u6" isMarkerVisible="true"><dc:Bounds x="4169" y="685" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0au2le6_di" bpmnElement="Activity_0au2le6"><dc:Bounds x="230" y="1245" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1wkj968_di" bpmnElement="Activity_152u9m5"><dc:Bounds x="1494" y="1020" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_14ghlsl_di" bpmnElement="Activity_14ghlsl"><dc:Bounds x="2410" y="359" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>